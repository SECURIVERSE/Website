window.wbBuilderLoadPlugins(
	{"TextArea":{"id":"TextArea","textId":"TextArea","name":"Text","icon":"ico-tb-text","iconImage":false,"borderless":false,"active":true},"Picture":{"id":"Picture","textId":"Picture","name":"Picture","icon":"ico-tb-picture","iconImage":false,"borderless":false,"active":true},"Table":{"id":"Table","textId":"Table","name":"Table","icon":"ico-tb-table","iconImage":false,"borderless":false,"active":true},"Gallery":{"id":"Gallery","textId":"Gallery","name":"Gallery","icon":"ico-tb-gallery","iconImage":false,"borderless":false,"active":true},"Youtube":{"id":"Youtube","textId":"Youtube","name":"YouTube","icon":"ico-tb-youtube","iconImage":false,"borderless":false,"active":true},"GoogleMaps":{"id":"GoogleMaps","textId":"GoogleMaps","name":"Google Maps","icon":"ico-tb-google-maps","iconImage":false,"borderless":false,"active":true},"Video":{"id":"Video","textId":"Video","name":"Video","icon":"fa fa-play-circle","iconImage":false,"borderless":false,"active":true},"Shape":{"id":"Shape","textId":"Shape","name":"Shape","icon":"ico-tb-shape","iconImage":false,"borderless":false,"active":true},"Line":{"id":"Line","textId":"Line","name":"Line","icon":"ico-tb-line","iconImage":false,"borderless":false,"active":true},"Button":{"id":"Button","textId":"Button","name":"Button","icon":"ico-tb-button","iconImage":false,"borderless":false,"active":true},"Form":{"id":"Form","textId":"Form","name":"Form","icon":"ico-tb-form","iconImage":false,"borderless":false,"active":true},"Menu":{"id":"Menu","textId":"Menu","name":"Menu","icon":"ico-tb-menu","iconImage":false,"borderless":false,"active":true},"Languages":{"id":"Languages","textId":"Languages","name":"Languages","icon":"ico-tb-lang","iconImage":false,"borderless":false,"active":true},"Blocks":{"id":"Blocks","textId":"Blocks","name":"Blocks","icon":"ico-tb-blocks","iconImage":false,"borderless":false,"active":false},"Store":{"id":"Store","textId":"Store","name":"Store","icon":"ico-tb-store","iconImage":false,"borderless":false,"active":true},"StoreCart":{"id":"StoreCart","textId":"StoreCart","name":"Store Cart","icon":"ico-tb-store-cart","iconImage":false,"borderless":false,"active":true},"BuyNow":{"id":"BuyNow","textId":"BuyNow","name":"Buy Now","icon":"ico-tb-buynow","iconImage":false,"borderless":false,"active":true},"MusicPlayer":{"id":"MusicPlayer","textId":"MusicPlayer","name":"Music","icon":"ico-tb-musicplayer","iconImage":false,"borderless":false,"active":true},"Banner":{"id":"Banner","textId":"Banner","name":"Banner","icon":"ico-tb-banner","iconImage":false,"borderless":false,"active":true},"Flash":{"id":"Flash","textId":"Flash","name":"Flash","icon":"ico-tb-flash","iconImage":false,"borderless":true,"active":false},"GoogleAdSense":{"id":"GoogleAdSense","textId":"GoogleAdSense","name":"Google AdSense","icon":"ico-tb-google-adsense","iconImage":false,"borderless":false,"active":true},"CustomHtml":{"id":"CustomHtml","textId":"CustomHtml","name":"Custom HTML","icon":"ico-tb-html","iconImage":false,"borderless":false,"active":true},"FacebookFans":{"id":"FacebookFans","textId":"FacebookFans","name":"Facebook Fans","icon":"ico-tb-facebook-fans","iconImage":false,"borderless":true,"active":true},"FacebookLike":{"id":"FacebookLike","textId":"FacebookLike","name":"Facebook Like","icon":"ico-tb-facebook-like","iconImage":false,"borderless":true,"active":true},"BookmarksShare":{"id":"BookmarksShare","textId":"BookmarksShare","name":"Bookmarks Share","icon":"ico-tb-share","iconImage":false,"borderless":true,"active":true},"SkypeImOnline":{"id":"SkypeImOnline","textId":"SkypeImOnline","name":"Skype I'm Online","icon":"ico-tb-skype-imonline","iconImage":false,"borderless":true,"active":false},"Twitter":{"id":"Twitter","textId":"Twitter","name":"Twitter","icon":"ico-tb-twitter","iconImage":false,"borderless":true,"active":true},"FlickrGallery":{"id":"FlickrGallery","textId":"FlickrGallery","name":"Flickr Gallery","icon":"ico-tb-flickr-gallery","iconImage":false,"borderless":true,"active":false},"Blog":{"id":"Blog","textId":"Blog","name":"Blog","icon":"ico-tb-blog","iconImage":false,"borderless":false,"active":true},"Accordion":{"id":"Accordion","textId":"Accordion","name":"Accordion","icon":"ico-tb-blog","iconImage":false,"borderless":false,"active":true},"LayoutElement":{"id":"LayoutElement","textId":"LayoutElement","name":"Layout Element","icon":"ico-tb-shape","iconImage":false,"borderless":false,"active":true}},
	[
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"epayco","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/epayco","pluginUri":"plugins\/epayco","customConfiguration":null};
PluginWrapper._config.id = 'epayco';
PluginWrapper._config.baseUri = "plugins\/epayco";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/epayco\/main.png";
PluginWrapper._config.template = "<form method=\"post\" action=\"https:\/\/cms.epayco.co\/site\/checkout\/payment\" id=\"epayco_form\" data-gateway-id=\"Epayco\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"key\" value=\"{{content.secretKey}}\" \/>\n\t<input type=\"hidden\" name=\"epaycoLanguage\" value=\"{{content.epaycoLanguage}}\" \/>\n\t<input type=\"hidden\" name=\"productinfo\" value=\"{{content.productinfo}}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"test\" value=\"{{content.demo}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"txnid\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"surl\" value=\"{callbackUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/epayco/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: "#cccccc",
				style: 'solid',
				weight: 1,
				differ: false,
				css: "1px solid #cccccc",
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'epayco_dark.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'epayco_dark.svg', name: 'dark'},
			{id: 'epayco-button-blue.svg', name: 'blue'},
			{id: 'epayco-button-white.svg', name: 'white-spanish', backgroundColor: '#1e1f49'},
			{id: 'epayco-button-white-english.svg', name: 'white', backgroundColor: '#1e1f49'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'ePayco',
	id: 'epayco',
	pageUrl: 'https://www.epayco.com/',
	keyFieldId: 'customerId',
	keyField2Id: 'pkey',
	keyField3Id: 'secretKey',
	keyField4Id: 'epaycoLanguage',
	keyField5Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6, 6, 6, 6, 6, 6], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Customer ID')},
			{type: 'TextField', placeholder: 'Customer ID', id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('P Key')},
			{type: 'TextField', placeholder: 'P key', id: 'key2', password: true},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Public Key')},
			{type: 'TextField', placeholder: 'Public Key', id: 'key3', password: true, css: {marginTop: 5}},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Language')},
			{type: 'DropdownBox', placeholder: 'Checkout', id: 'key4', css: {marginTop: 5}, options: [
				{id: 'EN', name: 'English'},
				{id: 'ES', name: 'Spanish'},
			]},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key5', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	
	
	titleFieldId: 'label',
	nameFieldId: 'productinfo',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['customerId', 'pkey','secretKey','demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epayco', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('epayco', {
	name: 'ePayco',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'productinfo', type: 'EpaycoProductInfo',
			get: function(data) { return data.content.productinfo; },
			set: function(value, data) {
				data.content.productinfo = value;
			}
		},
		{id: 'customerId', type: 'EpaycoCustomerId', helpText: 'Customer ID that identifies you to ePayco. You can find it in your customer panel in the configuration option.',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.customerId ? '' : ('open:' + __('Field "%s" is required').replace('%s', 'Customer ID'));
				return opts;
			},
			get: function(data) { return data.content.customerId; },
			set: function(value, data) {
				data.content.customerId = value;
			}
		},
		{id: 'pkey', type: 'EpaycoPkey', helpText: 'Key to sign the information sent and received from ePayco. You can find it in your customer panel in the configuration option.',
			get: function(data) { return data.content.pkey; },
			set: function(value, data) {
				data.content.pkey = value;
			}
		},
		{id: 'secretKey', type: 'EpaycoSecretKey', helpText: 'Key to authenticate and consume ePayco services, Provided in your customer panel in the configuration option.',
			get: function(data) { return data.content.secretKey; },
			set: function(value, data) {
				data.content.secretKey = value;
			}
		},
		{id: 'language', type: 'EpaycoLanguage', helpText: 'Checkout Language.',
			get: function(data) { return data.content.epaycoLanguage; },
			set: function(value, data) {
				data.content.epaycoLanguage = value;
			}
		},
		{id: 'amount', type: 'EpaycoAmount', helpText: __("Amount to be transferred") + ', USD',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'EpaycoCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'EpaycoDemo',
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'epayco'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [9, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'productinfo'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', USD'},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
						    {type: 'Label', text: __('Currency')},
						    {type: 'DropdownBox', id: 'currency', options: [
                                {id: '#USD', name: 'USD', value: 'USD'}
						    ]}
					    ]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], children: [
    					{type: 'VerticalLayout', children: [
    						{type: 'Label', text: 'P_CUST_ID_CLIENTE', helpText: 'Customer ID that identifies you to ePayco. You can find it in your customer panel in the configuration option.'},
    						{type: 'TextField', id: 'customerId'}
    					]},
    					{type: 'VerticalLayout', children: [
    						{type: 'Label', text: 'P_KEY', helpText: 'Key to sign the information sent and received from ePayco. You can find it in your customer panel in the configuration option.'},
    						{type: 'TextField', id: 'pkey'}
    					]}
    				]},
    				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
    					{type: 'VerticalLayout', children: [
    						{type: 'Label', text: 'PUBLIC_KEY', helpText: 'Key to authenticate and consume ePayco services, Provided in your customer panel in the configuration option.'},
    						{type: 'TextField', id: 'secretKey'}
    					]},
    					{type: 'VerticalLayout', children: [
    						{type: 'Label', text: 'Checkout'},
    						{type: 'DropdownBox', id: 'epaycoLanguage', options: [
    							{id: 'EN', name: 'English'},
    		                    {id: 'ES', name: 'Spanish'}
    						]}
    					]}
    				]},
    				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
    					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
    						this.getElem().attr('title', __('For testing purpose without real payments'));
    						this.getElem().tooltip({placement: 'right'});
    					}}
    				]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epayco')
		]
	},
	openAction: function (fields, data, elem) {
	    var itm;
	    var languageItm;
		fields.productinfo.setText(data.content.productinfo);
		fields.amount.setText(data.content.amount);
		fields.customerId.setText(data.content.customerId);
		fields.pkey.setText(data.content.pkey);
		fields.secretKey.setText(data.content.secretKey);
		languageItm = fields.payType.getItemById(data.content.epaycoLanguage);
		fields.epaycoLanguage.selectItem(languageItm);
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
	    var itm;
	    var languageItm;
		data.content.productinfo = fields.productinfo.getText();
		data.content.amount = fields.amount.getText();
		data.content.customerId = fields.customerId.getText();
		data.content.pkey = fields.pkey.getText();
		data.content.secretKey = fields.secretKey.getText();
		languageItm = fields.payType.getSelectedItem();
		data.content.epaycoLanguage = languageItm.getOriginal().value;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
	    data.content.__globalVars = ['demo'];
		if (!data.content.productinfo) data.content.productinfo = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.customerId) data.content.customerId = '';
		if (!data.content.pkey) data.content.pkey = '';
		if (!data.content.secretKey) data.content.secretKey = '';
		if (!data.content.epaycoLanguage) data.content.languageItm = 'EN';
		if (!data.content.currency) data.content.currency = 'USD';
		if (data.content.demo === undefined) data.content.demo = false;
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('customerId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"hipay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/hipay","pluginUri":"plugins\/hipay","customConfiguration":null};
PluginWrapper._config.id = 'hipay';
PluginWrapper._config.baseUri = "plugins\/hipay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/hipay\/main.png";
PluginWrapper._config.template = "{{^isPreview}}\n{{^isPublished}}\n<script>\n    $.ajax({\n        url: \"{{{serviceUrl}}}\",\n        type: \"POST\",\n        data: {apiKey: \"{{content.apiKey}}\", apiSecretKey: \"{{content.apiSecretKey}}\", siteId: \"{{content.siteId}}\", productName: \"{{content.productName}}\", amount: \"{{content.amount}}\", currency: \"{{content.currency}}\"},\n        success: function (data)\n        {\n            $('#hipay_{{id}}').html(data);\n        }\n    });\n<\/script>\n{{\/isPublished}}\n{{\/isPreview}}\n{{#content.store}}\n<form data-gateway-id=\"Hipay\" method=\"POST\" accept-charset=\"utf-8\">\n\t<input type=\"hidden\" name=\"callbackurl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"productName\" value=\"{{content.productName}}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"image\" src=\"http:\/\/i.imgur.com\/V545yLD.png\"\/>\n<\/form>\n{{\/content.store}}\n{{^content.store}}\n<div id=\"hipay_{{id}}\">{{{requireService}}}<\/div>\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
    name: __('HiPay'),
    id: 'hipay',
    keyField: __('API Key'),
    keyFieldId: 'apiKey',
    keyField2: __('API Secret Key'),
    keyField2Id: 'apiSecretKey',
    keyField3: __('Site Merchant ID'),
    keyField3Id: 'siteId',
    titleFieldId: 'label',
    nameFieldId: 'productName',
    priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['apiKey', 'apiSecretKey', 'siteId']
});
PluginWrapper.registerPlugin('hipay', {
    name: 'HiPay',
    element: {
        minSize: {width: 162, height: 56},
        defaultSize: {width: 162, height: 56},
        resizable: true
    },
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [{type: 'VerticalLayout', spacing: 15, children: [
                            {type: 'HorizontalLayout', columnWeights: [4, 4], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('API Key')},
                                            {type: 'TextField', id: 'apiKey'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('API Secret Key')},
                                            {type: 'TextField', id: 'apiSecretKey', password: true}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Site Merchant ID')},
                                            {type: 'TextField', id: 'siteId'}
                                        ]}
                                ]},
                            {type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Item Name'), helpText: __('Title of what you are paying for')},
                                            {type: 'TextField', id: 'productName'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Amount')},
                                            {type: 'TextField', id: 'amount'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Currency')},
                                            {type: 'DropdownBox', id: 'currency', options: [
                                                    {id: '#EUR', name: 'EUR', value: 'EUR'},
                                                    {id: '#USD', name: 'USD', value: 'USD'}
                                                ]}
                                        ]}
                                ]}
                        ]}
                ]}
        ]
    },
    resizeAction: function (data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function () {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function (fields, data, elem) {
        fields.apiKey.setText(data.content.apiKey);
        fields.apiSecretKey.setText(data.content.apiSecretKey);
        fields.productName.setText(data.content.productName);
        fields.amount.setText(data.content.amount);
        fields.siteId.setText(data.content.siteId);

        var itm;
        itm = fields.currency.getItemById('#' + data.content.currency);
        fields.currency.selectItem(itm);
    },
    applyAction: function (fields, data, elem) {
        data.content.apiKey = fields.apiKey.getText();
        data.content.apiSecretKey = fields.apiSecretKey.getText();
        data.content.productName = fields.productName.getText();
        data.content.amount = fields.amount.getText();
        data.content.siteId = fields.siteId.getText();

        var itm;
        itm = fields.currency.getSelectedItem();
        data.content.currency = itm.getOriginal().value;

    },
    loadAction: function (data) {
        if (!data.content.apiKey)
            data.content.apiKey = '5a93f0a8a8c2a9a953029a2e8719ab56';
        if (!data.content.apiSecretKey)
            data.content.apiSecretKey = 'c883cc5dd1d8c5ba793cb6733b5f8804';
        if (!data.content.siteId)
            data.content.siteId = '123456';
        if (!data.content.productName)
            data.content.productName = 'Title of what you are paying for';
        if (!data.content.amount)
            data.content.amount = '10.20';
        if (!data.content.currency)
            data.content.currency = 'EUR';
        data.serviceUrl = this.serviceUrl;

    }
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"aparat","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/aparat","pluginUri":"plugins\/aparat","customConfiguration":null};
PluginWrapper._config.id = 'aparat';
PluginWrapper._config.baseUri = "plugins\/aparat";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/aparat\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_aparat\" src=\"https:\/\/www.aparat.com\/video\/video\/embed\/videohash\/{{content.finalGroupId}}\/vt\/frame?startTime={{content.finalStartTime}}\" width=\"100%\" height=\"100%\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('aparat', {
	name: 'Aparat',
	icon: 'ico-pl-aparat',
	supportsAutoHeight: true,
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Aparat ID or URL'),
						helpText: __('Aparat video ID or URL with format https://www.aparat.com/v/{video_id}'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Aparat ID or URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'groupId', placeholder: 'XmBRD'}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Start at')},
						{type: 'TextField', id: 'startTime', placeholder: '00:00'}
					]}
				]}
			]}
		]
	},
	pluginScoped: {
		parseTime: function(time) {
			var h = 0, m = 0, s = 0, parts = time.split(':');
			if (parts.length >= 3) {
				h = parseInt(parts.shift(), 10);
				if (isNaN(h)) h = 0;
			}
			if (parts.length >= 2) {
				m = parseInt(parts.shift(), 10);
				if (isNaN(m)) m = 0;
			}
			s = parseInt(parts.shift(), 10);
			if (isNaN(s)) s = 0;

			return (h * 60 * 60) + (m * 60) + s;
		}
	},
	batchUpdates: true,
	properties: [
		{id: 'groupId', type: 'AparatGroupId', helpText: __('Aparat video id or url with format https://www.aparat.com/v/{video_id}'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Aparat ID or URL')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.groupId = url ? url : value;
				data.content.finalGroupId = data.content.groupId ? data.content.groupId : 'XmBRD';
			}
		},
		{id: 'startTime', type: 'AparatStartTime',
			get: function(data) { return data.content.startTime; },
			set: function(value, data) {
				data.content.startTime = value;
			}
		}
	],
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';

		if (/^([a-zA-Z]+)$/.test(value) || /https?:\/\/(?:www\.)?aparat.com\/v\/([a-zA-Z]+)(?:$|\/)/.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL or ID'));
			api.setError(__('Invalid URL or ID'));
		}
		return url;
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.groupId.setText(data.content.groupId);
		fields.startTime.setValue(data.content.startTime);

		fields.groupId.on('change', function(e) {
			fields.groupId.setText(self.getVideoId(e.target.value));
		});
	},
	applyAction: function(fields, data, elem) {
		data.content.startTime = fields.startTime.getValue();
		data.content.groupId = fields.groupId.getText();
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : 'XmBRD';
		data.content.finalStartTime = data.content.startTime ? this.pluginScoped.parseTime(data.content.startTime) : 0;
	},
	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
		if (!data.content.startTime) data.content.startTime = '';
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : 'XmBRD';
		data.content.finalStartTime = data.content.startTime ? this.pluginScoped.parseTime(data.content.startTime) : 0;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"baokim","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/baokim","pluginUri":"plugins\/baokim","customConfiguration":null};
PluginWrapper._config.id = 'baokim';
PluginWrapper._config.baseUri = "plugins\/baokim";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/baokim\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Baokim\"{{^content.store}} target=\"_blank\"{{\/content.store}} action=\"https:\/\/www.baokim.vn\/payment\/product\/version11\" method=\"get\" style=\"width: 100%; height: 100%;\">\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"business\" value=\"{{content.business}}\">\n\t<input type=\"hidden\" name=\"product_name\" value=\"{{content.product_name}}\">\n\t<input type=\"hidden\" name=\"product_price\" value=\"{{content.product_price}}\">\n\t<input type=\"hidden\" name=\"total_amount\" value=\"{{content.product_price}}\">\n\t<input type=\"hidden\" name=\"product_quantity\" value=\"1\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"order_id\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"url_success\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"url_cancel\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/baokim/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: "#cccccc",
				style: 'solid',
				weight: 1,
				differ: false,
				css: "1px solid #cccccc",
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'baokim_color2.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'baokim_color.svg', name: 'coloured'},
			{id: 'baokim_color2.svg', name: 'coloured2'},
			{id: 'baokim_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'BaoKim',
	id: 'baokim',
	pageUrl: 'https://www.baokim.vn/',
	keyField: __('Email'),
	keyFieldId: 'business',
	titleFieldId: 'label',
	nameFieldId: 'product_name',
	priceFieldId: 'product_price',
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'baokim', true),
	logos: Globals.getLogosList(),
});

PluginWrapper.registerPlugin('baokim', {
	name: 'BaoKim',
	element: {
		minSize: {width: 95, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'business', type: 'BaokimBusiness', helpText:__("Email of account payer submitted to BaoKim (%s)").replace('%s', '<a href="http://baokim.vn" target="_blank">baokim.vn</a>'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.business ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('E-mail')));
				return opts;
			},
			get: function(data) { return data.content.business; },
			set: function(value, data) {
				data.content.business = value;
			}
		},
		{id: 'product_name', type: 'BaokimProductName',
			get: function(data) { return data.content.product_name; },
			set: function(value, data) {
				data.content.product_name = value;
			}
		},
		{id: 'product_price', type: 'BaokimProductPrice', helpText: __("Amount to be transferred") + ', ' + __('VND'),
			get: function(data) { return data.content.product_price; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.product_price = value;
			}
		},
	], Globals.getLogosList(), 'baokim'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Email'), helpText:__("Email of account payer submitted to BaoKim (%s)").replace('%s', '<a href="http://baokim.vn" target="_blank">baokim.vn</a>'), uiComponentOptions: function(data, opts) {
						opts.validateText = data.content.business ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('E-mail')));
						return opts;
					}},
					{type: 'TextField', id: 'business'}
				]},
				{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'product_name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + __('VND')},
						{type: 'TextField', id: 'product_price'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'baokim')
		]
	},
	openAction: function(fields, data, elem) {
		fields.product_name.setText(data.content.product_name);
		fields.business.setText(data.content.business);
		fields.product_price.setText(data.content.product_price);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.product_name = fields.product_name.getText();
		data.content.business = fields.business.getText();
		data.content.product_price = fields.product_price.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.product_name) data.content.product_name = ''; // Products
		if (!data.content.business) data.content.business = ''; // 1@bk.vn
		if (!data.content.product_price) data.content.product_price = '10000'; // 1199
		if (['logo.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'baokim_color2.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('business');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"platron","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/platron","pluginUri":"plugins\/platron","customConfiguration":null};
PluginWrapper._config.id = 'platron';
PluginWrapper._config.baseUri = "plugins\/platron";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/platron\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Platron\" method=\"post\" action=\"https:\/\/www.platron.ru\/payment.php\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"pg_merchant_id\" value=\"{{content.merchant_id}}\" \/>\n\t<input type=\"hidden\" name=\"pg_amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"pg_description\" value=\"{{content.description}}\" \/>\n\t<input type=\"hidden\" name=\"pg_currency\" value=\"{{content.currency}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"pg_result_url\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"pg_success_url\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"pg_success_url_method\" value=\"POST\" \/>\n\t<input type=\"hidden\" name=\"pg_failure_url\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"pg_failure_url_method\" value=\"POST\" \/>\n\t<input type=\"hidden\" name=\"pg_order_id\" value=\"{transactionId}\" \/>\n\t<input type=\"submit\" class=\"hidden\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		return {
			button_label: __('Pay with %s').replace('%s', ''),
			button_color: '#516b85',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#fff',
			button_border: {
				color: '#ccc',
				style: 'none',
				weight: 1,
				css: { border: '1px none #ccc' },
				cssRaw: 'border: 1px none #ccc'
			},
			logo: 'gestpay.png',
			showlogo: true,
			logo_width: 90,
			button_padding: 1
		};
	},
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://front.platron.ru/" target="_blank">https://front.platron.ru/</a></p>'
				+ '<p><strong>Result URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Platron' + '</pre></p>'
				+ '<p><strong>Success URL:</strong><br />'
				+ '<pre>' + base_url + 'store-return/Platron' + '</pre></p>'
				+ '<p><strong>Failure URL:</strong><br />'
				+ '<pre>' + base_url + 'store-cancel/Platron' + '</pre></p>';
	},
	_settingsDialog: null,
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Platron',
	id: 'platron',
	keyFieldId: 'merchant_id',
	keyField2Id: 'secret_key',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['merchant_id', 'secret_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: {
		logo: 'gestpay.png'
	},
	settingsTabDef: Globals.getSettingsContent()
});
PluginWrapper.registerPlugin('platron', {
	name: 'Platron',
	element: {
		minSize: {width: 60, height: 20},
		defaultSize: {width: 160, height: 30},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID')},
						{type: 'TextField', id: 'merchant_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'secret_key', password: true}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#RUB', name: 'RUB', value: 'RUB'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef()
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.merchant_id.setText(data.content.merchant_id);
		fields.secret_key.setText(data.content.secret_key);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.merchant_id = fields.merchant_id.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.currency) data.content.currency = 'RUB';
		if (!data.content.merchant_id) data.content.merchant_id = '';
		if (!data.content.secret_key) data.content.secret_key = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.description) data.content.description = '';
		if (data.content.demo === undefined) data.content.demo = false;
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"vkontakte_comment","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_comment","pluginUri":"plugins\/vkontakte_comment","customConfiguration":null};
PluginWrapper._config.id = 'vkontakte_comment';
PluginWrapper._config.baseUri = "plugins\/vkontakte_comment";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_comment\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n    {{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"\/\/vk.com\/js\/api\/openapi.js?116\"><\/script>\n    {{\/firstOnPage}}\n{{\/isPublished}}\n<div id=\"wb_{{id}}_vk_comments\" class=\"vk_comments wb-prevent-layout-click\"><\/div>\n<script type=\"text\/javascript\">\n    (function() {\n        var onVKLoaded = function(callback) {\n            if (!window.VK) {\n                setTimeout(function() {\n                    onVKLoaded(callback);\n                }, 200);\n            } else if (typeof(callback) === 'function') {\n                callback();\n            }\n        };\n        var render = function(w, h) {\n            try {\n{{#isPublished}}\n                w = w || $('#wb_{{id}}').width();\n                h = h || $('#wb_{{id}}').height();\n{{\/isPublished}}\n{{^isPublished}}\n                w = 'auto';\n                h = {{height}};\n{{\/isPublished}}\n                $('#wb_{{id}}_vk_comments').empty();\n\n                if (window.VK) {\n                    VK.init({apiId: '{{content.finalAppId}}', onlyWidgets: true, status: true});\n                    VK.Widgets.Comments('wb_{{id}}_vk_comments', {width: w, height: h});\n                }\n            } catch (error) {\n                console.error('VK Community error: ' + error.message);\n            }\n        };\n        onVKLoaded(render);\n{{#isPublished}}\n        var resizeTimeout;\n        var elem = $('#wb_{{id}}'), inner = $('#wb_{{id}}_vk_comments');\n        var resizeHandler = function() {\n            var iw = inner.width(),\n                ih = inner.height();\n            var ew = elem.width(),\n                eh = elem.height();\n            if (iw != ew || ih != eh) {\n                clearTimeout(resizeTimeout);\n                (function(w, h) {\n                    resizeTimeout = setTimeout(function() {\n                        render(w, h);\n                    }, 500);\n                })(ew, eh);\n            }\n        };\n        $(window).on('resize', resizeHandler);\n        resizeHandler();\n{{\/isPublished}}\n    })();\n<\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
require(['TextField', 'element/PropertyType'], function (TextFieldModule, PropertyTypeModule) {
	if (PropertyTypeModule === null) return;
	var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
	var PropertyType = PropertyTypeModule.PropertyType;
	var TextField = TextFieldModule.TextField;


	var appId = new PropertyType("vkontakte comment/vkontakteAppId", PropertyTypeAccess.User, true, __('App ID'), TextField, null, {
		placeholder: '51719220'
	})

	PropertyType.setSortOrder('vkontakte comment', 1);


	PluginWrapper.registerPlugin('vkontakte_comment', {
		name: 'VK Comments',
		icon: 'fa fa-vk',
		supportsAutoHeight: function() { return true; },
		element: {
			minSize: {width: 100, height: 100},
			defaultSize: {width: 500, height: 400},
			resizable: true,
		},
		propertyDialog: {
			//size: {width: 500, height: 400},
			noScroll: true,
			tabs: [
				{
					name: 'General', children: [
						{
							type: 'VerticalLayout', children: [
								{
									type: 'VerticalLayout', children: [
										{
											type: 'Label',
											text: __('App ID'),
											helpText: __('Create app at %s').replace('%s', 'https://vk.com/apps?act=manage'),
											uiComponentOptions: function (data, opts) {
												opts.validateText = data.content.appId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App ID')));
												return opts;
											}
										},
										{
											type: 'TextField', id: 'appId', change: function (fields) {
												fields.__self.notifyHelpSystemPlayer('prop-appId-change');
											}
										}
									]
								},
							]
						}
					]
				}
			]
		},

		pluginScoped: {
			scriptLoaded: false,
			scriptReady: false,
			placeholderAppId: '51719220',
			listeners: [],
			addListener: function (inst, func) {
				if (this.scriptReady) {
					func.call(inst);
				} else {
					this.listeners.push({inst: inst, func: func});
				}
				if (!this.scriptLoaded) {
					this.scriptLoaded = true;
					var self = this;
					$.getScript('https://vk.com/js/api/openapi.js?116', function () {
						self.scriptReady = true;
						for (var i = 0; i < self.listeners.length; i++) {
							self.listeners[i].func.call(self.listeners[i].inst);
						}
					});
				}
			}
		},
		properties: [
			{
				id: 'appId',
				type: appId,
				helpText: __('Create app at %s').replace('%s', '<a target="_blank" href="https://vk.com/apps?act=manage">https://vk.com/apps?act=manage</a>'),
				uiComponentOptions: function (data, opts) {
					opts.validateText = data.content.appId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App ID')));
					return opts;
				},
				get: function (data) {
					return data.content.appId;
				},
				set: function (value, data) {
					data.content.appId = value;
					this.setFinalAppId(data);
				}
			},
		],

		setFinalAppId: function (data) {
			if (/^\d+$/.test(data.content.appId)) {
				data.content.finalAppId = data.content.appId;
			} else {
				data.content.finalAppId = this.pluginScoped.placeholderAppId;
			}
		},
		resizeTimeout: null,
		resizeAction: function(data, elem) {
			var self = this;
			clearTimeout(this.resizeTimeout);
			this.resizeTimeout = setTimeout(function() { self.updateElement(); }, 500);
		},

		openAction: function (fields, data, elem) {
			var itm;
			fields.__self = this;
			fields.appId.setText(data.content.appId);
		},
		applyAction: function (fields, data, elem) {
			var itm;
			data.content.appId = fields.appId.getText();
			this.setFinalAppId(data);
		},
		loadAction: function (data) {
			if (!data.content.appId) data.content.appId = '';
			if (!data.content.finalAppId) data.content.finalAppId = '';
			this.setFinalAppId(data);
		},
		loadedAction: function (data, elem) {
			this.pluginScoped.addListener(this, function () {
//			window.VK.Widgets.Group('wb_' + data.id + '_vk_groups', {mode: data.content.mode, width: data.width, height: data.height, color1: data.content.color1, color2: data.content.color2, color3: data.content.color3}, data.content.finalProfileId);
			});
		},
		switchModeAction: function(data, elem) {
			clearTimeout(this.resizeTimeout);
		},
		onDblClick: function () {
			var thisClass = this;
			setTimeout(function () {
				var component = thisClass.getPropertyComponent('appId');
				if (component) component.focus();
			}, 50);
		}
	});
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"bookingmood","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/bookingmood","pluginUri":"plugins\/bookingmood","customConfiguration":null};
PluginWrapper._config.id = 'bookingmood';
PluginWrapper._config.baseUri = "plugins\/bookingmood";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/bookingmood\/main.png";
PluginWrapper._config.template = "{{#content.widget_id}}\n    {{#previewCompositionId}}\n        <div style=\"width: 100%;display: flex;justify-content: center;\">\n            <img id=\"{{id}}_preview\" src=\"plugins\/bookingmood\/preview.png\">\n        <\/div>\n        <script>\n            function init() {\n                if (('{{id}}_loaded_deferred' in window) && window.{{id}}_loaded_deferred && window.{{id}}_loaded_deferred.state() !== 'resolved') {\n                    window.{{id}}_loaded_deferred.resolve();\n                }\n            }\n            setTimeout(init, 50);\n            setTimeout(init, 100);\n            setTimeout(init, 500);\n        <\/script>\n    {{\/previewCompositionId}}\n    {{^previewCompositionId}}\n\n    {{#isPublished}}\n        {{{requireService}}}\n    {{\/isPublished}}\n    {{^isPublished}}\n        <iframe\n          id=\"{{id}}_frame\"\n          src=\"https:\/\/www.bookingmood.com\/embed\/{{content.widget_id}}?{{content.url_params}}#{{id}}\"\n          frameborder=\"0\"\n          marginwidth=\"0\"\n          marginheight=\"0\"\n          style=\"width: 100%; border: 0; border-radius: 4px; overflow: hidden\"\n          allowfullscreen\n        ><\/iframe>\n    {{\/isPublished}}\n    <script>\n        window.addEventListener(\"message\", (event) => {\n          if (!event.source) return;\n          try {\n            const data = JSON.parse(event.data);\n            if (data.context !== \"iframe.resize\") return;\n            const frame = document.querySelector(`iframe#{{id}}_frame`);\n            if (!frame) return;\n            if (new URL(frame.src).origin !== new URL(data.src).origin) return;\n\n            frame.height = data.height + 1;\n\n            {{^isPublished}}\n            if (('{{id}}_loaded_deferred' in window) && window.{{id}}_loaded_deferred && window.{{id}}_loaded_deferred.state() !== 'resolved') {\n              setTimeout(function() {\n                  window.{{id}}_loaded_deferred.resolve();\n              }, 50);\n            }\n            {{\/isPublished}}\n          } catch {}\n        });\n    <\/script>\n\n    {{\/previewCompositionId}}\n\n{{\/content.widget_id}}{{^content.widget_id}}\n<p>No Bookingmood widget selected<\/p>\n{{\/content.widget_id}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/bookingmood/main.php';
PluginWrapper._config.active = true;
require(['TextField', 'UIButton', 'DropdownBox', 'CheckBox', 'ColorPicker', 'element/PropertyType', 'FontManager'], function (TextFieldModule, UIButton, DropdownBox, CheckBox, ColorPicker, PropertyTypeModule, FontManager) {
  if (PropertyTypeModule === null) return;

  var default_api_key = '00f350e8-91b0-413e-ba5e-3ab0bee7f12f';
  var default_widget_id = 'bbebe3f0-a228-4b87-99ba-108a173c1f58';
  var default_widget_type = 'calendar';

  var bmWidgetCache = {};
  var bmWidgetLocales;
  var bmWidgetLocalesPromise;
  var defaultLocal = 'en-US';
  var bmWidgetLocalesDatas = [];

  var bmWidgetFonts;
  var bmWidgetFontsPromise;
  var bmWidgetFontsComponents = [];
  var bmWidgetCurrency;
  var bmWidgetCurrencyPromise;
  var bmWidgetCurrencyComponents = [];

  var PropertyType = PropertyTypeModule.PropertyType;
  var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;

  var BookingmoodApiKey = new PropertyType("bookingmood/api_key", PropertyTypeAccess.User, true, __('Bookingmood API key'), TextFieldModule.TextField).inline(8);
  var BookingmoodApiConnect = new PropertyType("bookingmood/api_key_button", PropertyTypeAccess.User, true, '', UIButton.UIButton).inline(4);
  var BookingmoodWidget = new PropertyType("bookingmood/api_key_button", PropertyTypeAccess.User, true, __('Bookingmood widget'), DropdownBox.DropdownBox);
  var BookingmoodWeekStart = new PropertyType("bookingmood_options/week_start", PropertyTypeAccess.User, true, __('Week starts on'), DropdownBox.DropdownBox, null, {
    noSearch: true,
    options: [
      { name: __("Default for language"), id: "default" },
      { name: __("Sunday"), id: "0" },
      { name: __("Monday"), id: "1" },
    ],
  });
  var BookingmoodFirstWeek = new PropertyType("bookingmood_options/first_week", PropertyTypeAccess.User, true, __('First week contains date'), DropdownBox.DropdownBox, null, {
    noSearch: true,
    options: [
      { name: __("Default for language"), id: "default" },
      { name: __("January 1st"), id: "1" },
      { name: __("January 2nd"), id: "2" },
      { name: __("January 3rd"), id: "3" },
      { name: __("January 4th"), id: "4" },
      { name: __("January 5th"), id: "5" },
      { name: __("January 6th"), id: "6" },
      { name: __("January 7th"), id: "7" },
    ]
  });
  var BookingmoodCurrency = new PropertyType("bookingmood_options/currency", PropertyTypeAccess.User, true, __('Currency'), DropdownBox.DropdownBox, null, {noSearch: true});

  var BookingmoodSize = new PropertyType("bookingmood_layout/size", PropertyTypeAccess.User, true, __('Size'), DropdownBox.DropdownBox, null, {noSearch: true});
  var BookingmoodDisplayProductCovers = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display rental images"), CheckBox.default, null, {});
  var BookingmoodDisplayProductName = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display rental name"), CheckBox.default, null, {});
  var BookingmoodDisplayProductImages = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display rental images"), CheckBox.default, null, {});
  var BookingmoodDisplayTagFilter = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display tag filter"), CheckBox.default, null, {});
  var BookingmoodDisplayWeekdays = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display weekdays"), CheckBox.default, null, {});
  var BookingmoodDisplayWeekNumbers = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display week numbers"), CheckBox.default, null, {});
  var BookingmoodDisplayLegend = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Display legend"), CheckBox.default, null, {});
  var BookingmoodStayExpanded = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Always show booking form"), CheckBox.default, null, {});
  var BookingmoodShowBookingmoodBranding = new PropertyType("bookingmood_layout/checkbox", PropertyTypeAccess.User, true, __("Show branding"), CheckBox.default, null, {});

  var BookingmoodTheme = new PropertyType("bookingmood_style/theme", PropertyTypeAccess.User, true, __('Theme'), DropdownBox.DropdownBox, null, {noSearch: true});
  var BookingmoodBackgroundColor = new PropertyType("bookingmood_style/background_color", PropertyTypeAccess.User, true, __("Background color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodTextColor = new PropertyType("bookingmood_style/text_color", PropertyTypeAccess.User, true, __("Text color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodAccentColor = new PropertyType("bookingmood_style/accent_color", PropertyTypeAccess.User, true, __("Accent color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodAvailableColor = new PropertyType("bookingmood_style/available_color", PropertyTypeAccess.User, true, __("Available color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodTentativeColor = new PropertyType("bookingmood_style/tentative_color", PropertyTypeAccess.User, true, __("Pending color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodUnavailableColor = new PropertyType("bookingmood_style/unavailable_color", PropertyTypeAccess.User, true, __("Unavailable color"), ColorPicker.ColorPicker, null).inline(6);
  var BookingmoodFont = new PropertyType("bookingmood_style/font", PropertyTypeAccess.User, true, __('Font'), DropdownBox.DropdownBox, null, {noSearch: true});

  PropertyType.setDefaultOpenCategory('bookingmood');

  PropertyType.setCategoryName('bookingmood_options', __('Options'));
  PropertyType.setCategoryName('bookingmood_style', __('Style'));
  PropertyType.setCategoryName('bookingmood_layout', __('Layout'));

  PropertyType.setSortOrder('bookingmood', 1);
  PropertyType.setSortOrder('bookingmood_options', 2);
  PropertyType.setSortOrder('bookingmood_style', 3);
  PropertyType.setSortOrder('bookingmood_layout', 4);


  PluginWrapper.registerPlugin("bookingmood", {
    name: __("Bookingmood widget"),
    element: {
      resizable: false
    },
    async cacheWidgets(api_key) {
      bmWidgetCache[api_key] = {};

      const organizationRes = await fetch(
          `https://www.bookingmood.com/api/organizations`,
          { headers: { Authorization: api_key } }
      );
      if (!organizationRes.ok) {
        return false;
      }

      var organization = bmWidgetCache[api_key]['organization'] = await organizationRes.json();

      const widgetsRes = await fetch(
          `https://www.bookingmood.com/api/organizations/${organization.id}/widgets`,
          { headers: { Authorization: api_key } }
      );
      if (!widgetsRes.ok) {
        return false;
      }

      const { data: widgets } = await widgetsRes.json();
      bmWidgetCache[api_key]['widgets'] = widgets;

      return true
    },
    async loadWidgets(api_key, widget_id) {
      var apiKey = this.getPropertyComponent('api_key');
      var apiBtn = this.getPropertyComponent('api_key_button');
      var widgetList = this.getPropertyComponent('widget_id');

      apiKey.setEnabled(false);
      apiBtn.setText(__("Loading..."));
      apiBtn.setEnabled(false);

      widgetList.setVisible(false);

      if (await this.cacheWidgets(api_key)) {
        apiKey.setEnabled(true);
        apiKey.setError("");

        apiBtn.setText(api_key ? __("Update") : __("Confirm"));
        apiBtn.setEnabled(true);

        widgetList.setVisible(true);
        widgetList.setOptions(
            bmWidgetCache[api_key]['widgets'].map((widget) => ({
              name: widget.title || `${widget.type} ${widget.id}`,
              type:
                  widget.type === "inquiry"
                      ? "search"
                      : widget.type === "overview"
                          ? "timeline"
                          : widget.type,
              id: widget.id,
            }))
        );
        widgetList.selectItem(
            widgetList.getItemById(widget_id)
        );
      } else {
        apiKey.setEnabled(true);
        apiKey.setError(__("Invalid API key"));

        apiBtn.setText(api_key ? __("Update") : __("Confirm"));
        apiBtn.setEnabled(true);

        widgetList.setVisible(false);
        widgetList.setOptions([]);
        return;
      }
    },

    loadCurrencyOptions(comp) {
      var thisClass = this;
      if (bmWidgetCurrency) {
        if (comp) {
          comp.setEnabled(true);
          comp.setError("");
          var options = [{name: __("Default for organization"), id: "default"}];
          bmWidgetCurrency.forEach(function (option) {
            options.push({name: option.label.replace(/\(.+\)/, '(' + option.value + ')'), id: option.value})
          })
          comp.setOptions(options);
        }
      } else {
        if (comp) bmWidgetCurrencyComponents.push(comp);

        if (!bmWidgetCurrencyPromise) {
          bmWidgetCurrencyPromise = fetch(`https://www.bookingmood.com/api/websitebuilder/widget-currencies`);
          bmWidgetCurrencyPromise.then(function (res) {
            if (!res.ok) return

            res.json().then(function (json) {
              if (json.options) {
                bmWidgetCurrency = json.options;
                bmWidgetCurrencyComponents.forEach(function (comp) {
                  thisClass.loadFontOptions(comp);
                })
                bmWidgetCurrencyComponents = [];
              }
            }, function () {
              bmWidgetCurrencyPromise = null;
              bmWidgetCurrencyComponents.forEach(function (comp) {
                comp.setEnabled(false);
                comp.setError(__("Failed to load currencies"));
              })
              bmWidgetCurrencyComponents = [];
            })
          }, function () {
            bmWidgetCurrencyPromise = null;
            bmWidgetCurrencyComponents.forEach(function (comp) {
              comp.setEnabled(false);
              comp.setError(__("Failed to load currencies"));
            })
            bmWidgetCurrencyComponents = [];
          })
        }
      }
    },
    loadFontOptions(comp) {
      var thisClass = this;
      if (bmWidgetFonts) {
        if (comp) {
          comp.setEnabled(true);
          comp.setError("");
          comp.setOptions([
            {name: __("Default"), id: "default"},
            ...bmWidgetFonts.map((option) => ({name: option.label, id: option.value})),
          ]);
        }
      } else {
        if (comp) bmWidgetFontsComponents.push(comp);

        if (!bmWidgetFontsPromise) {
          bmWidgetFontsPromise = fetch(`https://www.bookingmood.com/api/websitebuilder/widget-fonts`);
          bmWidgetFontsPromise.then(function (res) {
            if (!res.ok) return

            res.json().then(function (json) {
              if (json.options) {
                var availableFonts = Object.keys(FontManager.FontManager.availableFonts).map(function (fontName) {
                  return fontName.toLowerCase();
                });
                bmWidgetFonts = json.options.filter(function (font) {
                  return availableFonts.includes(font.label.toLowerCase());
                });

                bmWidgetFontsComponents.forEach(function (comp) {
                  thisClass.loadFontOptions(comp);
                })
                bmWidgetFontsComponents = [];
              }
            }, function () {
              bmWidgetFontsPromise = null;
              bmWidgetFontsComponents.forEach(function (comp) {
                comp.setEnabled(false);
                comp.setError(__("Failed to load fonts"));
              })
              bmWidgetFontsComponents = [];
            })
          }, function () {
            bmWidgetFontsPromise = null;
            bmWidgetFontsComponents.forEach(function (comp) {
              comp.setEnabled(false);
              comp.setError(__("Failed to load fonts"));
            })
            bmWidgetFontsComponents = [];
          })
        }
      }
    },
    loadLocaleOptions(data) {
      var thisClass = this;
      if (bmWidgetLocales) {
        var curLang = this.getCurLang();
        data.content.locale = bmWidgetLocales.find(function (item) {
          return item === curLang;
        }) || defaultLocal;
        data.content.supportedLangs = bmWidgetLocales.map(function (item) {
          return item.toLowerCase();
        });
      } else {
        data.content.locale = defaultLocal;
        bmWidgetLocalesDatas.push(data);

        if (!bmWidgetLocalesPromise) {
          bmWidgetLocalesPromise = fetch(`https://www.bookingmood.com/api/websitebuilder/widget-locales`);
          bmWidgetLocalesPromise.then(function (res) {
            if (!res.ok) return

            res.json().then(function (json) {
              if (json.options) {
                bmWidgetLocales = json.options.map(function (item) {
                  return item.value;
                });
                bmWidgetLocalesDatas.forEach(function (item) {
                  thisClass.loadLocaleOptions(item);
                })
                bmWidgetLocalesDatas = [];
              }
            }, function () {
              bmWidgetLocalesPromise = null
            })
          }, function () {
            bmWidgetLocalesPromise = null
          })
        }
      }
    },

    updateUrlParams(data) {
      const content = data.content;
      const urlParams = new URLSearchParams();
      urlParams.set("locale", content.locale);
      urlParams.set("week_starts_on", content.week_starts_on);
      urlParams.set("first_week_contains_date", content.first_week_contains_date);
      if (content.currency) urlParams.set("currency", content.currency);
      urlParams.set("size", content.size);
      urlParams.set("display_product_covers", content.display_product_covers);
      urlParams.set("display_product_name", content.display_product_name);
      urlParams.set("display_product_images", content.display_product_images);
      urlParams.set("display_tag_filter", content.display_tag_filter);
      urlParams.set("display_weekdays", content.display_weekdays);
      urlParams.set("display_week_numbers", content.display_week_numbers);
      urlParams.set("display_legend", content.display_legend);
      urlParams.set("stay_expanded", content.stay_expanded);
      urlParams.set(
          "show_bookingmood_branding",
          content.show_bookingmood_branding
      );
      urlParams.set("theme", content.theme);
      urlParams.set("background_color", content.background_color);
      urlParams.set("text_color", content.text_color);
      urlParams.set("available_color", content.available_color);
      urlParams.set("tentative_color", content.tentative_color);
      urlParams.set("unavailable_color", content.unavailable_color);
      urlParams.set("accent_color", content.accent_color);
      if (content.font) urlParams.set("font", content.font);
      data.content.url_params = urlParams.toString();
    },
    properties: [
      {
        id: 'api_key',
        type: BookingmoodApiKey,
        label: __("Bookingmood API key"),
        helpText:
            __("Use an existing API key, or create a new one in the bookingmood admin panel (settings -> api access)"),
        uiComponentOptions: function (elem, opts) {
          var api_key = elem.content.api_key_input;

          return Object.assign(opts, {
            placeholder: default_api_key,
            validateText: api_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __("Bookingmood API key")))
          });
        },
        get: function(data) { return data.content.api_key_input; },
        set: function(value, data) {
          data.content.api_key_input = value;
        },
      },
      {
        id: "api_key_button",
        type: BookingmoodApiConnect,
        uiComponentOptions: function (elem, opts) {
          var thisClass = this;
          var api_key = elem.content.api_key;

          if (elem.content.api_key && !(bmWidgetCache[api_key] && bmWidgetCache[api_key]['widgets'])) {
            thisClass.loadWidgets(elem.content.api_key, elem.content.widget_id);
          }

          return Object.assign({}, opts,{
            enabled: false,
            loading: false,
            label: api_key && bmWidgetCache[api_key] && bmWidgetCache[api_key]['widgets'] ? __("Update") : __("Confirm"),
            click: function () {
              var apiKey = thisClass.getPropertyComponent('api_key');
              var widgetId = thisClass.getPropertyComponent('widget_id');
              if (widgetId) {
                this.data.content.widget_id = null;
                this.data.content.widget_type = null;
                widgetId.invalidate();
              }

              var data = this.data;
              data.content.api_key = (apiKey ? apiKey.getValue() : null) || default_api_key;
              thisClass.loadWidgets(data.content.api_key, data.content.widget_id);
            }
          });
        },
        get: function (data) {},
        set: function (value, data) {},
      },
      {
        id: "widget_id",
        type: BookingmoodWidget,
        uiComponentOptions: function (elem, opts) {
          var widgets = [];
          var api_key = elem.content.api_key;
          if (api_key && bmWidgetCache[api_key] && bmWidgetCache[api_key]['widgets']) {
            widgets = bmWidgetCache[api_key]['widgets'].map((widget) => ({
              name: widget.title || `${widget.type} ${widget.id}`,
              type: widget.type,
              id: widget.id,
            }));
          }
          return {
            options: widgets,
            placeholder: default_widget_id,
          }
        },
        get: function (data) {
          return data.content.widget_id;
        },
        set: function (value, data) {
          var widgetList = this.getPropertyComponent('widget_id');
          if (widgetList.getSelectedItem()) {
            const selectedWidget = widgetList.getSelectedItem().getOriginal();
            data.content.widget_id = selectedWidget.id;
            data.content.widget_type = selectedWidget.type;
          } else {
            data.content.widget_id = null;
            data.content.widget_type = null;
          }
        },
      },

      {
        id: "week_starts_on",
        type: BookingmoodWeekStart,
        get: function (data) {
          return data.content.week_starts_on;
        },
        set: function (value, data) {
          data.content.week_starts_on = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "first_week_contains_date",
        type: BookingmoodFirstWeek,
        get: function (data) {
          return data.content.first_week_contains_date;
        },
        set: function (value, data) {
          data.content.first_week_contains_date = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "currency",
        type: BookingmoodCurrency,
        uiComponentOptions: function (elem, opts) {
          this.loadCurrencyOptions(this.getPropertyComponent('currency'));
          return {};
        },
        get: function (data) {
          return data.content.currency;
        },
        set: function (value, data) {
          data.content.currency = value;
          this.updateUrlParams(data);
        },
      },

      {
        id: "size",
        type: BookingmoodSize,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "inventory", "search", "timeline"].includes(elem.content.widget_type),
            options: ["calendar", "inventory", "search"].includes(elem.content.widget_type)
                ? [
                  { name: __("Regular"), id: "regular" },
                  { name: __("Compact"), id: "compact" },
                ]
                : elem.content.widget_type === "timeline"
                    ? [
                      { name: __("Responsive"), id: "responsive" },
                      { name: __("Compact"), id: "compact" },
                      { name: __("Wide"), id: "wide" },
                    ]
                    : []
          }
        },
        get: function (data) {
          return data.content.size;
        },
        set: function (value, data) {
          var size = this.getPropertyComponent('size');
          if (size.getSelectedItem()) {
            data.content.size = size
                .getSelectedItem()
                .getOriginal().id;
          }
        },
      },
      {
        id: "display_product_covers",
        type: BookingmoodDisplayProductCovers,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "timeline"
          }
        },
        get: function (data) {
          return data.content.display_product_covers;
        },
        set: function (value, data) {
          data.content.display_product_covers = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_product_name",
        type: BookingmoodDisplayProductName,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "calendar"
          }
        },
        get: function (data) {
          return data.content.display_product_name;
        },
        set: function (value, data) {
          data.content.display_product_name = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_product_images",
        type: BookingmoodDisplayProductImages,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "calendar"
          }
        },
        get: function (data) {
          return data.content.display_product_images;
        },
        set: function (value, data) {
          data.content.display_product_images = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_tag_filter",
        type: BookingmoodDisplayTagFilter,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "search"
          }
        },
        get: function (data) {
          return data.content.display_tag_filter;
        },
        set: function (value, data) {
          data.content.display_tag_filter = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_weekdays",
        type: BookingmoodDisplayWeekdays,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "timeline"
          }
        },
        get: function (data) {
          return data.content.display_weekdays;
        },
        set: function (value, data) {
          data.content.display_weekdays = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_week_numbers",
        type: BookingmoodDisplayWeekNumbers,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "inventory"].includes(elem.content.widget_type)
          }
        },
        get: function (data) {
          return data.content.display_week_numbers;
        },
        set: function (value, data) {
          data.content.display_week_numbers = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "display_legend",
        type: BookingmoodDisplayLegend,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "timeline", "inventory"].includes(elem.content.widget_type)
          }
        },
        get: function (data) {
          return data.content.display_legend;
        },
        set: function (value, data) {
          data.content.display_legend = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "stay_expanded",
        type: BookingmoodStayExpanded,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "timeline", "inventory"].includes(elem.content.widget_type)
          }
        },
        get: function (data) {
          return data.content.stay_expanded;
        },
        set: function (value, data) {
          data.content.stay_expanded = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "show_bookingmood_branding",
        type: BookingmoodShowBookingmoodBranding,
        get: function (data) {
          return data.content.show_bookingmood_branding;
        },
        set: function (value, data) {
          data.content.show_bookingmood_branding = value;
          this.updateUrlParams(data);
        },
      },

      {
        id: "theme",
        type: BookingmoodTheme,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "timeline", "inventory"].includes(elem.content.widget_type),
            options: ["calendar", "timeline", "inventory"].includes(elem.content.widget_type)
                ? [
                  { name: __("Modern"), id: "modern" },
                  { name: __("Classic"), id: "classic" },
                ]
                : []
          }
        },
        get: function (data) {
          return data.content.theme;
        },
        set: function (value, data) {
          var theme = this.getPropertyComponent('theme');
          if (theme.getSelectedItem()) {
            data.content.theme = theme
                .getSelectedItem()
                .getOriginal().id;
          }
        },
      },
      {
        id: "background_color",
        type: BookingmoodBackgroundColor,
        get: function (data) {
          return data.content.background_color;
        },
        set: function (value, data) {
          data.content.background_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "text_color",
        type: BookingmoodTextColor,
        get: function (data) {
          return data.content.text_color;
        },
        set: function (value, data) {
          data.content.text_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "accent_color",
        type: BookingmoodAccentColor,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: elem.content.widget_type === "search"
          }
        },
        get: function (data) {
          return data.content.accent_color;
        },
        set: function (value, data) {
          data.content.accent_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "available_color",
        type: BookingmoodAvailableColor,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: (["calendar", "timeline"].includes(elem.content.widget_type) && elem.content.theme === "classic") ||
                elem.content.widget_type === "inventory"
          }
        },
        get: function (data) {
          return data.content.available_color;
        },
        set: function (value, data) {
          data.content.available_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "tentative_color",
        type: BookingmoodTentativeColor,
        dependencies: ['widget_id', 'theme'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "timeline"].includes(elem.content.widget_type) && elem.content.theme === "classic"
          }
        },
        get: function (data) {
          return data.content.tentative_color;
        },
        set: function (value, data) {
          data.content.tentative_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "unavailable_color",
        type: BookingmoodUnavailableColor,
        dependencies: ['widget_id'],
        uiComponentOptions: function (elem, opts) {
          return {
            visible: ["calendar", "timeline", "inventory"].includes(elem.content.widget_type)
          }
        },
        get: function (data) {
          return data.content.unavailable_color;
        },
        set: function (value, data) {
          data.content.unavailable_color = value;
          this.updateUrlParams(data);
        },
      },
      {
        id: "font",
        type: BookingmoodFont,
        uiComponentOptions: function (elem, opts) {
          this.loadFontOptions(this.getPropertyComponent('font'));
          return {};
        },
        get: function (data) {
          return data.content.font;
        },
        set: function (value, data) {
          data.content.font = value;
          this.updateUrlParams(data);
        },
      },
    ],
    supportsAutoHeight: true,
    loadAction: function (data, isElementPreview) {
      data.isElementPreview = isElementPreview;

      if (!data.content.api_key) data.content.api_key = default_api_key;
      if (!data.content.widget_id) data.content.widget_id = default_widget_id;
      if (!data.content.widget_type) data.content.widget_type = default_widget_type;

      if (data.content.api_key_input && data.content.api_key && data.content.api_key_input !== data.content.api_key) {
        data.content.api_key_input = data.content.api_key;
      }

      if (!data.content.week_starts_on) data.content.week_starts_on = 'default'
      if (!data.content.first_week_contains_date) data.content.first_week_contains_date = 'default'
      if (!data.content.display_product_covers) data.content.display_product_covers = false
      if (!data.content.display_product_name) data.content.display_product_name = false
      if (!data.content.display_product_images) data.content.display_product_images = false
      if (!data.content.display_tag_filter) data.content.display_tag_filter = false
      if (!data.content.display_weekdays) data.content.display_weekdays = false
      if (!data.content.display_week_numbers) data.content.display_week_numbers = false
      if (!data.content.display_legend) data.content.display_legend = false
      if (!data.content.stay_expanded) data.content.stay_expanded = false
      if (!data.content.show_bookingmood_branding) data.content.show_bookingmood_branding = false
      if (!data.content.background_color) data.content.background_color = "ffffff"
      if (!data.content.text_color) data.content.text_color = "000000"
      if (!data.content.available_color) data.content.available_color = "22c55e"
      if (!data.content.tentative_color) data.content.tentative_color = "f59e0b"
      if (!data.content.unavailable_color) data.content.unavailable_color = "ef4444"
      if (!data.content.accent_color) data.content.accent_color = "ef4444"
      this.updateUrlParams(data);
    },
    loadedAction: function (data) {
      if (!this.loadDeferred) this.loadDeferred = $.Deferred();
      window[data.id + '_loaded_deferred'] = this.loadDeferred;

      this.loadLocaleOptions(data);
      this.loadFontOptions();
      this.loadCurrencyOptions();

      if (data.content.api_key) this.cacheWidgets(data.content.api_key);

      this.updateUrlParams(data);
      this.setSize('100%', 'auto');
    },

    onLoaded: function () {
      if (!this.loadDeferred) this.loadDeferred = $.Deferred();
      return this.loadDeferred;
    },

    switchLanguageAction: function(data, elem, langCode) {
      this.loadLocaleOptions(data);
      this.updateElement();
    },
    getCurLang: function () {
      var langCode = 'en';
      var locale = null;
      if (wb_builder.site && wb_builder.site.languages.length > 0 && wb_builder.site.currSelLang) {
        langCode = wb_builder.site.currSelLang;
        var language = wb_builder.getLanguageByCode(langCode);
        locale = language ? language.locale : null;
      } else {
        var lang = wb_builder.getLanguageByLocale(wb_builder.locale);
        if (lang) locale = lang.locale;
      }

      return locale.replace('_', '-');
    },
  });

});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"linkedin","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/linkedin","pluginUri":"plugins\/linkedin","customConfiguration":null};
PluginWrapper._config.id = 'linkedin';
PluginWrapper._config.baseUri = "plugins\/linkedin";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/linkedin\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\r\n<script src=\"\/\/platform.linkedin.com\/in.js\" type=\"text\/javascript\"><\/script>\r\n{{\/isPublished}}\r\n<script type=\"IN\/{{content.profile_type}}\" data-id=\"{{content.data_id}}\" data-format=\"{{content.data_format}}\" data-related=\"{{content.connections}}\" data-text=\"{{content.data_text}}\" ><\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('linkedin', {
	name: 'LinkedIn',
	element: {
		minSize: {width: 15, height: 15},
		defaultSize: {width: 364, height: 354},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', id: 'profile_id_label', text: __('Public Profile URL')},
						{type: 'TextField', id: 'data_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Profile Type')},
						{type: 'DropdownBox', id: 'profile_type', options: [
							{id: '#MemberProfile', name: __('Member'), value: 'MemberProfile'},
							{id: '#CompanyProfile', name: __('Company'), value: 'CompanyProfile'}
						], change: function(fields) {
							var type = this.getSelectedItem().getOriginal().id;
							if (type === '#CompanyProfile') {
								fields.profile_id_label.setText(__('Company ID'));
							} else {
								fields.profile_id_label.setText(__('Public Profile URL'));
							}
						}}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Display Mode')},
						{type: 'DropdownBox', id: 'display_mode', options: [
							{id: '#inline', name: __('Inline'), value: 'inline'},
							{id: '#icon_name', name: __('Icon/Name'), value: 'icon_name'},
							{id: '#icon', name: __('Icon'), value: 'icon'}
						], change: function (fields) {
							var type = this.getSelectedItem().getOriginal().id;
							if (type === '#inline') {
								fields.behaviour_input.setVisible(false);
								fields.connections_input.setVisible(true);
								fields.full_name_input.setVisible(false);
							} else if (type === '#icon_name') {
								fields.behaviour_input.setVisible(true);
								fields.connections_input.setVisible(false);
								fields.full_name_input.setVisible(true);
							} else if (type === '#icon') {
								fields.behaviour_input.setVisible(true);
								fields.connections_input.setVisible(false);
								fields.full_name_input.setVisible(false);
							}
						}}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'VerticalLayout', id: 'behaviour_input', children: [
							{type: 'Label', text: __('Behaviour')},
							{type: 'RadioBox', id: 'hover', label: __('Hover'), group: 'grp'},
							{type: 'RadioBox', id: 'click', label: __('Click'), group: 'grp'}
						]},
						{type: 'VerticalLayout', id: 'connections_input', children: [
							{type: 'Label', text: __('Show Connections')},
							{type: 'DropdownBox', id: 'connections', options: [
								{id: '#show', name: __('Show'), value: 'show'},
								{id: '#false', name: __('Hide'), value: 'false'}
							]}
						]}
					]}
				]},
				{type: 'VerticalLayout', id: 'full_name_input', children: [
					{type: 'Label', text: __('Full name')},
					{type: 'TextField', id: 'data_text'}
				]}
			]}
		]
	},

	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function (inst, func) {
			if (typeof func === 'function') {
				if (this.scriptReady) {
					func.call(inst);
				} else {
					this.listeners.push({inst: inst, func: func});
				}
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('//platform.linkedin.com/in.js?async=true', function () {
					IN.init({});
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
			setTimeout(function () {
				if ('IN' in window) {
					window.IN.parse();
				}
			}, 300);
		}
	},

	openAction: function (fields, data, elem) {
		var itm;
		fields.hover.setValue(data.content.behaviour === 1);
		fields.click.setValue(data.content.behaviour === 0);
		
		itm = fields.profile_type.getItemById('#' + data.content.profile_type);
		fields.profile_type.selectItem(itm);

		fields.data_id.setText(data.content.data_id);
		fields.data_text.setText(data.content.data_text);
		
		itm = fields.display_mode.getItemById('#' + data.content.display_mode);
		fields.display_mode.selectItem(itm);

		itm = fields.connections.getItemById('#' + data.content.connections);
		fields.connections.selectItem(itm);

		if (data.content.display_mode === 'inline') {
			fields.behaviour_input.setVisible(false);
			fields.connections_input.setVisible(true);
			fields.full_name_input.setVisible(false);
		} else if (data.content.display_mode === 'icon_name') {
			fields.behaviour_input.setVisible(true);
			fields.connections_input.setVisible(false);
			fields.full_name_input.setVisible(true);
		} else if (data.content.display_mode === 'icon') {
			fields.behaviour_input.setVisible(true);
			fields.connections_input.setVisible(false);
			fields.full_name_input.setVisible(false);
		}

	},

	applyAction: function (fields, data, elem) {
		var itm;
        var member_id = data.content.data_id = fields.data_id.getText();
        if (typeof member_id === 'undefined' || !member_id) {
            data.content.data_id = 'http://www.linkedin.com/in/jeffweiner08';
        }
		data.content.data_text = fields.data_text.getText();
		
		itm = fields.display_mode.getSelectedItem();
		data.content.display_mode = itm.getOriginal().value;
		
		itm = fields.profile_type.getSelectedItem();
		data.content.profile_type = itm.getOriginal().value;

		data.content.behaviour = fields.hover.getValue() ? 1 : 0;

		if (data.content.display_mode == "inline") {
			data.content.data_format = "inline";
		} else {
			if (data.content.behaviour == 1) {
				data.content.data_format = "hover";
			} else {
				data.content.data_format = "click";
			}
		}
		
		if (data.content.display_mode == "icon") data.content.data_text = "";

		itm = fields.connections.getSelectedItem();
		data.content.connections = itm.getOriginal().value;

		this.pluginScoped.addListener(this, function () {
		});
	},

	loadAction: function (data) {
		if (!data.content.data_id) data.content.data_id = 'http://www.linkedin.com/in/jeffweiner08';
		if (!data.content.data_text) data.content.data_text = 'Reid Garrett Hoffman';
		if (!data.content.display_mode) data.content.display_mode = 'inline';
		if (!data.content.data_format) data.content.data_format = 'inline';
		if (!data.content.connections) data.content.connections = 'show';
		if (!data.content.behaviour) data.content.behaviour = 1;
		if (!data.content.profile_type) data.content.profile_type = 'MemberProfile';
	},

	loadedAction: function (data, elem) {
		this.pluginScoped.addListener(this, function () {
		});
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"bookaplace","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/bookaplace","pluginUri":"plugins\/bookaplace","customConfiguration":null};
PluginWrapper._config.id = 'bookaplace';
PluginWrapper._config.baseUri = "plugins\/bookaplace";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/bookaplace\/main.png";
PluginWrapper._config.template = "<div style=\"width: 100%;\">\n{{{content.widgetHtml}}}\n<script src=\"https:\/\/booka.place\/v3.2\/bookaplace-avail.min.js\"><\/script>\n<\/div>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/bookaplace/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'TextField', 'ColorPicker', 'SizeSelector'], function (PropertyTypeModule, TextField, ColorPicker, SizeSelector) {

  var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
  var PropertyType = PropertyTypeModule.PropertyType;
  var TextField = TextField.TextField;
  var ColorPicker = ColorPicker.ColorPicker;
  var SizeSelector = SizeSelector.SizeSelector;
  

  var BookaplaceName = new PropertyType("Booka.place/BookaplaceName", PropertyTypeAccess.User, true, __('Login name'), TextField, null, {
    helpText: __('Your booka.place account login name'),
  });
  var objNum = new PropertyType("Booka.place/ObjNum", PropertyTypeAccess.User, true, __('Acc number'), SizeSelector, null, {
    min: 0,
    helpText: __('The accommodation, starting from zero (0)'),
  }).inline(6);
  var fnrNum = new PropertyType("Booka.place/FnrNum", PropertyTypeAccess.User, true, __('App number'), TextField, null, {
    helpText: __('Enter the application number (000/001/002/..) if you have more than 1 copy of the Booka.place application in your account.'),
  }).inline(6);

  var ShowDate = new PropertyType("Booka.place_options/ShowDate", PropertyTypeAccess.User, true, __('Start date'), TextField, null, {
    inputType: 'date',
    helpText: __('Leave empty for default (start of actual month) or overrule by entering a valid date.'),
  }).inline(6);
  var EndDate = new PropertyType("Booka.place_options/EndDate", PropertyTypeAccess.User, true, __('End date'), TextField, null, {
    inputType: 'date',
    helpText: __('Leave empty for default (end of current year) or overrule by entering a valid date.'),
  }).inline(6);
  var Months = new PropertyType("Booka.place_options/Months", PropertyTypeAccess.User, true, __("Months"), SizeSelector, null, {
    helpText: __('Set the max. number of horizontal months (max. 6). The result depends on screen width.'),
    max: 6,
    min: 1
  });

  
  var ReservedDatesTextColor = new PropertyType("Booka.place_style/ReservedDatesTextColor", PropertyTypeAccess.User, true, __("Text color") + ' (' + __("Dates") + ')', ColorPicker, null).inline(6);
  var ReservedDatesBgColor = new PropertyType("Booka.place_style/ReservedDatesBgColor", PropertyTypeAccess.User, true, __("Background color") + ' (' + __("Dates") + ')', ColorPicker, null).inline(6);
  var HeadersTextColor = new PropertyType("Booka.place_style/HeadersTextColor", PropertyTypeAccess.User, true, __("Text color") + ' (' + __("Headers") + ')', ColorPicker, null).inline(6);
  var HeadersBgColor = new PropertyType("Booka.place_style/HeadersBgColor", PropertyTypeAccess.User, true, __("Background color") + ' (' + __("Headers") + ')', ColorPicker, null).inline(6);

  PropertyType.setDefaultOpenCategory('Booka.place');

  PropertyType.setCategoryName('Booka.place_options', __('Options'));
  PropertyType.setCategoryName('Booka.place_style', __('Style'));
  
  PropertyType.setSortOrder('Booka.place', 1);
  PropertyType.setSortOrder('Booka.place_options', 2);
  PropertyType.setSortOrder('Booka.place_style', 3);
  
  
  PluginWrapper.registerPlugin('bookaplace', {
      name: 'Booka.place',
      icon: 'ico-pl-bookaplace',
      element: {
          resizable: true
      },
      properties: [
          {id: 'name', type: BookaplaceName,
              uiComponentOptions: function(data, opts) {
                  opts.validateText = data.content.name ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Login name')));
                  return opts;
              },
              get: function(data) { return data.content.name; },
              set: function(value, data) {
                  data.content.name = value;
                  this.generateWidgetHtml(data);
              }
          },
          {id: 'objNum', type: objNum,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.objNum !== '' ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Acc number')));
                return opts;
            },
            get: function(data) { return data.content.objNum; },
            set: function(value, data) {
                data.content.objNum = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'fnrNum', type: fnrNum,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.fnrNum ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App number')));
                return opts;
            },
            get: function(data) { return data.content.fnrNum; },
            set: function(value, data) {
                data.content.fnrNum = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'reservedDatesTextColor', type: ReservedDatesTextColor, 
              get: function(data) { return data.content.reservedDatesTextColor; },
              set: function(value, data) {
                  data.content.reservedDatesTextColor = value;
                  this.generateWidgetHtml(data);
              }
          },
          {id: 'reservedDatesBgColor', type: ReservedDatesBgColor, 
            get: function(data) { return data.content.reservedDatesBgColor; },
            set: function(value, data) {
                data.content.reservedDatesBgColor = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'headersTextColor', type: HeadersTextColor, 
            get: function(data) { return data.content.headersTextColor; },
            set: function(value, data) {
                data.content.headersTextColor = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'headersBgColor', type: HeadersBgColor, 
            get: function(data) { return data.content.headersBgColor; },
            set: function(value, data) {
                data.content.headersBgColor = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'months', type: Months, 
            get: function(data) { return data.content.months; },
            set: function(value, data) {
                data.content.months = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'showDate', type: ShowDate, 
            get: function(data) { return data.content.showDate; },
            set: function(value, data) {
                data.content.showDate = value;
                this.generateWidgetHtml(data);
            }
          },
          {id: 'endDate', type: EndDate, 
            get: function(data) { return data.content.endDate; },
            set: function(value, data) {
                data.content.endDate = value;
                this.generateWidgetHtml(data);
            }
          }
      ],

      supportsAutoHeight: true,

      generateWidgetHtml: (data) => {
        let params = [];
        if (data.content.name) {
          params.push('name="' + data.content.name + '"');
        }
        else {
          params.push('name="sitepro"');
        }
        if (data.content.objNum) {
          params.push('obj="' + data.content.objNum + '"');
        }
        if (data.content.fnrNum) {
          params.push('fnr="' + data.content.fnrNum + '"');
        }
        if (data.content.reservedDatesTextColor) {
          params.push('color="' + data.content.reservedDatesTextColor + '"');
        }
        if (data.content.reservedDatesBgColor) {
          params.push('bgcolor="' + data.content.reservedDatesBgColor + '"');
        }
        if (data.content.headersTextColor) {
          params.push('headercolor="' + data.content.headersTextColor + '"');
        }
        if (data.content.headersBgColor) {
          params.push('headerbgcolor="' + data.content.headersBgColor + '"');
        }
        if (data.content.months) {
          params.push('cols="' + data.content.months + '"');
        }
        else {
          params.push('cols="1"');
        }

        if (data.content.showDate) {
          params.push('curdate="' + data.content.showDate.replace(/\-/g,'') + '"');
        }
        if (data.content.endDate) {
          params.push('maxdate="' + data.content.endDate.replace(/\-/g,'') + '"');
        }

        let widgetHtml = '';
        if (params.length) {
          widgetHtml = "<bookaplace-avail style=\"background: transparent;\" " + (params.join(' ')) + " lang=\"\"></bookaplace-avail>";
        }

        if (typeof data.content.widgetHtml === 'undefined' || widgetHtml != data.content.widgetHtml) {
          data.content.widgetHtml = widgetHtml;
        }
      },
  
      propertyDialog: {
          noScroll: true,
          tabs: [
              {
                  children: [
                      {
                          type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                              {
                                  type: 'VerticalLayout', children: [
                                      {type: 'Label', text: __('Login name'), uiComponentOptions: function(data, opts) {
                                          opts.validateText = data.content.name ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Login name')));
                                          return opts;
                                      }},
                                      {type: 'TextField', id: 'name'}
                                  ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Acc number'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.objNum !== '' ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Acc number')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'objNum'}
                                ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('App number'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.fnrNum ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App number')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'fnrNum'}
                                ]
                              },
                              {
                                  type: 'VerticalLayout', children: [
                                      {type: 'Label', text: __("Text color") + ' (' + __("Dates") + ')'},
                                      {type: 'ColorPicker', id: 'reservedDatesTextColor'}
                                  ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __("Background color") + ' (' + __("Dates") + ')'},
                                    {type: 'ColorPicker', id: 'reservedDatesBgColor'}
                                ]
                              },

                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __("Text color") + ' (' + __("Headers") + ')'},
                                    {type: 'ColorPicker', id: 'headersTextColor'}
                                ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __("Background color") + ' (' + __("Headers") + ')'},
                                    {type: 'ColorPicker', id: 'headersBgColor'}
                                ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Months'), helpText: __('Default: 4 months on a row. Set the max. number of horizontal months (max. 6). The result depends on screen width.')},
                                    {type: 'SizeSelector', id: 'months', max: 6, min: 0}
                                ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Start date'), helpText: __('Leave empty for default (start of actual month) or overrule by entering a valid date.')},
                                    {type: 'TextField', id: 'showDate', inputType: 'date'}
                                ]
                              },
                              {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('End Date'), helpText: __('Leave empty for default (end of current year) or overrule by entering a valid date.')},
                                    {type: 'TextField', id: 'endDate', inputType: 'date'}
                                ]
                              },
                          ]
                      },
                  ]
              },
          ]
      },
  
      openAction: function (fields, data, elem) {
          fields.name.setValue(data.content.name);
          fields.objNum.setValue(data.content.objNum);
          fields.fnrNum.setValue(data.content.fnrNum);
          fields.reservedDatesTextColor.setValue(data.content.reservedDatesTextColor);
          fields.reservedDatesBgColor.setValue(data.content.reservedDatesBgColor);
          fields.headersTextColor.setValue(data.content.headersTextColor);
          fields.headersBgColor.setValue(data.content.headersBgColor);
          fields.months.setValue(data.content.months);
          fields.showDate.setValue(data.content.showDate);
          fields.endDate.setValue(data.content.endDate);

          PluginWrapper.paymentGatewayOpenAction(fields, data);
      },
      applyAction: function (fields, data, elem) {
          data.content.name = fields.name.getValue();
          data.content.objNum = fields.objNum.getValue();
          data.content.fnrNum = fields.fnrNum.getValue();
          data.content.reservedDatesTextColor = fields.reservedDatesTextColor.getValue();
          data.content.reservedDatesBgColor = fields.reservedDatesBgColor.getValue();
          data.content.headersTextColor = fields.headersTextColor.getValue();
          data.content.headersBgColor = fields.headersBgColor.getValue();
          data.content.months = fields.months.getValue();
          data.content.showDate = fields.showDate.getValue();
          data.content.endDate = fields.endDate.getValue();

          PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
      },
      loadAction: function (data) {
          data.content.__globalVars = ['name'];
          if (!data.content.name) {
              data.content.name = '';
          }
          if (!data.content.objNum) {
            data.content.objNum = 0;
          }
          if (!data.content.fnrNum) {
            data.content.fnrNum = '000';
          }
          if (!data.content.months) {
            data.content.months = 1;
          }

          this.generateWidgetHtml(data);
          if (['main.svg'].indexOf(data.content.logo) > -1) {
              data.content.logo = 'main.svg';
          }
      },
      onDblClick: function() {
        var thisClass = this;
        setTimeout(function() {
          var component = thisClass.getPropertyComponent('name');
          if (component) component.focus();
        }, 50);
    }
  });
  
  });},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"mpesa","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/mpesa","pluginUri":"plugins\/mpesa","customConfiguration":null};
PluginWrapper._config.id = 'mpesa';
PluginWrapper._config.baseUri = "plugins\/mpesa";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n\n{{#isPublished}}\n<div class=\"modal fade\" id=\"mpesaModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\" id=\"myModalLabel\">Mpesa<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n                <form id=\"mpesaForm_{{id}}\" method=\"post\" action=\"\" data-gateway-id=\"Mpesa\">\n                    <div class=\"form-group\">\n                        <label>{{\"Phone number\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n                        <input type=\"text\" class=\"form-control\" name=\"phone\" id=\"phone_{{id}}\" value=\"\" \/>\n                    <\/div>\n                    <div class=\"form-group\">\n                        <label>{{\"Country\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n                        <select class=\"form-control\" id=\"country_{{id}}\" name=\"country\" required=\"required\">\n                            <option value=\"GHA\">Ghana<\/option>\n                            <option value=\"TZN\">Tanzania<\/option>\n                            <option value=\"LES\">Lesotho<\/option>\n                            <option value=\"DRC\">DR Congo<\/option>\n                        <\/select>\n                    <\/div>\n                    {{^content.store}}\n                    {{\/content.store}}\n                    {{#content.store}}\n                    <input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n                    <input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n                    <input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n                    <input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n                    <input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n                    <input class=\"hidden\" type=\"submit\"\/>\n                   {{\/content.store}}\n                <\/form>\n                <div id=\"mpesaCheckoutRender_{{id}}\"><\/div>\n                <div id=\"mpesaError_{{id}}\" class=\"alert alert-danger\"><\/div>\n\n            <\/div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n                <button id=\"mpesaBackBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"showModal_{{id}}()\">{{\"Back\" | tr}}<\/button>\n                {{^content.store}}\n                <button id=\"mpesaNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startPaymentFlow_{{id}}()\">{{\"Pay\" | tr}}<\/button>\n                {{\/content.store}}\n                {{#content.store}}\n                <button id=\"mpesaNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startStorePaymentFlow_{{id}}()\">{{\"Pay\" | tr}}<\/button>\n                {{\/content.store}}\n\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n{{{requireService}}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/mpesa/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'CheckBox', 'TextField' ], function (PropertyTypeModule, CheckBox, TextField) {

var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
var PropertyType = PropertyTypeModule.PropertyType;
var TextField = TextField.TextField;
var CheckBox = CheckBox.default;

var MpesaApiKey = new PropertyType("M-Pesa/MpesaApiKey", PropertyTypeAccess.User, true, __('Api Key'), TextField, null, {
    placeholder: ''
});
var MpesaItemName = new PropertyType("M-Pesa/MpesaItemName", PropertyTypeAccess.User, true, __('Item Name'), TextField, null, {
    placeholder: ''
});
var MpesaPrice = new PropertyType("M-Pesa/MpesaPrice", PropertyTypeAccess.User, true, __('Price'), TextField, null, {
    placeholder: ''
});
var MpesaProviderCode = new PropertyType("M-Pesa/MpesaProviderCode", PropertyTypeAccess.User, true, __('Provider Code'), TextField, null, {
    placeholder: ''
});
var MpesaIsTest = new PropertyType("M-Pesa/MpesaIsTest", PropertyTypeAccess.User, true, __("Test mode"), CheckBox);

PropertyType.setSortOrder('M-Pesa', 1);

var Globals = {
    getDefaultStyles: function(isStore) {
		var styles = {
            button_color: '#fafafa',
            button_border: {
                color: '#fff',
                style: 'solid',
                weight: 1,
                css: { border: '1px solid #fff' },
                cssRaw: 'border: 1px solid #fff'
            },
            logo: 'mpesa-original.svg',
            font_family: 'Arial',
            font_size: 12,
            label_color: '#949494'
		};
        return isStore ? styles : $.extend(true, styles, {
            button_label: __('Pay with %s').replace('%s', ''),
            showlogo: true,
            logo_width: 110,
            button_padding: 4
        });
    },
	getLogosList: function() {
		return [
			{id: 'mpesa-original.svg', name: 'coloured'},
            {id: 'mpesa-black.svg', name: 'black'},
            {id: 'mpesa-white.svg', name: 'white'}
		];
	}
};


ElementRegister.registerPaymentGateway({
    name: 'M-Pesa',
    id: 'mpesa',
    pageUrl: 'https://m-pesa.com/',
    keyField: __('Api Key'),
    keyFieldId: 'apiKey',
    keyField2: __('Provider Code'),
    keyField2Id: 'providerCode',
    keyField3: __('Test API'),
    keyField3Id: 'isTest',
    keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,6], children: [
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Api Key')},
		    {type: 'TextField', placeholder: __('Api Key'), id: 'key'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Provider Code')},
		    {type: 'TextField', placeholder: __('Provider Code'), id: 'key2'},
        ]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3',  css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
    priceFieldId: 'price',
    providerCodeFieldId: 'providerCode',
    defaultStyles: Globals.getDefaultStyles(true),
    styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mpesa', true),
    globalVars: ['apiKey', 'isTest'],
    useStylesInStoreCart: true,
    logos: Globals.getLogosList(),
    forceActive: true
});

PluginWrapper.registerPlugin('mpesa', {
    name: 'Mpesa',
    element: {
        minSize: {width: 100, height: 50},
        defaultSize: {width: 160, height: 81},
        resizable: true
    },
    properties: PluginWrapper.paymentGatewayStylePropertiesDef([
        {id: 'apiKey', type: MpesaApiKey,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.apiKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Api Key')));
                return opts;
            },
            get: function(data) { return data.content.apiKey; },
            set: function(value, data) {
                data.content.apiKey = value;
            }
        },
        {id: 'itemName', type: MpesaItemName,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Item Name')));
                return opts;
            },
            get: function(data) { return data.content.itemName; },
            set: function(value, data) {
                data.content.itemName = value;
            }
        },
        {id: 'price', type: MpesaPrice,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                return opts;
            },
            get: function(data) { return data.content.price; },
            validate: function(value) {
                if (/^[\d.,]+$/.test(value)) {
                    return '';
                } else {
                    return (__('Incorrect format'));
                }
            },
            set: function(value, data) {
                data.content.price = value;
            }
        },
        {id: 'providerCode', type: MpesaProviderCode,
            get: function(data) { return data.content.providerCode; },
            set: function(value, data) {
                data.content.providerCode = value;
            }
        },
        {id: 'isTest2', type: MpesaIsTest, helpText: __('For testing purpose without real payments'),
            get: function(data) { return data.content.isTest; },
            set: function(value, data) {
                data.content.isTest = value;
            }
        },
    ], Globals.getLogosList(), 'mpesa'),

    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('apiKey'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.apiKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Api Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'apiKey'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('itemName'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Api Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'itemName'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Price'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'price'}
                                ]
                            },
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Provider Code')},
                                    {type: 'TextField', id: 'providerCode'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {
                                        type: 'VerticalLayout', css: {marginTop: 15}, children: [
                                            {
                                                type: 'CheckBox',
                                                id: 'isTest',
                                                css: {display: 'inline-block'},
                                                label: __('Test mode'),
                                                init: function () {
                                                    this.getElem().attr('title', __('For testing purpose without real payments'));
                                                    this.getElem().tooltip({placement: 'right'});
                                                }
                                            }
                                        ]
                                    },
                                ]
                            },
                        ]
                    },
                ]
            },
            PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mpesa'),
        ]
    },

    openAction: function (fields, data, elem) {
        fields.apiKey.setValue(data.content.apiKey);
        fields.isTest.setValue(data.content.isTest);
        fields.price.setValue(data.content.price);
        fields.providerCode.setValue(data.content.providerCode);
        
        PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.apiKey = fields.apiKey.getValue();
        data.content.isTest = fields.isTest.getValue();
        data.content.price = fields.price.getValue();
        data.content.providerCode = fields.providerCode.getValue();
        PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
    },
    loadAction: function (data) {
        data.content.__globalVars = ['apiKey', 'isTest'];
        if (!data.content.apiKey)
            data.content.apiKey = '';
        if(!data.content.price)
            data.content.price = '';
        if (!data.content.isTest)
            data.content.isTest = true;
        if (!data.content.providerCode)
            data.content.providerCode = '';
        if (['logo.svg'].indexOf(data.content.logo) > -1) {
            data.content.logo = 'mpesa-original.svg';
        }
        PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('apiKey');
			if (component) component.focus();
		}, 50);
	}
});

});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"gestpay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/gestpay","pluginUri":"plugins\/gestpay","customConfiguration":null};
PluginWrapper._config.id = 'gestpay';
PluginWrapper._config.baseUri = "plugins\/gestpay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/gestpay\/main.png";
PluginWrapper._config.template = "<form {{#content.store}}action=\"{{#content.demo}}https:\/\/testecomm.sella.it\/pagam\/pagam.aspx{{\/content.demo}}{{^content.demo}}https:\/\/ecomm.sella.it\/pagam\/pagam.aspx{{\/content.demo}}{{\/content.store}}\" method=\"post\" data-gateway-id=\"Gestpay\" style=\"width: 100%; height: 100%;\"{{^content.store}} target=\"_blank\"{{\/content.store}}>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"name\" value=\"{{content.name}}\" \/>\n\t<input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"{{id}}_submit\" value=\"1\" \/>\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#516b85',
			button_border: {
				color: '#ccc',
				style: 'none',
				weight: 1,
				css: { border: '1px none #ccc' },
				cssRaw: 'border: 1px none #ccc'
			},
			logo: 'gestpay.png',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#fff'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://www.gestpay.it/" target="_blank">https://www.gestpay.it/</a></p>'
				+ '<p><strong>These parameters must be enabled in Gestpay Back Office:</strong></p>'
				+ '<ul><li>Language</li></ul>'
				+ '<p><strong>URL for positive response</strong> (IT: <em>"URL per risposta positiva"</em>)<strong>:</strong><br />'
				+ '<pre>' + base_url + 'store-return/Gestpay' + '</pre></p>'
				+ '<p><strong>URL for negative response</strong> (IT: <em>"URL per risposta negativa"</em>)<strong>:</strong><br />'
				+ '<pre>' + base_url + 'store-cancel/Gestpay' + '</pre></p>'
				+ '<p><strong>URL Server to Server</strong> (IT: <em>"URL Server to Server"</em>)<strong>:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Gestpay' + '</pre></p>';
	},
	_settingsDialog: null,
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Gestpay',
	id: 'gestpay',
	keyFieldId: 'shop',
	keyField2Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Shop login')},
			{type: 'TextField', placeholder: __('Shop login'), id: 'key'},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key2', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'price',
	currencyFieldId: 'currency',
	globalVars: ['shop', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	settingsTabDef: Globals.getSettingsContent(),
});

PluginWrapper.registerPlugin('gestpay', {
	name: 'Gestpay',
	element: {
		minSize: {width: 70, height: 35},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Shop login'), helpText: __('Shop login code on Gestpay site')},
						{type: 'TextField', id: 'shop'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'price'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '242', name: 'EUR'},
							{id:   '1', name: 'USD'},
							{id: '187', name: 'AED'},
							{id: '109', name: 'AUD'},
							{id: '262', name: 'BGN'},
							{id: '234', name: 'BRL'},
							{id:  '12', name: 'CAD'},
							{id:   '3', name: 'CHF'},
							{id: '144', name: 'CNY'},
							{id: '223', name: 'CZK'},
							{id:   '7', name: 'DKK'},
							{id:   '2', name: 'GBP'},
							{id: '103', name: 'HKD'},
							{id: '229', name: 'HRK'},
							{id: '153', name: 'HUF'},
							{id: '123', name: 'IDR'},
							{id: '203', name: 'ILS'},
							{id:  '31', name: 'INR'},
							{id:  '62', name: 'ISK'},
							{id:  '71', name: 'JPY'},
							{id: '119', name: 'KRW'},
							{id:  '55', name: 'MYR'},
							{id:  '81', name: 'NGN'},
							{id:   '8', name: 'NOK'},
							{id: '113', name: 'NZD'},
							{id:  '66', name: 'PHP'},
							{id:  '26', name: 'PKR'},
							{id: '237', name: 'PLN'},
							{id: '270', name: 'RON'},
							{id: '244', name: 'RUB'},
							{id:  '75', name: 'SAR'},
							{id:   '9', name: 'SEK'},
							{id: '124', name: 'SGD'},
							{id:  '73', name: 'THB'},
							{id: '267', name: 'TRY'},
							{id: '143', name: 'TWD'},
							{id: '241', name: 'UAH'},
							{id: '145', name: 'VND'},
							{id:  '82', name: 'ZAR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Mode'), init: function() {
						var link = $('<a>').attr('href', 'javascript:void(0)').text(__('Settings'));
						link.on('click', function() {
							Globals.getSettingsDialog().setVisible(true);
						});
						var cont = $('<span>').css({fontWeight: 'normal', marginLeft: '4px'});
						cont.append('(');
						cont.append(link);
						cont.append(')');
						this._elem.append(cont);
					}},
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef()
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.shop.setText(data.content.shop);
		fields.name.setText(data.content.name);
		fields.price.setText(data.content.price);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.shop = fields.shop.getText();
		data.content.name = fields.name.getText();
		data.content.price = fields.price.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.shop) data.content.shop = '';
		if (!data.content.name) data.content.name = '';
		if (!data.content.price) data.content.price = '1';
		if (!data.content.currency) data.content.currency = '242'; // EUR
		if (data.content.demo === undefined) data.content.demo = false;
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"mellat","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/mellat","pluginUri":"plugins\/mellat","customConfiguration":null};
PluginWrapper._config.id = 'mellat';
PluginWrapper._config.baseUri = "plugins\/mellat";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{^isPublished}}\n{{{content.paymentGatewayButton}}}\n{{\/isPublished}}\n{{#isPublished}}\n<form data-gateway-id=\"Mellat\" id=\"mellatForm_{{id}}\" action=\"{{#content.isTest}}https:\/\/banktest.ir\/gateway\/pgw.bpm.bankmellat.ir\/pgwchannel\/startpay.mellat{{\/content.isTest}}{{^content.isTest}}https:\/\/bpm.shaparak.ir\/pgwchannel\/startpay.mellat{{\/content.isTest}}\" method=\"post\" {{^content.store}} target=\"_blank\"{{\/content.store}}  style=\"width: 100%; height: 100%;\">\n{{#content.store}}\n<input type=\"hidden\" name=\"total\" value=\"{{content.amount}}\" \/>\n<input type=\"hidden\" name=\"orderid\" value=\"{transactionId}\" \/>\n<input type=\"hidden\" name=\"callBackUrl\" value=\"{callbackUrl}\" \/>\n{{\/content.store}}\n\n{{^content.store}}\n{{\/content.store}}\n<input class=\"hidden\" type=\"submit\"\/>\n{{{requireService}}}\n<\/form>\n\n\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/mellat/main.php';
PluginWrapper._config.active = false;
var Globals = {
	_settingsDialog: null,
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://mellatbank.am/" target="_blank">https://mellatbank.am/</a></p>'
			+ '<p><strong>callBackUrl:</strong><br />'
			+ '<pre>' + base_url + 'store-verify/Mellat' + '</pre></p>';
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#fafafa',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'mellat_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'mellat_color.svg', name: 'coloured'},
			{id: 'mellat_bw.svg', name: 'black'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Mellat',
	id: 'mellat',
	pageUrl: 'https://bankmellat.ir/',
	keyField: __('Terminal ID'),
	keyFieldId: 'terminal_id',
	keyField2: __('Username'),
	keyField2Id: 'username',
	keyField3: __('Password'),
	keyField3Id: 'password',
	keyField4: __('Test API'),
	keyField4Id: 'isTest',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [4,4,4,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Terminal ID')},
			{type: 'TextField', placeholder: __('Terminal ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Username')},
			{type: 'TextField', placeholder: __('Username'), id: 'key2'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Password')},
			{type: 'TextField', placeholder: __('Password'), id: 'key3', password: true},
		]},
		{
			type: 'CheckBox',
			label: __('Test mode'),
			id: 'key4',
			css: {padding: 7, marginTop: 5, display: 'inline-block'},
			init: function () {
				this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
			}
		}
	]},
	titleFieldId: 'label',
	nameFieldId: 'additional_data',
	priceFieldId: 'amount',
	globalVars: ['terminal_id', 'username', 'password', 'isTest'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mellat', true),
	settingsTabDef: Globals.getSettingsContent(),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('mellat', {
	name: 'Mellat',
	element: {
		minSize: {width: 120, height: 70},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'terminal_id', type: 'MellatTerminalId', helpText: __('Merchant Terminal Identifier'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.terminal_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Terminal ID')));
				return opts;
			},
			get: function(data) { return data.content.terminal_id; },
			set: function(value, data) {
				data.content.terminal_id = value;
			}
		},
		{id: 'username', type: 'MellatUsername', helpText: __('Merchant username'),
			get: function(data) { return data.content.username; },
			set: function(value, data) {
				data.content.username = value;
			}
		},
		{id: 'password', type: 'MellatPassword', helpText: __('Merchant password'),
			get: function(data) { return data.content.password; },
			set: function(value, data) {
				data.content.password = value;
			}
		},
		{id: 'additional_data', type: 'MellatAdditionalData', helpText: __('The name of the goods'),
			get: function(data) { return data.content.additional_data; },
			set: function(value, data) {
				data.content.additional_data = value;
			}
		},
		{id: 'amount', type: 'MellatAmount', helpText: __('Item price'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'isTest', type: 'MellatIsTest', helpText: __('For testing purpose without real payments'), moreInfo: function() {Globals.getSettingsDialog().setVisible(true);},
			get: function(data) { return data.content.isTest; },
			set: function(value, data) {
				data.content.isTest = value;
			}
		},
	], Globals.getLogosList(), 'mellat'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
					{type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [4, 4, 4], children: [
							{type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Terminal ID'), helpText: __('Merchant Terminal Identifier'), uiComponentOptions: function(data, opts) {
										opts.validateText = data.content.terminal_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Terminal ID')));
										return opts;
									}},
									{type: 'TextField', id: 'terminal_id'}
								]},
							{type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Username'), helpText: __('Merchant username')},
									{type: 'TextField', id: 'username'}
								]},
							{type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Password'), helpText: __('Merchant password')},
									{type: 'TextField', id: 'password'}
								]}
						]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
							{type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Item Name'), helpText: __('The name of the goods')},
									{type: 'TextField', id: 'additional_data'}
								]},
							{type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Price'), helpText: __('Item price')},
									{type: 'TextField', id: 'amount'}
								]}
						]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
							{type: 'CheckBox', id: 'isTest', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
									this.getElem().attr('title', __('For testing purpose without real payments'));
									this.getElem().tooltip({placement: 'right'});
								}}
						]},
					{type: 'CustomContainer', css: {marginTop: 15}, init: function() {
							this.getElem().append('(')
								.append($('<a>').text(__('Settings'))
									.attr('href', 'javascript:void(0)')
									.on('click', function() { Globals.getSettingsDialog().setVisible(true); }))
								.append(')');
						}}
				]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mellat')
		]
	},

	openAction: function (fields, data, elem) {
		fields.terminal_id.setValue(data.content.terminal_id);
		fields.username.setValue(data.content.username);
		fields.password.setValue(data.content.password);
		fields.additional_data.setValue(data.content.additional_data);
		fields.amount.setValue(data.content.amount);
		fields.isTest.setValue(data.content.isTest);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},

	applyAction: function (fields, data, elem) {
		data.content.terminal_id = fields.terminal_id.getValue();
		data.content.username = fields.username.getValue();
		data.content.password = fields.password.getValue();
		data.content.additional_data = fields.additional_data.getValue();
		data.content.amount = fields.amount.getValue();
		data.content.isTest = fields.isTest.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},

	loadAction: function (data) {
		data.content.__globalVars = ['terminal_id', 'username', 'password', 'isTest'];
		if (!data.content.terminal_id) data.content.terminal_id = '';
		if (!data.content.username) data.content.username = '';
		if (!data.content.password) data.content.password = '';
		if (!data.content.additional_data) data.content.additional_data = '';
		if (!data.content.amount) data.content.amount = '';
		if (!data.content.isTest) data.content.isTest = false;
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('terminal_id');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"vkontakte_like","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_like","pluginUri":"plugins\/vkontakte_like","customConfiguration":null};
PluginWrapper._config.id = 'vkontakte_like';
PluginWrapper._config.baseUri = "plugins\/vkontakte_like";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_like\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n\t{{#isPreview}}\n\t\t{{{content.previewHtml}}}\n\t{{\/isPreview}}\n\t{{^isPreview}}\n\t\t{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"\/\/vk.com\/js\/api\/openapi.js?116\"><\/script>\n<script type=\"text\/javascript\"> VK.init({apiId: '{{content.finalAppId}}', onlyWidgets: true}); <\/script>\n\t\t{{\/firstOnPage}}\n<div id=\"{{id}}_vk_like\" class=\"vk_like wb-prevent-layout-click\"><\/div>\n<script type=\"text\/javascript\">\n\tif (window.VK) VK.Widgets.Like('{{id}}_vk_like', {type: '{{content.type}}', verb: {{content.verb}}, height: {{content.height}}});\n<\/script>\n\t{{\/isPreview}}\n{{\/isPublished}}\n{{^isPublished}}\n<!-- dynamic -->\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('vkontakte_like', {
	name: 'Like',
	icon: 'ico-pl-vkontakte_like',
	noButton: true,
	element: {
		minSize: {width: 20, height: 20},
		defaultSize: {width: 110, height: 30},
		renderOnce: true,
		resizable: true
	},
	propertyDialog: {
		//size: {width: 500, height: 400},
		noScroll: true,
		tabs: [
			{name: 'General', children: [
				{type: 'VerticalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('App ID'), helpText: __('Create app at %s').replace('%s', 'https://vk.com/apps?act=manage'),uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.appId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App ID')));
							return opts;
						}},
						{type: 'TextField', id: 'appId', change: function(fields) {
							fields.__self.notifyHelpSystemPlayer('prop-appId-change');
						}}
					]},
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Button Layout')},
							{type: 'RadioBox', id: 'typeButton', label: __('Button with mini counter'), group: 'bl', change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-typeButton-change');
							}},
							{type: 'RadioBox', id: 'typeFull', label: __('Button with text counter'), group: 'bl', change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-typeFull-change');
							}},
							{type: 'RadioBox', id: 'typeMini', label: __('Mini button'), group: 'bl', change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-typeMini-change');
							}},
							{type: 'RadioBox', id: 'typeVertical', label: __('Mini button with counter at the top'), group: 'bl', change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-typeVertical-change');
							}}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Button Height')},
							{type: 'DropdownBox', id: 'height', options: [
								{id: '#18', name: '18 px', value: 18},
								{id: '#20', name: '20 px', value: 20},
								{id: '#22', name: '22 px', value: 22},
								{id: '#24', name: '24 px', value: 24}
							], change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-height-change');
							}},
							{type: 'Label', text: __('Button Name'), css: {marginTop: 15}},
							{type: 'DropdownBox', id: 'verb', options: [
								{id: '#0', name: __('Like'), value: 0},
								{id: '#1', name: __('This is interesting'), value: 1}
							], change: function(fields) {
								fields.__self.notifyHelpSystemPlayer('prop-verb-change');
							}}
						]}
					]}
				]}
			]}
		]
	},
	
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		placeholderAppId: '1936057',
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://vk.com/js/api/openapi.js?116', function() {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		}
	},
	properties: [
		{id: 'appId', type: 'VkontakteLikeAppId', helpText: __('Create app at %s').replace('%s', 'https://vk.com/apps?act=manage'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.appId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('App ID')));
				return opts;
			},
			get: function(data) { return data.content.appId; },
			set: function(value, data) {
				data.content.appId = value;
				this.setFinalAppId(data);
				this.finalizePreview(data);

			}
		},
		{id: 'buttonHeight', type: 'VkontakteLikeButtonHeight',
			get: function(data) { return data.content.height; },
			set: function(value, data) {
				data.content.height = value;
				this.previewHelper.setHeight(data.content.height);
				this.finalizePreview(data);
			}
		},
		{id: 'verb', type: 'VkontakteLikeButtonName',
			get: function(data) { return data.content.verb; },
			set: function(value, data) {
			console.log(value);
				data.content.verb = value;
				this.previewHelper.setVerb(data.content.verb);
				this.finalizePreview(data);
			}
		},
		{id: 'buttonLayout', type: 'VkontakteLikeButtonLayout',
			get: function(data) { return data.content.type; },
			set: function(value, data) {
				data.content.type = value;
				this.previewHelper.setType(data.content.type);
				this.finalizePreview(data);
			}
		},
	],
	previewHelper: {
		parentElem: null,
		elem: null,
		btnElem: null,
		counterElem: null,
		textCounterElem: null,
		textElem: null,
		type: 'button',
		init: function(parent) {
			this.parentElem = parent;
			this.elem = $('<div>');
			this.btnElem = $('<div>').css({
				minWidth: '41px',
				background: '#5F83AA',
				border: 'none',
				borderRadius: '2px',
				margin: '0px',
				padding: '3px',
				fontWeight: 'bold',
				fontSize: '10px',
				lineHeight: '12px',
				fontFamily: 'tahoma,verdana,arial,sans-serif,Lucida Sans',
				color: '#ffffff',
				textAlign: 'center',
				whiteSpace: 'nowrap',
				float: 'left',
				clear: 'left'
			});
			this.counterElem = $('<div>').css({
				minWidth: '41px',
				background: '#ffffff',
				border: '1px solid #BBBFC4',
				borderRadius: '2px',
				margin: '0px 0px 8px 0px',
				padding: '2px',
				fontWeight: 'bold',
				fontSize: '10px',
				lineHeight: '12px',
				fontFamily: 'tahoma,verdana,arial,sans-serif,Lucida Sans',
				color: '#666C73',
				textAlign: 'center',
				whiteSpace: 'nowrap',
				float: 'left'
			});
			this.textCounterElem = $('<div>').css({
				padding: '2px 2px 2px 8px',
				fontWeight: 'normal',
				fontSize: '10px',
				lineHeight: '12px',
				fontFamily: 'tahoma,verdana,arial,sans-serif,Lucida Sans',
				color: '#000000',
				whiteSpace: 'nowrap',
				float: 'left'
			});
			this.textElem = $('<span>').css({
				fontWeight: 'normal',
				marginLeft: '4px',
				display: 'inline-block'
			});
			this.counterElem.text('123K');
			this.textCounterElem.html('<b>123456</b> people find this interesting');
			this.btnElem.text('VK');
			this.elem.append(this.counterElem).append(this.btnElem.append(this.textElem));
			this.parentElem.append(this.elem);
		},
		setType: function(type) {
			this.type = type;
			if (type === 'full') {
				this.counterElem.detach();
				this.textCounterElem.detach().appendTo(this.elem);
			} else if (type === 'mini') {
				this.textCounterElem.detach();
				this.counterElem.detach().appendTo(this.elem);
				this.counterElem.css({marginBottom: '0px', marginLeft: '8px'});
			} else if (type === 'vertical') {
				this.textCounterElem.detach();
				this.counterElem.detach().prependTo(this.elem);
				this.counterElem.css({marginBottom: '8px', marginLeft: '0px'});
			} else { // (type === 'button')
				this.textCounterElem.detach();
				this.counterElem.detach().appendTo(this.elem);
				this.counterElem.css({marginBottom: '0px', marginLeft: '8px'});
			}
		},
		setVerb: function(verb) {
			if (this.type === 'mini' || this.type === 'vertical') {
				this.textElem.html('<i class="icon-heart icon-white" style="color:#AFC1D5; margin-bottom: -1px; margin-top: -1px; vertical-align: top; display: inline-block;"></i>');
			} else {
				if (verb === 1) {
					this.textElem.text('This is interesting');
				} else {
					this.textElem.text('Like');
				}
			}
		},
		setHeight: function(height) {
			var fontSize, lineHeight, paddingTop, paddingBottom;
			if (height === 24) {
				fontSize = 11; lineHeight = 13; paddingTop = 4; paddingBottom = 5;
			} else if (height === 22) {
				fontSize = 11; lineHeight = 13; paddingTop = 3; paddingBottom = 4;
			} else if (height === 20) {
				fontSize = 10; lineHeight = 12; paddingTop = paddingBottom = 3;
			} else { // (height === 18)
				fontSize = 10; lineHeight = 12; paddingTop = paddingBottom = 2;
			}
			this.counterElem.css({fontSize: (fontSize + 'px'), lineHeight: (lineHeight + 'px'), paddingTop: (paddingTop + 'px'), paddingBottom: (paddingBottom + 'px')});
			this.textCounterElem.css({fontSize: (fontSize + 'px'), lineHeight: (lineHeight + 'px'), paddingTop: ((paddingTop + 1) + 'px'), paddingBottom: ((paddingBottom + 1) + 'px')});
			this.btnElem.css({fontSize: (fontSize + 'px'), lineHeight: (lineHeight + 'px'), paddingTop: ((paddingTop + 1) + 'px'), paddingBottom: ((paddingBottom + 1) + 'px')});
		}
	},

	finalizePreview: function(data) {
		data.content.previewHtml = this.previewHelper.elem.html();
		var rwidth = 1 + this.previewHelper.btnElem.outerWidth(true) + ((data.content.type === 'vertical') ? 0 : ((data.content.type === 'full') ? this.previewHelper.textCounterElem.outerWidth(true) : this.previewHelper.counterElem.outerWidth(true))),
			rheight = (data.content.type === 'vertical') ? (data.content.height * 2 + 8) : data.content.height;

		this.setSize(rwidth, rheight);
	},

	setFinalAppId: function(data) {
		if (/^\d*$/.test(data.content.appId)) {
			data.content.finalAppId = data.content.appId;
		} else {
			data.content.finalAppId = this.pluginScoped.placeholderAppId;
		}
	},
	
	openAction: function(fields, data, elem) {
		var itm;
		fields.__self = this;
		fields.appId.setText(data.content.appId);
		fields.typeButton.setValue(data.content.type === 'button');
		fields.typeFull.setValue(data.content.type === 'full');
		fields.typeMini.setValue(data.content.type === 'mini');
		fields.typeVertical.setValue(data.content.type === 'vertical');
		itm = fields.height.getItemById('#' + data.content.height);
		fields.height.selectItem(itm);
		itm = fields.verb.getItemById('#' + data.content.verb);
		fields.verb.selectItem(itm);		
	},
	applyAction: function(fields, data, elem) {
		var itm;
		data.content.appId = fields.appId.getText();
		if (fields.typeButton.getValue()) data.content.type = 'button';
		if (fields.typeFull.getValue()) data.content.type = 'full';
		if (fields.typeMini.getValue()) data.content.type = 'mini';
		if (fields.typeVertical.getValue()) data.content.type = 'vertical';
		itm = fields.height.getSelectedItem();
		data.content.height = itm.getOriginal().value;
		itm = fields.verb.getSelectedItem();
		data.content.verb = itm.getOriginal().value;
		
		this.previewHelper.setType(data.content.type);
		this.previewHelper.setVerb(data.content.verb);
		this.previewHelper.setHeight(data.content.height);
		this.finalizePreview(data);
		this.setFinalAppId(data);
	},
	loadAction: function(data) {
		if (!data.content.appId) data.content.appId = '';
		if (!data.content.finalAppId) data.content.finalAppId = '';
		if (!data.content.type) data.content.type = 'button';
		if (!data.content.verb) data.content.verb = 0;
		if (!data.content.height) data.content.height = 22;
		if (!data.content.previewHtml) data.content.previewHtml = '';
		this.setFinalAppId(data);
	},
	loadedAction: function(data, elem) {
		this.previewHelper.init(elem);
		this.previewHelper.setType(data.content.type);
		this.previewHelper.setVerb(data.content.verb);
		this.previewHelper.setHeight(data.content.height);
		data.content.previewHtml = this.previewHelper.elem.html();
		// /*this.pluginScoped.addListener(this, function() {
		// 	window.VK.init({apiId: data.content.apiId, onlyWidgets: true});
		// 	window.VK.Widgets.Like(data.id + '_vk_like', {type: data.content.type, verb: data.content.verb, height: data.content.height});
		// });*/
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('appId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"instagram","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/instagram","pluginUri":"plugins\/instagram","customConfiguration":null};
PluginWrapper._config.id = 'instagram';
PluginWrapper._config.baseUri = "plugins\/instagram";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/instagram\/main.png";
PluginWrapper._config.template = "<style>\n#{{id}}_instafeed {\n\tlist-style:none;\n\tpadding: 0;\n\tmargin-right: -{{content.imgMargin}}px;\n\tmargin-bottom: -{{content.imgMargin}}px;\n\tdisplay: flex;\n\tjustify-content: {{content.alignment}};\n\tflex-wrap: wrap;\n}\n#{{id}}_instafeed li {\n\tdisplay: inline-block;\n\twidth: {{content.imgSize}}px;\n\theight: {{content.imgSize}}px;\n\tmargin-right: {{content.imgMargin}}px;\n\tmargin-bottom: {{content.imgMargin}}px;\n}\n{{#content.imgCrop}}\n#{{id}}_instafeed li a {\n\tdisplay: block;\n\tbackground-size: cover;\n\tbackground-position: center center;\n\twidth: 100%;\n\theight: 100%;\n}\n{{\/content.imgCrop}}\n{{^content.imgCrop}}\n#{{id}}_instafeed li a img {\n\twidth: 100%;\n\theight: auto;\n}\n{{\/content.imgCrop}}\n#{{id}}_preloader {\n\tfont-size: 28px;\n}\n#{{id}}_state {\n\tdisplay: block;\n\tfont-size: 16px;\n}\n#{{id}}_container {\n\tdisplay: block;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n}\n#{{id}}_preloader {\n\tdisplay: none;\n}\n<\/style>\n<span id=\"{{id}}_preloader\" class=\"fa fa-pulse fa-spinner wb-prevent-layout-click\"><\/span>\n<span id=\"{{id}}_state\" class=\"alert alert-warning wb-prevent-layout-click\" style=\"display: none;\"><\/span>\n<div id=\"{{id}}_container\" class=\"wb-prevent-layout-click\">\n\t<ul id=\"{{id}}_instafeed\"><\/ul>\n<\/div>\n<script>\n\t(function() {\n\t\tvar shuffle = ('{{content.shuffle}}' === '1' || '{{content.shuffle}}' === 'true');\n\t\tvar count = {{content.images}};\n\t\tvar stateElem = $('#{{id}}_state');\n\t\tvar accessToken = '{{content.accessToken}}';\n\t\tif (!accessToken) accessToken = '';\n\t\tvar userId = '{{content.userId}}';\n\t\tif (!userId) userId = '';\n\t\tvar preloader = $('#{{id}}_preloader');\n\t\t\n\t\tvar setLoading = function(loading) {\n\t\t\tif (loading) {\n\t\t\t\tpreloader.show();\n\t\t\t} else {\n\t\t\t\tpreloader.hide();\n\t\t\t}\n\t\t};\n\t\tvar setMessage = function(message) {\n\t\t\tstateElem.text(message);\n\t\t\tif (message) {\n\t\t\t\tstateElem.show();\n\t\t\t} else {\n\t\t\t\tstateElem.hide();\n\t\t\t}\n\t\t}\n\t\tvar refreshToken = function(completeCallback) {\n\t\t\tif (!userId || !accessToken) {\n\t\t\t\tsetMessage('You are not logged in.');\n\t\t\t} else {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: 'https:\/\/graph.instagram.com\/refresh_access_token',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgrant_type: 'ig_refresh_token',\n\t\t\t\t\t\taccess_token: accessToken\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(resp) {\n\t\t\t\t\t\tif (resp.access_token) accessToken = resp.access_token;\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tif (typeof(completeCallback) === 'function') completeCallback();\n\t\t\t\t\t},\n\t\t\t\t\terror: function(xhr, status) {\n\t\t\t\t\t\tvar resp = xhr.responseJSON ? xhr.responseJSON : null;\n\t\t\t\t\t\tconsole.log((resp && resp.error)\n\t\t\t\t\t\t\t\t? ('Instagram error refreshing token (' + resp.error.code + '): ' + resp.error.message)\n\t\t\t\t\t\t\t\t: 'Error refreshing token' + (status ? ': status code (' + status + ')' : ''));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tvar loadImages = function(completeCallback) {\n\t\t\tif (!userId || !accessToken) {\n\t\t\t\tsetMessage(\"{{'You must be loggedin' | tr}}\");\n\t\t\t} else {\n\t\t\t\tsetLoading(true);\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: 'https:\/\/graph.instagram.com\/me\/media',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taccess_token: accessToken,\n\t\t\t\t\t\tfields: 'media_url,permalink,timestamp,thumbnail_url'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(resp) {\n\t\t\t\t\t\tif (resp && resp.error) {\n\t\t\t\t\t\t\tsetMessage(\"{{'Instagram error' | tr}}\" + '(' + resp.error.code + '): ' + resp.error.message);\n\t\t\t\t\t\t} else if (!resp || !resp.data) {\n\t\t\t\t\t\t\tsetMessage(\"{{'Error code' | tr}} (1007)\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (resp.data && resp.data.length) {\n\t\t\t\t\t\t\t\tvar list = resp.data, i;\n\t\t\t\t\t\t\t\tlist.sort(function(a,b) {\n\t\t\t\t\t\t\t\t\tif (a.timestamp == b.timestamp) return 0;\n\t\t\t\t\t\t\t\t\treturn (a.timestamp < b.timestamp) ? 1 : -1;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (shuffle) {\n\t\t\t\t\t\t\t\t\tvar shuffleArray = function(a) {\n\t\t\t\t\t\t\t\t\t\tvar j, x, i;\n\t\t\t\t\t\t\t\t\t\tfor (i = a.length - 1; i > 0; i--) {\n\t\t\t\t\t\t\t\t\t\t\tj = Math.floor(Math.random() * (i + 1));\n\t\t\t\t\t\t\t\t\t\t\tx = a[i];\n\t\t\t\t\t\t\t\t\t\t\ta[i] = a[j];\n\t\t\t\t\t\t\t\t\t\t\ta[j] = x;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlist = shuffleArray(list);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$('#{{id}}_instafeed').html('');\n\t\t\t\t\t\t\t\tvar feed = $('#{{id}}_instafeed');\n\t\t\t\t\t\t\t\tfor (var i = 0, len = list.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\tif (i >= count) break;\n\t\t\t\t\t\t\t\t\tvar link = list[i].permalink;\n\t\t\t\t\t\t\t\t\tvar thumbUrl = list[i].thumbnail_url || list[i].media_url;\n\t\t\t\t\t\t\t\t\t{{#content.imgCrop}}\n\t\t\t\t\t\t\t\t\tfeed.append($('<li>').append($('<a>').attr('href', link).attr('target', '_blank').css('background-image', 'url(\"' + thumbUrl + '\")')));\n\t\t\t\t\t\t\t\t\t{{\/content.imgCrop}}\n\t\t\t\t\t\t\t\t\t{{^content.imgCrop}}\n\t\t\t\t\t\t\t\t\tfeed.append($('<li>').append($('<a>').attr('href', link).attr('target', '_blank').append($('<img>').attr('src', thumbUrl))));\n\t\t\t\t\t\t\t\t\t{{\/content.imgCrop}}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetMessage(\"{{'No images found.' | tr}}\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function(xhr, status) {\n\t\t\t\t\t\tvar resp = xhr.responseJSON ? xhr.responseJSON : null;\n\t\t\t\t\t\tsetMessage((resp && resp.error)\n\t\t\t\t\t\t\t\t? (\"{{'Instagram error' | tr}}\" + ' (' + resp.error.code + '): ' + resp.error.message)\n\t\t\t\t\t\t\t\t: \"{{'Error occured' | tr}}\" + (status ? ' (' + status + ')' : ''));\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tif (typeof(completeCallback) === 'function') completeCallback();\n\t\t\t\t\t\t{{^isPublished}}\n\t\t\t\t\t\tif (('{{id}}_loaded_deferred' in window) && window.{{id}}_loaded_deferred) {\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\twindow.{{id}}_loaded_deferred.resolve();\n\t\t\t\t\t\t\t}, 50);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{{\/isPublished}}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar timerFlag = '{{id}}_instagram_timer';\n\t\tvar inProgressFlag = '{{id}}_instagram_in_progress';\n\t\tif (timerFlag in window) {\n\t\t\tclearTimeout(window[timerFlag]);\n\t\t\twindow[inProgressFlag] = false;\n\t\t}\n\t\twindow[timerFlag] = setTimeout(function() {\n\t\t\tif (!window[inProgressFlag]) {\n\t\t\t\twindow[inProgressFlag] = true;\n\t\t\t\trefreshToken(function() {\n\t\t\t\t\tloadImages(function() {\n\t\t\t\t\t\twindow[inProgressFlag] = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}, 250);\n\t})();\n<\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
require(['UIButton', 'SizeSelector', 'HAlignSelector', 'CheckBox', 'ui/StaticTextControl', 'element/PropertyType'], function (UIButton, SizeSelector, HAlignSelector, CheckBox, StaticTextControl, PropertyTypeModule) {
if (PropertyTypeModule === null) return;
var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
var PropertyType = PropertyTypeModule.PropertyType;
var pluginData;
var sessUser = '';
var thisSelf;


var instagramText = new PropertyType("instagram/Text", PropertyTypeAccess.User, true, '', StaticTextControl.StaticTextControl, null, {
	value: __('Logged in as: ' + sessUser)
});
var instagramLogin = new PropertyType("instagram/Login", PropertyTypeAccess.User, true, __('Connect with Instagram'), UIButton.UIButton, null);
var instagramLogout = new PropertyType("instagram/Logout", PropertyTypeAccess.User, true, __('Sign Out'), UIButton.UIButton);

var instagramPostNumber = new PropertyType("settings/instagramPostNumber", PropertyTypeAccess.User, true, __("Items"), SizeSelector.SizeSelector, null, {helpText: __('Number of items to show') ,min: 1, max: 25}).inline(6);
var instagramImageSize = new PropertyType("settings/instagramImageSize", PropertyTypeAccess.User, true, __("Image size"), SizeSelector.SizeSelector, null, {min: 150, max: 640}).inline(6);
var instagramImageMargin = new PropertyType("settings/instagramImageMargin", PropertyTypeAccess.User, true, __("Image margin"), SizeSelector.SizeSelector, null, {min: 0}).inline(6);
var instagramImageAlign = new PropertyType("settings/instagramImageAlign", PropertyTypeAccess.User, true, __("Align"), HAlignSelector.HAlignSelector, null, {justify: false}).inline(6);
var instagramShuffle = new PropertyType("settings/instagramShuffle", PropertyTypeAccess.User, true, __("Shuffle"), CheckBox);
var instagramImageCrop = new PropertyType("settings/instagramImageCrop", PropertyTypeAccess.User, true, __("Use square images"), CheckBox);

PropertyType.setSortOrder('instagram', 1);

PluginWrapper.registerPlugin('instagram', {
	name: __('Instagram'),
	icon: 'ico-pl-instagram',
	element: {
		minSize: {width: 140, height: 140},
		defaultSize: {width: 910, height: 600},
		resizable: true
	},

	properties: [
		{
			id: 'text',
			type: instagramText,
			label: __("Text"),
			get: function(data) { return data.content.text; },
			set: function(value, data) {
			  data.content.text = value;
			},
			uiComponentOptions: function (elem, opts) {
				let loginBlock = $('div[data-property-type="instagram/Text"]');
				if (loginBlock.length) {
					loginBlock.find('.wb-static-text').html('Logged in as <strong>' + sessUser + '</strong>');
				}

				return {
				  visible: sessUser !== '',
				}
			  },
		},
		{
			id: 'login',
			type: instagramLogin,
			label: __("Login"),
			get: function(data) { return data.content.login; },
			set: function(value, data) {
			  data.content.login = value;
			},
			uiComponentOptions: function (elem, opts) {
				return {
					icon: 'fa fa-instagram',
					buttonWidth: 100,
					visible: sessUser === '',
					click: () => {
						let buttonLogin = $('button[data-property-type="instagram/Login"]');
						buttonLogin.setLoading(true);
						var w = 760, h = 800,
						left = parseInt((screen.availWidth - w) / 2),
						top = parseInt((screen.availHeight - h) / 2);
						thisSelf.pluginScoped.loginWindow = window.open(wb_builder.baseUrl + 'instagram', 'Instagram', 'width=' + w + ',height=' + h + ',left=' + left + ',top=' + top);

						var timer = setInterval(function() {
							if (thisSelf.pluginScoped.loginWindow.closed) {
								buttonLogin.setLoading(false);
								clearInterval(timer);
							}
						}, 500);

						thisSelf.pluginScoped.waitForSessionData(
							function(sessData) {
								sessUser = (sessData && sessData.userName) ? sessData.userName : '';
								buttonLogin.setLoading(false);
								pluginData.content.accessToken = sessData.accessToken;
								pluginData.content.userId = sessData.userId;
								pluginData.content.userName = sessData.userName;
								thisSelf.updateLoginBlock();
							},
							(error) => {
								buttonLogin.setLoading(false);
								setTimeout(function() { alert(error); }, 50);
							}
						);

					}
				}
			  },
		},
		{
			id: 'logout',
			type: instagramLogout,
			label: __("Logout"),
			get: function(data) { return data.content.logout; },
			set: function(value, data) {
			  data.content.logout = value;
			},
			uiComponentOptions: function (elem, opts) {
				return {
					icon: 'fa fa-instagram',
					buttonWidth: 100,
					visible: sessUser !== '',
					click: () => {
						let buttonLogout = $('button[data-property-type="instagram/Logout"]');
						buttonLogout.setLoading(true);
						thisSelf.pluginScoped.logout(() => {
							buttonLogout.setLoading(false);
							pluginData.content.accessToken = null;
							pluginData.content.userId = null;
							pluginData.content.userName = null;
							sessUser = '';
							thisSelf.updateLoginBlock(true);
						});
					}
				}
			  },
		},
		{
			id: 'images',
			type: instagramPostNumber,
			label: __("Post number"),
			get: function(data) { return data.content.images; },
			set: function(value, data) {
			  data.content.images = value;
			}
		},
		{
			id: 'imgSize',
			type: instagramImageSize,
			label: __("Image size"),
			get: function(data) { return data.content.imgSize; },
			set: function(value, data) {
			  data.content.imgSize = value;
			}
		},
		{
			id: 'imgMargin',
			type: instagramImageMargin,
			label: __("Image margin"),
			get: function(data) { return data.content.imgMargin; },
			set: function(value, data) {
			  data.content.imgMargin = value;
			}
		},
		{
			id: 'alignment',
			type: instagramImageAlign,
			label: __("Alignment"),
			get: function(data) { return data.content.alignment; },
			set: function(value, data) {
			  data.content.alignment = value;
			}
		},
		{
			id: 'shuffle',
			type: instagramShuffle,
			label: __("Shuffle"),
			get: function(data) { return data.content.shuffle; },
			set: function(value, data) {
			  data.content.shuffle = value;
			}
		},
		{
			id: 'imgCrop',
			type: instagramImageCrop,
			label: __("Use square images"),
			get: function(data) { return data.content.imgCrop; },
			set: function(value, data) {
			  data.content.imgCrop = value;
			}
		},
	],


	pluginScoped: {
		sessionData: null,
		
		getSessionData: function(callback) {
			if (typeof(callback) !== 'function') return;
			if (!this.sessionData) {
				$.get(wb_builder.baseUrl + 'instagram/get-data', function(resp) {
					if (resp && resp.data) thisSelf.sessionData = resp.data;
					callback(thisSelf.sessionData, ((resp && resp.error) ? resp.error : null));
				});
			} else {
				callback(this.sessionData);
			}
		},
		clearSessionData: function() {
			this.sessionData = null;
		},
		waitForSessionData: function(succClb, errClb) {
			var self = this;
			this.getSessionData(function(sessData, error) {
				if (sessData) {
					sessUser = (sessData && sessData.userName) ? sessData.userName : '';
					if (typeof(succClb) === 'function') succClb(sessData);
				} else {
					if (error) {
						if (typeof(errClb) === 'function') errClb(error);
					} else {
						setTimeout(function() {
							self.clearSessionData();
							self.waitForSessionData(succClb, errClb);
						}, 1000);
					}
				}
			});
		},
		logout: function(callback) {
			var self = this;
			$.get(wb_builder.baseUrl + 'instagram/logout', function(resp) {
				if (resp && resp.ok) {
					self.sessionData = null;
					if (typeof(callback) === 'function') callback();
				}
			});
		}
	},
	
	updateLoginBlock: function(forseLogout = false) {
		this.pluginScoped.getSessionData(function(sessData) {
			if (!forseLogout) {
				sessUser = (sessData && sessData.userName) ? sessData.userName : '';
			}

			let loginBlock = $('div[data-property-type="instagram/Text"]');
			let buttonLogin = $('button[data-property-type="instagram/Login"]');
			let buttonLogout = $('button[data-property-type="instagram/Logout"]');

			if (sessData && !forseLogout) {
				loginBlock.find('.wb-static-text').html('Logged in as <strong>' + sessData.userName + '</strong>');
				loginBlock.show();
				buttonLogin.hide();
				buttonLogout.show();
			} else {
				loginBlock.hide();
				buttonLogin.show();
				buttonLogout.hide();
			}

			thisSelf.updateElement()
		});
	},
	
	loadAction: function (data) {
		if (!data.content.images) data.content.images = 6;
		data.content.images = Math.min(parseInt(data.content.images), 25);
		if (!data.content.imgSize) data.content.imgSize = '200';
		if (!data.content.imgMargin) data.content.imgMargin = '10';
		if (!data.content.alignment) data.content.alignment = 'left';
		if (data.content.shuffle === undefined) data.content.shuffle = false;
		if (data.content.imgCrop === undefined) data.content.imgCrop = false;
	},
	
	loadedAction: function(data, elem) {
		pluginData = data;
		this.updateLoginBlock();
		window[data.id + '_loaded_deferred'] = this.loadDeferred;
		thisSelf = this;
		if (!data.content.accessToken || data.content.accessToken.length < 100) { // old format
			this.pluginScoped.getSessionData(function(sessData) {
				if (sessData) {
					data.content.accessToken = sessData.accessToken;
					data.content.userId = sessData.userId;
					data.content.userName = sessData.userName;
				} else {
					data.content.accessToken = null;
					data.content.userId = null;
					data.content.userName = null;
				}
				thisSelf.updateElement();
			});
		}

		$('button[data-property-type="instagram/Login"]').css('margin-top', '0px');
	},
	
	supportsAutoWidth: function() {
		return true;
	},
	
	supportsAutoHeight: function() {
		return true;
	},
	
	loadDeferred: $.Deferred(),
	
	onLoaded: function() {
		return this.loadDeferred;
	}
})
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"skrill","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/skrill","pluginUri":"plugins\/skrill","customConfiguration":null};
PluginWrapper._config.id = 'skrill';
PluginWrapper._config.baseUri = "plugins\/skrill";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/skrill\/main.png";
PluginWrapper._config.template = "<form action=\"{{#content.demo}}https:\/\/www.skrill.com\/app\/test_payment.pl{{\/content.demo}}{{^content.demo}}https:\/\/pay.skrill.com{{\/content.demo}}\" method=\"post\" data-gateway-id=\"Skrill\" {{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"pay_to_email\" value=\"{{content.email}}\"\/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\"\/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\"\/>\n\t<input type=\"hidden\" name=\"detail1_description\" value=\"{{content.description}}\"\/>\n\t<input type=\"hidden\" name=\"detail1_text\" value=\"{{content.text}}\"\/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"status_url\" value=\"{callbackUrl}\"\/>\n\t<input type=\"hidden\" name=\"return_url\" value=\"{returnUrl}\"\/>\n\t<input type=\"hidden\" name=\"cancel_url\" value=\"{cancelUrl}\"\/>\n\t<input type=\"hidden\" name=\"transaction_id\" value=\"{transactionId}\"\/>\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/skrill/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#811E68',
			button_border: {
				color: '#fff',
				style: 'none',
				weight: 1,
				css: { border: '1px solid #fff' },
				cssRaw: 'border: 1px solid #fff'
			},
			logo: 'skrill_white.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#c781b8'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'skrill_color.svg', name: 'coloured'},
			{id: 'skrill_black.svg', name: 'black'},
			{id: 'skrill_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Skrill',
	id: 'skrill',
	pageUrl: 'https://www.skrill.com/',
	keyFieldId: 'email',
	keyField2Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Email')},
			{type: 'TextField', placeholder: __('Email'), id: 'key'},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key2', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'ht_title',
	nameFieldId: 'text,description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['email', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'skrill', true),
	logos: Globals.getLogosList(),
	defaultLogo: 'skrill_black.svg',
});

PluginWrapper.registerPlugin('skrill', {
	name: 'Skrill',
	element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'email', type: 'SkrillEmail', helpText: __('The email address of your Skrill'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.email ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Email')));
				return opts;
			},
			get: function(data) { return data.content.email; },
			set: function(value, data) {
				data.content.email = value;
			}
		},
		{id: 'description', type: 'SkrillDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'text', type: 'SkrillText',
			get: function(data) { return data.content.text; },
			set: function(value, data) {
				data.content.text = value;
			}
		},
		{id: 'amount', type: 'SkrillAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'SkrillCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'SkrillDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'skrill'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Email'), helpText: __('The email address of your Skrill'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.email ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Email')));
							return opts;
						},},
					{type: 'TextField', id: 'email'}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
					{type: 'TextField', id: 'description'}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Detailed text')},
						{type: 'TextField', id: 'text'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'},
							{id: '#GBP', name: 'GBP', value: 'GBP'},
							{id: '#AED', name: 'AED', value: 'AED'},
							{id: '#AUD', name: 'AUD', value: 'AUD'},
							{id: '#BGN', name: 'BGN', value: 'BGN'},
							{id: '#CAD', name: 'CAD', value: 'CAD'},
							{id: '#CHF', name: 'CHF', value: 'CHF'},
							{id: '#CZK', name: 'CZK', value: 'CZK'},
							{id: '#DKK', name: 'DKK', value: 'DKK'},
							{id: '#HKD', name: 'HKD', value: 'HKD'},
							{id: '#HRK', name: 'HRK', value: 'HRK'},
							{id: '#HUF', name: 'HUF', value: 'HUF'},
							{id: '#ILS', name: 'ILS', value: 'ILS'},
							{id: '#INR', name: 'INR', value: 'INR'},
							{id: '#ISK', name: 'ISK', value: 'ISK'},
							{id: '#JOD', name: 'JOD', value: 'JOD'},
							{id: '#JPY', name: 'JPY', value: 'JPY'},
							{id: '#KRW', name: 'KRW', value: 'KRW'},
							{id: '#MAD', name: 'MAD', value: 'MAD'},
							{id: '#MYR', name: 'MYR', value: 'MYR'},
							{id: '#NOK', name: 'NOK', value: 'NOK'},
							{id: '#NZD', name: 'NZD', value: 'NZD'},
							{id: '#OMR', name: 'OMR', value: 'OMR'},
							{id: '#PLN', name: 'PLN', value: 'PLN'},
							{id: '#QAR', name: 'QAR', value: 'QAR'},
							{id: '#RON', name: 'RON', value: 'RON'},
							{id: '#RSD', name: 'RSD', value: 'RSD'},
							{id: '#SAR', name: 'SAR', value: 'SAR'},
							{id: '#SEK', name: 'SEK', value: 'SEK'},
							{id: '#SGD', name: 'SGD', value: 'SGD'},
							{id: '#SKK', name: 'SKK', value: 'SKK'},
							{id: '#THB', name: 'THB', value: 'THB'},
							{id: '#TND', name: 'TND', value: 'TND'},
							{id: '#TRY', name: 'TRY', value: 'TRY'},
							{id: '#TWD', name: 'TWD', value: 'TWD'},
							{id: '#ZAR', name: 'ZAR', value: 'ZAR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'skrill')
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.amount.setText(data.content.amount);
		fields.description.setText(data.content.description);
		fields.text.setText(data.content.text);
		fields.email.setText(data.content.email);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.amount = fields.amount.getText();
		data.content.description = fields.description.getText();
		data.content.text = fields.text.getText();
		data.content.email = fields.email.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'ht_title': 'button_label',
			'border': 'button_border',
			'background': 'button_color',
			'fontFamily': 'font_family',
			'fontSize': 'font_size',
			'fontColor': 'label_color'
		});
		if (!data.content.amount) data.content.amount = '9.99';
		if (!data.content.currency) data.content.currency = 'EUR';
		if (!data.content.text) data.content.text = __('Skrill payment text');
		if (!data.content.description) data.content.description = __('Product description');
		if (!data.content.email) data.content.email = '';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['logo.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'skrill_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('email');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"expresspay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/expresspay","pluginUri":"plugins\/expresspay","customConfiguration":null};
PluginWrapper._config.id = 'expresspay';
PluginWrapper._config.baseUri = "plugins\/expresspay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/expresspay\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Expresspay\" method=\"POST\" accept-charset=\"utf-8\" {{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"redirectUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t<input name=\"amount\" value=\"{{content.sum}}\" type=\"hidden\" \/>\n\t<input name=\"currency\" value=\"{{content.currency}}\" type=\"hidden\" \/>\n\t<input name=\"description\" value=\"{{content.orderDetails}}\" type=\"hidden\" \/>\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"{{id}}_submit\" value=\"1\" \/>\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/expresspay/main.php';
PluginWrapper._config.active = false;

var Globals = {
	_settingsContent: null,
	_settingsDialog: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			var base_url = 'https://' + wb_builder.siteDomain + '/';
			var note = $('<p><strong>' + __('Note') + ':</strong>    '
					+ ' HTTPS ,      SSL '
					+ '     .<br />'
					+ '    <em>"    HTTPS"</em>'
					+ '    .</p>');
			var content = $('<div>').append('<p><strong>' + __('Page URL') + ':</strong> <a href="https://express-pay.by/" target="_blank">https://express-pay.by/</a></p>'
					+ '<p><strong>URL  :</strong><br />'
					+ '<pre>' + base_url + '0/store-callback/Expresspay' + '</pre></p>');
			content.prepend('<br>').prepend(note);
			Globals._settingsContent = content.html();
		}
		return Globals._settingsContent;
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'expresspay-logo.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 108,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'expresspay-logo.svg', name: 'logo'},
			{id: 'expresspay-logo-erip.svg', name: 'logo-erip'},
			{id: 'expresspay-logo-epos.svg', name: 'logo-epos'},
			{id: 'expresspay-logo-card.svg', name: 'logo-card'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: ' ',
	id: 'expresspay',
	keyFieldId: 'serviceId',
	keyField2Id: 'token',
	keyField3Id: 'secretWord',
	keyField4Id: 'secretWordForNotif',
	keyField5Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6, 6, 6, 6, 6, 6], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: ' '},
			{type: 'TextField', placeholder: ' ', id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: ' API'},
			{type: 'TextField', placeholder: ' API', id: 'key2'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: ' '},
			{type: 'TextField', placeholder: ' ', id: 'key3', password: true, css: {marginTop: 5}},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: '   '},
			{type: 'TextField', placeholder: '   ', id: 'key4', password: true, css: {marginTop: 5}},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key5', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'orderDetails',
	priceFieldId: 'sum',
	currencyFieldId: 'currency',
	globalVars: ['serviceId', 'token', 'secretWord', 'secretWordForNotif', 'demo'],
	useStylesInStoreCart: true,
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'expresspay', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('expresspay', {
	name: ' ',
	element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81},
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'serviceId', type: 'ExpresspayServiceId', helpText: '      " "   .',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.serviceId ? '' : ('open:' + __('Field "%s" is required').replace('%s', ' '));
				return opts;
			},
			get: function(data) { return data.content.serviceId; },
			set: function(value, data) {
				data.content.serviceId = value;
			}
		},
		{id: 'token', type: 'ExpresspayToken', helpText: '      " "   .',
			get: function(data) { return data.content.token; },
			set: function(value, data) {
				data.content.token = value;
			}
		},
		{id: 'secretWord', type: 'ExpresspaySecretWord', helpText: '   ,       ,      " ".',
			get: function(data) { return data.content.secretWord; },
			set: function(value, data) {
				data.content.secretWord = value;
			}
		},
		{id: 'sum', type: 'ExpresspayAmount', helpText: __('Amount to be transferred') + ', BYN',
			get: function(data) { return data.content.sum; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.sum = value;
			}
		},
		{id: 'currency', type: 'ExpresspayCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'ExpresspayDemo',
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'expresspay'),
	propertyDialog: {
		noScroll: false,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [6, 6], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: ' ', helpText: '      " "   .'},
						{type: 'TextField', id: 'serviceId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: ' API', helpText: '      " "   .'},
						{type: 'TextField', id: 'token'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: ' ', helpText: '   ,       ,      " ".'},
						{type: 'TextField', id: 'secretWord', password: true}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'orderDetails'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + __('BYN')},
						{type: 'TextField', id: 'sum'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'BYN', name: 'BYN'},
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15, }, children: [
					{type: 'VerticalLayout', children: [
						{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
							this.getElem().attr('title', __('For testing purpose without real payments'));
							this.getElem().tooltip({placement: 'right'});
						}}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'expresspay')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.serviceId.setText(data.content.serviceId);
		fields.token.setText(data.content.token);
		fields.secretWord.setText(data.content.secretWord);
		fields.orderDetails.setText(data.content.orderDetails);
		fields.sum.setText(data.content.sum);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data, elem);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.serviceId = fields.serviceId.getText();
		data.content.token = fields.token.getText();
		data.content.secretWord = fields.secretWord.getText();
		data.content.orderDetails = fields.orderDetails.getText();
		data.content.sum = fields.sum.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['serviceId', 'token', 'secretWord', 'demo'];
		if (!data.content.serviceId) data.content.serviceId = ''; // 2
		if (!data.content.token) data.content.token = ''; // a75b74cbcfe446509e8ee874f421bd64
		if (!data.content.secretWord) data.content.secretWord = '';
		if (!data.content.orderDetails) data.content.orderDetails = '';
		if (!data.content.sum) data.content.sum = '1';
		if (!data.content.currency) data.content.currency = 'BYN';
		if (data.content.demo === undefined) data.content.demo = true;
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('serviceId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"redsys","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/redsys","pluginUri":"plugins\/redsys","customConfiguration":null};
PluginWrapper._config.id = 'redsys';
PluginWrapper._config.baseUri = "plugins\/redsys";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/redsys\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n{{{content.paymentGatewayButton}}}\n{{\/isPublished}}\n{{#isPublished}}\n\t{{#content.store}}\n\t\t<form action=\"\" data-gateway-id=\"Redsys\" method=\"post\">\n\t\t\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" data-multiplier=\"100\" data-fixed-decimal=\"0\" \/>\n\t\t\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t\t\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\n\t\t\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t\t\t<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n\t\t\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n\t\t\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t\t\t{{{content.paymentGatewayButton}}}\n\t\t<\/form>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t\t{{{requireService}}}\n\t{{\/content.store}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/redsys/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'redsys_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'redsys_color.svg', name: 'coloured'}
		];
	},
};

ElementRegister.registerPaymentGateway({
	name: 'Redsys',
	id: 'redsys',
	pageUrl: 'http://www.redsys.es/',
	keyFieldId: 'name',
	keyField2Id: 'terminal',
	keyField3Id: 'merchantCode',
	keyField4Id: 'merchantPassword',
	keyField5Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [9,3,6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Name')},
			{type: 'TextField', placeholder: __('Name'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Terminal')},
			{type: 'TextField', placeholder: __('Terminal'), id: 'key2'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Merchant Code')},
			{type: 'TextField', placeholder: __('Merchant Code'), id: 'key3', css: {marginTop: 5}},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Merchant Password')},
			{type: 'TextField', placeholder: __('Merchant Password'), id: 'key4', password: true, css: {marginTop: 5}},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key5', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['name', 'merchantCode', 'terminal', 'merchantPassword', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true)
});
PluginWrapper.registerPlugin('redsys', {
	name: 'Redsys',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'name', type: 'RedsysName',
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'terminal', type: 'RedsysTerminal',
			get: function(data) { return data.content.terminal; },
			set: function(value, data) {
				data.content.terminal = value;
			}
		},
		{id: 'merchantCode', type: 'RedsysMerchantCode',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantCode ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant Code')));
				return opts;
			},
			get: function(data) { return data.content.merchantCode; },
			set: function(value, data) {
				data.content.merchantCode = value;
			}
		},
		{id: 'merchantPassword', type: 'RedsysMerchantPassword',
			get: function(data) { return data.content.merchantPassword; },
			set: function(value, data) {
				data.content.merchantPassword = value;
			}
		},
		{id: 'description', type: 'RedsysDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'RedsysAmount', helpText: __('Amount to be transferred'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'RedsysCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'RedsysDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'redsys'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', spacing: 15, columnWeights: [9,3], columnWeightsSmall: [9,3], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Name')},
						{type: 'TextField', id: 'name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Terminal')},
						{type: 'TextField', id: 'terminal'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant Code'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantCode ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant Code')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantCode'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant Password')},
						{type: 'TextField', id: 'merchantPassword'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6,3,3], columnWeightsSmall: [6,3,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '840', name: 'USD'},
							{id: '978', name: 'EUR'},
							{id: '826', name: 'GBP'},
							{id: '032', name: 'ARS'},
							{id: '986', name: 'BRL'},
							{id: '124', name: 'CAD'},
							{id: '756', name: 'CHF'},
							{id: '152', name: 'CLP'},
							{id: '392', name: 'CNY'},
							{id: '170', name: 'COP'},
							{id: '356', name: 'INR'},
							{id: '484', name: 'MXN'},
							{id: '604', name: 'PEN'},
							{id: '949', name: 'TRY'},
							{id: '937', name: 'VEF'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef()
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		fields.name.setText(data.content.name);
		fields.terminal.setText(data.content.terminal);
		fields.merchantCode.setText(data.content.merchantCode);
		fields.merchantPassword.setText(data.content.merchantPassword);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		data.content.name = fields.name.getText();
		data.content.terminal = fields.terminal.getText();
		data.content.merchantCode = fields.merchantCode.getText();
		data.content.merchantPassword = fields.merchantPassword.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__t = window.assist_translations;
		if (!data.content.name) data.content.name = '';
		if (!data.content.terminal) data.content.terminal = '';
		if (!data.content.merchantCode) data.content.merchantCode = '';
		if (!data.content.merchantPassword) data.content.merchantPassword = '';
		if (!data.content.description) data.content.description = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.currency) data.content.currency = '840';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['redsys.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'redsys_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantCode');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"gplus_badge","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/gplus_badge","pluginUri":"plugins\/gplus_badge","customConfiguration":null};
PluginWrapper._config.id = 'gplus_badge';
PluginWrapper._config.baseUri = "plugins\/gplus_badge";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/gplus_badge\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_gp_comunity\"><\/div>\n{{#isPublished}}\n<script type=\"text\/javascript\">\n\twindow.___gcfg = {parsetags: 'explicit'};\n<\/script>\n<script src=\"https:\/\/apis.google.com\/js\/platform.js\" type=\"text\/javascript\"><\/script>\n{{\/isPublished}}\n<script type=\"text\/javascript\">\n\tif (window.gapi) {\n\t\twindow.gapi.{{{content.btype}}}.render('{{id}}_gp_comunity', {\n\t\t\tlayout: '{{content.mode}}',\n\t\t\tshowcoverphoto: '{{content.cover}}',\n\t\t\tshowtagline: '{{content.tagline}}',\n\t\t\ttheme: '{{content.theme}}',\n\t\t\twidth: '{{width}}',\n\t\t\thref: 'https:\/\/plus.google.com\/{{{content.community}}}{{content.profileId}}'\n\t\t});\n\t}\n<\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('gplus_badge', {
	name: 'Badge',
	noButton: true,
	element: {
		minSize: {width: 250, height: 100},
		defaultSize: {width: 400, height: 100},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('ID'),
						helpText: __('Please type profile, page or community ID and check respective badge type')
					},
					{type: 'TextField', id: 'profileId'}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Badge type')},
						{type: 'RadioBox', id: 'btype0', label: __('Profile badge'), group: 'btype'},
						{type: 'RadioBox', id: 'btype1', label: __('Google+ page badge'), group: 'btype'},
						{type: 'RadioBox', id: 'btype2', label: __('Community badge'), group: 'btype'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Layout'), helpText: __('Orientation of the badge')},
						{type: 'RadioBox', id: 'mode0', label: __('Landscape'), group: 'mode'},
						{type: 'RadioBox', id: 'mode1', label: __('Portrait'), group: 'mode'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Theme'),
							helpText: __('Color theme of the badge. Light for light pages and dark theme for dark pages')
						},
						{type: 'RadioBox', id: 'light', label: __('Light'), group: 'theme'},
						{type: 'RadioBox', id: 'dark', label: __('Dark'), group: 'theme'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [4, 8], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Cover photo'), helpText: __('Show cover photo if exists')},
						{type: 'RadioBox', id: 'cover0', label: __('Yes'), group: 'cover'},
						{type: 'RadioBox', id: 'cover1', label: __('No'), group: 'cover'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Tag line'), helpText: __('Show tag line if exists')},
						{type: 'RadioBox', id: 'tagline0', label: __('Yes'), group: 'tagline'},
						{type: 'RadioBox', id: 'tagline1', label: __('No'), group: 'tagline'}
					]}
				]}
			]}
		]
	},

	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://apis.google.com/js/platform.js', function() {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		}
	},
	resizeTimeout: null,

	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function() {
				self.resizeTimeout = null;
				self.updateElement();
			}, 2000);
		}
	},
	openAction: function(fields, data, elem) {
		fields.profileId.setText(data.content.profileId);
		
		fields.mode0.setValue(data.content.mode === 'landscape');
		fields.mode1.setValue(data.content.mode === 'portrait');

		fields.btype0.setValue(data.content.btype === 'person');
		fields.btype1.setValue(data.content.btype === 'page');
		fields.btype2.setValue(data.content.btype === 'community');

		fields.cover0.setValue(data.content.cover === 'true');
		fields.cover1.setValue(data.content.cover === 'false');
		
		fields.tagline0.setValue(data.content.tagline === 'true');
		fields.tagline1.setValue(data.content.tagline === 'false');

		fields.light.setValue(data.content.theme === 'light');
		fields.dark.setValue(data.content.theme === 'dark');
	},
	applyAction: function(fields, data, elem) {
		data.content.profileId = fields.profileId.getText();
		if (fields.mode0.getValue()) data.content.mode = 'landscape';
		if (fields.mode1.getValue()) data.content.mode = 'portrait';

		if (fields.btype0.getValue()) data.content.btype = 'person';
		if (fields.btype1.getValue()) data.content.btype = 'page';
		if (fields.btype2.getValue()) data.content.btype = 'community';
		if (data.content.btype === 'community') {
			data.content.community = 'communities/';
		} else {
			data.content.community = '';
		}
		if (fields.light.getValue()) data.content.theme = 'light';
		if (fields.dark.getValue()) data.content.theme = 'dark';

		if (fields.cover0.getValue()) data.content.cover = 'true';
		if (fields.cover1.getValue()) data.content.cover = 'false';

		if (fields.tagline0.getValue()) data.content.tagline = 'true';
		if (fields.tagline1.getValue()) data.content.tagline = 'false';
		if (data.content.mode === 'portrait') {
			if (data.content.cover === 'true') {
				this.setSize('', 400);
			} else {
				this.setSize('', 245);
			}
		}
		if (data.content.mode === 'landscape') {
			this.setSize('', 100);
		}
	},
	loadAction: function(data) {
		if (!data.content.mode) data.content.mode = 'landscape';
		if (!data.content.btype) data.content.btype = 'page';
		if (!data.content.theme) data.content.theme = 'light';
		if (!data.content.cover) data.content.cover = 'false';
		if (!data.content.tagline) data.content.tagline = 'false';

		if (!data.content.profileId) data.content.profileId = '+googleplus';
		if (data.content.btype === 'community') {
			data.content.community = 'communities/';
		} else {
			data.content.community = '';
		}
	},
	loadedAction: function(data, elem) {
		window.___gcfg = {parsetags: 'explicit'};
		this.pluginScoped.addListener(this, function() {
			window.gapi[data.content.btype].render(data.id + '_gp_comunity', {
				layout: data.content.mode,
				showcoverphoto: data.content.cover,
				showtagline: data.content.tagline,
				theme: data.content.theme,
				width: data.width,
				href: 'https://plus.google.com/' + data.content.community + data.content.profileId
			});
		});
	},

	saveAction: function(data, elem) {
		// TODO: save data
	}

});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"facebook_comment","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/facebook_comment","pluginUri":"plugins\/facebook_comment","customConfiguration":null};
PluginWrapper._config.id = 'facebook_comment';
PluginWrapper._config.baseUri = "plugins\/facebook_comment";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/facebook_comment\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_fb_comment_wrap\" class=\"fb_comment_wrap wb-prevent-layout-click\" style=\"width:100%; height:{{height}}px; overflow-y: auto; overflow-x: hidden;\">\n\t<div class=\"alert\">\n\t\t{{\"loading...\" | tr}}<br>\n\t\t<small style=\"color: #999;\">({{\"you must be logged in to Facebook to see comments\" | tr}}).<\/small>\n\t<\/div>\n\t<div id=\"fb-root\"><\/div>\n\t<div id=\"{{id}}_fb_comments\" class=\"fb-comments\" data-href=\"{{content.finalPageUrl}}\" data-order-by=\"{{content.order_by}}\" data-colorscheme=\"{{content.colorscheme}}\" data-numposts=\"{{content.postNumber}}\" data-width=\"100%\"><\/div>\n<\/div>\n<script>\n\t(function() {\n\t\t(function (d, s, id) {\n\t\t\tvar js, fjs = d.getElementsByTagName(s)[0];\n\t\t\tif (d.getElementById(id))\n\t\t\t\treturn;\n\t\t\tjs = d.createElement(s);\n\t\t\tjs.id = id;\n\t\t\tjs.async = false;\n\t\t\tjs.src = \"\/\/connect.facebook.net\/{{langLocale}}\/sdk.js#xfbml=1&version=v2.6\";\n\t\t\tfjs.parentNode.insertBefore(js, fjs);\n\t\t}(document, 'script', 'facebook-jssdk'));\n\n\t\tvar elem = $(\"#{{id}}_fb_comments\"),\n\t\t\talrt = $('#{{id}}_fb_comment_wrap').children('.alert'),\n\t\t\talrtShown = false;\n\t\tvar loaded = function() {\n\t\t\treturn parseInt(elem.children('span').css('height')) > 0;\n\t\t};\n\t\tvar timer = setInterval(function() {\n\t\t\tvar isLoaded = loaded();\n\t\t\tif (isLoaded && alrtShown) {\n\t\t\t\talrt.hide();\n\t\t\t\talrtShown = false;\n{{#isPublished}}\n\t\t\t\talrt.detach();\n\t\t\t\talrt.remove();\n\t\t\t\talrt = null;\n\t\t\t\tclearInterval(timer);\n{{\/isPublished}}\n\t\t\t} else if (!isLoaded && !alrtShown) {\n\t\t\t\talrt.show();\n\t\t\t\talrtShown = true;\n\t\t\t}\n\t\t}, 100);\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('facebook_comment', {
	name: 'Comments',
	icon: 'ico-pl-facebook_comment',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 500, height: 400},
		resizable: true,
		renderOnce: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [7, 5], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Link'), helpText:__('URL address of your link, where this comments box will be post'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.pageUrl ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Link')));
								return opts;
							}},
							{type: 'TextField', id: 'pageUrl', placeholder: 'https://developers.facebook.com/docs/plugins/comments'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Number of items to show')},
							{type: 'SizeSelector', id: 'postNumber', max:20}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Color Scheme'), helpText: __('The color scheme used by the comments plugin')},
							{type: 'DropdownBox', id: 'colorscheme', options: [
								{id: 'light', name: 'light'},
								{id: 'dark', name: 'dark'}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Comments Sorting'), helpText: __('The order to use when displaying comments')},
							{type: 'DropdownBox', id: 'order_by', options: [
								//{id: 'social', name: 'social'},
								{id: 'reverse_time', name: 'reverse_time'},
								{id: 'time', name: 'time'}
							]}
						]}
					]}
				]}
			]}
		]
	},
	pluginScoped: {
		pageUrlPlaceholder: 'https://developers.facebook.com/docs/plugins/comments',
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (typeof func === 'function') {
				if (this.scriptReady) {
					func.call(inst);
				} else {
					this.listeners.push({inst: inst, func: func});
				}
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://connect.facebook.net/en_US/sdk.js', function() {
					FB.init({
						status     : true,
						xfbml      : true,
						version    : 'v2.6'
					});
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		}
	},
	batchUpdates: true,
	properties: [
		{id: 'link', type: 'FacebookCommentLink', helpText:__('URL address of your link, where this comments box will be post'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.pageUrl ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('URL')));
				return opts;
			},
			get: function(data) { return data.content.pageUrl; },
			validate: function(value) {
				if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)/.test(value) || /^\d{1,}$/.test(value) || value == '') {
					this.displayErrorMessage(false);
					return '';
				}
				else {
					this.setErrorMessage(__('Invalid URL'));
					return __('Invalid URL');
				}
			},
			set: function(value, data) {
				data.content.pageUrl = value;
				this.updateFinalPageUrl(data);
				this.updateHTML(data);
			}
		},
		{id: 'postNumber', type: 'FacebookCommentPostNumber',
			get: function(data) { return data.content.postNumber; },
			set: function(value, data) {
				data.content.postNumber = value;
				this.updateHTML(data);
			}
		},
		{id: 'colourScheme', type: 'FacebookCommentColourScheme',
			get: function(data) { return data.content.colorscheme; },
			set: function(value, data) {
				data.content.colorscheme = value;
				this.updateHTML(data);
			}
		},
		{id: 'commentSorting', type: 'FacebookCommentSorting',
			get: function(data) { return data.content.order_by; },
			set: function(value, data) {
				data.content.order_by = value;
				this.updateHTML(data);
			}
		},
	],
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
				elem.children('.fb_comment_wrap').css({height:data.height});
				FB.XFBML.parse(elem.get(0));
			}, 1000);
		}
	},
	updateFinalPageUrl: function(data) {
		data.content.finalPageUrl = /^http(s)*:\/\//.test(data.content.pageUrl) ? data.content.pageUrl : this.pluginScoped.pageUrlPlaceholder;
	},
	updateHTML: function(data) {
		var elem = $('#' + data.id + ', [data-id="' + data.id + '"]').eq(0);
		elem = elem.get(0);
		var fbclass = $(elem).find('.wb_content').find('.fb_comment_wrap').find('.fb-comments');
		fbclass.attr({'data-width':data.width,'data-href':data.content.finalPageUrl,'data-numposts': data.content.postNumber,'data-colorscheme':data.content.colorscheme, 'data-order-by':data.content.order_by});
		FB.XFBML.parse(elem);
		// plugin.elem.find('.fb-comments').attr({'data-width':data.width,'data-href':data.content.finalPageUrl,'data-numposts': data.content.postNumber,'data-colorscheme':data.content.colorscheme, 'data-order-by':data.content.order_by});
	},
	openAction: function(fields, data, elem) {
		var itm;
		itm = fields.colorscheme.getItemById('#' + data.content.colorscheme);
		fields.colorscheme.selectItem(itm);
		itm = fields.order_by.getItemById('#' + data.content.order_by);
		fields.order_by.selectItem(itm);
		fields.pageUrl.setText(data.content.pageUrl);
		fields.postNumber.setValue(data.content.postNumber);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		itm = fields.colorscheme.getSelectedItem();
		data.content.colorscheme = itm.getOriginal().value;
		itm = fields.order_by.getSelectedItem();
		data.content.order_by = itm.getOriginal().value;
		data.content.pageUrl = fields.pageUrl.getText();
		this.updateFinalPageUrl(data);
		data.content.postNumber = fields.postNumber.getValue();
		this.updateHTML(data);
	},
	loadAction: function (data) {
		if (!data.content.pageUrl) data.content.pageUrl = '';
		if (!data.content.postNumber) data.content.postNumber = '5';
		if (!data.content.colorscheme || /^#/.test(data.content.colorscheme))
			data.content.colorscheme = 'light';
		if (!data.content.order_by || /^#/.test(data.content.order_by) || data.content.order_by === 'social')
			data.content.order_by = 'reverse_time';
		this.updateFinalPageUrl(data);
	},
	loadedAction: function(data, elem) {
		this.pluginScoped.addListener(this, function() {
			this.updateHTML(data);
		});
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('link');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"vk_video","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/vk_video","pluginUri":"plugins\/vk_video","customConfiguration":null};
PluginWrapper._config.id = 'vk_video';
PluginWrapper._config.baseUri = "plugins\/vk_video";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/vk_video\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_vk_video\" src=\"{{content.finalGroupId}}\" width=\"100%\" height=\"100%\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
// <iframe src="https://vk.com/video_ext.php?oid=-22822305&id=456241030&hash=8500e891e0681d49&hd=2" width="853" height="480" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen></iframe>

PluginWrapper.registerPlugin('vk_video', {
	name: __('VK video'),
	icon: 'ico-pl-vk_video',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true,
		supportsFullWidth: true,
		supportsFullHeight: true,
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Video embed code'),
						uiComponentOptions: function(data, opts) {
							opts.helpText = __('Vkontakte share video url with format https://vk.com/video_ext.php{video_id}') + ".\n " + this.pluginScoped.invalidUrlError;
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Vkontakte share URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'groupId', uiComponentOptions: function(data, opts) {
						opts.placeholder = this.pluginScoped.defaultValue;
						return opts;
					}}
				]},
			]}
		]
	},
	batchUpdates: true,
	properties: [
		{id: 'groupId', type: 'VkGroupId',
			uiComponentOptions: function(data, opts) {
				opts.helpText = __('Vkontakte share video url with format https://vk.com/video_ext.php{video_id}') + ".\n " + this.pluginScoped.invalidUrlError;
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Vkontakte share URL')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.groupId = url ? url : value;
				data.content.finalGroupId = url ? data.content.groupId : this.pluginScoped.defaultValue;
			}
		},
	],
	pluginScoped: {
		defaultValue: 'https://vk.com/video_ext.php?oid=-22822305&id=456241030&hash=8500e891e0681d49&hd=2',
		invalidUrlError: __('You can find Share URL by following steps: Click "Share" -> "Export" and copy "Video embed code"'),
	},
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';

		if (/(https?:\/\/(?:www\.)?vk\.com\/video_ext\.php\?(?:[\w\d=&\-]+))(?:$|\/|")/.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL') + ".\n " + this.pluginScoped.invalidUrlError);
			api.setError(__('Invalid URL') + ".\n " + this.pluginScoped.invalidUrlError);
		}
		return url;
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.groupId.setText(data.content.groupId);

		fields.groupId.on('change', function(e) {
			fields.groupId.setText(self.getVideoId(e.target.value));
		});
	},
	applyAction: function(fields, data, elem) {
		data.content.groupId = fields.groupId.getText();
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue;

	},
	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue;

	},

	supportsAutoWidth: function() {
		return false;
	},
	supportsAutoHeight: function() {
		return true;
	},

	getSupportedSizeUnits: function () {
		let sizeW = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		let sizeH = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		if( this.supportsAutoWidth() )
			sizeW.push({fixedValue: 'auto', label: __('auto')});
		if( this.supportsAutoHeight() )
			sizeH.push({fixedValue: 'auto', label: __('auto')});
		return {sizeW: sizeW, sizeH: sizeH};
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"mollie","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/mollie","pluginUri":"plugins\/mollie","customConfiguration":null};
PluginWrapper._config.id = 'mollie';
PluginWrapper._config.baseUri = "plugins\/mollie";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/mollie\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Mollie\" method=\"POST\" accept-charset=\"utf-8\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\r\n\t{{#content.store}}\r\n\t<input type=\"hidden\" name=\"redirectUrl\" value=\"{returnUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"webhookUrl\" value=\"{callbackUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\r\n\t{{\/content.store}}\r\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\r\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\r\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\r\n\t{{^content.store}}\r\n\t{{{requireService}}}\r\n\t{{\/content.store}}\r\n\t{{{content.paymentGatewayButton}}}\r\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/mollie/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#fff',
			button_border: {
				color: '#000',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #000' },
				cssRaw: 'border: 1px solid #000'
			},
			logo: 'mollie_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'mollie_color.svg', name: 'coloured'},
			{id: 'mollie_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
    name: 'Mollie',
    id: 'mollie',
	pageUrl: 'https://www.mollie.com/',
    keyField: __('API Key'),
    keyFieldId: 'api_key',
    titleFieldId: 'label',
    nameFieldId: 'description',
    priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['api_key'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mollie', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('mollie', {
    name: 'Mollie',
    element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
    },
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'api_key', type: 'MollieApiKey', helpText: __('This key you can get in account settings page'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.api_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
				return opts;
			},
			get: function(data) { return data.content.api_key; },
			set: function(value, data) {
				data.content.api_key = value;
			}
		},
		{id: 'description', type: 'MollieDescription',
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'MollieAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'MollieCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
	], Globals.getLogosList(), 'mollie'),
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('API Key'), helpText: __('This key you can get in account settings page'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.api_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
							return opts;
						}},
						{type: 'TextField', id: 'api_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'AED', name: 'AED'},
							{id: 'AUD', name: 'AUD'},
							{id: 'BGN', name: 'BGN'},
							{id: 'BRL', name: 'BRL'},
							{id: 'CAD', name: 'CAD'},
							{id: 'CHF', name: 'CHF'},
							{id: 'CZK', name: 'CZK'},
							{id: 'DKK', name: 'DKK'},
							{id: 'EUR', name: 'EUR'},
							{id: 'GBP', name: 'GBP'},
							{id: 'HKD', name: 'HKD'},
							{id: 'HUF', name: 'HUF'},
							{id: 'ILS', name: 'ILS'},
							{id: 'ISK', name: 'ISK'},
							{id: 'JPY', name: 'JPY'},
							{id: 'MXN', name: 'MXN'},
							{id: 'MYR', name: 'MYR'},
							{id: 'NOK', name: 'NOK'},
							{id: 'NZD', name: 'NZD'},
							{id: 'PHP', name: 'PHP'},
							{id: 'PLN', name: 'PLN'},
							{id: 'RON', name: 'RON'},
							{id: 'RUB', name: 'RUB'},
							{id: 'SEK', name: 'SEK'},
							{id: 'SGD', name: 'SGD'},
							{id: 'THB', name: 'THB'},
							{id: 'TWD', name: 'TWD'},
							{id: 'USD', name: 'USD'},
							{id: 'ZAR', name: 'ZAR'}
						]}
					]},

				]}
			]},
	        PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mollie')
        ]
    },
    openAction: function (fields, data, elem) {
        fields.description.setText(data.content.description);
        fields.amount.setText(data.content.amount);
		fields.currency.setValue(data.content.currency);
        fields.api_key.setText(data.content.api_key);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.description = fields.description.getText();
        data.content.amount = fields.amount.getText();
		data.content.currency = fields.currency.getValue();
        data.content.api_key = fields.api_key.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
    },
    loadAction: function (data) {
		data.content.__globalVars = ['api_key'];
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'label': 'button_label',
			'border': 'button_border',
			'background': 'button_color',
			'fontFamily': 'font_family',
			'fontSize': 'font_size',
			'fontColor': 'label_color'
		});
        if (!data.content.description) data.content.description = ''; // Items description
        if (!data.content.amount) data.content.amount = ''; // 129.99
		if (!data.content.currency) data.content.currency = 'EUR'; 
        if (!data.content.api_key) data.content.api_key = ''; // test_Hptv39GWS46hmAJsjGx5bFJARsAMJb
	    if (['mollie.png'].indexOf(data.content.logo) > -1) {
		    data.content.logo = 'mollie_color.svg';
	    }
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('api_key');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"linepay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/linepay","pluginUri":"plugins\/linepay","customConfiguration":null};
PluginWrapper._config.id = 'linepay';
PluginWrapper._config.baseUri = "plugins\/linepay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/linepay\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n<img src=\"https:\/\/scdn.line-apps.com\/linepay\/partner\/images\/logo\/linepay_logo_119x39_v3.png\" \/>\n{{\/isPublished}}\n\n{{#content.store}}\n<form data-gateway-id=\"Linepay\" method=\"POST\" accept-charset=\"utf-8\">\n\t<input type=\"hidden\" name=\"accepturl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelurl\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"callbackurl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"productName\" value=\"{{content.productName}}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"image\" src=\"https:\/\/scdn.line-apps.com\/linepay\/partner\/images\/logo\/linepay_logo_119x39_v3.png\"\/>\n<\/form>\n{{\/content.store}}\n\n{{^content.store}}\n{{{requireService}}}\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
    name: __('LINE Pay'),
    id: 'linepay',
    keyField: __('Channel ID'),
    keyFieldId: 'channelId',
    keyField2: __('Channel Secret Key'),
    keyField2Id: 'channelSecretKey',
    titleFieldId: 'label',
    nameFieldId: 'productName',
    priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['channelId', 'channelSecretKey']
});
PluginWrapper.registerPlugin('linepay', {
    name: 'LINE Pay',
    element: {
        minSize: {width: 130, height: 45},
        defaultSize: {width: 130, height: 45},
        resizable: true,
    },
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [{type: 'VerticalLayout', spacing: 15, children: [
                            {type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Channel ID')},
                                            {type: 'TextField', id: 'channelId'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Channel Secret Key')},
                                            {type: 'TextField', id: 'channelSecretKey', password: true}
                                        ]}
                                ]},
                            {type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Item Name'), helpText: __('Title of what you are paying for')},
                                            {type: 'TextField', id: 'productName'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Amount')},
                                            {type: 'TextField', id: 'amount'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Currency')},
                                            {type: 'DropdownBox', id: 'currency', options: [
                                                    {id: '#USD', name: 'USD', value: 'USD'},
                                                    {id: '#JPY', name: 'JPY', value: 'JPY'},
                                                    {id: '#TWD', name: 'TWD', value: 'TWD'},
                                                    {id: '#THB', name: 'THB', value: 'THB'}
                                                ]}
                                        ]}
                                ]}
                        ]}
                ]}
        ]
    },
    resizeAction: function (data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function () {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function (fields, data, elem) {
        fields.channelId.setText(data.content.channelId);
        fields.channelSecretKey.setText(data.content.channelSecretKey);
        fields.productName.setText(data.content.productName);
        fields.amount.setText(data.content.amount);

        var itm;
        itm = fields.currency.getItemById('#' + data.content.currency);
        fields.currency.selectItem(itm);
    },
    applyAction: function (fields, data, elem) {
        data.content.channelId = fields.channelId.getText();
        data.content.channelSecretKey = fields.channelSecretKey.getText();
        data.content.productName = fields.productName.getText();
        data.content.amount = fields.amount.getText();

        var itm;
        itm = fields.currency.getSelectedItem();
        data.content.currency = itm.getOriginal().value;

    },
    loadAction: function (data) {
        if (!data.content.channelId)
            data.content.channelId = '1509190620';
        if (!data.content.channelSecretKey)
            data.content.channelSecretKey = '148de1543696ebdb7658e47b1eff097f';
        if (!data.content.productName)
            data.content.productName = 'Title of what you are paying for';
        if (!data.content.amount)
            data.content.amount = '9.99';
        if (!data.content.currency)
            data.content.currency = 'JPY';
        data.serviceUrl = this.serviceUrl;

    }
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"alipay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/alipay","pluginUri":"plugins\/alipay","customConfiguration":null};
PluginWrapper._config.id = 'alipay';
PluginWrapper._config.baseUri = "plugins\/alipay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/alipay\/main.png";
PluginWrapper._config.template = "<form action=\"https:\/\/mapi.alipay.com\/gateway.do\" method=\"get\"{{^content.store}} target=\"_blank\"{{\/content.store}} data-gateway-id=\"Alipay\"{{#content.store}} data-onload=\"alipay_onload\" data-onsubmit=\"alipay_onsubmit\" data-sc=\"{{content.security_code}}\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"_input_charset\" value=\"utf-8\" \/>\n\t<input type=\"hidden\" name=\"apInitiateService_run\" value=\"1\" \/>\n\t<input type=\"hidden\" name=\"body\" value=\"{{content.description}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"notify_url\" value=\"{callbackUrl}\"\/>\n\t<input type=\"hidden\" name=\"out_trade_no\" value=\"{transactionId}\"\/>\n\t<input type=\"hidden\" name=\"sign\" value=\"\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"notify_url\" value=\"about:blank\"\/>\n\t<input type=\"hidden\" name=\"out_trade_no\" value=\"{{content.trade_no}}\"\/>\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"partner\" value=\"{{content.partner}}\" \/>\n\t<input type=\"hidden\" name=\"service\" value=\"create_forex_trade\" \/>\n\t<input type=\"hidden\" name=\"subject\" value=\"{{content.description}}\" \/>\n\t<input type=\"hidden\" name=\"total_fee\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"sign_type\" value=\"MD5\" \/>\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n{{#content.store}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar alipay_sc = null;\n\t\tvar alipay_onsubmit = function(form) {\n\t\t\tif (('wb_MD5' in window) && (typeof window.wb_MD5 === 'function') && alipay_sc) {\n\t\t\t\tvar elems = form.elements;\n\t\t\t\tvar sign = '_input_charset=utf-8&apInitiateService_run=1&body='+ elems['subject'].value + '&currency=' + elems['currency'].value + '&notify_url=' + elems['notify_url'].value + '&out_trade_no=' + elems['out_trade_no'].value + '&partner=' + elems['partner'].value + '&service=create_forex_trade&subject=' + elems['subject'].value + '&total_fee=' + elems['total_fee'].value + alipay_sc;\n\t\t\t\t$('input[name=\"sign\"]', $(form)).val(wb_MD5(sign));\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\tvar alipay_onload = function(form) {\n\t\t\tform = $(form);\n\t\t\talipay_sc = form.attr('data-sc');\n\t\t\tform.removeAttr('data-sc');\n\t\t};\n\t\twindow.alipay_onsubmit = alipay_onsubmit;\n\t\twindow.alipay_onload = alipay_onload;\n\t})();\n<\/script>\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/alipay/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#5bc0de',
			button_border: {
				color: '#ffffff',
				style: 'solid',
				weight: 2,
				css: { border: '2px solid #ffffff' },
				cssRaw: 'border: 2px solid #ffffff'
			},
			logo: 'alipay_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#6e9bc2'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 102,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'alipay_color.svg', name: 'coloured'},
			{id: 'alipay_black.svg', name: 'black'},
			{id: 'alipay_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: __('Alipay'),
	id: 'alipay',
	pageUrl: 'https://global.alipay.com/',
	keyField: __('Partner'),
	keyFieldId: 'partner',
	keyField2: __('Security code'),
	keyField2Id: 'security_code',
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	defaultStyles: Globals.getDefaultStyles(true),
	useStylesInStoreCart: true,
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'alipay', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('alipay', {
	name: __('Alipay'),
	element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'partner', type: 'AlipayPartner', helpText: __('The ID of the partner on the Alipay system'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.partner ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Partner')));
				return opts;
			},
			get: function(data) { return data.content.partner; },
			set: function(value, data) {
				data.content.partner = value;
			}
		},
		{id: 'security', type: 'AlipaySecurity',  helpText: __('Security key on the Alipay system'),
			get: function(data) { return data.content.security; },
			set: function(value, data) {
				data.content.security = value;
			}
		},
		{id: 'description', type: 'AlipayDescription',  helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'AlipayAmount',  helpText: __('Amount to be transferred. Range 0.01 ~ 1000000.00'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'AlipayCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
	], Globals.getLogosList(), 'alipay'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred. Range 0.01 ~ 1000000.00')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#GBP', name: 'GBP', value: 'GBP'},
							{id: '#HKD', name: 'HKD', value: 'HKD'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#CHF', name: 'CHF', value: 'CHF'},
							{id: '#SGD', name: 'SGD', value: 'SGD'},
							{id: '#SEK', name: 'SEK', value: 'SEK'},
							{id: '#DKK', name: 'DKK', value: 'DKK'},
							{id: '#NOK', name: 'NOK', value: 'NOK'},
							{id: '#JPY', name: 'JPY', value: 'JPY'},
							{id: '#CAD', name: 'CAD', value: 'CAD'},
							{id: '#AUD', name: 'AUD', value: 'AUD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'},
							{id: '#NZD', name: 'NZD', value: 'NZD'},
							{id: '#RUB', name: 'RUB', value: 'RUB'},
							{id: '#MOP', name: 'MOP', value: 'MOP'}
						]}
					]}
				]},
				{type: 'HorizontalLayout',css: {marginTop: 15}, columnWeights: [6, 6], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Partner'), helpText: __('The ID of the partner on the Alipay system'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.partner ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Partner')));
								return opts;
							}},
						{type: 'TextField', id: 'partner'}
					]},									
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Security code'), helpText: __('Security key on the Alipay system')},
						{type: 'TextField', id: 'security'}
					]}						
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'alipay')
		]
	},
	openAction: function(fields, data, elem) {
		fields.description.setText(data.content.description);
		fields.security.setText(data.content.security);
		fields.partner.setText(data.content.partner);
		fields.amount.setText(data.content.amount);
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.description = fields.description.getText();
		data.content.security = fields.security.getText();
		data.content.partner = fields.partner.getText();
		data.content.amount = fields.amount.getText();
		data.content.trade_no = Date.now();
		var itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'label': 'button_label',
			'border': 'button_border',
			'background': 'button_color',
			'fontFamily': 'font_family',
			'fontSize': 'font_size',
			'fontColor': 'label_color'
		});
		if (!data.content.description) data.content.description = __('Product description');
		if (!data.content.security) data.content.security = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.trade_no) data.content.trade_no = '';
		if (!data.content.currency) data.content.currency = 'USD';
		if (!data.content.partner) data.content.partner = '';
		if (['logo.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'alipay_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('partner');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"mercado","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/mercado","pluginUri":"plugins\/mercado","customConfiguration":null};
PluginWrapper._config.id = 'mercado';
PluginWrapper._config.baseUri = "plugins\/mercado";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/mercado\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Mercado\" method=\"POST\" accept-charset=\"utf-8\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"mercado_submit\" value=\"1\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.unitPrice}}\" \/>\n\t<input type=\"hidden\" name=\"title\" value=\"{{content.title}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currencyId}}\" \/>\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n{{^content.store}}\n{{{requireService}}}\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/mercado/main.php';
PluginWrapper._config.active = false;
var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {	
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'mercadopago_color_horizontal.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'mercadopago_black_horizontal.svg', name: 'logo-1'},
			{id: 'mercadopago_black_vertical.svg', name: 'logo-2'},
			{id: 'mercadopago_color_horizontal.svg', name: 'logo-3'},
			{id: 'mercadopago_color_vertical.svg', name: 'logo-4'},
			{id: 'mercadopago_monochrome_horizontal.svg', name: 'logo-5'},
			{id: 'mercadopago_monochrome_vertical.svg', name: 'logo-6'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'MercadoPago',
	id: 'mercado',
	pageUrl: 'https://www.mercadopago.com/',
	keyField: __('Client ID'),
	keyFieldId: 'clientId',
	keyField2: __('Secret ID'),
	keyField2Id: 'secretId',
	titleFieldId: 'label',
	nameFieldId: 'title',
	priceFieldId: 'unitPrice',
	currencyFieldId: 'currencyId',
	globalVars: ['clientId', 'secretId'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mercado', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('mercado', {
	name: 'MercadoPago',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'clientId', type: 'MercadoClientId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.clientId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client ID')));
				return opts;
			},
			get: function(data) { return data.content.clientId; },
			set: function(value, data) {
				data.content.clientId = value;
			}
		},
		{id: 'secretId', type: 'MercadoSecretId',
			get: function(data) { return data.content.secretId; },
			set: function(value, data) {
				data.content.secretId = value;
			}
		},
		{id: 'title', type: 'MercadoTitle', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.title; },
			set: function(value, data) {
				data.content.title = value;
			}
		},
		{id: 'unitPrice', type: 'MercadoUnitPrice',
			get: function(data) { return data.content.unitPrice; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.unitPrice = value;
			}
		},
		{id: 'currencyId', type: 'MercadoCurrencyId',
			get: function(data) { return data.content.currencyId; },
			set: function(value, data) {
				data.content.currencyId = value;
			}
		},
	], Globals.getLogosList(), 'mercado'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Client ID'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.clientId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client ID')));
								return opts;
							}},
							{type: 'TextField', id: 'clientId'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Secret ID')},
							{type: 'TextField', id: 'secretId'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name'), helpText: __('The name of the goods. Cannot contain special symbols')},
							{type: 'TextField', id: 'title'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount')},
							{type: 'TextField', id: 'unitPrice'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currencyId', options: [
								{id: '#ARS', name: 'ARS', value: 'ARS'},
								{id: '#BRL', name: 'BRL', value: 'BRL'},
								{id: '#VEF', name: 'VEF', value: 'VEF'},
								{id: '#CLP', name: 'CLP', value: 'CLP'},
								{id: '#MXN', name: 'MXN', value: 'MXN'},
								{id: '#COP', name: 'COP', value: 'COP'},
								{id: '#PEN', name: 'PEN', value: 'PEN'},
								{id: '#UYU', name: 'UYU', value: 'UYU'}
								// {id: '#USD', name: 'USD', value: 'USD'}
							]}
						]}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'mercado')
		]
	},
	openAction: function (fields, data, elem) {
		fields.clientId.setText(data.content.clientId);
		fields.secretId.setText(data.content.secretId);
		fields.title.setText(data.content.title);
		fields.unitPrice.setText(data.content.unitPrice);
		var itm;
		itm = fields.currencyId.getItemById('#' + data.content.currencyId);
		fields.currencyId.selectItem(itm);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.clientId = fields.clientId.getText();
		data.content.secretId = fields.secretId.getText();
		data.content.title = fields.title.getText();
		data.content.unitPrice = fields.unitPrice.getText();
		var itm;
		itm = fields.currencyId.getSelectedItem();
		data.content.currencyId = itm.getOriginal().value;
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.clientId) data.content.clientId = ''; // 7053461069604856
		if (!data.content.secretId) data.content.secretId = ''; // snhsL9y7Geq0nOqmM3PtEf79QkzRLLvy
		if (!data.content.title) data.content.title = ''; // Title of what you are paying for
		if (!data.content.unitPrice) data.content.unitPrice = '1'; // 10.20
		if (!data.content.currencyId) data.content.currencyId = 'ARS';
		if (['mercado pago bh.svg', 'mercado pago bv.svg', 'mercado pago ch.svg', 'mercado pago cv.svg', 'mercado pago mh.svg',
			'mercado pago mv.svg', 'mercado pago wh.svg', 'mercado pago wv.svg', 'a1.svg', 'a2.svg', 'a3.svg', 'b1.svg', 'b2.svg','b3.svg',].indexOf(data.content.logo) > -1) {
			data.content.logo = 'mercadopago_black_horizontal.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('clientId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"effect","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/effect","pluginUri":"plugins\/effect","customConfiguration":null};
PluginWrapper._config.id = 'effect';
PluginWrapper._config.baseUri = "plugins\/effect";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/effect\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n\t<div class=\"wb_caption smaller\">\n\t\t<div>\n\t\t\t<i class=\"ico-pl-effect\"><\/i> <strong>Effect<\/strong><br \/>{{content.placeholder}}\n\t\t<\/div>\n\t<\/div>\n{{\/isPublished}}\n{{#firstOnPage}}\n\t<script type=\"text\/javascript\" src=\"\/\/effect.com\/widget\"><\/script>\n{{\/firstOnPage}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('effect', {
	name: 'Effect',
	icon: 'ico-pl-effect',
	element: {
		renderOnce: true,
		resizable: false,
		supportsFullWidth: false,
		minSize: {width: 190, height: 70},
		defaultSize: { width: 190, height: 70}
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{general: true, options: false, children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('To start receiving messages from clients please finish plugin setup.')}
				]},
				{type: 'VerticalLayout', css: {marginTop: 5}, children: [
					{type: 'Button', text: __('Finish setup'), buttonStyle: 'success', click: function() {
						var win = window.open('https://effect.com?r=6isnvi', '_blank');
						win.focus();
					}}
				]}
			]}
		]
	},
	loadAction: function(data) {
		data.content.placeholder = __('Double click to change properties');
//		data.content.placeholder = 'Effect.com ' + __('Settings').toLowerCase();
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"smartarget","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/smartarget","pluginUri":"plugins\/smartarget","customConfiguration":null};
PluginWrapper._config.id = 'smartarget';
PluginWrapper._config.baseUri = "plugins\/smartarget";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/smartarget\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n\t<div class=\"wb_caption smaller wb-prevent-layout-click\">\n\t\t<div>\n\t\t\t<i class=\"ico-pl-smartarget\"><\/i> Smartarget Whatsapp - Contact Us\n\t\t<\/div>\n\t<\/div>\n{{\/isPublished}}\n{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"https:\/\/smartarget.online\/loader.js?u={{content.smartarget_userId}}&source=sitepro_whatsapp_smartarget\"><\/script>\n{{\/firstOnPage}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('smartarget', {
	name: 'Smartarget Whatsapp - Contact Us',
	icon: 'ico-pl-smartarget',
	element: {
		minSize: {
			width: 190,
			height: 70
		},
		defaultSize: {
			width: 190,
			height: 70
		},
		resizable: false,
		supportsFullWidth: false
	},
	properties: [
		{id: 'smartarget_userId', type: 'SmartargetUserId', helpText: __('Follow instructions on %s and copy %s User ID here.').replace('%s', '<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://app.smartarget.online/#/preview/sitepro/whatsapp" target="_blank">https://app.smartarget.online/#/preview/sitepro/whatsapp</a>').replace('%s', 'Smartarget'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.smartarget_userId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Smartarget User ID')));
				return opts;
			},
			get: function(data) { return data.content.smartarget_userId; },
			validate: function(value) {
				return (value && value.length !== 40) ? __('Incorrect ID') : '';
			},
			set: function(value, data) {
				data.content.smartarget_userId = value;
			}
		},
	],
	propertyDialog: {
		noScroll: true,
		tabs: [{
			name: 'General',
			children: [{
				type: 'VerticalLayout',
				children: [{
					type: 'Label',
					text: __('Smartarget User ID')
				}, {
					type: 'TextField',
					id: 'smartarget_userId'
				}]
			}]
		}]
	},
	resizeTimeout: null,

	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function() {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		fields.smartarget_userId.setText(data.content.smartarget_userId);
	},
	applyAction: function(fields, data, elem) {
		data.content.smartarget_userId = (fields.smartarget_userId.getText().length === 40 ? fields.smartarget_userId.getText() : '');
	},
	loadAction: function(data) {
		if (!data.content.smartarget_userId) data.content.smartarget_userId = '';
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('smartarget_userId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"twitter","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/twitter","pluginUri":"plugins\/twitter","customConfiguration":null};
PluginWrapper._config.id = 'twitter';
PluginWrapper._config.baseUri = "plugins\/twitter";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/twitter\/main.png";
PluginWrapper._config.template = "<a class=\"twitter-timeline\" data-theme=\"{{content.theme}}\" data-width=\"{{width}}\" data-link-color=\"{{content.linkColor}}\" data-height=\"{{height}}\" href=\"{{content.url}}\">Twitter<\/a> <script async src=\"\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('twitter', {
    name: 'Twitter',
    icon: 'ico-tb-twitter',
    element: {
        minSize: {width: 250, height: 100},
        defaultSize: {width: 400, height: 480},
        resizable: true
    },
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [
                    {type: 'VerticalLayout', children: [
                            {type: 'Label', text: __('Twitter Url for embed'),
                                helpText: __('Please type collection, profile, list or likes timeline url')
                            },
                            {type: 'TextField', id: 'url', placeholder: 'https://twitter.com/sitepro_builder'}
                        ]},
                    {type: 'HorizontalLayout', columnWeights: [3, 3], css: {marginTop: 15}, children: [
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Theme')},
                                    {type: 'RadioBox', id: 'light', label: __('Light'), group: 'theme'},
                                    {type: 'RadioBox', id: 'dark', label: __('Dark'), group: 'theme'}
                                ]},
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Default link color')},
                                    {type: 'ColorSelector', id: 'linkColor', noTransparent: true}
                                ]}
                        ]}
                ]}
        ]
    },
    pluginScoped: {
        scriptLoaded: false,
        scriptReady: false,
        listeners: []
    },
    resizeTimeout: null,
    resizeAction: function (data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function () {
                self.resizeTimeout = null;
                self.updateElement();
            }, 2000);
        }
    },
    openAction: function (fields, data, elem) {
        fields.url.setText(data.content.url);
        fields.light.setValue(data.content.theme === 'light');
        fields.dark.setValue(data.content.theme === 'dark');
        fields.linkColor.setValue(data.content.linkColor);
    },
    applyAction: function (fields, data, elem) {
        data.content.url = fields.url.getText();
        data.content.linkColor = fields.linkColor.getValue();
        if (fields.light.getValue())
            data.content.theme = 'light';
        if (fields.dark.getValue())
            data.content.theme = 'dark';
    },
    loadAction: function (data) {
        if (!data.content.linkColor)
            data.content.linkColor = '#1b95e0';
        if (!data.content.theme)
            data.content.theme = 'light';
        if (!data.content.url)
            data.content.url = '';

    }
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"tiktok","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/tiktok","pluginUri":"plugins\/tiktok","customConfiguration":null};
PluginWrapper._config.id = 'tiktok';
PluginWrapper._config.baseUri = "plugins\/tiktok";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/tiktok\/main.png";
PluginWrapper._config.template = "{{#previewCompositionId}}\n<div style=\"width: 100%;display: flex;justify-content: center;\">\n    <img id=\"{{id}}_preview\" src=\"plugins\/tiktok\/preview.png\">\n<\/div>\n<script>\n    function init() {\n        if (('{{id}}_loaded_deferred' in window) && window.{{id}}_loaded_deferred && window.{{id}}_loaded_deferred.state() !== 'resolved') {\n            window.{{id}}_loaded_deferred.resolve();\n        }\n    }\n    setTimeout(init, 50);\n    setTimeout(init, 100);\n    setTimeout(init, 500);\n<\/script>\n{{\/previewCompositionId}}\n{{^previewCompositionId}}\n<div id=\"{{id}}_tiktok_video\" style=\"width: 100%\"><\/div>\n<script>\n\tvar finalGroupId = '';\n\ttry {\n\t\tfinalGroupId = (new URL({{{content.finalGroupId}}})).toString();\n\t} catch (e) {};\n\tvar url = new URL('https:\/\/www.tiktok.com\/oembed');\n\turl.searchParams.append('url', finalGroupId);\n    fetch(url.toString())\n        .then(function (r) {\n            return r.json();\n        })\n        .then(function (value) {\n            let cont = $('#{{id}}_tiktok_video');\n            let timer = null;\n            const observer = new MutationObserver(function () {\n                if (cont.find('iframe').get(0)) {\n                    if (timer) clearTimeout(timer);\n                    timer = setTimeout(function () {\n                        if (('{{id}}_loaded_deferred' in window) && window.{{id}}_loaded_deferred && window.{{id}}_loaded_deferred.state() !== 'resolved') {\n                            window.{{id}}_loaded_deferred.resolve();\n                            observer.disconnect();\n                        }\n                    }, 2000);\n                }\n            });\n            observer.observe(cont.get(0), {\n                childList: true,\n                subtree: true\n            });\n            $('#{{id}}_tiktok_video').html(value.html)\n        });\n\n<\/script>\n\n{{\/previewCompositionId}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
require(['TextField', 'UIButton', 'DropdownBox', 'CheckBox', 'ColorPicker', 'element/PropertyType', 'FontManager'], function (TextFieldModule, UIButton, DropdownBox, CheckBox, ColorPicker, PropertyTypeModule, FontManager) {
	if (PropertyTypeModule === null) return;
	var PropertyType = PropertyTypeModule.PropertyType;
	var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;

	var TikTokUrl = new PropertyType("tiktok/shareUrl", PropertyTypeAccess.User, true, __('TikTok share URL'), TextFieldModule.TextField).inline(8);

	PropertyType.setDefaultOpenCategory('tiktok');
	PropertyType.setCategoryName('tiktok', __('TikTok'));
	PropertyType.setSortOrder('tiktok', 1);

	PluginWrapper.registerPlugin('tiktok', {
		name: __('TikTok'),
		icon: 'ico-pl-tiktok',
		element: {
			minSize: {width: 100, height: 100},
			defaultSize: {width: 480, height: 'auto'},
			resizable: true,
			supportsFullWidth: true,
			supportsFullHeight: true,
		},
		propertyDialog: {
			noScroll: true,
			tabs: [
				{children: [
						{type: 'VerticalLayout', children: [
								{type: 'Label', text: __('Video embed code'),
									uiComponentOptions: function(data, opts) {
										opts.helpText = __('TikTok share video URL') + ".\n " + this.pluginScoped.invalidUrlError;
										opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('TikTok share URL')));
										return opts;
									},
								},
								{type: 'TextField', id: 'groupId', uiComponentOptions: function(data, opts) {
										opts.placeholder = this.pluginScoped.defaultValue;
										return opts;
									}}
							]},
					]}
			]
		},
		batchUpdates: true,
		properties: [
			{id: 'groupId', type: TikTokUrl,
				uiComponentOptions: function(data, opts) {
					opts.helpText = __('TikTok share video URL') + ".\n " + this.pluginScoped.invalidUrlError;
					opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('TikTok share URL')));
					return opts;
				},
				get: function(data) { return data.content.groupId; },
				validate: function (value, data, api) {
					this.getVideoId(value, api);
				},
				set: function(value, data) {
					var url = this.getVideoId(value);
					data.content.groupId = url ? url : value;
					data.content.finalGroupId = JSON.stringify(url ? data.content.groupId : this.pluginScoped.defaultValue);
				}
			},
		],
		pluginScoped: {
			defaultValue: 'https://www.tiktok.com/@tiktok/video/7135966049140264238',
			invalidUrlError: __('You can find Share URL by following steps: Click "Share" -> "Copy link"'),
		},
		getVideoId: function(value, api) {
			var url = '';
			if (value === '') return '';
			try {
				new URL(value);
			} catch (e) {
				value = '';
			}

			if (/http(s)?:\/\/(.+\.)?tiktok\.com\//.test(value)) {
				url = value;
				if (api) {
					this.displayErrorMessage(false);
					api.setError('');
				}
			} else if (api) {
				this.setErrorMessage(__('Invalid URL') + ".\n " + this.pluginScoped.invalidUrlError);
				api.setError(__('Invalid URL') + ".\n " + this.pluginScoped.invalidUrlError);
			}
			return url;
		},
		resizeTimeout: null,
		resizeAction: function(data, elem) {
			if (!this.resizeTimeout) {
				var self = this;
				this.resizeTimeout = setTimeout(function () {
					self.resizeTimeout = null;
					self.updateElement();
				}, 1000);
			}
		},
		openAction: function(fields, data, elem) {
			var self = this;
			fields.groupId.setText(data.content.groupId);

			fields.groupId.on('change', function(e) {
				fields.groupId.setText(self.getVideoId(e.target.value));
			});
		},
		applyAction: function(fields, data, elem) {
			var url = this.getVideoId(fields.groupId.getText());
			data.content.groupId = url ? url : value;
			data.content.finalGroupId = JSON.stringify(url ? data.content.groupId : this.pluginScoped.defaultValue);
		},
		loadAction: function (data) {
			if (!data.content.groupId) data.content.groupId = '';
			data.content.finalGroupId = JSON.stringify(data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue);

		},
		loadedAction: function (data) {
			if (!this.loadDeferred) this.loadDeferred = $.Deferred();
			window[data.id + '_loaded_deferred'] = this.loadDeferred;
		},

		onLoaded: function () {
			if (!this.loadDeferred) this.loadDeferred = $.Deferred();
			return this.loadDeferred;
		},

		supportsAutoWidth: function() {
			return true;
		},
		supportsAutoHeight: function() {
			return true;
		},

		onDblClick: function() {
			var thisClass = this;
			setTimeout(function() {
				var component = thisClass.getPropertyComponent('groupId');
				if (component) component.focus();
			}, 50);
		}
	});

});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"rutube_video","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/rutube_video","pluginUri":"plugins\/rutube_video","customConfiguration":null};
PluginWrapper._config.id = 'rutube_video';
PluginWrapper._config.baseUri = "plugins\/rutube_video";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/rutube_video\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_rutube_video\" src=\"https:\/\/rutube.ru\/play\/embed\/{{content.finalGroupId}}\" width=\"100%\" height=\"100%\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
// <iframe width="720" height="405" src="https://rutube.ru/play/embed/f9e82c87cf611a1226376a9dfb797f5e" frameBorder="0" allow="clipboard-write" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
// https://rutube.ru/video/ca49f65ec666207623d8ac27cc23ccd1

PluginWrapper.registerPlugin('rutube_video', {
	name: __('Rutube video'),
	icon: 'ico-pl-rutube_video',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true,
		supportsFullWidth: true,
		supportsFullHeight: true,
	},
	pluginScoped: {
		defaultValue: 'a324032a58a6f8f310f9969b21a657e0',
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Rutube ID or URL'),
						helpText: __('Rutube video id or url with format https://rutube.ru/play/embed/{video_id}'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Rutube ID or URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'groupId', uiComponentOptions: function(data, opts) {
						opts.placeholder = this.pluginScoped.defaultValue;
						return opts;
					}}
				]},
			]}
		]
	},
	batchUpdates: true,
	properties: [
		{id: 'groupId', type: 'RutubeGroupId', helpText: __('Rutube video id or url with format https://rutube.ru/play/embed/{video_id}'),
			uiComponentOptions: function(data, opts) {
				opts.placeholder = this.pluginScoped.defaultValue;
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Rutube ID or URL')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.groupId = url ? url : value;
				data.content.finalGroupId = data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue;
			}
		},
	],
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';

		if (/^([\w\d]+)$/.test(value) || /https?:\/\/(?:www\.)?rutube\.ru\/(?:(?:play\/embed)|(?:video))\/([\d\w]+)/.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL or ID'));
			api.setError(__('Invalid URL or ID'));
		}
		return url;
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.groupId.setText(data.content.groupId);

		fields.groupId.on('change', function(e) {
			fields.groupId.setText(self.getVideoId(e.target.value));
		});
	},
	applyAction: function(fields, data, elem) {
		data.content.groupId = fields.groupId.getText();
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue;

	},
	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
		data.content.finalGroupId = data.content.groupId ? data.content.groupId : this.pluginScoped.defaultValue;

	},

	supportsAutoWidth: function() {
		return false;
	},
	supportsAutoHeight: function() {
		return true;
	},

	getSupportedSizeUnits: function () {
		let sizeW = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		let sizeH = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		if( this.supportsAutoWidth() )
			sizeW.push({fixedValue: 'auto', label: __('auto')});
		if( this.supportsAutoHeight() )
			sizeH.push({fixedValue: 'auto', label: __('auto')});
		return {sizeW: sizeW, sizeH: sizeH};
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"vimeo","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/vimeo","pluginUri":"plugins\/vimeo","customConfiguration":null};
PluginWrapper._config.id = 'vimeo';
PluginWrapper._config.baseUri = "plugins\/vimeo";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/vimeo\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_vimeo\" src=\"{{content.finalUrl}}\" width=\"100%\" height=\"100%\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('vimeo', {
	name: 'Vimeo',
	icon: 'ico-pl-vimeo',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true,
		supportsFullWidth: true,
		supportsFullHeight: true,
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Vimeo ID or URL'),
						helpText: __('Vimeo video id or url with format https://vimeo.com/{video_id}'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Vimeo ID or URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'groupId', placeholder: '380356846'}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Portrait'), helpText: __('Show the users portrait on the video')},
						{type: 'RadioBox', id: 'portrait0', label: __('Yes'), group: 'portrait'},
						{type: 'RadioBox', id: 'portrait1', label: __('No'), group: 'portrait'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Title'), helpText: __('Show the title on the video.')},
						{type: 'RadioBox', id: 'title0', label: __('Yes'), group: 'title'},
						{type: 'RadioBox', id: 'title1', label: __('No'), group: 'title'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Autoplay'), helpText: __('Play the video automatically on load.')},
						{type: 'RadioBox', id: 'autoplay0', label: __('Yes'), group: 'autoplay'},
						{type: 'RadioBox', id: 'autoplay1', label: __('No'), group: 'autoplay'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Color'), helpText: __('Specify the color of the video controls.')},
						{type: 'ColorSelector', id: 'color'}
					]}
				]}
			]}
		]
	},
	batchUpdates: true,
	properties: [
		{id: 'groupId', type: 'VimeoGroupId', helpText: __('Vimeo video id or url with format https://vimeo.com/{video_id}'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Vimeo ID or URL')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
				this.updateFinalUrl(data);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.groupId = url ? url : value;
			}
		},
		{id: 'portrait', type: 'VimeoPortrait', helpText: __('Show the users portrait on the video'),
			get: function(data) { return data.content.portrait === '1'; },
			set: function(value, data) {
				data.content.portrait = value ? '1' : '0';
			}
		},
		{id: 'title', type: 'VimeoTitle', helpText: __('Show the title on the video.'),
			get: function(data) { return data.content.title === '1'; },
			set: function(value, data) {
				data.content.title = value ? '1' : '0';
			}
		},
		{id: 'autoplay', type: 'VimeoAutoplay', helpText: __('Play the video automatically on load.'),
			get: function(data) { return data.content.autoplay === '1'; },
			set: function(value, data) {
				data.content.autoplay = value ? '1' : '0';
			}
		},
		{id: 'color', type: 'VimeoColor', helpText: __('Specify the color of the video controls.'),
			get: function(data) { return data.content.color; },
			set: function(value, data) {
				data.content.color = value.replace('#', '');
			}
		},
	],
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';
		if (/^([\da-z\/]+)$/i.test(value) || /https?:\/\/(?:www\.)?vimeo.com\/([\da-z\/]+)(?:$|\/)/i.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL or ID'));
			api.setError(__('Invalid URL or ID'));
		}
		return url;
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.groupId.setText(data.content.groupId);
		fields.portrait0.setValue(data.content.portrait === '1');
		fields.portrait1.setValue(data.content.portrait === '0');

		fields.title0.setValue(data.content.title === '1');
		fields.title1.setValue(data.content.title === '0');

		fields.autoplay0.setValue(data.content.autoplay === '1');
		fields.autoplay1.setValue(data.content.autoplay === '0');

		fields.color.setValue(data.content.color);

		fields.groupId.on('change', function(e) {
			fields.groupId.setText(self.getVideoId(e.target.value));
		});
	},
	updateFinalUrl: function(data) {
		var uri = this.getVideoId(data.content.groupId);
		if (/(\d+)(?:\/([\da-z]+))?/i.test(uri)) {
			uri = RegExp.$1 + (RegExp.$2 ? ('/?h=' + RegExp.$2) : '');
		}
		var qs = 'portrait=' + data.content.portrait
			+ '&title=' + data.content.title
			+ '&autoplay=' + data.content.autoplay
			+ '&color=' + data.content.color;
		uri += ((uri.indexOf('?') > -1) ? '&' : '?') + qs;
		data.content.finalUrl = 'https://player.vimeo.com/video/' + uri;
	},
	applyAction: function(fields, data, elem) {
		if (fields.portrait0.getValue()) data.content.portrait = '1';
		if (fields.portrait1.getValue()) data.content.portrait = '0';

		if (fields.title0.getValue()) data.content.title = '1';
		if (fields.title1.getValue()) data.content.title = '0';

		if (fields.autoplay0.getValue()) data.content.autoplay = '1';
		if (fields.autoplay1.getValue()) data.content.autoplay = '0';

		data.content.color = fields.color.getValue().replace('#', '');
		data.content.groupId = fields.groupId.getText();
		this.updateFinalUrl(data);
	},
	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
		if (!data.content.portrait) data.content.portrait = '1';
		if (!data.content.title) data.content.title = '1';
		if (!data.content.autoplay) data.content.autoplay = '0';
		if (!data.content.color) data.content.color = '#00adef';
		this.updateFinalUrl(data);
	},

	supportsAutoWidth: function() {
		return false;
	},
	supportsAutoHeight: function() {
		return true;
	},

	getSupportedSizeUnits: function () {
		let sizeW = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		let sizeH = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
		if( this.supportsAutoWidth() )
			sizeW.push({fixedValue: 'auto', label: __('auto')});
		if( this.supportsAutoHeight() )
			sizeH.push({fixedValue: 'auto', label: __('auto')});
		return {sizeW: sizeW, sizeH: sizeH};
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"ideal_payment","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/ideal_payment","pluginUri":"plugins\/ideal_payment","customConfiguration":null};
PluginWrapper._config.id = 'ideal_payment';
PluginWrapper._config.baseUri = "plugins\/ideal_payment";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/ideal_payment\/main.png";
PluginWrapper._config.template = "<form id=\"{{id}}_form\" method=\"post\" action=\"https:\/\/internetkassa.abnamro.nl\/ncol\/prod\/orderstandard.asp\" target=\"_blank\" class=\"ideal\" data-gateway-id=\"iDEAL\"{{#content.store}} data-amount-onchange=\"ideal_amount_onchange\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"PSPID\" value=\"{{content.pspid}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"orderID\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"orderID\" value=\"{{content.orderId}}\" \/>\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.pamount}}\"{{#content.store}}data-onchange=\"ideal_amount_onchange\"{{\/content.store}} \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"PM\" value=\"iDEAL\" \/>\n\t<input type=\"hidden\" name=\"COM\" value=\"{{content.description}}\" \/>\n\t<button class=\"btn btn-default btn-sm iDEALeasy\" type=\"submit\" name=\"submit1\" value=\"submit\" style=\"width: 100%; height: 100%; white-space: normal; overflow: hidden;\n\t\t\tbackground-color: {{#content.button_color}}{{content.button_color}}{{\/content.button_color}}{{^content.button_color}}#fff{{\/content.button_color}};\n\t\t\t{{#content.buttonBorderCss}}{{content.buttonBorderCss}}{{\/content.buttonBorderCss}}\">\n\t\t<strong style=\"color: {{#content.label_color}}{{content.label_color}}{{\/content.label_color}}{{^content.label_color}}#000{{\/content.label_color}};\n\t\t\t\t\t   font-family: {{#content.font_family}}{{content.font_family}}{{\/content.font_family}}{{^content.font_family}}Arial{{\/content.font_family}};\n\t\t\t\t\t   font-size: {{#content.font_size}}{{content.font_size}}px{{\/content.font_size}}{{^content.font_size}}12px{{\/content.font_size}};\">{{content.button_label}}<\/strong>\n\t\t{{#content.showlogo}}<img src=\"{{^isPublished}}plugins\/ideal_payment\/site\/{{\/isPublished}}gallery_gen\/ideal_payment\/ideal_payment.svg\" alt=\"Click\" style=\"width: {{content.logo_width}}px; max-width: 100%;\" \/>{{\/content.showlogo}}\n\t<\/button>\n<\/form>\n{{#content.store}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar ideal_amount_onchange = function(field) {\n\t\t\tfield.value = Math.floor(parseFloat(field.value) * 100);\n\t\t};\n\t\twindow.ideal_amount_onchange = ideal_amount_onchange;\n\t})();\n<\/script>\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
	name: 'iDEAL',
	id: 'ideal_payment',
	pageUrl: 'https://www.ideal.nl/',
	keyField: __('PSPID'),
	keyFieldId: 'pspid',
	titleFieldId: 'button_label',
	nameFieldId: 'description',
	priceFieldId: 'pamount',
	currencyFieldId: 'currency'
});
PluginWrapper.registerPlugin('ideal_payment', {
	name: 'iDEAL',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 90, height: 90}
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('PSPID'), helpText:__("Your affiliation name in ABN-AMRO system")},
						{type: 'TextField', id: 'pspid'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText:__("The name of the goods. Cannot contain special symbols")},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText:__('Amount to be transferred')},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#GBP', name: 'GBP', value: 'GBP'},
								{id: '#HKD', name: 'HKD', value: 'HKD'},
								{id: '#SGD', name: 'SGD', value: 'SGD'},
								{id: '#JPY', name: 'JPY', value: 'JPY'},
								{id: '#CAD', name: 'CAD', value: 'CAD'},
								{id: '#AUD', name: 'AUD', value: 'AUD'},
								{id: '#CHF', name: 'CHF', value: 'CHF'},
								{id: '#DKK', name: 'DKK', value: 'DKK'},
								{id: '#SEK', name: 'SEK', value: 'SEK'},
								{id: '#NOK', name: 'NOK', value: 'NOK'},
								{id: '#ILS', name: 'ILS', value: 'ILS'},
								{id: '#MYR', name: 'MYR', value: 'MYR'},
								{id: '#NZD', name: 'NZD', value: 'NZD'},
								{id: '#TRY', name: 'TRY', value: 'TRY'},
								{id: '#AED', name: 'AED', value: 'AED'},
								{id: '#MAD', name: 'MAD', value: 'MAD'},
								{id: '#QAR', name: 'QAR', value: 'QAR'},
								{id: '#SAR', name: 'SAR', value: 'SAR'},
								{id: '#TWD', name: 'TWD', value: 'TWD'},
								{id: '#THB', name: 'THB', value: 'THB'},
								{id: '#CZK', name: 'CZK', value: 'CZK'},
								{id: '#HUF', name: 'HUF', value: 'HUF'},
								{id: '#SKK', name: 'SKK', value: 'SKK'},
								{id: '#BGN', name: 'BGN', value: 'BGN'},
								{id: '#PLN', name: 'PLN', value: 'PLN'},
								{id: '#ISK', name: 'ISK', value: 'ISK'},
								{id: '#INR', name: 'INR', value: 'INR'},
								{id: '#KRW', name: 'KRW', value: 'KRW'},
								{id: '#ZAR', name: 'ZAR', value: 'ZAR'},
								{id: '#RON', name: 'RON', value: 'RON'},
								{id: '#HRK', name: 'HRK', value: 'HRK'},
								{id: '#JOD', name: 'JOD', value: 'JOD'},
								{id: '#OMR', name: 'OMR', value: 'OMR'},
								{id: '#RSD', name: 'RSD', value: 'RSD'},
								{id: '#TND', name: 'TND', value: 'TND'}
							]}
						]}
					]},
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Button Label')},
					{type: 'TextField', id: 'button_label'}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Border')},
						{type: 'BorderSelector', id: 'button_border'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Background')},
						{type: 'ColorSelector', id: 'button_color'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Size')},
						{type: 'SizeSelector', id: 'font_size'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Color')},
						{type: 'ColorSelector', id: 'label_color', noTransparent: true}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', css: {width: 120}, children: [
						{type: 'Label', text: __('Font')},
						{type: 'FontFamilySelector', id: 'font_family', noFixedWidth: true}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Max logo width')},
						{type: 'SizeSelector', id: 'logo_width', max: 180, min: 20}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Show logo')},
						{type: 'RadioBox', id: 'showlogo1', label: __('Yes'), group: 'showlogo'},
						{type: 'RadioBox', id: 'showlogo0', label: __('No'), group: 'showlogo'}
					]}
				]}
			]}
		]
	},
	openAction: function(fields, data, elem) {
		fields.description.setText(data.content.description);
		fields.pspid.setText(data.content.pspid);
		fields.amount.setText(data.content.amount);
		var itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		
		fields.button_label.setText(data.content.button_label);
		fields.button_color.setValue(data.content.button_color);
		fields.font_family.setValue(data.content.font_family);
		fields.font_size.setValue(data.content.font_size);
		fields.label_color.setValue(data.content.label_color);
		fields.button_border.setValue(data.content.button_border);
		fields.showlogo1.setValue(data.content.showlogo === true);
		fields.showlogo0.setValue(data.content.showlogo === false);
		fields.logo_width.setValue(data.content.logo_width);
	},
	applyAction: function(fields, data, elem) {
		data.content.description = fields.description.getText();
		data.content.pspid = fields.pspid.getText();
		data.content.amount = fields.amount.getText();
		data.content.pamount = Math.floor(parseFloat(data.content.amount) * 100);
		var itm = fields.currency.getSelectedItem();
		data.content.orderId = this.StringHash.generate(17);
		data.content.currency = itm.getOriginal().value;

		data.content.button_label = fields.button_label.getText();
		data.content.button_color = fields.button_color.getValue();
		data.content.font_family = fields.font_family.getValue();
		data.content.font_size = fields.font_size.getValue();
		data.content.label_color = fields.label_color.getValue();
		data.content.button_border = fields.button_border.getValue();
		if (fields.showlogo1.getValue()) data.content.showlogo = true;
		if (fields.showlogo0.getValue()) data.content.showlogo = false;
		data.content.logo_width = fields.logo_width.getValue();
		data.content.buttonBorderCss = this.updateBorderCss(data);
	},
	updateBorderCss: function(data) {
		var borderCss = '';
		var border = data.content.button_border;
		if (border.css !== undefined) {
			if (typeof border.css === 'string') {
				borderCss = border.css;
			} else {
				for (var i in border.css) {
					borderCss += i + ': ' + border.css[i] + ';';
				}
			}
		} else {
			borderCss = 'border: ' + border.weight + 'px ' + border.style + ' ' + border.color + ';';
		}
		return borderCss;
	},
	loadAction: function (data) {
		if (!data.content.description) data.content.description = __('Product description');
		if (!data.content.pspid) data.content.pspid = '';
		if (!data.content.amount) data.content.amount = '1';
		data.content.pamount = Math.floor(parseFloat(data.content.amount) * 100);
		if (!data.content.currency) data.content.currency = 'EUR';
		
		if (data.content.button_label === undefined) data.content.button_label = __('Pay with %s').replace('%s', '');
		if (!data.content.button_color) data.content.button_color = '#fff';
		if (!data.content.font_family) data.content.font_family = "'Roboto Condensed',Arial,sans-serif";
		if (!data.content.font_size) data.content.font_size = '14';
		if (!data.content.label_color) data.content.label_color = '#333333';
		if (!data.content.button_border) data.content.button_border = {
			color: '#cccccc',
			style: 'solid',
			weight: 1,
			css: { border: '1px solid #cccccc' }
		};
		if (data.content.showlogo === undefined) data.content.showlogo = true;
		if (!data.content.logo_width) data.content.logo_width = 55;
		data.content.buttonBorderCss = this.updateBorderCss(data);
	},
	StringHash: {
		_chars: ['A','B','C','D','E','F','G','H','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Z','1','2','3','4','5','6','7','8','9','0'],
		_getRandChar: function() {
			return this._chars[Math.floor(Math.random() * this._chars.length)];
		},
		generate: function(len) {
			if (!len) len = 17;
			var str = '';
			for (var i=0; i < len; i++) {
				str += this._getRandChar();
			}
			return str;
		}
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"bank_transfer","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/bank_transfer","pluginUri":"plugins\/bank_transfer","customConfiguration":null};
PluginWrapper._config.id = 'bank_transfer';
PluginWrapper._config.baseUri = "plugins\/bank_transfer";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/bank_transfer\/main.png";
PluginWrapper._config.template = "{{%FILTERS}}\n<form data-gateway-id=\"BankTransfer\" action=\"\" method=\"post\" style=\"width: 100%; height: 100%;\" id=\"{{id}}_bank_transfer_form\" onsubmit=\"return false;\">\n\t<input type=\"hidden\" name=\"invoiceUrl\" value=\"\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{#content.store}}\n\t<button class=\"btn btn-default btn-raised\" style=\"vertical-align: middle; height: 47px; font-weight: bold;\"><i class=\"fa fa-bank\"><\/i> {{\"Bank Transfer\" | tr}}<\/button>\n\t{{\/content.store}}\n<\/form>\n\n{{#content.store}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\t$('#{{id}}_bank_transfer_form').on('beforesend', function(e, checkoutData) {\n\t\t\te.preventDefault();\n\t\t\t$('#{{id}}_bank_transfer_invoice_link').attr(\"href\", checkoutData.orderData.invoiceUrl);\n\t\t\t$('#{{id}}_bank_transfer_transactionId').text(checkoutData.orderData.transactionId);\n\t\t\t$('#{{id}}_bank_transfer_modal')\n\t\t\t\t.appendTo(\"body\")\n\t\t\t\t.modal({\n\t\t\t\t\tbackdrop: 'static',\n\t\t\t\t\tkeyboard: false\n\t\t\t\t})\n\t\t\t\t.on('hide.bs.modal', function() {\n\t\t\t\t\twindow.location.href = checkoutData.backUrl;\n\t\t\t\t})\n\t\t\t;\n\t\t\treturn false;\n\t\t});\n\t})();\n<\/script>\n<div class=\"modal fade\" id=\"{{id}}_bank_transfer_modal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\">{{\"Bank Transfer\" | tr}}<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n\t\t\t\t<div>\n\t\t\t\t\t{{\"Order Id\" | tr}}: <span id=\"{{id}}_bank_transfer_transactionId\"><\/span>\n\t\t\t\t<\/div>\n\t\t\t\t{{{content.info | i18n}}}\n\t\t\t\t{{#invoiceON}}\n\t\t\t\t<div>\n\t\t\t\t\t<a id=\"{{id}}_bank_transfer_invoice_link\" href=\"javascript:void(0)\" target=\"_blank\" class=\"btn btn-success\"><i class=\"fa fa-file-pdf-o\"><\/i> {{{content.btnDownloadLabel | i18n}}}<\/a>\n\t\t\t\t<\/div>\n\t\t\t\t{{\/invoiceON}}\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n            <\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/bank_transfer/main.php';
PluginWrapper._config.active = false;

var updateBankTransferWarning = function(list, store) {
	var _this = this;
	setTimeout(function() {
		var text = '';
		if( _this.enabler.getValue() ) {
			var cartPropertiesFields = list.getUiFields();
			if( !cartPropertiesFields.billingShippingRequired.getValue() )
				text += '<li>' + __('"%s" checkbox must also be checked to enable this gateway.').replace("%s", __('Require Billing/Shipping Information')) + '</li>';
			if( !cartPropertiesFields.companyInfo.getValue() || cartPropertiesFields.companyInfo.getValue() === "" )
				text += '<li>' + __('Seller details are required to create invoices.') + '</li>';
			if( !cartPropertiesFields.invoiceDocumentNumberFormat.getValue() || cartPropertiesFields.invoiceDocumentNumberFormat.getValue() === "" )
				text += '<li>' + __('Invoice document number format is required to create invoices.') + '</li>';
			if( !store.contactForm.content.email || !store.contactForm.content.emailFrom  || store.contactForm.content.emailFrom === "" || store.contactForm.content.email === "" )
				text += '<li>' + __('To send order confirmations recipient and sender emails must be entered in store contact form email settings.') + '</li>';
		}
		if( text === '' )
			_this.bankTransferWarnings.setContent('');
		else
			_this.bankTransferWarnings.setContent('<div class="alert alert-warning" style="margin: 5px 0 0;"><ul style="padding: 0 0 0 15px;">' + text + '</ul></div>');
	}, 0);
};

var isV4 = window.wb_builder && wb_builder.builderMajorVersion && wb_builder.builderMajorVersion > 3;

ElementRegister.registerPaymentGateway({
	name: __('Bank Transfer'),
	id: 'bank_transfer',
	priority: 2,
	forceActive: true, // PluginWrapper._config.active,
	pageUrl: null,
	keyFieldId: 'info',
	keyField2Id: 'btnDownloadLabel',
	keyFieldDefaultValue: '<p><span style="color:rgb(0,0,0);">' + __("Your order was successfully placed.") + '<br />' + __("Please use Seller bank account information in invoice to make a bank transfer for your order.") + '</span></p>',
	keyField2DefaultValue: __('Download invoice'),
	keyFieldDef: {type: 'VerticalLayout', children: [
		{type: 'HorizontalLayout', columnWeights: [12, 12, 12], children: [
			{type: 'Label', text: __('Information to display when order is placed')},
			{type: 'WYSIWYGControl', id: 'key', css: {height: 100, marginBottom: 5}, forcePasteAsPlainText: true},
			{type: 'MultilangTextField', id: 'key2', css: {width: 180}, visible: isV4, init: function() {
				this.getInputs().css('text-align', 'center');
			}}
		]},
		{type: 'CustomContainer', id: 'bankTransferWarnings'}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['info', 'btnDownloadLabel'],
	onInit: function(list, store) {
		var _this = this;
		var cartPropertiesFields = list.getUiFields();
		cartPropertiesFields.billingShippingRequired.on("change", function() {
			updateBankTransferWarning.call(_this, list, store);
		});
		cartPropertiesFields.companyInfo.on("change", function() {
			updateBankTransferWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberFormat.on("change", function() {
			updateBankTransferWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberSeries.on("change", function() {
			updateBankTransferWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberLength.on("change", function() {
			updateBankTransferWarning.call(_this, list, store);
		});
	},
	onEnable: updateBankTransferWarning,
	onDisable: updateBankTransferWarning
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"klarna","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/klarna","pluginUri":"plugins\/klarna","customConfiguration":null};
PluginWrapper._config.id = 'klarna';
PluginWrapper._config.baseUri = "plugins\/klarna";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n\n{{#isPublished}}\n<div class=\"modal fade\" id=\"klarnaModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\" id=\"myModalLabel\">Klarna<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n                <form id=\"klarnaForm_{{id}}\" method=\"post\" action=\"\" data-gateway-id=\"Klarna\">\n\n                    {{^content.store}}\n                    <div class=\"form-group\">\n                        <label>{{\"Billing country\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n                        <select class=\"form-control\" id=\"countries\" name=\"CountriesList\" form=\"klarnaForm_{{id}}\" required=\"required\">\n                            <option value=\"AX\">\u00c5land Islands<\/option>\n                            <option value=\"AL\">Albania<\/option>\n                            <option value=\"DZ\">Algeria<\/option>\n                            <option value=\"AS\">American Samoa<\/option>\n                            <option value=\"AD\">Andorra<\/option>\n                            <option value=\"AI\">Anguilla<\/option>\n                            <option value=\"AQ\">Antarctica<\/option>\n                            <option value=\"AG\">Antigua and Barbuda<\/option>\n                            <option value=\"AR\">Argentina<\/option>\n                            <option value=\"AM\">Armenia<\/option>\n                            <option value=\"AW\">Aruba<\/option>\n                            <option value=\"AU\">Australia<\/option>\n                            <option value=\"AT\">Austria<\/option>\n                            <option value=\"AZ\">Azerbaijan<\/option>\n                            <option value=\"BS\">Bahamas<\/option>\n                            <option value=\"BH\">Bahrain<\/option>\n                            <option value=\"BD\">Bangladesh<\/option>\n                            <option value=\"BB\">Barbados<\/option>\n                            <option value=\"BY\">Belarus<\/option>\n                            <option value=\"BE\">Belgium<\/option>\n                            <option value=\"BZ\">Belize<\/option>\n                            <option value=\"BJ\">Benin<\/option>\n                            <option value=\"BM\">Bermuda<\/option>\n                            <option value=\"BT\">Bhutan<\/option>\n                            <option value=\"BO\">Bolivia<\/option>\n                            <option value=\"BA\">Bosnia and Herzegovina<\/option>\n                            <option value=\"BW\">Botswana<\/option>\n                            <option value=\"BR\">Brazil<\/option>\n                            <option value=\"BQ\">British Antarctic Territory<\/option>\n                            <option value=\"VG\">British Virgin Islands<\/option>\n                            <option value=\"BN\">Brunei<\/option>\n                            <option value=\"BG\">Bulgaria<\/option>\n                            <option value=\"BF\">Burkina Faso<\/option>\n                            <option value=\"CM\">Cameroon<\/option>\n                            <option value=\"CA\">Canada<\/option>\n                            <option value=\"CV\">Cape Verde<\/option>\n                            <option value=\"KY\">Cayman Islands<\/option>\n                            <option value=\"CF\">Central African Republic<\/option>\n                            <option value=\"CL\">Chile<\/option>\n                            <option value=\"CN\">China<\/option>\n                            <option value=\"CX\">Christmas Island<\/option>\n                            <option value=\"CO\">Colombia<\/option>\n                            <option value=\"KM\">Comoros<\/option>\n                            <option value=\"CK\">Cook Islands<\/option>\n                            <option value=\"CR\">Costa Rica<\/option>\n                            <option value=\"CI\">C\u00f4te d\u2019Ivoire<\/option>\n                            <option value=\"HR\">Croatia<\/option>\n                            <option value=\"CU\">Cuba<\/option>\n                            <option value=\"CY\">Cyprus<\/option>\n                            <option value=\"CZ\">Czech Republic<\/option>\n                            <option value=\"DK\">Denmark<\/option>\n                            <option value=\"DJ\">Djibouti<\/option>\n                            <option value=\"DM\">Dominica<\/option>\n                            <option value=\"DO\">Dominican Republic<\/option>\n                            <option value=\"EC\">Ecuador<\/option>\n                            <option value=\"EG\">Egypt<\/option>\n                            <option value=\"SV\">El Salvador<\/option>\n                            <option value=\"ER\">Eritrea<\/option>\n                            <option value=\"EE\">Estonia<\/option>\n                            <option value=\"ET\">Ethiopia<\/option>\n                            <option value=\"FK\">Falkland Islands<\/option>\n                            <option value=\"FO\">Faroe Islands<\/option>\n                            <option value=\"FJ\">Fiji<\/option>\n                            <option value=\"FI\">Finland<\/option>\n                            <option value=\"FR\">France<\/option>\n                            <option value=\"GF\">French Guiana<\/option>\n                            <option value=\"PF\">French Polynesia<\/option>\n                            <option value=\"TF\">French Southern Territories<\/option>\n                            <option value=\"GA\">Gabon<\/option>\n                            <option value=\"GM\">Gambia<\/option>\n                            <option value=\"GE\">Georgia<\/option>\n                            <option value=\"DE\">Germany<\/option>\n                            <option value=\"GH\">Ghana<\/option>\n                            <option value=\"GI\">Gibraltar<\/option>\n                            <option value=\"GR\">Greece<\/option>\n                            <option value=\"GL\">Greenland<\/option>\n                            <option value=\"GD\">Grenada<\/option>\n                            <option value=\"GP\">Guadeloupe<\/option>\n                            <option value=\"GU\">Guam<\/option>\n                            <option value=\"GT\">Guatemala<\/option>\n                            <option value=\"GG\">Guernsey<\/option>\n                            <option value=\"GN\">Guinea<\/option>\n                            <option value=\"GY\">Guyana<\/option>\n                            <option value=\"HN\">Honduras<\/option>\n                            <option value=\"HK\">Hong Kong SAR China<\/option>\n                            <option value=\"HU\">Hungary<\/option>\n                            <option value=\"IS\">Iceland<\/option>\n                            <option value=\"IN\">India<\/option>\n                            <option value=\"ID\">Indonesia<\/option>\n                            <option value=\"IE\">Ireland<\/option>\n                            <option value=\"IM\">Isle of Man<\/option>\n                            <option value=\"IL\">Israel<\/option>\n                            <option value=\"IT\">Italy<\/option>\n                            <option value=\"JM\">Jamaica<\/option>\n                            <option value=\"JP\">Japan<\/option>\n                            <option value=\"JE\">Jersey<\/option>\n                            <option value=\"JO\">Jordan<\/option>\n                            <option value=\"KZ\">Kazakhstan<\/option>\n                            <option value=\"KE\">Kenya<\/option>\n                            <option value=\"KI\">Kiribati<\/option>\n                            <option value=\"KW\">Kuwait<\/option>\n                            <option value=\"KG\">Kyrgyzstan<\/option>\n                            <option value=\"LA\">Laos<\/option>\n                            <option value=\"LV\">Latvia<\/option>\n                            <option value=\"LB\">Lebanon<\/option>\n                            <option value=\"LS\">Lesotho<\/option>\n                            <option value=\"LR\">Liberia<\/option>\n                            <option value=\"LI\">Liechtenstein<\/option>\n                            <option value=\"LT\">Lithuania<\/option>\n                            <option value=\"LU\">Luxembourg<\/option>\n                            <option value=\"MO\">Macau SAR China<\/option>\n                            <option value=\"MK\">Macedonia<\/option>\n                            <option value=\"MG\">Madagascar<\/option>\n                            <option value=\"MW\">Malawi<\/option>\n                            <option value=\"MY\">Malaysia<\/option>\n                            <option value=\"MV\">Maldives<\/option>\n                            <option value=\"ML\">Mali<\/option>\n                            <option value=\"MT\">Malta<\/option>\n                            <option value=\"MH\">Marshall Islands<\/option>\n                            <option value=\"MQ\">Martinique<\/option>\n                            <option value=\"MR\">Mauritania<\/option>\n                            <option value=\"MU\">Mauritius<\/option>\n                            <option value=\"YT\">Mayotte<\/option>\n                            <option value=\"MX\">Mexico<\/option>\n                            <option value=\"FM\">Micronesia<\/option>\n                            <option value=\"MD\">Moldova<\/option>\n                            <option value=\"MC\">Monaco<\/option>\n                            <option value=\"MN\">Mongolia<\/option>\n                            <option value=\"ME\">Montenegro<\/option>\n                            <option value=\"MA\">Morocco<\/option>\n                            <option value=\"MZ\">Mozambique<\/option>\n                            <option value=\"MM\">Myanmar [Burma]<\/option>\n                            <option value=\"NA\">Namibia<\/option>\n                            <option value=\"NR\">Nauru<\/option>\n                            <option value=\"NP\">Nepal<\/option>\n                            <option value=\"NL\">Netherlands<\/option>\n                            <option value=\"NC\">New Caledonia<\/option>\n                            <option value=\"NZ\">New Zealand<\/option>\n                            <option value=\"NI\">Nicaragua<\/option>\n                            <option value=\"NE\">Niger<\/option>\n                            <option value=\"NG\">Nigeria<\/option>\n                            <option value=\"NU\">Niue<\/option>\n                            <option value=\"NF\">Norfolk Island<\/option>\n                            <option value=\"MP\">Northern Mariana Islands<\/option>\n                            <option value=\"NO\">Norway<\/option>\n                            <option value=\"OM\">Oman<\/option>\n                            <option value=\"PK\">Pakistan<\/option>\n                            <option value=\"PW\">Palau<\/option>\n                            <option value=\"PS\">Palestinian Territories<\/option>\n                            <option value=\"PA\">Panama<\/option>\n                            <option value=\"PG\">Papua New Guinea<\/option>\n                            <option value=\"PY\">Paraguay<\/option>\n                            <option value=\"PE\">Peru<\/option>\n                            <option value=\"PH\">Philippines<\/option>\n                            <option value=\"PL\">Poland<\/option>\n                            <option value=\"PT\">Portugal<\/option>\n                            <option value=\"PR\">Puerto Rico<\/option>\n                            <option value=\"QA\">Qatar<\/option>\n                            <option value=\"RE\">R\u00e9union<\/option>\n                            <option value=\"RO\">Romania<\/option>\n                            <option value=\"RU\">Russia<\/option>\n                            <option value=\"RW\">Rwanda<\/option>\n                            <option value=\"BL\">Saint Barth\u00e9lemy<\/option>\n                            <option value=\"SH\">Saint Helena<\/option>\n                            <option value=\"KN\">Saint Kitts and Nevis<\/option>\n                            <option value=\"LC\">Saint Lucia<\/option>\n                            <option value=\"MF\">Saint Martin<\/option>\n                            <option value=\"PM\">Saint Pierre and Miquelon<\/option>\n                            <option value=\"VC\">Saint Vincent and the Grenadines<\/option>\n                            <option value=\"WS\">Samoa<\/option>\n                            <option value=\"SM\">San Marino<\/option>\n                            <option value=\"ST\">S\u00e3o Tom\u00e9 and Pr\u00edncipe<\/option>\n                            <option value=\"SA\">Saudi Arabia<\/option>\n                            <option value=\"SN\">Senegal<\/option>\n                            <option value=\"RS\">Serbia<\/option>\n                            <option value=\"SC\">Seychelles<\/option>\n                            <option value=\"SL\">Sierra Leone<\/option>\n                            <option value=\"SG\">Singapore<\/option>\n                            <option value=\"SK\">Slovakia<\/option>\n                            <option value=\"SI\">Slovenia<\/option>\n                            <option value=\"SB\">Solomon Islands<\/option>\n                            <option value=\"ZA\">South Africa<\/option>\n                            <option value=\"GS\">South Georgia and the South Sandwich Islands<\/option>\n                            <option value=\"KR\">South Korea<\/option>\n                            <option value=\"ES\">Spain<\/option>\n                            <option value=\"LK\">Sri Lanka<\/option>\n                            <option value=\"SR\">Suriname<\/option>\n                            <option value=\"SJ\">Svalbard and Jan Mayen<\/option>\n                            <option value=\"SZ\">Swaziland<\/option>\n                            <option value=\"SE\">Sweden<\/option>\n                            <option value=\"CH\">Switzerland<\/option>\n                            <option value=\"TW\">Taiwan<\/option>\n                            <option value=\"TJ\">Tajikistan<\/option>\n                            <option value=\"TZ\">Tanzania<\/option>\n                            <option value=\"TH\">Thailand<\/option>\n                            <option value=\"TL\">Timor-Leste<\/option>\n                            <option value=\"TG\">Togo<\/option>\n                            <option value=\"TK\">Tokelau<\/option>\n                            <option value=\"TO\">Tonga<\/option>\n                            <option value=\"TT\">Trinidad and Tobago<\/option>\n                            <option value=\"TR\">Turkey<\/option>\n                            <option value=\"TC\">Turks and Caicos Islands<\/option>\n                            <option value=\"TV\">Tuvalu<\/option>\n                            <option value=\"UM\">U.S. Minor Outlying Islands<\/option>\n                            <option value=\"VI\">U.S. Virgin Islands<\/option>\n                            <option value=\"UG\">Uganda<\/option>\n                            <option value=\"UA\">Ukraine<\/option>\n                            <option value=\"AE\">United Arab Emirates<\/option>\n                            <option value=\"GB\">United Kingdom<\/option>\n                            <option value=\"US\">United States<\/option>\n                            <option value=\"UY\">Uruguay<\/option>\n                            <option value=\"UZ\">Uzbekistan<\/option>\n                            <option value=\"VU\">Vanuatu<\/option>\n                            <option value=\"VA\">Vatican City<\/option>\n                            <option value=\"VN\">Vietnam<\/option>\n                            <option value=\"WF\">Wallis and Futuna<\/option>\n                            <option value=\"ZM\">Zambia<\/option>\n                            <option value=\"ZW\">Zimbabwe<\/option>\n                        <\/select>\n                    <\/div>\n                    {{\/content.store}}\n                    {{#content.store}}\n\n                    <input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n                    <input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n                    <input type=\"hidden\" name=\"currencyCode\" value=\"{{content.currencyCode}}\" \/>\n                    <input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n                    <input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n                    <input class=\"hidden\" type=\"submit\"\/>\n                   {{\/content.store}}\n                <\/form>\n                <div id=\"klarnaCheckoutRender_{{id}}\"><\/div>\n                <div id=\"klarnaError_{{id}}\" class=\"alert alert-danger\"><\/div>\n\n            <\/div>\n            {{^content.store}}\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n                <button id=\"klarnaBackBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"showModal_{{id}}()\">{{\"Back\" | tr}}<\/button>\n                <button id=\"klarnaNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startPaymentFlow_{{id}}()\">{{\"Next\" | tr}}<\/button>\n            <\/div>\n            {{\/content.store}}\n            {{#content.store}}\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close<\/button>\n            <\/div>\n            {{\/content.store}}\n        <\/div>\n    <\/div>\n<\/div>\n{{{requireService}}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/klarna/main.php';
PluginWrapper._config.active = false;
var Globals = {
    getDefaultStyles: function(isStore) {
		var styles = {
            button_color: '#fafafa',
            button_border: {
                color: '#fff',
                style: 'solid',
                weight: 1,
                css: { border: '1px solid #fff' },
                cssRaw: 'border: 1px solid #fff'
            },
            logo: 'klarna_dark.svg',
            font_family: 'Arial',
            font_size: 12,
            label_color: '#949494'
		};
        return isStore ? styles : $.extend(true, styles, {
            button_label: __('Pay with %s').replace('%s', ''),
            showlogo: true,
            logo_width: 110,
            button_padding: 4
        });
    },
	getLogosList: function() {
		return [
			{id: 'klarna_dark.svg', name: 'dark'},
			{id: 'klarna_light.svg', name: 'light'},
			{id: 'klarna_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
    name: 'Klarna',
    id: 'klarna',
    pageUrl: 'https://klarna.com/',
    keyField: __('Username'),
    keyFieldId: 'username',
    keyField2: __('Password'),
    keyField2Id: 'password',
    keyField4: __('Test API'),
    keyField4Id: 'isTest',
    keyField5: __('Terms & conditions URL'),
    keyField5Id: 'termsUrl',
    keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,6], children: [
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Username')},
		    {type: 'TextField', placeholder: __('Username'), id: 'key'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Password')},
		    {type: 'TextField', placeholder: __('Password'), id: 'key2', password: true},
        ]},
        {type: 'VerticalLayout', css: {marginTop: 10}, children: [
            {type: 'Label', text: __('Terms & conditions URL')},
		    {type: 'URLControl', noEmail: true, noPhone: true, noLinkTitle: true, noTarget: true, noIndexing: true, noPopup: true, noPopupLink: true, placeholder: '', id: 'key5'},
        ]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key4',  css: {padding: 7, marginTop: 15, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
    nameFieldId: 'itemName',
    priceFieldId: 'price',
    currencyFieldId: 'currencyCode',
    defaultStyles: Globals.getDefaultStyles(true),
    styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'klarna', true),
    globalVars: ['username', 'password', 'isTest', 'termsUrl'],
    useStylesInStoreCart: true,
    logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('klarna', {
    name: 'Klarna',
    element: {
        minSize: {width: 100, height: 50},
        defaultSize: {width: 160, height: 81},
        resizable: true
    },
    properties: PluginWrapper.paymentGatewayStylePropertiesDef([
        {id: 'username', type: 'KlarnaUsername',
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.username ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Username')));
                return opts;
            },
            get: function(data) { return data.content.username; },
            set: function(value, data) {
                data.content.username = value;
            }
        },
        {id: 'password', type: 'KlarnaPassword',
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.password ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Password')));
                return opts;
            },
            get: function(data) { return data.content.password; },
            set: function(value, data) {
                data.content.password = value;
            }
        },
        {id: 'termsUrl', type: 'KlarnaTerms',
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.termsUrl ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Terms & conditions URL')));
                return opts;
            },
            get: function(data) { return data.content.termsUrl; },
            set: function(value, data) {
                data.content.termsUrl = value;
            }
        },
        {id: 'itemName', type: 'KlarnaItemName', helpText: __('The name of the goods. Cannot contain special symbols'),
            get: function(data) { return data.content.itemName; },
            set: function(value, data) {
                data.content.itemName = value;
            }
        },
        {id: 'defaultCountry', type: 'KlarnaDefaultCountry',
            get: function(data) { return data.content.defaultCountry; },
            set: function(value, data) {
                data.content.defaultCountry = value;
            }
        },
        {id: 'price', type: 'KlarnaPrice',
            get: function(data) { return data.content.price; },
            validate: function(value) {
                if (/^[\d.,]+$/.test(value)) {
                    return '';
                } else {
                    return (__('Incorrect format'));
                }
            },
            set: function(value, data) {
                data.content.price = value;
            }
        },
        {id: 'taxAmount', type: 'KlarnaTaxAmount',
            get: function(data) { return data.content.taxAmount; },
            set: function(value, data) {
                data.content.taxAmount = value;
            }
        },
        {id: 'currencyCode', type: 'KlarnaCurrencyCode',
            get: function(data) { return data.content.currencyCode; },
            set: function(value, data) {
                data.content.currencyCode = value;
            }
        },
        {id: 'isTest', type: 'KlarnaIsTest', helpText: __('For testing purpose without real payments'),
            get: function(data) { return data.content.isTest; },
            set: function(value, data) {
                data.content.isTest = value;
            }
        },
    ], Globals.getLogosList(), 'klarna'),
    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Username'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.username ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Username')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'username'}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Password'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.password ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Password')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'password'}
                                ]
                            },
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Currency')},
                                    {
                                        type: 'DropdownBox', id: 'currencyCode', value: 'currencyCode',  options: [
                                            {id: 'USD', name: 'USD', value: 'USD'},
                                            {id: 'GBP', name: 'GBP', value: 'GBP'},
                                            {id: 'DKK', name: 'DKK', value: 'DKK'},
                                            {id: 'EUR', name: 'EUR', value: 'EUR'},
                                            {id: 'NOK', name: 'NOK', value: 'NOK'},
                                            {id: 'SEK', name: 'SEK', value: 'SEK'}
                                        ]
                                    }
                                ]
                            },
                        ]
                    },

                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Item Name')},
                                    {type: 'TextField', id: 'itemName'}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Price with Tax')},
                                    {type: 'TextField', id: 'price'}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Tax Amount') + ', %'},
                                    {type: 'SizeSelector', id: 'taxAmount', min: 0, max: 100}
                                ]
                            },
                        ]
                    },

                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {
                                        type: 'VerticalLayout', css: {marginTop: 15}, children: [
                                            {type: 'Label', text: __('Default billing country')},
                                            {
                                                type: 'DropdownBox', id: 'defaultCountry', value: 'defaultCountry',  options: [
                                                    {id: 'AX', value: 'AX',  name: 'land Islands' },
                                                    {id: 'AL', value: 'AL',  name: 'Albania' },
                                                    {id: 'DZ', value: 'DZ',  name: 'Algeria' },
                                                    {id: 'AS', value: 'AS',  name: 'American Samoa' },
                                                    {id: 'AD', value: 'AD',  name: 'Andorra' },
                                                    {id: 'AI', value: 'AI',  name: 'Anguilla' },
                                                    {id: 'AQ', value: 'AQ',  name: 'Antarctica' },
                                                    {id: 'AG', value: 'AG',  name: 'Antigua and Barbuda' },
                                                    {id: 'AR', value: 'AR',  name: 'Argentina' },
                                                    {id: 'AM', value: 'AM',  name: 'Armenia' },
                                                    {id: 'AW', value: 'AW',  name: 'Aruba' },
                                                    {id: 'AU', value: 'AU',  name: 'Australia' },
                                                    {id: 'AT', value: 'AT',  name: 'Austria' },
                                                    {id: 'AZ', value: 'AZ',  name: 'Azerbaijan' },
                                                    {id: 'BS', value: 'BS',  name: 'Bahamas' },
                                                    {id: 'BH', value: 'BH',  name: 'Bahrain' },
                                                    {id: 'BD', value: 'BD',  name: 'Bangladesh' },
                                                    {id: 'BB', value: 'BB',  name: 'Barbados' },
                                                    {id: 'BY', value: 'BY',  name: 'Belarus' },
                                                    {id: 'BE', value: 'BE',  name: 'Belgium' },
                                                    {id: 'BZ', value: 'BZ',  name: 'Belize' },
                                                    {id: 'BJ', value: 'BJ',  name: 'Benin' },
                                                    {id: 'BM', value: 'BM',  name: 'Bermuda' },
                                                    {id: 'BT', value: 'BT',  name: 'Bhutan' },
                                                    {id: 'BO', value: 'BO',  name: 'Bolivia' },
                                                    {id: 'BA', value: 'BA',  name: 'Bosnia and Herzegovina' },
                                                    {id: 'BW', value: 'BW',  name: 'Botswana' },
                                                    {id: 'BR', value: 'BR',  name: 'Brazil' },
                                                    {id: 'BQ', value: 'BQ',  name: 'British Antarctic Territory' },
                                                    {id: 'VG', value: 'VG',  name: 'British Virgin Islands' },
                                                    {id: 'BN', value: 'BN',  name: 'Brunei' },
                                                    {id: 'BG', value: 'BG',  name: 'Bulgaria' },
                                                    {id: 'BF', value: 'BF',  name: 'Burkina Faso' },
                                                    {id: 'CM', value: 'CM',  name: 'Cameroon' },
                                                    {id: 'CA', value: 'CA',  name: 'Canada' },
                                                    {id: 'CV', value: 'CV',  name: 'Cape Verde' },
                                                    {id: 'KY', value: 'KY',  name: 'Cayman Islands' },
                                                    {id: 'CF', value: 'CF',  name: 'Central African Republic' },
                                                    {id: 'CL', value: 'CL',  name: 'Chile' },
                                                    {id: 'CN', value: 'CN',  name: 'China' },
                                                    {id: 'CX', value: 'CX',  name: 'Christmas Island' },
                                                    {id: 'CO', value: 'CO',  name: 'Colombia' },
                                                    {id: 'KM', value: 'KM',  name: 'Comoros' },
                                                    {id: 'CK', value: 'CK',  name: 'Cook Islands' },
                                                    {id: 'CR', value: 'CR',  name: 'Costa Rica' },
                                                    {id: 'CI', value: 'CI',  name: 'Cte dIvoire' },
                                                    {id: 'HR', value: 'HR',  name: 'Croatia' },
                                                    {id: 'CU', value: 'CU',  name: 'Cuba' },
                                                    {id: 'CY', value: 'CY',  name: 'Cyprus' },
                                                    {id: 'CZ', value: 'CZ',  name: 'Czech Republic' },
                                                    {id: 'DK', value: 'DK',  name: 'Denmark' },
                                                    {id: 'DJ', value: 'DJ',  name: 'Djibouti' },
                                                    {id: 'DM', value: 'DM',  name: 'Dominica' },
                                                    {id: 'DO', value: 'DO',  name: 'Dominican Republic' },
                                                    {id: 'EC', value: 'EC',  name: 'Ecuador' },
                                                    {id: 'EG', value: 'EG',  name: 'Egypt' },
                                                    {id: 'SV', value: 'SV',  name: 'El Salvador' },
                                                    {id: 'ER', value: 'ER',  name: 'Eritrea' },
                                                    {id: 'EE', value: 'EE',  name: 'Estonia' },
                                                    {id: 'ET', value: 'ET',  name: 'Ethiopia' },
                                                    {id: 'FK', value: 'FK',  name: 'Falkland Islands' },
                                                    {id: 'FO', value: 'FO',  name: 'Faroe Islands' },
                                                    {id: 'FJ', value: 'FJ',  name: 'Fiji' },
                                                    {id: 'FI', value: 'FI',  name: 'Finland' },
                                                    {id: 'FR', value: 'FR',  name: 'France' },
                                                    {id: 'GF', value: 'GF',  name: 'French Guiana' },
                                                    {id: 'PF', value: 'PF',  name: 'French Polynesia' },
                                                    {id: 'TF', value: 'TF',  name: 'French Southern Territories' },
                                                    {id: 'GA', value: 'GA',  name: 'Gabon' },
                                                    {id: 'GM', value: 'GM',  name: 'Gambia' },
                                                    {id: 'GE', value: 'GE',  name: 'Georgia' },
                                                    {id: 'DE', value: 'DE',  name: 'Germany' },
                                                    {id: 'GH', value: 'GH',  name: 'Ghana' },
                                                    {id: 'GI', value: 'GI',  name: 'Gibraltar' },
                                                    {id: 'GR', value: 'GR',  name: 'Greece' },
                                                    {id: 'GL', value: 'GL',  name: 'Greenland' },
                                                    {id: 'GD', value: 'GD',  name: 'Grenada' },
                                                    {id: 'GP', value: 'GP',  name: 'Guadeloupe' },
                                                    {id: 'GU', value: 'GU',  name: 'Guam' },
                                                    {id: 'GT', value: 'GT',  name: 'Guatemala' },
                                                    {id: 'GG', value: 'GG',  name: 'Guernsey' },
                                                    {id: 'GN', value: 'GN',  name: 'Guinea' },
                                                    {id: 'GY', value: 'GY',  name: 'Guyana' },
                                                    {id: 'HN', value: 'HN',  name: 'Honduras' },
                                                    {id: 'HK', value: 'HK',  name: 'Hong Kong SAR China' },
                                                    {id: 'HU', value: 'HU',  name: 'Hungary' },
                                                    {id: 'IS', value: 'IS',  name: 'Iceland' },
                                                    {id: 'IN', value: 'IN',  name: 'India' },
                                                    {id: 'ID', value: 'ID',  name: 'Indonesia' },
                                                    {id: 'IE', value: 'IE',  name: 'Ireland' },
                                                    {id: 'IM', value: 'IM',  name: 'Isle of Man' },
                                                    {id: 'IL', value: 'IL',  name: 'Israel' },
                                                    {id: 'IT', value: 'IT',  name: 'Italy' },
                                                    {id: 'JM', value: 'JM',  name: 'Jamaica' },
                                                    {id: 'JP', value: 'JP',  name: 'Japan' },
                                                    {id: 'JE', value: 'JE',  name: 'Jersey' },
                                                    {id: 'JO', value: 'JO',  name: 'Jordan' },
                                                    {id: 'KZ', value: 'KZ',  name: 'Kazakhstan' },
                                                    {id: 'KE', value: 'KE',  name: 'Kenya' },
                                                    {id: 'KI', value: 'KI',  name: 'Kiribati' },
                                                    {id: 'KW', value: 'KW',  name: 'Kuwait' },
                                                    {id: 'KG', value: 'KG',  name: 'Kyrgyzstan' },
                                                    {id: 'LA', value: 'LA',  name: 'Laos' },
                                                    {id: 'LV', value: 'LV',  name: 'Latvia' },
                                                    {id: 'LB', value: 'LB',  name: 'Lebanon' },
                                                    {id: 'LS', value: 'LS',  name: 'Lesotho' },
                                                    {id: 'LR', value: 'LR',  name: 'Liberia' },
                                                    {id: 'LI', value: 'LI',  name: 'Liechtenstein' },
                                                    {id: 'LT', value: 'LT',  name: 'Lithuania' },
                                                    {id: 'LU', value: 'LU',  name: 'Luxembourg' },
                                                    {id: 'MO', value: 'MO',  name: 'Macau SAR China' },
                                                    {id: 'MK', value: 'MK',  name: 'Macedonia' },
                                                    {id: 'MG', value: 'MG',  name: 'Madagascar' },
                                                    {id: 'MW', value: 'MW',  name: 'Malawi' },
                                                    {id: 'MY', value: 'MY',  name: 'Malaysia' },
                                                    {id: 'MV', value: 'MV',  name: 'Maldives' },
                                                    {id: 'ML', value: 'ML',  name: 'Mali' },
                                                    {id: 'MT', value: 'MT',  name: 'Malta' },
                                                    {id: 'MH', value: 'MH',  name: 'Marshall Islands' },
                                                    {id: 'MQ', value: 'MQ',  name: 'Martinique' },
                                                    {id: 'MR', value: 'MR',  name: 'Mauritania' },
                                                    {id: 'MU', value: 'MU',  name: 'Mauritius' },
                                                    {id: 'YT', value: 'YT',  name: 'Mayotte' },
                                                    {id: 'MX', value: 'MX',  name: 'Mexico' },
                                                    {id: 'FM', value: 'FM',  name: 'Micronesia' },
                                                    {id: 'MD', value: 'MD',  name: 'Moldova' },
                                                    {id: 'MC', value: 'MC',  name: 'Monaco' },
                                                    {id: 'MN', value: 'MN',  name: 'Mongolia' },
                                                    {id: 'ME', value: 'ME',  name: 'Montenegro' },
                                                    {id: 'MA', value: 'MA',  name: 'Morocco' },
                                                    {id: 'MZ', value: 'MZ',  name: 'Mozambique' },
                                                    {id: 'MM', value: 'MM',  name: 'Myanmar [Burma]' },
                                                    {id: 'NA', value: 'NA',  name: 'Namibia' },
                                                    {id: 'NR', value: 'NR',  name: 'Nauru' },
                                                    {id: 'NP', value: 'NP',  name: 'Nepal' },
                                                    {id: 'NL', value: 'NL',  name: 'Netherlands' },
                                                    {id: 'NC', value: 'NC',  name: 'New Caledonia' },
                                                    {id: 'NZ', value: 'NZ',  name: 'New Zealand' },
                                                    {id: 'NI', value: 'NI',  name: 'Nicaragua' },
                                                    {id: 'NE', value: 'NE',  name: 'Niger' },
                                                    {id: 'NG', value: 'NG',  name: 'Nigeria' },
                                                    {id: 'NU', value: 'NU',  name: 'Niue' },
                                                    {id: 'NF', value: 'NF',  name: 'Norfolk Island' },
                                                    {id: 'MP', value: 'MP',  name: 'Northern Mariana Islands' },
                                                    {id: 'NO', value: 'NO',  name: 'Norway' },
                                                    {id: 'OM', value: 'OM',  name: 'Oman' },
                                                    {id: 'PK', value: 'PK',  name: 'Pakistan' },
                                                    {id: 'PW', value: 'PW',  name: 'Palau' },
                                                    {id: 'PS', value: 'PS',  name: 'Palestinian Territories' },
                                                    {id: 'PA', value: 'PA',  name: 'Panama' },
                                                    {id: 'PG', value: 'PG',  name: 'Papua New Guinea' },
                                                    {id: 'PY', value: 'PY',  name: 'Paraguay' },
                                                    {id: 'PE', value: 'PE',  name: 'Peru' },
                                                    {id: 'PH', value: 'PH',  name: 'Philippines' },
                                                    {id: 'PL', value: 'PL',  name: 'Poland' },
                                                    {id: 'PT', value: 'PT',  name: 'Portugal' },
                                                    {id: 'PR', value: 'PR',  name: 'Puerto Rico' },
                                                    {id: 'QA', value: 'QA',  name: 'Qatar' },
                                                    {id: 'RE', value: 'RE',  name: 'Runion' },
                                                    {id: 'RO', value: 'RO',  name: 'Romania' },
                                                    {id: 'RU', value: 'RU',  name: 'Russia' },
                                                    {id: 'RW', value: 'RW',  name: 'Rwanda' },
                                                    {id: 'BL', value: 'BL',  name: 'Saint Barthlemy' },
                                                    {id: 'SH', value: 'SH',  name: 'Saint Helena' },
                                                    {id: 'KN', value: 'KN',  name: 'Saint Kitts and Nevis' },
                                                    {id: 'LC', value: 'LC',  name: 'Saint Lucia' },
                                                    {id: 'MF', value: 'MF',  name: 'Saint Martin' },
                                                    {id: 'PM', value: 'PM',  name: 'Saint Pierre and Miquelon' },
                                                    {id: 'VC', value: 'VC',  name: 'Saint Vincent and the Grenadines' },
                                                    {id: 'WS', value: 'WS',  name: 'Samoa' },
                                                    {id: 'SM', value: 'SM',  name: 'San Marino' },
                                                    {id: 'ST', value: 'ST',  name: 'So Tom and Prncipe' },
                                                    {id: 'SA', value: 'SA',  name: 'Saudi Arabia' },
                                                    {id: 'SN', value: 'SN',  name: 'Senegal' },
                                                    {id: 'RS', value: 'RS',  name: 'Serbia' },
                                                    {id: 'SC', value: 'SC',  name: 'Seychelles' },
                                                    {id: 'SL', value: 'SL',  name: 'Sierra Leone' },
                                                    {id: 'SG', value: 'SG',  name: 'Singapore' },
                                                    {id: 'SK', value: 'SK',  name: 'Slovakia' },
                                                    {id: 'SI', value: 'SI',  name: 'Slovenia' },
                                                    {id: 'SB', value: 'SB',  name: 'Solomon Islands' },
                                                    {id: 'ZA', value: 'ZA',  name: 'South Africa' },
                                                    {id: 'GS', value: 'GS',  name: 'South Georgia and the South Sandwich Islands' },
                                                    {id: 'KR', value: 'KR',  name: 'South Korea' },
                                                    {id: 'ES', value: 'ES',  name: 'Spain' },
                                                    {id: 'LK', value: 'LK',  name: 'Sri Lanka' },
                                                    {id: 'SR', value: 'SR',  name: 'Suriname' },
                                                    {id: 'SJ', value: 'SJ',  name: 'Svalbard and Jan Mayen' },
                                                    {id: 'SZ', value: 'SZ',  name: 'Swaziland' },
                                                    {id: 'SE', value: 'SE',  name: 'Sweden' },
                                                    {id: 'CH', value: 'CH',  name: 'Switzerland' },
                                                    {id: 'TW', value: 'TW',  name: 'Taiwan' },
                                                    {id: 'TJ', value: 'TJ',  name: 'Tajikistan' },
                                                    {id: 'TZ', value: 'TZ',  name: 'Tanzania' },
                                                    {id: 'TH', value: 'TH',  name: 'Thailand' },
                                                    {id: 'TL', value: 'TL',  name: 'Timor-Leste' },
                                                    {id: 'TG', value: 'TG',  name: 'Togo' },
                                                    {id: 'TK', value: 'TK',  name: 'Tokelau' },
                                                    {id: 'TO', value: 'TO',  name: 'Tonga' },
                                                    {id: 'TT', value: 'TT',  name: 'Trinidad and Tobago' },
                                                    {id: 'TR', value: 'TR',  name: 'Turkey' },
                                                    {id: 'TC', value: 'TC',  name: 'Turks and Caicos Islands' },
                                                    {id: 'TV', value: 'TV',  name: 'Tuvalu' },
                                                    {id: 'UM', value: 'UM',  name: 'U.S. Minor Outlying Islands' },
                                                    {id: 'VI', value: 'VI',  name: 'U.S. Virgin Islands' },
                                                    {id: 'UG', value: 'UG',  name: 'Uganda' },
                                                    {id: 'UA', value: 'UA',  name: 'Ukraine' },
                                                    {id: 'AE', value: 'AE',  name: 'United Arab Emirates' },
                                                    {id: 'GB', value: 'GB',  name: 'United Kingdom' },
                                                    {id: 'US', value: 'US',  name: 'United States' },
                                                    {id: 'UY', value: 'UY',  name: 'Uruguay' },
                                                    {id: 'UZ', value: 'UZ',  name: 'Uzbekistan' },
                                                    {id: 'VU', value: 'VU',  name: 'Vanuatu' },
                                                    {id: 'VA', value: 'VA',  name: 'Vatican City' },
                                                    {id: 'VN', value: 'VN',  name: 'Vietnam' },
                                                    {id: 'WF', value: 'WF',  name: 'Wallis and Futuna' },
                                                    {id: 'ZM', value: 'ZM',  name: 'Zambia' },
                                                    {id: 'ZW', value: 'ZW',  name: 'Zimbabwe' },
                                                ]
                                            }
                                        ]
                                    },
                                ]
                            },
                        ]
                    },

                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Terms & conditions URL'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.termsUrl ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Terms & conditions URL')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'termsUrl'}
                                ]
                            }
                        ]
                    },

                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {
                                        type: 'VerticalLayout', css: {marginTop: 15}, children: [
                                            {
                                                type: 'CheckBox',
                                                id: 'isTest',
                                                css: {display: 'inline-block'},
                                                label: __('Test mode'),
                                                init: function () {
                                                    this.getElem().attr('title', __('For testing purpose without real payments'));
                                                    this.getElem().tooltip({placement: 'right'});
                                                }
                                            }
                                        ]
                                    },
                                ]
                            },
                        ]
                    },
                ]
            },
            PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'klarna'),
        ]
    },

    openAction: function (fields, data, elem) {
        fields.username.setValue(data.content.username);
        fields.password.setValue(data.content.password);
        fields.isTest.setValue(data.content.isTest);
        fields.currencyCode.setValue(data.content.currencyCode);
        fields.itemName.setValue(data.content.itemName);
        fields.price.setValue(data.content.price);
        fields.taxAmount.setValue(data.content.taxAmount);
        fields.defaultCountry.setValue(data.content.defaultCountry);
        fields.termsUrl.setValue(data.content.termsUrl);
        PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.username = fields.username.getValue();
        data.content.password = fields.password.getValue();
        data.content.isTest = fields.isTest.getValue();
        data.content.currencyCode = fields.currencyCode.getValue();
        data.content.itemName = fields.itemName.getValue();
        data.content.price = fields.price.getValue();
        data.content.taxAmount = fields.taxAmount.getValue();
        data.content.defaultCountry = fields.defaultCountry.getValue();
        data.content.termsUrl = fields.termsUrl.getValue();
        PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
    },
    loadAction: function (data) {
        data.content.__globalVars = ['username', 'password', 'isTest', 'termsUrl'];
        if (!data.content.username)
            data.content.username = '';
        if (!data.content.password)
            data.content.password = '';
        if(!data.content.itemName)
            data.content.itemName = '';
        if(!data.content.price)
            data.content.price = '';
        if(!data.content.taxAmount)
            data.content.taxAmount = '';
        if (!data.content.isTest)
            data.content.isTest = true;
        if (!data.content.currencyCode)
            data.content.currencyCode = null;
        if (!data.content.defaultCountry)
            data.content.defaultCountry = null;
        if (!data.content.termsUrl)
            data.content.termsUrl = '';
        if (['logo.svg'].indexOf(data.content.logo) > -1) {
            data.content.logo = 'klarna_dark.svg';
        }
        PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('username');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"tawkto","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/tawkto","pluginUri":"plugins\/tawkto","customConfiguration":null};
PluginWrapper._config.id = 'tawkto';
PluginWrapper._config.baseUri = "plugins\/tawkto";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/tawkto\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n\t<div class=\"wb_caption smaller\">\n\t\t<div>\n\t\t\t<i class=\"ico-pl-tawkto\"><\/i> tawk.to\n\t\t<\/div>\n\t<\/div>\n{{\/isPublished}}\n{{#isPublished}}\n<style>#{{id}} {width: 0; height: 0; min-height: 0; min-width: 0}<\/style>\n{{\/isPublished}}\n{{#firstOnPage}}\n<!--Start of Tawk.to Script-->\n<script type=\"text\/javascript\">\n\tvar Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();\n\t(function(){\n\t\tvar s1=document.createElement(\"script\"),s0=document.getElementsByTagName(\"script\")[0];\n\t\ts1.async=true;\n\t\ts1.src='https:\/\/embed.tawk.to\/{{content.siteId}}\/{{#content.chatId}}{{content.chatId}}{{\/content.chatId}}{{^content.chatId}}default{{\/content.chatId}}';\n\t\ts1.charset='UTF-8';\n\t\ts1.setAttribute('crossorigin','*');\n\t\ts0.parentNode.insertBefore(s1,s0);\n\t})();\n<\/script>\n<!--End of Tawk.to Script-->\n{{\/firstOnPage}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('tawkto', {
    name: 'Tawk.to',
    icon: 'ico-pl-tawkto',
    element: {
        minSize: {
            width: 190,
            height: 70
        },
        defaultSize: {
            width: 190,
            height: 70
        },
        resizable: false,
		supportsFullWidth: false
    },
    properties: [
        {id: 'siteId', type: 'TawktoSiteId', helpText: __('Site ID you can found in tawk.to admin dashboard on property settings page'),
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.siteId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Site ID')));
                return opts;
            },
            get: function(data) { return data.content.siteId; },
            validate: function(value) {
                if (/^[\d\w]*$/.test(value)) return '';
                else return __('This ID is incorrect');
            },
            set: function(value, data) {
                data.content.siteId = (/^[\d\w]*$/.test(value) ? value : '');
            }
        },
        {id: 'chatId', type: 'TawktoChatId',
			uiComponentOptions: function(data, opts) {
				opts.placeholder = 'default';
				return opts;
			},
            get: function(data) { return data.content.chatId; },
            validate: function(value) {
                if (/^[\d\w]*$/.test(value) || !value) return '';
                else return __('This ID is incorrect');
            },
            set: function(value, data) {
                data.content.chatId = (/^[\d\w]*$/.test(value) ? value : '');
            }
        },
    ],
    propertyDialog: {
        noScroll: true,
        tabs: [{
            name: 'General',
            children: [
				{
					type: 'VerticalLayout',
					children: [{
						type: 'Label',
						text: __('Site ID'),
						helpText: __('Site ID you can found in tawk.to admin dashboard on property settings page'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.siteId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Site ID')));
							return opts;
						}
					}, {
						type: 'TextField',
						id: 'siteId'
					}]
            	},
				{
					type: 'VerticalLayout',
					children: [{
						type: 'Label',
						text: __('Chat ID'),
					}, {
						type: 'TextField',
						id: 'chatId'
					}]
            	}
			]
        }]
    },
    resizeTimeout: null,

    resizeAction: function(data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function() {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function(fields, data, elem) {
        fields.siteId.setText(data.content.siteId);
        fields.chatId.setText(data.content.chatId);
    },
    applyAction: function(fields, data, elem) {
        data.content.siteId = fields.siteId.getText();
        data.content.chatId = fields.chatId.getText();
    },
    loadAction: function(data) {
		if (!data.content.siteId) data.content.siteId = '';
		if (!data.content.chatId) data.content.chatId = '';
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('siteId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"liqpay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/liqpay","pluginUri":"plugins\/liqpay","customConfiguration":null};
PluginWrapper._config.id = 'liqpay';
PluginWrapper._config.baseUri = "plugins\/liqpay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/liqpay\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Liqpay\" method=\"POST\" action=\"https:\/\/www.liqpay.ua\/api\/3\/checkout\"{{^content.store}} target=\"_blank\"{{\/content.store}} accept-charset=\"utf-8\" style=\"width: 100%; height: 100%;\">\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"version\" value=\"3\" \/>\n\t<input type=\"hidden\" name=\"action\" value=\"pay\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\n\t<input type=\"hidden\" name=\"order_id\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"result_url\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"server_url\" value=\"{callbackUrl}\" \/>\n\t{{{content.paymentGatewayButton}}}\n\t{{\/content.store}}\n\t{{^isPublished}}\n\t{{{content.paymentGatewayButton}}}\n\t{{\/isPublished}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/liqpay/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {	
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'liqpay_color.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'liqpay_color.svg', name: 'coloured'},
			{id: 'liqpay_black.svg', name: 'black'},
			{id: 'liqpay_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'liqpay_white_color.svg', name: 'white coloured'},
			{id: 'liqpay_tiny.svg', name: 'tiny'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'LiqPay',
	id: 'liqpay',
	pageUrl: 'https://www.liqpay.ua/',
	keyFieldId: 'public_key',
	keyField2Id: 'private_key',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Public Key')},
			{type: 'TextField', placeholder: __('Public Key'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Private Key')},
			{type: 'TextField', placeholder: __('Private Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['public_key', 'private_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'liqpay', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('liqpay', {
	name: 'LiqPay',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'public_key', type: 'LiqpayPublicKey', helpText: __('This key you can get in LiqPay account on shop settings page'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.public_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Key')));
				return opts;
			},
			get: function(data) { return data.content.public_key; },
			set: function(value, data) {
				data.content.public_key = value;
			}
		},
		{id: 'private_key', type: 'LiqpayPrivateKey', helpText: __('This key you can get in LiqPay account on shop settings page'),
			get: function(data) { return data.content.private_key; },
			set: function(value, data) {
				data.content.private_key = value;
			}
		},
		{id: 'description', type: 'LiqpayDescription',
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'LiqpayAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'LiqpayCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'LiqpayDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'liqpay'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Public Key'), helpText: __('This key you can get in LiqPay account on shop settings page'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.public_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Key')));
								return opts;
							}},
							{type: 'TextField', id: 'public_key'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Private Key'), helpText: __('This key you can get in LiqPay account on shop settings page')},
							{type: 'TextField', id: 'private_key'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'description'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount')},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#RUB', name: 'RUB', value: 'RUB'},
								{id: '#UAH', name: 'UAH', value: 'UAH'},
								{id: '#BYN', name: 'BYN', value: 'BYN'},
								{id: '#KZT', name: 'KZT', value: 'KZT'}
							]}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'liqpay')
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		fields.public_key.setText(data.content.public_key);
		fields.private_key.setText(data.content.private_key);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		data.content.public_key = fields.public_key.getText();
		data.content.private_key = fields.private_key.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		if (!data.content.description)
			data.content.description = ''; // Items description
		if (!data.content.amount)
			data.content.amount = '1'; // 129.99
		if (!data.content.currency)
			data.content.currency = 'RUB';
		if (!data.content.public_key)
			data.content.public_key = ''; // 12345
		if (!data.content.private_key)
			data.content.private_key = ''; // 54321
		data.content.langCode = this._getBuilderLanguage();
		if (data.content.demo === undefined) data.content.demo = false;
		if (['liqpay-1.png', 'liqpay-2.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'liqpay_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	_getBuilderLanguage: function() {
		var lang;
		return (lang = wb_builder.getLanguageByLocale(wb_builder.locale)) ? lang.code : 'en';
	},
	switchLanguageAction: function(data, elem, langCode) {
		data.content.langCode = ((langCode === 'ru') ? 'ru' : 'en');
		this.updateElement();
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('public_key');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"paysera","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/paysera","pluginUri":"plugins\/paysera","customConfiguration":null};
PluginWrapper._config.id = 'paysera';
PluginWrapper._config.baseUri = "plugins\/paysera";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/paysera\/main.png";
PluginWrapper._config.template = "<form method=\"POST\" data-gateway-id=\"Paysera\" action=\"https:\/\/www.paysera.com\/pay\/\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\r\n\t{{#content.store}}\r\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" data-multiplier=\"100\" data-fixed-decimal=\"0\" \/>\r\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\r\n\t<input type=\"hidden\" name=\"orderid\" value=\"{transactionId}\" \/>\r\n\t<input type=\"hidden\" name=\"accepturl\" value=\"{returnUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"cancelurl\" value=\"{cancelUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"callbackurl\" value=\"{callbackUrl}\" \/>\r\n\t{{\/content.store}}\r\n\t{{^content.store}}\r\n\t{{{requireService}}}\r\n\t{{\/content.store}}\r\n\t{{{content.paymentGatewayButton}}}\r\n<\/form>\r\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/paysera/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'paysera_dark.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'paysera_dark.svg', name: 'dark'},
			{id: 'paysera_light.svg', name: 'light', backgroundColor: '#000000'},
			{id: 'paysera_light_green.svg', name: 'light-green', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Paysera',
	id: 'paysera',
	pageUrl: 'https://www.paysera.com/',
	keyField: __('Project ID'),
	keyFieldId: 'projectid',
	keyField2: __('Password'),
	keyField2Id: 'password',
	keyField3Id: 'test',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Project ID')},
			{type: 'TextField', placeholder: __('Project ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Password')},
			{type: 'TextField', placeholder: __('Password'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'paytext',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['projectid', 'password', 'test'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paysera', true),
	logos: Globals.getLogosList(),
});
PluginWrapper.registerPlugin('paysera', {
	name: 'Paysera',
	element: {
		minSize: {width: 140, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'projectid', type: 'PayseraProjectId', helpText: __('Unique project number'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.projectid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Project ID')));
				return opts;
			},
			get: function(data) { return data.content.projectid; },
			set: function(value, data) {
				data.content.projectid = value;
			}
		},
		{id: 'password', type: 'PayseraPassword',
			get: function(data) { return data.content.password; },
			set: function(value, data) {
				data.content.password = value;
			}
		},
		{id: 'paytext', type: 'PayseraPaytext', helpText:__('Necessary to include the following variables [order_nr] - payment number, [site_name] - site name'),
			get: function(data) { return data.content.paytext; },
			validate: function (value) {
				if (value.length > 255) {
					return (__('Text exceeds 255 symbols limit'));
				} else {
					return '';
				}
			},
			set: function(value, data) {
				data.content.paytext = value;
			}
		},
		{id: 'amount', type: 'PayseraAmount', helpText:__('Amount to be transferred'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'PayseraCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'test', type: 'PayseraTest', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.test; },
			set: function(value, data) {
				data.content.test = value;
			}
		},
	], Globals.getLogosList(), 'paysera'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Project ID'), helpText: __('Unique project number'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.projectid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Project ID')));
								return opts;
							}},
							{type: 'TextField', id: 'projectid'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Password')},
							{type: 'TextField', id: 'password'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', html: '&nbsp;'},
							{type: 'CheckBox', id: 'test', label: __('Test mode'), css: {marginTop: 5},
								helpText: __('For testing purpose without real payments'),
								helpPlacement: 'top'
							}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name'), helpText:__('Necessary to include the following variables [order_nr] - payment number, [site_name] - site name')},
							{type: 'TextField', id: 'paytext'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText:__('Amount to be transferred')},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: '#AED', name: 'AED', value: 'AED'},
								{id: '#ALL', name: 'ALL', value: 'ALL'},
								{id: '#AMD', name: 'AMD', value: 'AMD'},
								{id: '#ARS', name: 'ARS', value: 'ARS'},
								{id: '#AUD', name: 'AUD', value: 'AUD'},
								{id: '#AZN', name: 'AZN', value: 'AZN'},
								{id: '#BAM', name: 'BAM', value: 'BAM'},
								{id: '#BDT', name: 'BDT', value: 'BDT'},
								{id: '#BGN', name: 'BGN', value: 'BGN'},
								{id: '#BHD', name: 'BHD', value: 'BHD'},
								{id: '#BOB', name: 'BOB', value: 'BOB'},
								{id: '#BRL', name: 'BRL', value: 'BRL'},
								{id: '#BYN', name: 'BYN', value: 'BYN'},
								{id: '#CAD', name: 'CAD', value: 'CAD'},
								{id: '#CHF', name: 'CHF', value: 'CHF'},
								{id: '#CLP', name: 'CLP', value: 'CLP'},
								{id: '#CNY', name: 'CNY', value: 'CNY'},
								{id: '#COP', name: 'COP', value: 'COP'},
								{id: '#CRC', name: 'CRC', value: 'CRC'},
								{id: '#CVE', name: 'CVE', value: 'CVE'},
								{id: '#CZK', name: 'CZK', value: 'CZK'},
								{id: '#DKK', name: 'DKK', value: 'DKK'},
								{id: '#DOP', name: 'DOP', value: 'DOP'},
								{id: '#DZD', name: 'DZD', value: 'DZD'},
								{id: '#EGP', name: 'EGP', value: 'EGP'},
								{id: '#ETB', name: 'ETB', value: 'ETB'},
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#GBP', name: 'GBP', value: 'GBP'},
								{id: '#GEL', name: 'GEL', value: 'GEL'},
								{id: '#GNF', name: 'GNF', value: 'GNF'},
								{id: '#GTQ', name: 'GTQ', value: 'GTQ'},
								{id: '#HKD', name: 'HKD', value: 'HKD'},
								{id: '#HNL', name: 'HNL', value: 'HNL'},
								{id: '#HRK', name: 'HRK', value: 'HRK'},
								{id: '#HUF', name: 'HUF', value: 'HUF'},
								{id: '#IDR', name: 'IDR', value: 'IDR'},
								{id: '#ILS', name: 'ILS', value: 'ILS'},
								{id: '#INR', name: 'INR', value: 'INR'},
								{id: '#IQD', name: 'IQD', value: 'IQD'},
								{id: '#IRR', name: 'IRR', value: 'IRR'},
								{id: '#ISK', name: 'ISK', value: 'ISK'},
								{id: '#JOD', name: 'JOD', value: 'JOD'},
								{id: '#JPY', name: 'JPY', value: 'JPY'},
								{id: '#KES', name: 'KES', value: 'KES'},
								{id: '#KGS', name: 'KGS', value: 'KGS'},
								{id: '#KRW', name: 'KRW', value: 'KRW'},
								{id: '#KWD', name: 'KWD', value: 'KWD'},
								{id: '#KZT', name: 'KZT', value: 'KZT'},
								{id: '#LBP', name: 'LBP', value: 'LBP'},
								{id: '#LKR', name: 'LKR', value: 'LKR'},
								{id: '#MAD', name: 'MAD', value: 'MAD'},
								{id: '#MDL', name: 'MDL', value: 'MDL'},
								{id: '#MGA', name: 'MGA', value: 'MGA'},
								{id: '#MKD', name: 'MKD', value: 'MKD'},
								{id: '#MNT', name: 'MNT', value: 'MNT'},
								{id: '#MXN', name: 'MXN', value: 'MXN'},
								{id: '#MYR', name: 'MYR', value: 'MYR'},
								{id: '#MZN', name: 'MZN', value: 'MZN'},
								{id: '#NGN', name: 'NGN', value: 'NGN'},
								{id: '#NIO', name: 'NIO', value: 'NIO'},
								{id: '#NOK', name: 'NOK', value: 'NOK'},
								{id: '#NZD', name: 'NZD', value: 'NZD'},
								{id: '#OMR', name: 'OMR', value: 'OMR'},
								{id: '#PEN', name: 'PEN', value: 'PEN'},
								{id: '#PHP', name: 'PHP', value: 'PHP'},
								{id: '#PKR', name: 'PKR', value: 'PKR'},
								{id: '#PLN', name: 'PLN', value: 'PLN'},
								{id: '#PYG', name: 'PYG', value: 'PYG'},
								{id: '#QAR', name: 'QAR', value: 'QAR'},
								{id: '#RON', name: 'RON', value: 'RON'},
								{id: '#RSD', name: 'RSD', value: 'RSD'},
								{id: '#RUB', name: 'RUB', value: 'RUB'},
								{id: '#SAR', name: 'SAR', value: 'SAR'},
								{id: '#SEK', name: 'SEK', value: 'SEK'},
								{id: '#SGD', name: 'SGD', value: 'SGD'},
								{id: '#SYP', name: 'SYP', value: 'SYP'},
								{id: '#THB', name: 'THB', value: 'THB'},
								{id: '#TJS', name: 'TJS', value: 'TJS'},
								{id: '#TND', name: 'TND', value: 'TND'},
								{id: '#TRY', name: 'TRY', value: 'TRY'},
								{id: '#TWD', name: 'TWD', value: 'TWD'},
								{id: '#TZS', name: 'TZS', value: 'TZS'},
								{id: '#UAH', name: 'UAH', value: 'UAH'},
								{id: '#UGX', name: 'UGX', value: 'UGX'},
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#UYU', name: 'UYU', value: 'UYU'},
								{id: '#UZS', name: 'UZS', value: 'UZS'},
								{id: '#VEF', name: 'VEF', value: 'VEF'},
								{id: '#VND', name: 'VND', value: 'VND'},
								{id: '#XAF', name: 'XAF', value: 'XAF'},
								{id: '#XOF', name: 'XOF', value: 'XOF'},
								{id: '#YER', name: 'YER', value: 'YER'},
								{id: '#ZAR', name: 'ZAR', value: 'ZAR'}
							]}
						]}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paysera')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.projectid.setText(data.content.projectid);
		fields.password.setText(data.content.password);
		fields.paytext.setText(data.content.paytext);
		fields.amount.setText(data.content.amount);
		fields.test.setValue(data.content.test ? true : false);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.projectid = fields.projectid.getText();
		data.content.password = fields.password.getText();
		data.content.paytext = fields.paytext.getText();
		data.content.amount = fields.amount.getText();
		data.content.test = fields.test.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.projectid)
			data.content.projectid = '';
		if (!data.content.password)
			data.content.password = '';
		if (!data.content.paytext)
			data.content.paytext = 'Payment for goods made to order [order_nr] in website [site_name]';
		if (!data.content.amount)
			data.content.amount = '1';
		if (!data.content.currency)
			data.content.currency = 'EUR';
		if (!data.content.test) data.content.test = false;
		if (['paysera.png', 'paysera_color.svg', 'paysera_black.svg', 'paysera_white.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'paysera_dark.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('projectid');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"countdown","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/countdown","pluginUri":"plugins\/countdown","customConfiguration":null};
PluginWrapper._config.id = 'countdown';
PluginWrapper._config.baseUri = "plugins\/countdown";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/countdown\/main.png";
PluginWrapper._config.template = "\n\t<style>\n\t\t#{{id}}_countdown_timer {\n\t\t    width: 100%;\n\t\t    height: 100%;\n\t\t\tfont-family: {{{content.timerFontFamily}}};\n\t\t\tfont-size: {{content.timerFontSize}}px;\n\t\t\tcolor: {{content.timerFontColor}};\n\t\t\ttext-align: center;\n\t\t\tline-height: 100%;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-around;\n\t\t\talign-items: center;\n\t\t\tflex-wrap: nowrap;\n\t\t\t{{# content.timerFontStyle.css.font-style}} font-style: {{content.timerFontStyle.css.font-style}}; {{\/ content.timerFontStyle.css.font-style}}\n\t\t\t{{# content.timerFontStyle.css.font-weight}} font-weight: {{content.timerFontStyle.css.font-weight}}; {{\/ content.timerFontStyle.css.font-weight}}\n\t\t\t{{# content.timerFontStyle.css.text-decoration}} text-decoration: {{content.timerFontStyle.css.text-decoration}}; {{\/ content.timerFontStyle.css.text-decoration}}\n\t   \t}\n\t\t@media all and (max-width: 320px) {\n\t\t\t#{{id}}_countdown_timer {\n\t\t\t\tfont-size: {{content.timerFontSizeMob}}px;\n\t\t\t}\n\t\t\t#{{id}}_countdown_timer .dlmtr {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t#{{id}}_countdown_timer .dlmtr {\n\t\t\tdisplay: inline-block;\n\t\t\tposition: relative;\n\t\t    vertical-align: middle;\n\t\t\t{{# content.captionTopPosition}}\n\t\t\t\tmargin-top: calc({{content.captionSpacing}}px + {{content.captionFontSize}}px);\n\t\t\t{{\/ content.captionTopPosition}}\n\t\t\t{{# content.captionBottomPosition}}\n\t\t\t\tmargin-bottom: calc({{content.captionSpacing}}px + {{content.captionFontSize}}px);\n\t\t\t{{\/ content.captionBottomPosition}}\n\t    }\n\t\t#{{id}}_countdown_timer .numblock {\n\t\t\tdisplay: inline-block;\n\t\t\tposition: relative;\n\t\t\tvertical-align: middle;\n\t\t\t{{# content.captionTopPosition}}\n\t\t\t\tmargin-top: calc({{content.captionSpacing}}px + {{content.captionFontSize}}px);\n\t\t\t{{\/ content.captionTopPosition}}\n\t\t\t{{# content.captionBottomPosition}}\n\t\t\t\tmargin-bottom: calc({{content.captionSpacing}}px + {{content.captionFontSize}}px);\n\t\t\t{{\/ content.captionBottomPosition}}\n\t    }\n\t\t#{{id}}_countdown_timer .numblock .num {\n\t    \tposition: absolute;\n\t   \t\tdisplay: block;\n\t\t\ttop: 0;\n\t\t\tleft: 50%;\n\t\t    transform: translateX(-50%);\n\t    }\n\t\t#{{id}}_countdown_timer .numblock .plchldr {\n\t\t\tcolor: transparent !important;\n\t\t\topacity: 0;\n\t\t\t{{# content.timerFontStyle.css.font-style}} font-style: {{content.timerFontStyle.css.font-style}}; {{\/ content.timerFontStyle.css.font-style}}\n\t\t\t{{# content.timerFontStyle.css.font-weight}} font-weight: {{content.timerFontStyle.css.font-weight}}; {{\/ content.timerFontStyle.css.font-weight}}\n\t\t\t{{# content.timerFontStyle.css.text-decoration}} text-decoration: {{content.timerFontStyle.css.text-decoration}}; {{\/ content.timerFontStyle.css.text-decoration}}\n\t    }\n\t\t#{{id}}_countdown_timer .numblock:after {\n\t\t\tfont-family: {{{content.captionFontFamily}}};\n\t\t\tfont-size: {{content.captionFontSize}}px;\n\t\t\tcolor: {{content.captionFontColor}};\n\t\t\ttext-transform: capitalize;\n\t\t\ttext-align: center;\n\t\t\tline-height: 100%;\n\t\t\tposition: absolute;\n\t\t\t{{# content.captionTopPosition}}\n\t\t\t\ttop: -{{content.captionSpacing}}px;\n\t\t\t{{\/ content.captionTopPosition}}\n\t\t\t{{# content.captionBottomPosition}}\n\t\t\t\tbottom: -{{content.captionSpacing}}px;\n\t\t\t{{\/ content.captionBottomPosition}}\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\t{{# content.captionFontStyle.css.font-style}} font-style: {{content.captionFontStyle.css.font-style}}; {{\/ content.captionFontStyle.css.font-style}}\n\t\t\t{{# content.captionFontStyle.css.font-weight}} font-weight: {{content.captionFontStyle.css.font-weight}}; {{\/ content.captionFontStyle.css.font-weight}}\n\t\t\t{{# content.captionFontStyle.css.text-decoration}} text-decoration: {{content.captionFontStyle.css.text-decoration}}; {{\/ content.captionFontStyle.css.text-decoration}}\n\t\t}\n\t\t#{{id}}_countdown_timer .numblock.days:after {\n\t\t\tcontent: \"{{content.texts.days}}\";\n\t    }\n\t\t#{{id}}_countdown_timer .numblock.hours:after {\n\t\t\tcontent: \"{{content.texts.hours}}\";\n\t\t}\n\t\t#{{id}}_countdown_timer .numblock.mins:after {\n\t\t\tcontent: \"{{content.texts.minutes}}\";\n\t\t}\n\t\t#{{id}}_countdown_timer .numblock.secs:after {\n\t\t\tcontent: \"{{content.texts.seconds}}\";\n\t\t}\n\t\t#{{id}}_wb_caption {\n\t\t    width: 100%;\n\t\t    height: 100%;\n\t\t\tbackground-color: transparent !important;\n\t\t\tdisplay: flex;\n\t\t    justify-content: center;\n\t\t\talign-items: center;\n\t    }\n\t\t#{{id}}_wb_caption:before {\n\t\t\tcontent: \"\";\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t\theight: auto;\n\t\t}\n\t<\/style>\n\t<div class=\"wb_caption smaller\" style=\"position: relative\" id=\"{{id}}_wb_caption\">\n\t\t<div id=\"{{id}}_countdown_timer\" style=\"opacity: 0\">\n\t\t\t<div class=\"numblock days\"><span class=\"plchldr\">8<\/span><span class=\"num\"><\/span><\/div>\n\t\t\t<div class=\"dlmtr\">:<\/div>\n\t\t\t<div class=\"numblock hours\"><span class=\"plchldr\">88<\/span><span class=\"num\"><\/span><\/div>\n\t\t\t<div class=\"dlmtr\">:<\/div>\n\t\t\t<div class=\"numblock mins\"><span class=\"plchldr\">88<\/span><span class=\"num\"><\/span><\/div>\n\t\t\t<div class=\"dlmtr\">:<\/div>\n\t\t\t<div class=\"numblock secs\"><span class=\"plchldr\">88<\/span><span class=\"num\"><\/span><\/div>\n\t\t<\/div>\n\t<\/div>\n\n<script type=\"text\/javascript\">\n\t(function () {\n\t\tvar countDown_{{id}} = {\n\t\t\tstart: function() {\n\t\t\t\tthis.countDownBlock = $(\"#{{id}}_countdown_timer\");\n\t\t\t\tthis.textAfterBlock = $(\"#{{id}}_countdown_text_after\");\n\t\t\t\tthis.daysBlock = this.countDownBlock.find(\".days .num\");\n\t\t\t\tthis.hoursBlock = this.countDownBlock.find(\".hours .num\");\n\t\t\t\tthis.minsBlock = this.countDownBlock.find(\".mins .num\");\n\t\t\t\tthis.secsBlock = this.countDownBlock.find(\".secs .num\");\n\n\t\t\t\tvar timerDate = new Date({{content.timerEndTS}});\n\t\t\t\tvar currDate = new Date();\n\n\t\t\t\tvar diff = timerDate.getTime() - currDate.getTime();\n\t\t\t\tthis.diffDays = Math.floor(diff \/ (1000 * 60 * 60 * 24));\n\t\t\t\tdiff = diff - 1000 * 60 * 60 * 24 * this.diffDays;\n\t\t\t\tthis.diffHours = Math.floor(diff \/ (1000 * 60 * 60));\n\t\t\t\tdiff = diff - 1000 * 60 * 60 * this.diffHours;\n\t\t\t\tthis.diffMins = Math.floor(diff \/ (1000 * 60));\n\t\t\t\tdiff = diff - 1000 * 60 * this.diffMins;\n\t\t\t\tthis.diffSecs = Math.floor(diff \/ 1000);\n\n\t\t\t\tif (this.diffDays < 0 || this.diffHours < 0 || this.diffMins < 0 || this.diffSecs < 0\n\t\t\t\t\t|| (this.diffDays === 0 && this.diffHours === 0 && this.diffMins === 0 && this.diffSecs === 0))\n\t\t\t\t{\n\t\t\t\t\tif (window.countDownInterval_{{id}}) clearInterval(window.countDownInterval_{{id}});\n\t\t\t\t\tthis.daysBlock.text(\"0\");\n\t\t\t\t\tthis.hoursBlock.text(\"00\");\n\t\t\t\t\tthis.minsBlock.text(\"00\");\n\t\t\t\t\tthis.secsBlock.text(\"00\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.daysBlock.text(this.diffDays);\n\t\t\t\t\tthis.countDownBlock.find('.days .plchldr').text(this.diffDays);\n\t\t\t\t\tthis.hoursBlock.text(this.pad(this.diffHours));\n\t\t\t\t\tthis.minsBlock.text(this.pad(this.diffMins));\n\t\t\t\t\tthis.secsBlock.text(this.pad(this.diffSecs));\n\t\t\t\t\tthis.countDownBlock.show();\n\t\t\t\t\tthis.textAfterBlock.hide();\n\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tif (window.countDownInterval_{{id}}) clearInterval(window.countDownInterval_{{id}});\n\t\t\t\t\twindow.countDownInterval_{{id}} = setInterval(function () {\n\t\t\t\t\t\tvar ended = self.tick();\n\t\t\t\t\t\tif (ended) {\n\t\t\t\t\t\t\tclearInterval(window.countDownInterval_{{id}});\n\t\t\t\t\t\t};\n\t\t\t\t\t\tself.daysBlock.text(self.diffDays);\n\t\t\t\t\t\tself.hoursBlock.text(self.pad(self.diffHours));\n\t\t\t\t\t\tself.minsBlock.text(self.pad(self.diffMins));\n\t\t\t\t\t\tself.secsBlock.text(self.pad(self.diffSecs));\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t},\n\t\t\tpad: function(val) {\n\t\t\t\tif ((\"\" + val).length === 1) {\n\t\t\t\t\treturn '0' + val;\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\ttick: function() {\n\t\t\t\tif (this.diffDays === 0 && this.diffHours === 0 && this.diffMins === 0 && this.diffSecs === 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (this.diffSecs > 0) {\n\t\t\t\t\t\tthis.diffSecs--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.diffSecs = 59;\n\t\t\t\t\t\tif (this.diffMins > 0) {\n\t\t\t\t\t\t\tthis.diffMins--;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.diffMins = 59;\n\t\t\t\t\t\t\tif (this.diffHours > 0) {\n\t\t\t\t\t\t\t\tthis.diffHours--;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.diffHours = 23;\n\t\t\t\t\t\t\t\tif (this.diffDays > 0) {\n\t\t\t\t\t\t\t\t\tthis.diffDays--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\tcountDown_{{id}}.start();\n\n\t\tvar cBlock = $('#{{id}}_countdown_timer');\n\t\tvar cChildren = cBlock.children();\n\n\t\tvar elem = $('[data-id={{id}}], #{{id}}');\n\t\tvar isAutoLayout = \"{{ height }}\" === 'auto';\n\t\tvar height = parseFloat('{{height}}');\n\t\tvar resizeFn = function (repeat) {\n\t\t\tcBlock.css('opacity', 0);\n\t\t\tif (isAutoLayout) {\n\t\t\t\tcBlock.css('fontSize', 1);\n\n\t\t\t\tvar innerWidth;\n\t\t\t\tvar maxIterations = 100;\n\t\t\t\tdo {\n\t\t\t\t\tcBlock.css('fontSize', parseInt(cBlock.css('fontSize')) + 1);\n\t\t\t\t\tinnerWidth = cChildren.toArray().reduce(function (sum, item) {\n\t\t\t\t\t\treturn sum + item.offsetWidth;\n\t\t\t\t\t}, 0);\n\t\t\t\t\tif (maxIterations > 0) maxIterations--; else break;\n\t\t\t\t} while (innerWidth < cBlock.width() * 0.8);\n\t\t\t} else {\n\t\t\t\tvar h = cBlock.outerHeight();\n\t\t\t\th -= {{content.captionSpacing}} + {{content.captionFontSize}};\n\t\t\t\tcBlock.css('fontSize', h);\n\n\t\t\t\tlet innerWidth = cChildren.toArray().reduce(function (sum, item) {\n\t\t\t\t\treturn sum+item.offsetWidth;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (innerWidth > cBlock.width()) h *= cBlock.width() \/ innerWidth;\n\n\t\t\t\tcBlock.css('fontSize', h);\n\t\t\t}\n\t\t\tcBlock.css('opacity', 1);\n\n\t\t\tif (!repeat) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tresizeFn(true)\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\n\t\tvar timer = null;\n\t\t$(window).resize(function () {\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = null;\n\t\t\t}\n\t\t\ttimer = setTimeout(resizeFn, 200);\n\t\t});\n\t\t$(window).resize();\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('countdown', {
    name: __('Countdown'),
    icon: 'fa fa-clock-o',
    element: {
        minSize: {
            width: 80,
            height: 20
        },
        defaultSize: {
            width: 490,
            height: 90
        },
        resizable: true,
		supportsFullWidth: false
    },
    properties: [
        {id: 'timerEndDateString', type: 'CountdownTimerEndDateString',
            get: function(data) { return data.content.timerEndDateString; },
            set: function(value, data) {
                data.content.timerEndDateString = value;
                this.setTime(data);
            }
        },
        {id: 'timerEndTime', type: 'CountdownTimerEndTime',
            get: function(data) { return data.content.timerEndTime; },
            set: function(value, data) {
            data.content.timerEndTime = value;
            this.setTime(data);
            }
        },
        {id: 'timerFontCountdown', type: 'CountdownTimerFontCountdown',
            get: function(data) { return { color: data.content.timerFontColor, font: data.content.timerFontFamily, style: data.content.timerFontStyle}; },
            set: function(value, data) {
                data.content.timerFontFamily = value.font;
                data.content.timerFontColor = value.color;
                data.content.timerFontStyle = value.style;
            }
        },
        {id: 'timerFontText', type: 'CountdownTimerFontText',
            get: function(data) { return {color: data.content.captionFontColor, font: data.content.captionFontFamily, style: data.content.captionFontStyle, size: data.content.captionFontSize}; },
            set: function(value, data) {
                data.content.captionFontFamily = value.font;
                data.content.captionFontSize = value.size;
                data.content.captionFontColor = value.color;
                data.content.captionFontStyle = value.style;
            }
        },
        {id: 'captionSpacing', type: 'CountdownCaptionSpacing',
            get: function(data) { return data.content.captionSpacing; },
            set: function(value, data) {
                data.content.captionSpacing = value;
                this.preventClipping(data);
            }
        },
        {id: 'captionPosition', type: 'CountdownCaptionPosition',
            get: function(data) { return data.content.captionPosition; },
            set: function(value, data) {
                data.content.captionPosition = value;
                data.content.captionTopPosition = value === 'top';
                data.content.captionBottomPosition = value === 'bottom';
            }
        },
    ],
    propertyDialog: {
        noScroll: true,
        tabs: [{
            name: 'General',
            children: [{
                type: 'VerticalLayout',
                children: [
                    {type: 'FlowLayout', spacing: 14, css: {marginTop: 15}, children: [
                        {type: 'VerticalLayout', children: [
                                {type: 'Label', text: __('End date')},
                                {type: 'TextField', id: 'timerEndDateString', init: function () {
                                        this.getElem().datepicker({
                                            dateFormat: "yy-mm-dd"
                                        });
                                    }}
                            ]},
                        {type: 'VerticalLayout', children: [
                                {type: 'Label', text: __('End time')},
                                {type: 'TextField', id: 'timerEndTime', init: function () {
                                        var elem = this.getElem();
                                        elem.attr('type', 'time');
                                    }},
                            ]},
                        {type: 'FlowLayout', spacing: 14, css: {marginTop: 15}, children: [
                                {type: 'VerticalLayout', children: [
                                        {type: 'Label', text: __('Font')},
                                        {type: 'FontFamilySelector', id: 'timerFontFamily'}
                                    ]},
                                /*{type: 'VerticalLayout', children: [
                                        {type: 'Label', text: __('Size')},
                                        {type: 'SizeSelector', id: 'timerFontSize'}
                                    ]},*/
                                {type: 'VerticalLayout', children: [
                                        {type: 'Label', text: __('Color')},
                                        {type: 'ColorSelector', id: 'timerFontColor', noTransparent: true}
                                    ]},
                                {type: 'VerticalLayout', children: [
                                        {type: 'Label', text: __('Style')},
                                        {type: 'FontStyleSelector', id: 'timerFontStyle'}
                                    ]}
                            ]}
                    ]}]},
                {type: 'CustomContainer', init: function(def, fields) {
                    this._elem.append($('<hr>').css({}));
                }},
                {type: 'VerticalLayout',
                children: [
                    {type: 'FlowLayout', css: {marginTop: 15}, children: [
                            { type: 'VerticalLayout', css: {marginRight: 30}, children: [
                                    { type: 'Label', text: __('Caption position') },
                                    { type: 'FlowLayout', children: [
                                        { type: 'RadioBox', id: 'showTop', label: __('Top'), group: 'captionPosition' },
                                        { type: 'RadioBox', id: 'showBottom', label: __('Bottom'), group: 'captionPosition' }
                                    ]}
                                ]},
                            { type: 'VerticalLayout', children: [
                                    { type: 'Label', text: __('Caption spacing') },
                                    { type: 'SizeSelector', id: 'captionSpacing' },
                                ]}
                    ]},
                    {type: 'FlowLayout', spacing: 14, css: {marginTop: 15}, children: [
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Font')},
                                    {type: 'FontFamilySelector', id: 'captionFontFamily'}
                                ]},
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Size')},
                                    {type: 'SizeSelector', id: 'captionFontSize'}
                                ]},
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Color')},
                                    {type: 'ColorSelector', id: 'captionFontColor', noTransparent: true}
                                ]},
                            {type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Style')},
                                    {type: 'FontStyleSelector', id: 'captionFontStyle'}
                                ]}
                    ]}
                ]}]
        }]
    },
    resizeTimeout: null,
    pluginScoped: {
        pad: function (val) {
            if ((""+val).length === 1) {
                return '0'+val;
            }
            return val;
        },
    },

    preventClipping: function(data) {
        var size = this.getSize();

        if(size.height < data.content.timerFontSize + data.content.captionSpacing * 2) {
            this.setSize(size.width, size.height + data.content.captionSpacing*2);
        }
    },

    setTime: function(data) {
        var timerEndDateDefault = new Date();
        timerEndDateDefault.setMonth(timerEndDateDefault.getMonth() + 1);

        var pad = this.pluginScoped.pad;
        var timerEndTime = data.content.timerEndTime;
        var timerEndDateString = data.content.timerEndDateString;
        if (!timerEndDateString) {
            timerEndDateString = timerEndDateDefault.getFullYear() + '-' + (pad(timerEndDateDefault.getMonth() + 1)) + '-' + pad(timerEndDateDefault.getDate());
        }
        if (!timerEndTime) {
            timerEndTime = pad(timerEndDateDefault.getUTCHours()) + ':' + pad(timerEndDateDefault.getUTCMinutes());
        }

        var timerEndTS;
        var parcedDate = new Date(timerEndDateString+"T"+timerEndTime+":00");
        if (parcedDate && parcedDate.getDate()) {
            timerEndTS = Date.UTC(parcedDate.getUTCFullYear(), parcedDate.getUTCMonth(), parcedDate.getUTCDate(), parcedDate.getUTCHours(), parcedDate.getUTCMinutes(), parcedDate.getUTCSeconds());
        }
        else {
            timerEndTS = Date.UTC(timerEndDateDefault.getUTCFullYear(), timerEndDateDefault.getUTCMonth(), timerEndDateDefault.getUTCDate());
        }
        if (timerEndTS) data.content.timerEndTS = timerEndTS;
    },
    resizeAction: function(data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function() {
                data.content.timerFontSize = data.height/data.content.mply;
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    supportsAutoHeight: function() { return true; },
    openAction: function(fields, data, elem) {
        if (data.content.timerEndDateString) fields.timerEndDateString.setValue(data.content.timerEndDateString);
        if (data.content.timerEndTime) fields.timerEndTime.setValue(data.content.timerEndTime);
        if (data.content.timerFontFamily) fields.timerFontFamily.setValue(data.content.timerFontFamily);
        if (data.content.timerFontColor) fields.timerFontColor.setValue(data.content.timerFontColor);
        if (data.content.timerFontStyle) fields.timerFontStyle.setValue(data.content.timerFontStyle);

        if (data.content.captionTopPosition) fields.showTop.setValue(true);
        if (data.content.captionBottomPosition) fields.showBottom.setValue(true);
        if (data.content.captionSpacing) fields.captionSpacing.setValue(data.content.captionSpacing);

        if (data.content.captionFontFamily) fields.captionFontFamily.setValue(data.content.captionFontFamily);
        if (data.content.captionFontSize) fields.captionFontSize.setValue(data.content.captionFontSize);
        if (data.content.captionFontColor) fields.captionFontColor.setValue(data.content.captionFontColor);
        if (data.content.captionFontStyle) fields.captionFontStyle.setValue(data.content.captionFontStyle);
    },
    applyAction: function(fields, data, elem) {
        var timerEndDateDefault = new Date();
        timerEndDateDefault.setMonth(timerEndDateDefault.getMonth() + 1);

        var thisSelf = this;
        var pad = thisSelf.pluginScoped.pad;
        var timerEndDateString = fields.timerEndDateString.getValue();
        var timerEndTime = fields.timerEndTime.getValue();

        if (!timerEndDateString) {
            timerEndDateString = timerEndDateDefault.getFullYear() + '-' + (this.pluginScoped.pad(timerEndDateDefault.getMonth() + 1)) + '-' + this.pluginScoped.pad(timerEndDateDefault.getDate());
        }
        if (!timerEndTime) {
            timerEndTime = timerEndDateDefault.getUTCHours() + ':' + timerEndDateDefault.getUTCMinutes();
        }

        var timerEndTS;
        var parcedDate = new Date(timerEndDateString+"T"+timerEndTime+":00");
        if (parcedDate) {
            timerEndTS = Date.UTC(parcedDate.getUTCFullYear(), parcedDate.getUTCMonth(), parcedDate.getUTCDate(), parcedDate.getUTCHours(), parcedDate.getUTCMinutes(), parcedDate.getUTCSeconds());
        }
        else {
            timerEndTS = Date.UTC(timerEndDateDefault.getUTCFullYear(), timerEndDateDefault.getUTCMonth(), timerEndDateDefault.getUTCDate());
        }
        if (timerEndTS) data.content.timerEndTS = timerEndTS;
        data.content.timerEndDateString = timerEndDateString;
        data.content.timerEndTime = timerEndTime;

        data.content.timerFontFamily = fields.timerFontFamily.getValue();
        data.content.timerFontColor = fields.timerFontColor.getValue();
        data.content.timerFontStyle = fields.timerFontStyle.getValue();

		data.content.captionTopPosition = false;
		data.content.captionBottomPosition = false;
        if (fields.showTop.getValue()) data.content.captionTopPosition = true;
        if (fields.showBottom.getValue()) data.content.captionBottomPosition = true;
        data.content.captionSpacing = fields.captionSpacing.getValue();

        data.content.captionFontFamily = fields.captionFontFamily.getValue();
        data.content.captionFontSize = fields.captionFontSize.getValue();
        data.content.captionFontColor = fields.captionFontColor.getValue();
        data.content.captionFontStyle = fields.captionFontStyle.getValue();
    },
    loadAction: function(data) {
        var thisSelf = this;
        var pad = thisSelf.pluginScoped.pad;
        var timerEndDate;
        if (!data.content.timerEndTS || !data.content.timerEndDateString) {
            timerEndDate = new Date();
            timerEndDate.setMonth(timerEndDate.getMonth() + 1);
            data.content.timerEndTS = Date.UTC(timerEndDate.getUTCFullYear(), timerEndDate.getUTCMonth(), timerEndDate.getUTCDate(), timerEndDate.getUTCHours(), timerEndDate.getUTCMinutes(), timerEndDate.getUTCSeconds());
        }
        else {
            var timerEndTS = data.content.timerEndTS;
            timerEndDate = new Date(timerEndTS);
            data.content.timerEndDateString = timerEndDate.getFullYear() + '-' + (pad(timerEndDate.getMonth() + 1)) + '-' + pad(timerEndDate.getDate());
            data.content.timerEndTime = pad(timerEndDate.getHours()) + ":" + pad(timerEndDate.getMinutes());
        }

        if (!data.content.timerFontFamily) data.content.timerFontFamily = 'Arial';
        data.content.mply = 1.8;
        data.content.timerFontSize = data.height/data.content.mply;
        if (!data.content.timerFontColor) data.content.timerFontColor = '#000';
        if (!data.content.timerFontStyle) data.content.timerFontStyle = null;
        if (!data.content.captionPosition) data.content.captionPosition = 'top';

        if (!data.content.captionTopPosition) data.content.captionTopPosition = true;
        if (!data.content.captionBottomPosition) data.content.captionBottomPosition = false;

        if (!data.content.captionSpacing) data.content.captionSpacing = 15;

        if (!data.content.captionFontFamily) data.content.captionFontFamily = 'Arial';
        if (!data.content.captionFontSize) data.content.captionFontSize = '12';
        if (!data.content.captionFontColor) data.content.captionFontColor = '#000';
        if (!data.content.captionFontStyle) data.content.captionFontStyle = null;

		data.content.texts = {
			'days': __('days'),
			'hours': __('hours'),
			'minutes': __('minutes'),
			'seconds': __('seconds'),
		};
    },
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.captionFontFamily ) items.push(data.content.captionFontFamily);
		if( data.content.timerFontFamily ) items.push(data.content.timerFontFamily);
		return items;
	},
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('timerEndDateString');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"getbutton","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/getbutton","pluginUri":"plugins\/getbutton","customConfiguration":null};
PluginWrapper._config.id = 'getbutton';
PluginWrapper._config.baseUri = "plugins\/getbutton";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{^isPublished}}\n<div class=\"wb_caption smaller\">\n\t<div>\n\t\t<i class=\"ico-pl-getbutton\"><\/i> GetButton\n\t<\/div>\n<\/div>\n{{\/isPublished}}\n{{#isPublished}}\n<style>#{{id}} {width: 0; height: 0; min-height: 0; min-width: 0}<\/style>\n{{\/isPublished}}\n{{#firstOnPage}}\n{{{requireService}}}\n{{\/firstOnPage}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/getbutton/main.php';
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('getbutton', {
    name: 'GetButton',
    icon: 'ico-pl-getbutton',
    element: {
        minSize: {width: 190, height: 70},
        defaultSize: {width: 190, height: 70},
        resizable: false,
		supportsFullWidth: false,
        renderOnce: true
    },
    properties: [
        {id: 'messenger', type: 'GetbuttonMessenger', helpText: 'How to find your page id: <a target="_blank" href="https://www.facebook.com/help/1503421039731588">Facebook Help</a>',
            get: function(data) { return data.content.messenger; },
            set: function(value, data) {
                data.content.messenger = this.platformCheck('messenger', value, data);
            }
        },
        {id: 'messenger_textfield', type: 'GetbuttonMessengerTextfield',
            get: function(data) { return data.content.messenger_textfield; },
            dependencies: ['messenger'],
            enabled: function(data){return data.content.messenger === true;},
            set: function(value, data) {
                data.content.messenger_textfield = value;
            }
        },
        {id: 'whatsapp', type: 'GetbuttonWhatsapp',
            get: function(data) { return data.content.whatsapp; },
            set: function(value, data) {
                data.content.whatsapp = this.platformCheck('whatsapp', value, data);;
            }
        },
        {id: 'whatsapp_textfield', type: 'GetbuttonWhatsappTextfield',
            get: function(data) { return data.content.whatsapp_textfield; },
            dependencies: ['whatsapp'],
            enabled: function(data){return data.content.whatsapp === true;},
            set: function(value, data) {
                data.content.whatsapp_textfield = value;
            }
        },
        {id: 'viber', type: 'GetbuttonViber',
            get: function(data) { return data.content.viber; },
            set: function(value, data) {
                data.content.viber = this.platformCheck('viber', value, data);
            }
        },
        {id: 'viber_textfield', type: 'GetbuttonViberTextfield',
            get: function(data) { return data.content.viber_textfield; },
            dependencies: ['viber'],
            enabled: function(data){return data.content.viber === true;},
            set: function(value, data) {
                data.content.viber_textfield = value;
            }
        },
        {id: 'snapchat', type: 'GetbuttonSnapchat',
            get: function(data) { return data.content.snapchat; },
            set: function(value, data) {
                data.content.snapchat = this.platformCheck('snapchat', value, data);
            }
        },
        {id: 'snapchat_textfield', type: 'GetbuttonSnapchatTextfield',
            get: function(data) { return data.content.snapchat_textfield; },
            dependencies: ['snapchat'],
            enabled: function(data){return data.content.snapchat === true;},
            set: function(value, data) {
                data.content.snapchat_textfield = value;
            }
        },
        {id: 'line', type: 'GetbuttonLine',
            get: function(data) { return data.content.line; },
            set: function(value, data) {
                data.content.line = this.platformCheck('line', value, data);
            }
        },
        {id: 'line_textfield', type: 'GetbuttonLineTextfield',
            get: function(data) { return data.content.line_textfield; },
            dependencies: ['line'],
            enabled: function(data){return data.content.line === true;},
            set: function(value, data) {
                data.content.line_textfield = value;
            }
        },
        {id: 'telegram', type: 'GetbuttonTelegram',
            get: function(data) { return data.content.telegram; },
            set: function(value, data) {
                data.content.telegram = this.platformCheck('telegram', value, data);
            }
        },
        {id: 'telegram_textfield', type: 'GetbuttonTelegramTextfield',
            get: function(data) { return data.content.telegram_textfield; },
            dependencies: ['telegram'],
            enabled: function(data){return data.content.telegram === true;},
            set: function(value, data) {
                data.content.telegram_textfield = value;
            }
        },
        {id: 'vkontakte', type: 'GetbuttonVkontakte',
            get: function(data) { return data.content.vkontakte; },
            set: function(value, data) {
                data.content.vkontakte = this.platformCheck('vkontakte', value, data);
            }
        },
        {id: 'vkontakte_textfield', type: 'GetbuttonVkontakteTextfield',
            get: function(data) { return data.content.vkontakte_textfield; },
            dependencies: ['vkontakte'],
            enabled: function(data){return data.content.vkontakte === true;},
            set: function(value, data) {
                data.content.vkontakte_textfield = value;
            }
        },
        {id: 'sms', type: 'GetbuttonSms',
            get: function(data) { return data.content.sms; },
            set: function(value, data) {
                data.content.sms = this.platformCheck('sms', value, data);
            }
        },
        {id: 'sms_textfield', type: 'GetbuttonSmsTextfield',
            get: function(data) { return data.content.sms_textfield; },
            dependencies: ['sms'],
            enabled: function(data){return data.content.sms === true;},
            set: function(value, data) {
                data.content.sms_textfield = value;
            }
        },
        {id: 'call', type: 'GetbuttonCall',
            get: function(data) { return data.content.call; },
            set: function(value, data) {
                data.content.call = this.platformCheck('call', value, data);
            }
        },
        {id: 'call_textfield', type: 'GetbuttonCallTextfield',
            get: function(data) { return data.content.call_textfield; },
            dependencies: ['call'],
            enabled: function(data){return data.content.call === true;},
            set: function(value, data) {
                data.content.call_textfield = value;
            }
        },
        {id: 'email', type: 'GetbuttonEmail',
            get: function(data) { return data.content.email; },
            set: function(value, data) {
                data.content.email = this.platformCheck('email', value, data);
            }
        },
        {id: 'email_textfield', type: 'GetbuttonEmailTextfield',
            get: function(data) { return data.content.email_textfield; },
            dependencies: ['email'],
            enabled: function(data){return data.content.email === true;},
            set: function(value, data) {
                data.content.email_textfield = value;
            }
        },
        {id: 'instagram', type: 'GetbuttonInstagram',
            get: function(data) { return data.content.instagram; },
            set: function(value, data) {
                data.content.instagram = this.platformCheck('instagram', value, data);
            }
        },
        {id: 'instagram_textfield', type: 'GetbuttonInstagramTextfield',
            get: function(data) { return data.content.instagram_textfield; },
            dependencies: ['instagram'],
            enabled: function(data){return data.content.instagram === true;},
            set: function(value, data) {
                data.content.instagram_textfield = value;
            }
        },
        //PRO SECTION
        {id: 'activatePro', type: 'GetbuttonActivatePro', helpText: 'Purchase Pro Version Key: <a target="_blank" href="https://getbutton.io/">https://getbutton.io/</a>',
            get: function(data) {return { pro:data.content.isPro,code: data.content.pro_textfield };},
            validate: function(value, data, api) {if (data.content.isPro) return ''; else return __('This key is incorrect');},
            set: function(value, data) {
                data.content.isPro = value.pro;
                data.content.pro_textfield = value.code;
                data.content.finalKey = value.code;
            }
        },
        {id: 'greeting', type: 'GetbuttonProGreeting', helpText: __('It appears in 5 seconds after the page load once in 24 hours for every unique visitor.'),
            get: function(data) { return data.content.greeting; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.greeting = value;
            }
        },
        {id: 'companyUrl', type: 'GetbuttonProCompanyUrl', helpText: __('Adds company logo to the greeting message'),
            get: function(data) { return data.content.companyUrl; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.companyUrl = value;
            }
        },
        {id: 'disableBranding', type: 'GetbuttonProDisableBranding', helpText: __('Disables GetButton.io branding on the button'),
            get: function(data) { return data.content.disableBranding; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.disableBranding = value;
            }
        },
        {id: 'googleAnalytics', type: 'GetbuttonProGoogleAnalytics', helpText: __('Learn more about this feature') + '<br /><a target="_blank" href="https://getbutton.io/help/tracking-chatbutton-events-in-google-analytics">https://getbutton.io/help/tracking-chatbutton-events-in-google-analytics</a>',
            get: function(data) { return data.content.googleAnalytics; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.googleAnalytics = value;
            }
        },
        {id: 'customColor', type: 'GetbuttonProCustomColor', helpText: __('Changes plugin button colour'),
            get: function(data) { return data.content.customColor; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.customColor = value;
            }
        },
        {id: 'vPosition', type: 'GetbuttonProVPosition', helpText: __('Shift vertical position of the plugin button'),
            get: function(data) { return data.content.vPosition; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.vPosition = value;
            }
        },
        {id: 'hPosition', type: 'GetbuttonProHPosition', helpText: __('Shift horizontal position of the plugin button'),
            get: function(data) { return data.content.hPosition; },
            dependencies: ['activatePro'],
            enabled: function(data) {return data.content.isPro === true;},
            set: function(value, data) {
                data.content.hPosition = value;
            }
        },
        {id: 'callToAction', type: 'GetbuttonCallToAction', helpText: __('Appears only on desktop'),
            get: function(data) { return data.content.callToAction; },
            set: function(value, data) {
                data.content.callToAction = value;
            }
        },
        {id: 'position', type: 'GetbuttonPosition',
            get: function(data) { return data.content.position0; },
            set: function(value, data) {
                data.content.position0 = value;
            }
        },
        {id: 'color', type: 'GetbuttonColor',
            get: function(data) { return data.content.color; },
            dependencies: ['activatePro'],
            visible: function(data) {
                return (data.content.isPro === false);
            },
            set: function(value, data) {
                data.content.color = value;
            }
        },
    ],
    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'VerticalLayout', id: 'container', css: {marginTop: 10, textAlign: 'center'}, children: [
                            {type: 'HorizontalLayout', css: {marginTop: 2, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'messenger', label: __('Facebook Messenger'), helpText: 'How to find your page id: <a target="_blank" href="https://www.facebook.com/help/1503421039731588">Facebook Help</a>', change: function(fields) { fields.aaa('messenger', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},
                            {type: 'HorizontalLayout', id: 'messenger_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'messenger_textfield', placeholder: 'Facebook Page ID', css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'whatsapp', label: __('WhatsApp'), helpText: '', change: function(fields) { fields.aaa('whatsapp', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'whatsapp_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'whatsapp_textfield', placeholder: '+1 (800) 123-45-67', css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},
                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'viber', label: __('Viber'), helpText: '', change: function(fields) { fields.aaa('viber', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},
                            {type: 'HorizontalLayout', id: 'viber_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'viber_textfield', placeholder: __('Phone Number or ID'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'snapchat', label: __('Snapchat'), helpText: '', change: function(fields) { fields.aaa('snapchat', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'snapchat_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'snapchat_textfield', placeholder: __('Username'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'line', label: __('Line'), helpText: '', change: function(fields) { fields.aaa('line', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'line_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'line_textfield', placeholder: __('QR code URL'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'telegram', label: __('Telegram'), helpText: '', change: function(fields) { fields.aaa('telegram', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'telegram_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'telegram_textfield', placeholder: __('Bot username'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'vkontakte', label: __('Vkontakte'), helpText: '', change: function(fields) { fields.aaa('vkontakte', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'vkontakte_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'vkontakte_textfield', placeholder: __('Page name'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'sms', label: __('SMS (mobile)'), helpText: '', change: function(fields) { fields.aaa('sms', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'sms_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'sms_textfield', placeholder: __('Phone number'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'call', label: __('Call'), helpText: '', change: function(fields) { fields.aaa('call', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'call_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'call_textfield', placeholder: __('Phone number'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'email', label: __('Email'), helpText: '', change: function(fields) { fields.aaa('email', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'email_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'email_textfield', placeholder: __('Email'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},

                            {type: 'HorizontalLayout', css: {marginTop: 10, textAlign: 'left'}, children: [
                                    {type: 'CheckBox', id: 'instagram', label: __('Instagram'), helpText: '', change: function(fields) { fields.aaa('instagram', this._input[0].checked); }, css: {marginTop: 5}},
                                ]},

                            {type: 'HorizontalLayout', id: 'instagram_container', css: {marginTop: 2, textAlign: 'center'}, children: [
                                {type: 'TextField', id: 'instagram_textfield', placeholder: __('Username'), css: {marginTop: 2, marginLeft: 'auto', marginRight: 'auto'}},
                            ]},
                        ]
                    }

                ]
            },

            {
                name: __("Pro Version"), children: [
                    {type: 'VerticalLayout', children: [
                            {type: 'Label', text: __('Pro Version Key'), init: function()
                                {
                                    var $a = $('<span style="color: red; margin-left: 1px;">*</span>').attr('title', __('Required'));
                                    $a.insertBefore(this.getElem().children('.badge'));
                                },
                                helpText: 'Purchase Pro Version Key: <a target="_blank" href="https://getbutton.io/">https://getbutton.io/</a>', css: {marginTop: 15},},
                        ]},
                    {type: 'VerticalLayout', children: [
                            {type: 'TextField', id: 'pro_textfield', placeholder: __('Pro Version Key'), change: function(fields) {fields.enableButton();}, css: {marginLeft: 'auto', marginRight: 'auto'}},
                        ]},
                    {type: 'Button', text: __('Activate'), id: 'activatePro', enabled: false, visible: true,  css: {marginTop: 10, marginLeft: '0', marginRight: 'auto'}},
                    {
                        type: 'Label',
                        id: 'errorState',
                        visible: false,
                        css: {marginTop: 10, marginLeft: 'auto', marginRight: 'auto', color: 'red'}
                    },
                    {
                        type: 'VerticalLayout', children: [
                            {type: 'Label', text: __('Greeting message'), helpText: __('It appears in 5 seconds after the page load once in 24 hours for every unique visitor.'), css: {marginTop: 15},},
                            {type: 'TextField', id: 'greeting', placeholder: __("Hello, how may we help you? Just send us a message now to get assistance."), enabled: false}
                        ]
                    },
                    {
                        type: 'VerticalLayout', children: [
                            {type: 'Label', text: __('Company Logo URL'), helpText: __('Adds company logo to the greeting message'), css: {marginTop: 15}},
                            {type: 'TextField', id: 'companyUrl', placeholder: __("URL"), enabled: false}
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 5}, columnWeights: [6, 6, 4, 4, 4], children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {
                                        type: 'CheckBox',
                                        id: 'disableBranding',
                                        label: __('Disable branding'),
                                        helpText: __('Disables GetButton.io branding on the button'),
                                        css: {marginTop: 15},
                                        enabled: false
                                    },
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {
                                        type: 'CheckBox',
                                        id: 'googleAnalytics',
                                        label: __('Track clicks in Google Analytics'),
                                        helpText: __('Learn more about this feature') + '<br /><a target="_blank" href="https://getbutton.io/help/tracking-chatbutton-events-in-google-analytics">https://getbutton.io/help/tracking-chatbutton-events-in-google-analytics</a>',
                                        css: {marginTop: 15},
                                        enabled: false
                                    },
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Vertical position, px'), helpText: __('Shift vertical position of the plugin button'), css: {marginTop: 15}},
                                    {type: 'SizeSelector', id: 'vPosition', min: 0, max: 300, enabled: false}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Horizontal position, px'), helpText: __('Shift horizontal position of the plugin button'), css: {marginTop: 15}},
                                    {type: 'SizeSelector', id: 'hPosition', min: 0, max: 300, enabled: false}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Colour'), helpText: __('Changes plugin button colour'), css: {marginTop: 15}},
                                    {type: 'ColorSelector', id: 'customColor', noTransparent: true, enabled: false}
                                ]
                            },
                        ]
                    }
                ]
            },

            {
                name: __('Settings'), children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [4,4,4], children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Position')},
                                    {type: 'RadioBox', id: 'position0', label: __('Left'), group: 'position'},
                                    {type: 'RadioBox', id: 'position1', label: __('Right'), group: 'position'}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Call to action'), helpText: __('Appears only on desktop'),},
                                    {type: 'TextField', id: 'callToAction', placeholder: __("Message us")}
                                ]
                            },
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', id: 'color_label', text: __('Colour')},
                                    {type: 'DropdownBox', id: 'color', useHtmlInput: true, options: [
                                            {id: '#666666', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #666666;"></div>' },
                                            {id: '#E74339', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #E74339;"></div>' },
                                            {id: '#ffa500', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffa500;"></div>' },
                                            {id: '#008000', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #008000;"></div>' },
                                            {id: '#0000ff', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #0000ff;"></div>' },
                                            {id: '#800080', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #800080;"></div>' },
                                            {id: '#ffc0cb', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffc0cb;"></div>' },
                                            {id: '#000000', html: '<div style="width: 50px; height: 16px; margin: 2px 0; background: #000000;"></div>' },
                                        ]}
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    },

    pluginScoped: {
        checkedPlatforms: []
    },

    platformCheck: function(platform, isChecked, data) {
        if(isChecked) {
            this.pluginScoped.checkedPlatforms.push(platform);
            if(this.pluginScoped.checkedPlatforms.length > 2 && !data.content.isPro) {
                this.pluginScoped.checkedPlatforms.splice(this.pluginScoped.checkedPlatforms.indexOf(platform), 1);
                alert(__("To select more than two platforms, you need to get Pro Version."));
                // data.content[platform]= false;
                return false;
            } else {
                return true;
            }
        } else {
            this.pluginScoped.checkedPlatforms.splice(this.pluginScoped.checkedPlatforms.indexOf(platform), 1);
            // data.content[platform] = false;
            return false;
        }

    },
    openAction: function (fields, data, elem) {
        //General tab
        fields.messenger.setValue(data.content.messenger);
        fields.messenger_textfield.setValue(data.content.messenger_textfield);
        fields.whatsapp.setValue(data.content.whatsapp);
        fields.whatsapp_textfield.setValue(data.content.whatsapp_textfield);
        fields.viber.setValue(data.content.viber);
        fields.viber_textfield.setValue(data.content.viber_textfield);
        fields.snapchat.setValue(data.content.snapchat);
        fields.snapchat_textfield.setValue(data.content.snapchat_textfield);
        fields.line.setValue(data.content.line);
        fields.line_textfield.setValue(data.content.line_textfield);
        fields.telegram.setValue(data.content.telegram);
        fields.telegram_textfield.setValue(data.content.telegram_textfield);
        fields.vkontakte.setValue(data.content.vkontakte);
        fields.vkontakte_textfield.setValue(data.content.vkontakte_textfield);
        fields.sms.setValue(data.content.sms);
        fields.sms_textfield.setValue(data.content.sms_textfield);
        fields.call.setValue(data.content.call);
        fields.call_textfield.setValue(data.content.call_textfield);
        fields.email.setValue(data.content.email);
        fields.email_textfield.setValue(data.content.email_textfield);
        fields.instagram.setValue(data.content.instagram);
        fields.instagram_textfield.setValue(data.content.instagram_textfield);
        //////////
        //Pro tab
        fields.validity = data.content.validity;
        fields.finalKey = data.content.finalKey;
        fields.platformSize = data.content.platformSize;
        fields.pro_textfield.setValue(data.content.pro_textfield);
        fields.greeting.setValue(data.content.greeting);
        fields.disableBranding.setValue(data.content.disableBranding);
        fields.googleAnalytics.setValue(data.content.googleAnalytics);
        fields.companyUrl.setValue(data.content.companyUrl);
        fields.hPosition.setValue(data.content.hPosition);
        fields.vPosition.setValue(data.content.vPosition);
        fields.customColor.setValue(data.content.customColor);

        /////////
        //Settings tab
        fields.callToAction.setValue(data.content.callToAction);
        fields.position0.setValue(data.content.position0);
        fields.position1.setValue(data.content.position1);
        fields.color.setValue(data.content.color);
        /////////

        fields.isPro = data.content.isPro;

        if(fields.isPro) {
            fields.color.setVisible(false);
            fields.color_label.setVisible(false);
        }

        if (fields.pro_textfield.getValue().length)
            fields.activatePro.setEnabled(true);

        var tempArray = [];
        if (!fields.aaa) {
            fields.aaa = function (platform, isChecked) {
                var platform_textfield = platform + '_textfield';
                if (isChecked) {
                    tempArray.push(platform);
                    if (tempArray.length > 2 && !fields.isPro) {
                        fields[platform]._input[0].checked = false;
                        tempArray.splice(tempArray.indexOf(platform), 1);
                        alert(__("To select more than two platforms, you need to get Pro Version."));
                    } else {
                        fields[platform_textfield].setEnabled(true);
                    }
                } else {
                    fields[platform_textfield].setEnabled(false);
                    tempArray.splice(tempArray.indexOf(platform), 1);
                }
                fields.platformSize = tempArray.length;
            };
        }
        if (!fields.messenger._input[0].checked) {
            fields.messenger_textfield.setEnabled(false);
        } else {
            tempArray.push('messenger');
        }
        if (!fields.whatsapp._input[0].checked) {
            fields.whatsapp_textfield.setEnabled(false);
        } else {
            tempArray.push('whatsapp');
        }
        if (!fields.viber._input[0].checked) {
            fields.viber_textfield.setEnabled(false);
        } else {
            tempArray.push('viber');
        }
        if (!fields.snapchat._input[0].checked) {
            fields.snapchat_textfield.setEnabled(false);
        } else {
            tempArray.push('snapchat');
        }
        if (!fields.line._input[0].checked) {
            fields.line_textfield.setEnabled(false);
        } else {
            tempArray.push('line');
        }
        if (!fields.telegram._input[0].checked) {
            fields.telegram_textfield.setEnabled(false);
        } else {
            tempArray.push('telegram');
        }
        if (!fields.vkontakte._input[0].checked) {
            fields.vkontakte_textfield.setEnabled(false);
        } else {
            tempArray.push('vkontakte');
        }
        if (!fields.sms._input[0].checked) {
            fields.sms_textfield.setEnabled(false);
        } else {
            tempArray.push('sms');
        }
        if (!fields.call._input[0].checked) {
            fields.call_textfield.setEnabled(false);
        } else {
            tempArray.push('call');
        }
        if (!fields.email._input[0].checked) {
            fields.email_textfield.setEnabled(false);
        } else {
            tempArray.push('email');
        }
        if (!fields.instagram._input[0].checked) {
            fields.instagram_textfield.setEnabled(false);
        } else {
            tempArray.push('instagram');
        }

        if (!fields.enableButton)
            fields.enableButton = function enableProButton() {
                if (fields.pro_textfield.getValue().length)
                    fields.activatePro.setEnabled(true);
            };

        function unlockPro(data) {
            fields.greeting.setEnabled(true);
            fields.disableBranding.setEnabled(true);
            fields.googleAnalytics.setEnabled(true);
            fields.companyUrl.setEnabled(true);
            fields.vPosition.setEnabled(true);
            fields.hPosition.setEnabled(true);
            fields.customColor.setEnabled(true);
            fields.color.setVisible(false);
            fields.color_label.setVisible(false);
        }

        function encodeKey(key) {
            return key.split("").reverse().join("");
        }

        if (!fields.updateDomainAction) {
            fields.updateDomainAction = function updateDomain() {
                var encodedKey = encodeKey(fields.pro_textfield.getValue());
                var domain = wb_builder.siteDomain;
                var url = wb_builder.baseUrl + 'getbutton/update';
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {'domain': domain, 'key': encodedKey},
                    contentType: 'application/json',

                    success: function (response, status, xhr) {
                    },
                    error: function (response, status, xhr) {
                    }
                });
            };
        }

        function validateKey(key) {
            fields.activatePro.setLoading(true);
                var encodedKey = encodeKey(key);
                var url = wb_builder.baseUrl + 'getbutton/validate/?key=';
                $.ajax({
                    type: "POST",
                    url: url + encodedKey,
                    success: function (response, status, xhr) {
                        fields.activatePro.setLoading(false);
                        if (xhr.status === 200 && response.valid === true) {
                            fields.errorState.setVisible(false);
                            unlockPro(response);
                            fields.isPro = true;
                            fields.validity = response.expiredAt;
                            fields.finalKey = response.key;
                        } else {
                            fields.errorState.setHtml(__('This key is invalid.'));
                            fields.errorState.setVisible(true);
                            setTimeout(function () {
                                fields.errorState.setVisible(false);
                            }, 8000);
                        }
                    },
                    error: function (xhr) {
                        if (xhr.status === 404) {
                            fields.activatePro.setLoading(false);
                            fields.errorState.setHtml(__('getbutton.io server is unreachable, try again later.'));
                            fields.errorState.setVisible(true);
                            setTimeout(function () {
                                fields.errorState.setVisible(false);
                            }, 8000);
                        }
                    }
                });
            }

        fields.activatePro.on('click', function() {
            fields.activatePro.setLoading(true);
            var prokey = fields.pro_textfield.getValue();
            if (prokey) {
                validateKey(prokey);
            } else {
                fields.activatePro.setLoading(false);
                fields.errorState.setHtml(__('Key cannot be empty.'));
                fields.errorState.setVisible(true);
                setTimeout(function () {
                    fields.errorState.setVisible(false);
                }, 8000);
            }
        });

    },
    applyAction: function (fields, data, elem) {
        //General tab
        data.content.messenger = fields.messenger.getValue();
        data.content.messenger_textfield = fields.messenger_textfield.getValue();
        data.content.whatsapp = fields.whatsapp.getValue();
        data.content.whatsapp_textfield = fields.whatsapp_textfield.getValue();
        data.content.viber = fields.viber.getValue();
        data.content.viber_textfield = fields.viber_textfield.getValue();
        data.content.snapchat = fields.snapchat.getValue();
        data.content.snapchat_textfield = fields.snapchat_textfield.getValue();
        data.content.line = fields.line.getValue();
        data.content.line_textfield = fields.line_textfield.getValue();
        data.content.telegram = fields.telegram.getValue();
        data.content.telegram_textfield = fields.telegram_textfield.getValue();
        data.content.vkontakte = fields.vkontakte.getValue();
        data.content.vkontakte_textfield = fields.vkontakte_textfield.getValue();
        data.content.sms = fields.sms.getValue();
        data.content.sms_textfield = fields.sms_textfield.getValue();
        data.content.call = fields.call.getValue();
        data.content.call_textfield = fields.call_textfield.getValue();
        data.content.email = fields.email.getValue();
        data.content.email_textfield = fields.email_textfield.getValue();
        data.content.instagram = fields.instagram.getValue();
        data.content.instagram_textfield = fields.instagram_textfield.getValue();
        //////////
        //Pro tab
        data.content.isPro = fields.isPro;
        data.content.validity = fields.validity;
        data.content.finalKey = fields.finalKey;
        data.content.platformSize = fields.platformSize;
        data.content.pro_textfield = fields.pro_textfield.getValue();
        data.content.greeting = fields.greeting.getValue();
        data.content.disableBranding = fields.disableBranding.getValue();
        data.content.googleAnalytics = fields.googleAnalytics.getValue();
        data.content.companyUrl = fields.companyUrl.getValue();
        data.content.hPosition = fields.hPosition.getValue();
        data.content.vPosition = fields.vPosition.getValue();
        data.content.customColor = fields.customColor.getValue();
        //////////
        //Settings tab
        data.content.callToAction = fields.callToAction.getValue();
        data.content.position0 = fields.position0.getValue();
        data.content.position1 = fields.position1.getValue();
        data.content.color = fields.color.getValue();

        if(fields.isPro)
            fields.updateDomainAction();

    },
    loadAction: function (data) {
        //General tab
        if(!data.content.messenger) data.content.messenger = false;
        if(!data.content.messenger_textfield) data.content.messenger_textfield = '';
        if(!data.content.whatsapp) data.content.whatsapp = false;
        if(!data.content.whatsapp_textfield) data.content.whatsapp_textfield = '';
        if(!data.content.viber) data.content.viber = false;
        if(!data.content.viber_textfield) data.content.viber_textfield = '';
        if(!data.content.snapchat) data.content.snapchat = false;
        if(!data.content.snapchat_textfield) data.content.snapchat_textfield = '';
        if(!data.content.line) data.content.line = false;
        if(!data.content.line_textfield) data.content.line_textfield = '';
        if(!data.content.telegram) data.content.telegram = false;
        if(!data.content.telegram_textfield) data.content.telegram_textfield = '';
        if(!data.content.vkontakte) data.content.vkontakte = false;
        if(!data.content.vkontakte_textfield) data.content.vkontakte_textfield = '';
        if(!data.content.sms) data.content.sms = false;
        if(!data.content.sms_textfield) data.content.sms_textfield = '';
        if(!data.content.call) data.content.call = false;
        if(!data.content.call_textfield) data.content.call_textfield = '';
        if(!data.content.email) data.content.email = false;
        if(!data.content.email_textfield) data.content.email_textfield = '';
        if(!data.content.instagram) data.content.instagram = false;
        if(!data.content.instagram_textfield) data.content.instagram_textfield = '';
        /////////
        //Pro tab
        if(!data.content.validity) data.content.validity = '';
        if(!data.content.finalKey) data.content.finalKey = '';
        if(!data.content.platformSize) data.content.platformSize = '';
        if(data.content.isPro === undefined) data.content.isPro = false;
        if(!data.content.pro_textfield) data.content.pro_textfield = '';
        if(!data.content.greeting) data.content.greeting = '';
        if(!data.content.disableBranding) data.content.disableBranding = false;
        if(!data.content.googleAnalytics) data.content.googleAnalytics = false;
        if(!data.content.companyUrl) data.content.companyUrl = '';
        if(!data.content.hPosition) data.content.hPosition = '';
        if(!data.content.vPosition) data.content.vPosition = '';
        if(!data.content.customColor) data.content.customColor = '#000000';
        /////////
        //Settings tab
        if(!data.content.callToAction) data.content.callToAction = '';
        if(!data.content.position0) data.content.position0 = false;
        if(!data.content.position1) data.content.position1 = false;
        if(!data.content.color) data.content.color = '';
    },
    loadedAction: function(data, elem) {
        var thisClass = this;
        elem.parent().children('.wb_controls').on('dblclick', function() { thisClass.openProperties(); });
    },
    supportsAutoWidth: function() {
        return true;
    },
    supportsAutoHeight: function() {
        return true;
    }
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"epsilon","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/epsilon","pluginUri":"plugins\/epsilon","customConfiguration":null};
PluginWrapper._config.id = 'epsilon';
PluginWrapper._config.baseUri = "plugins\/epsilon";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/epsilon\/main.png";
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n{{#isPublished}}\n<div id=\"{{id}}_vars\"\n\tdata-amount=\"{{content.amount}}\"\n\tdata-transactionid=\"{{#content.store}}{transactionId}{{\/content.store}}\"\n\tdata-callbackurl=\"{{#content.store}}{callbackUrl}{{\/content.store}}\"\n\tdata-returnurl=\"{{#content.store}}{returnUrl}{{\/content.store}}\"><\/div>\n{{{requireService}}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/epsilon/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'epsilon_color_line.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'epsilon_color.svg', name: 'coloured'},
			{id: 'epsilon_black_line.svg', name: 'black line'},
			{id: 'epsilon_white_line.svg', name: 'white line', backgroundColor: '#000000'},
			{id: 'epsilon_color_line.svg', name: 'coloured line'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Epsilon',
	id: 'epsilon',
	pageUrl: 'https://www.epsilon.jp/',
	keyFieldId: 'contract_code',
	keyField2Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Contract code')},
			{type: 'TextField', placeholder: __('Contract code'), id: 'key'},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key2', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epsilon', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('epsilon', {
	name: 'Epsilon',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'contract_code', type: 'EpsilonContractCode',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.contract_code ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Contract code')));
				return opts;
			},
			get: function(data) { return data.content.contract_code; },
			set: function(value, data) {
				data.content.contract_code = value;
			}
		},
		{id: 'description', type: 'EpsilonDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'EpsilonAmount', helpText: __('Amount to be transferred') + ', JPY',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'demo', type: 'EpsilonDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'epsilon'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Contract code'), uiComponentOptions: function(data, opts) {
						opts.validateText = data.content.contract_code ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Contract code')));
						return opts;
					}},
					{type: 'TextField', id: 'contract_code'}
				]},
				{type: 'HorizontalLayout', columnWeights: [9,3], columnWeightsSmall: [9,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + ', JPY'},
						{type: 'TextField', id: 'amount'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epsilon')
		]
	},
	openAction: function(fields, data, elem) {
		fields.contract_code.setText(data.content.contract_code);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.contract_code = fields.contract_code.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__t = window.epsilon_translations;
		if (!data.content.contract_code) data.content.contract_code = '';
		if (!data.content.description) data.content.description = '';
		if (!data.content.amount) data.content.amount = '1';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['epsilon.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'epsilon_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('contract_code');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"libelula","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/libelula","pluginUri":"plugins\/libelula","customConfiguration":null};
PluginWrapper._config.id = 'libelula';
PluginWrapper._config.baseUri = "plugins\/libelula";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/libelula\/main.png";
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n\n{{#isPublished}}\n<div class=\"modal fade\" id=\"{{id}}_modal\" tabindex=\"-1\" role=\"dialog\">\n\t<div class=\"modal-dialog\" role=\"document\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n\t\t\t\t<h4 class=\"modal-title\">Libelula<\/h4>\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-body\">\n\t\t\t\t<form action=\"{{#content.demo}}https:\/\/www.todotix.com:20365\/rest\/deuda\/registrar{{\/content.demo}}{{^content.demo}}https:\/\/www.todotix.com:20365\/rest\/deuda\/registrar{{\/content.demo}}\"id=\"{{id}}_form\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} data-gateway-id=\"Libelula\" style=\"width: 100%; height: 100%;\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<p>Esta a punto de ser redireccionado al sitio de Libelula para concretar su pago. \u00bfO no?<\/p>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<input type=\"hidden\" name=\"email_cliente\" value=\"{{\"E-mail\" | tr}}\"\/>\n\t\t\t\t\t<input type=\"hidden\" name=\"_input_charset\" value=\"utf-8\" \/>\n\n\t\t\t\t\t<input type=\"hidden\" name=\"lineas_detalle_deuda[0][concepto]\" value=\"{{content.description}}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"lineas_detalle_deuda[0][cantidad]\" value=\"1\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"lineas_detalle_deuda[0][costo_unitario]\" value=\"{{content.amount}}\" \/>\n\n\t\t\t\t\t<input type=\"hidden\" name=\"descripcion\" value=\"{{content.description}}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"appkey\" value=\"{{content.security}}\" \/>\n\n\t\t\t\t\t<input type=\"hidden\" name=\"moneda\" value=\"{{content.currency}}\" \/>\n\t\t\t\t\t\n\t\t\t\t\t{{#content.store}}\n\t\t\t\t\t<input type=\"hidden\" name=\"callback_url\" value=\"{callbackUrl}\"\/>\n\t\t\t\t\t<input type=\"hidden\" name=\"url_retorno\" value=\"{returnUrl}\"\/>\n\t\t\t\t\t<input type=\"hidden\" name=\"numero_documento\" value=\"{transactionId}\"\/>\n\t\t\t\t\t{{\/content.store}}\n\n\t\t\t\t\t<input type=\"submit\" class=\"hidden\" \/>\n\t\t\t\t<\/form>\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-footer\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Pay\" | tr}}<\/button>\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" id=\"{{id}}_pay_btn\">{{\"Close\" | tr}}<\/button>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar modalAppendToBody = false;\n\t\twindow.{{id}}_showModal = function() {\n\t\t\tif (!modalAppendToBody) {\n\t\t\t\t$('#{{id}}_modal').appendTo('body');\n\t\t\t\tmodalAppendToBody = true;\n\t\t\t}\n\t\t\t$('#{{id}}_modal').modal('show');\n\t\t};\n\t\tfunction payment(e) {\n\t\t\t$('#{{id}}_pay_btn').attr('disabled', 'disabled');\n\n\t\t\t$.ajax({\n\t\t\t\turl: $('#{{id}}_form')[0].action,\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: $('#{{id}}_form').serializeArray(),\n\t\t\t\tsuccess: function (data)\n\t\t\t\t{\n\t\t\t\t\tif (data['error']) {\n\t\t\t\t\t\talert(data['mensaje'])\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar link = document.createElement('a');\n\t\t\t\t\t\tlink.href = data['url_pasarela_pagos'];\n\t\t\t\t\t\t{{^content.store}}\n\t\t\t\t\t\tlink.target = '_blank';\n\t\t\t\t\t\t{{\/content.store}}\n\t\t\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\t\t\tlink.click();\n\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tvar isStore = {{#content.store }}true{{\/content.store}}{{^content.store}}false{{\/content.store}};\n\t\t$('#{{id}}_form').on(isStore ? 'beforesend' : 'submit', payment);\n\n\t\t$('#{{id}}_pay_btn').on('click', function() {\n\t\t\t$(this).attr('disabled', 'disabled');\n\t\t\t$('#{{id}}_modal').find('input[type=\"submit\"]').trigger('click');\n\t\t});\n\n\n\t\t$('#{{id}}_modal').on('show.bs.modal', function() {\n\t\t\tif (isStore) {\n\t\t\t\tvar url = $('head base').attr('href') + '0\/requestGetBillingInfo\/Libelula';\n\t\t\t\t$.get(url, function (resp) {\n\t\t\t\t\tvar form = $('#{{id}}_form');\n\t\t\t\t\tif (resp.email) {\n\t\t\t\t\t\tform.get(0).elements['email_cliente'].value = resp.email;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$('#{{id}}_pay_btn').removeAttr('disabled');\n\t\t});\n\t\t$('#{{id}}_payment_gateway_button').on('click', {{id}}_showModal);\n\t})();\n<\/script>\n{{\/isPublished}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/libelula/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'libelula_black.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 102,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'libelula_black.svg', name: 'black'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: __('Libelula'),
	id: 'libelula',
	pageUrl: 'https://www.todotix.com',
	keyField: __('Security code'),
	keyFieldId: 'security',
	keyField2Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key2', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	defaultStyles: Globals.getDefaultStyles(true),
	useStylesInStoreCart: true,
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'libelula', true),
	globalVars: ['organization', 'security', 'demo'],
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('libelula', {
	name: __('Libelula'),
	element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'security', type: 'LibelulaSecurity',  helpText: __('Security key on the Libelula system'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.security ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Security Code')));
				return opts;
			},
			get: function(data) { return data.content.security; },
			set: function(value, data) {
				data.content.security = value;
			}
		},
		{id: 'description', type: 'LibelulaDescription',  helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'LibelulaAmount',  helpText: __('Amount to be transferred. Range 0.01 ~ 1000000.00'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'LibelulaCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'LibelulaDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'libelula'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred. Range 0.01 ~ 1000000.00')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#BOB', name: 'BOB', value: 'BOB'},
							{id: '#USD', name: 'USD', value: 'USD'},
						]}
					]}
				]},
				{type: 'HorizontalLayout',css: {marginTop: 15}, columnWeights: [6, 6], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Security code'), helpText: __('Security key on the Libelula system')},
						{type: 'TextField', id: 'security'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'libelula')
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.description.setText(data.content.description);
		fields.security.setText(data.content.security);
		fields.amount.setText(data.content.amount);
		fields.demo.setText(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.description = fields.description.getText();
		data.content.security = fields.security.getText();
		data.content.amount = fields.amount.getText();
		data.content.demo = fields.demo.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'label': 'button_label',
			'border': 'button_border',
			'background': 'button_color',
			'fontFamily': 'font_family',
			'fontSize': 'font_size',
			'fontColor': 'label_color'
		});
		if (!data.content.currency) data.content.currency = 'BOB';
		if (!data.content.description) data.content.description = __('Product description');
		if (!data.content.security) data.content.security = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.demo) data.content.demo = '1';
		if (['logo.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'libelula_black.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('security');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"yandex_kassa","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/yandex_kassa","pluginUri":"plugins\/yandex_kassa","customConfiguration":null};
PluginWrapper._config.id = 'yandex_kassa';
PluginWrapper._config.baseUri = "plugins\/yandex_kassa";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/yandex_kassa\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"YandexKassa\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\n\t<input name=\"amount\" value=\"{{content.sum}}\" type=\"hidden\" \/>\n\t<input name=\"currency\" value=\"{{content.currency}}\" type=\"hidden\" \/>\n\t<input name=\"description\" value=\"{{content.orderDetails}}\" type=\"hidden\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/yandex_kassa/main.php';
PluginWrapper._config.active = false;

var Globals = {
	_settingsContent: null,
	_settingsDialog: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			var base_url = 'https://' + wb_builder.siteDomain + '/';
			var note = $('<p><strong>' + __('Note') + ':</strong>    '
					+ ' HTTPS ,      SSL '
					+ '    Kassa .<br />'
					+ '    <em>"    HTTPS"</em>'
					+ '    .</p>');
			var content = $('<div>').append('<p><strong>' + __('Page URL') + ':</strong> <a href="https://yookassa.ru/" target="_blank">https://yookassa.ru/</a></p>'
					+ '<p><strong>URL  :</strong><br />'
					+ '<pre>' + base_url + '0/store-callback/YandexKassa' + '</pre></p>'
					+ '<p><strong>  :</strong><br />'
					+ 'payment.succeeded, payment.canceled</p>');
			content.prepend('<br>').prepend(note);
			Globals._settingsContent = content.html();
		}
		return Globals._settingsContent;
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#0e1930',
			button_border: {
				color: '#07090e',
				style: 'solid',
				weight: 1,
				differ: true,
				radius: 0,
				css: {
					'border-top': "1px solid #07090e",
					'border-right': "1px solid #07090e",
					'border-bottom': "1px solid #07090e",
					'border-left': "1px solid #07090e"
				},
				cssRaw: 'border-top: 1px solid #07090e; border-right: 1px solid #07090e; border-bottom: 1px solid #07090e; border-left: 1px solid #07090e;'
			},
			logo: 'logo-yoo.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#ffffff'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 108,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'logo_black.svg', name: 'black'},
			{id: 'logo_color.svg', name: 'coloured'},
			{id: 'logo_white.svg', name: 'white', backgroundColor: '#0e1930'},
			{id: 'logo-yoo.svg', name: 'default'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Kassa',
	id: 'yandex_kassa',
	keyFieldId: 'shopId',
	keyField2Id: 'scid',
	keyField3Id: 'demo',
	keyField4Id: 'vatCode',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6, 6, 12, 12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Shop ID')},
			{type: 'TextField', placeholder: __('Shop ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('VAT rate')},
			{type: 'DropdownBox', placeholder: __('VAT rate'), css: {marginTop: 5}, id: 'key4', options: [
				{id: '1', name: ' '},
				{id: '2', name: '   0%'},
				{id: '3', name: '   10%'},
				{id: '4', name: '    20%'},
				{id: '5', name: '     10/110'},
				{id: '6', name: '     20/120'},
			]},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'orderDetails',
	priceFieldId: 'sum',
	currencyFieldId: 'currency',
	globalVars: ['shopId', 'scid', 'vatCode', 'demo'],
	useStylesInStoreCart: true,
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'yandex_kassa', true),
	logos: Globals.getLogosList(),
	defaultLogo: 'logo_black.svg',
});

PluginWrapper.registerPlugin('yandex_kassa', {
	name: 'Kassa',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 150, height: 70}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'shopId', type: 'YandexKassaShopId', helpText: __('Unique indentificator from Yandex Kassa'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.shopId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop ID')));
				return opts;
			},
			get: function(data) { return data.content.shopId; },
			set: function(value, data) {
				data.content.shopId = value;
			}
		},
		{id: 'scid', type: 'YandexKassaScid', helpText: __('Unique indentificator from Yandex Kassa'),
			get: function(data) { return data.content.scid; },
			set: function(value, data) {
				data.content.scid = value;
			}
		},
		{id: 'vatCode', type: 'YandexKassaVatCode', helpText: __('VAT rate from Yandex Kassa'),
			get: function(data) { return data.content.vatCode; },
			set: function(value, data) {
				data.content.vatCode = value;
			}
		},
		{id: 'orderDetails', type: 'YandexKassaOrderDetails',
			get: function(data) { return data.content.orderDetails; },
			set: function(value, data) {
				data.content.orderDetails = value;
			}
		},
		{id: 'sum', type: 'YandexKassaSum',
			get: function(data) { return data.content.sum; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.sum = value;
			}
		},
		{id: 'currency', type: 'YandexKassaCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'YandexKassaDemo', moreInfo: function(data) {
				Globals.getSettingsDialog().setVisible(true);
			},
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'yandex_kassa'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Shop ID'), helpText: __('Unique indentificator from Yandex Kassa'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.shopId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop ID')));
							return opts;
						}},
						{type: 'TextField', id: 'shopId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key'), helpText: __('Unique indentificator from Yandex Kassa')},
						{type: 'TextField', id: 'scid'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('VAT rate'), helpText: __('VAT rate from Yandex Kassa')},
						{type: 'DropdownBox', id: 'vatCode', options: [
							{id: '1', name: ' '},
							{id: '2', name: '   0%'},
							{id: '3', name: '   10%'},
							{id: '4', name: '    20%'},
							{id: '5', name: '     10/110'},
							{id: '6', name: '     20/120'},
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'orderDetails'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + __('RUB')},
						{type: 'TextField', id: 'sum'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'RUB', name: 'RUB'},
							{id: 'USD', name: 'USD'},
							{id: 'EUR', name: 'EUR'},
							{id: 'BYN', name: 'BYN'},
							{id: 'CNY', name: 'CNY'},
							{id: 'KZT', name: 'KZT'},
							{id: 'UAH', name: 'UAH'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Mode'), init: function() {
							var link = $('<a>').attr('href', 'javascript:void(0)').text(__('Settings'));
							link.on('click', function() {
								Globals.getSettingsDialog().setVisible(true);
							});
							var cont = $('<span>').css({fontWeight: 'normal', marginLeft: '4px'});
							cont.append('(');
							cont.append(link);
							cont.append(')');
							this._elem.append(cont);
						}},
						{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
							this.getElem().attr('title', __('For testing purpose without real payments'));
							this.getElem().tooltip({placement: 'right'});
						}}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'yandex_kassa')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.shopId.setText(data.content.shopId);
		fields.scid.setText(data.content.scid);
		fields.vatCode.setText(data.content.vatCode);
		fields.orderDetails.setText(data.content.orderDetails);
		fields.sum.setText(data.content.sum);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data, elem);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.shopId = fields.shopId.getText();
		data.content.scid = fields.scid.getText();

		itm = fields.vatCode.getSelectedItem();
		data.content.vatCode = itm.getOriginal().id;

		data.content.orderDetails = fields.orderDetails.getText();
		data.content.sum = fields.sum.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['shopId', 'scid', 'demo'];
		if (!data.content.shopId) data.content.shopId = ''; // 1234
		if (!data.content.scid) data.content.scid = ''; // 4321
		if (!data.content.vatCode) data.content.vatCode = ''; // 4321
		if (!data.content.orderDetails) data.content.orderDetails = ''; // Item description
		if (!data.content.sum) data.content.sum = '1'; // 9.99
		if (!data.content.currency) data.content.currency = 'RUB';
		if (data.content.demo === undefined) data.content.demo = true;
		if (['logo-black.svg', 'logo-color.svg', 'logo-white.svg', 'yandex_checkout_logo_icon.svg', 'Yandex_Kassa_logo_icon.svg', 'Yandex_kassa_logo_black.svh'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'logo-yoo.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('shopId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"youku","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/youku","pluginUri":"plugins\/youku","customConfiguration":null};
PluginWrapper._config.id = 'youku';
PluginWrapper._config.baseUri = "plugins\/youku";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/youku\/main.png";
PluginWrapper._config.template = "<div style=\"width: 100%; height: 100%; background: #000;\">\n\t<div style=\"width: 0; height: 100%; display: inline-block; vertical-align: middle;\">\n\t<\/div><div style=\"display: inline-block; vertical-align: middle; width: 100%;\">\n\t\t<div style=\"position: relative; padding-bottom: 56.25%; height: 0;\">\n\t\t\t<iframe style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\" width=\"1000\" height=\"563\" src=\"https:\/\/player.youku.com\/embed\/{{content.finalGroupId}}?autoplay={{content.play}}&starttime={{content.startAt}}\" frameborder=\"0\" allowfullscreen><\/iframe>\n\t\t<\/div>\n\t<\/div>\n<\/div>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('youku', {
	name: 'Youku',
	icon: 'ico-pl-youku',
	supportsAutoHeight: true,
	element: {
		minSize: {width: 100, height: 56},
		defaultSize: {width: 420, height: 236},
		resizable: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Youku video URL'),
						helpText: __('Copy full Youku video URL') + ' <br /><div style="display: inline-block; max-width: 100%; word-break: break-all;">(http://v.youku.com/v_show/id_XMTYzOTI2OTE4MA==.html...)</div>',
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Youku video URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'groupId', placeholder: 'https://v.youku.com/v_show/id_XNDgxNjgwODcyOA==.html?spm=a2ha1.14919748_WEBHOME_GRAY.drawer5.d_zj1_3&scm=20140719.rcmd.7182.video_XNDgxNjgwODcyOA%3D%3D'}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'autoplay', label: __('Autoplay')},
					{type: 'VerticalLayout', ignore: true, children: [
						{type: 'Label', text: __('Start at')},
						{type: 'TextField', id: 'startAt', placeholder: '00:00'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, ignore: true, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label',
							text: __('Autoplay'),
							helpText: __('Disable or enable autoplay.')},
						{type: 'RadioBox', id: 'autoplay0', label: __('Enable'), group: 'play'},
						{type: 'RadioBox', id: 'autoplay1', label: __('Disable'), group: 'play'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Video quality settings'),
							helpText: __('Allows to preset video quality settings.')},
						{type: 'RadioBox', id: 'quality0', label: __('low'), group: 'quality'},
						{type: 'RadioBox', id: 'quality1', label: __('autolow'), group: 'quality'},
						{type: 'RadioBox', id: 'quality2', label: __('autohigh'), group: 'quality'},
						{type: 'RadioBox', id: 'quality3', label: __('Medium'), group: 'quality'},
						{type: 'RadioBox', id: 'quality4', label: __('high'), group: 'quality'},
						{type: 'RadioBox', id: 'quality5', label: __('best'), group: 'quality'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Window Mode settings'),
							helpText: __('Changes settings to window mode.')},
						{type: 'RadioBox', id: 'wmode0', label: __('window'),	   group: 'wmode', helpText: __('Broadest accessibility support.')},
						{type: 'RadioBox', id: 'wmode1', label: __('Transparent'), group: 'wmode',helpText: __('Transparency and alpha blending over HTML elements supported. HTML elements can overlap SWF content. Explicit layering control (all browsers).') },
						{type: 'RadioBox', id: 'wmode2', label: __('opaque'),	group: 'wmode', helpText: __('HTML elements can overlap SWF content. Explicit layering control (all browsers).')},
						{type: 'RadioBox', id: 'wmode3', label: __('direct'),	group: 'wmode', helpText: __('Best performance. Hardware accelerated presentation, including Stage Video and Stage 3D (all browsers).')},
						{type: 'RadioBox', id: 'wmode4', label: __('gpu'),	  group: 'wmode', helpText: __('Additional hardware acceleration on some Internet connected TVs and mobile devices.')}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Video background color'),
							helpText: __('Sets background color while video is loading')},
						{type: 'ColorSelector', id: 'color'}
					]}
				]}
			]}
		]
	},
	properties: [
		{id: 'groupId', type: 'YoukuGroupId', helpText: __('Copy full Youku video URL') + ' <br /><div style="display: inline-block; max-width: 100%; word-break: break-all;">(http://v.youku.com/v_show/id_XMTYzOTI2OTE4MA==.html...)</div>',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Youku video URL')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this._resolveFinalGroupId(value, api);
			},
			set: function(value, data) {
				data.content.groupId = value;
				data.content.finalGroupId = value ? this._resolveFinalGroupId(data.content.groupId) : 'XNDgxNjgwODcyOA==';

			}
		},
		{id: 'autoplay', type: 'YoukuAutoplay',
			get: function(data) { return data.content.play_checkbox; },
			set: function(value, data) {
				data.content.play_checkbox = value;
				data.content.play = value ? '1' : '0';
			}
		}
	],
	setFinalGroupId: function (data) {
		data.content.finalGroupId = data.content.groupId ? this._resolveFinalGroupId(data.content.groupId) : 'XNDgxNjgwODcyOA==';
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	openAction: function (fields, data, elem) {
		fields.groupId.setText(data.content.groupId);
		fields.autoplay.setValue(data.content.play === '1');
//		fields.startAt.setValue(data.content.startAt);
		/* fields.color.setValue(data.content.color);
		fields.autoplay0.setValue(data.content.play === 'true');
		fields.autoplay1.setValue(data.content.play === 'false');

		fields.quality0.setValue(data.content.quality === 'low');
		fields.quality1.setValue(data.content.quality === 'autolow');
		fields.quality2.setValue(data.content.quality === 'autohigh');
		fields.quality3.setValue(data.content.quality === 'medium');
		fields.quality4.setValue(data.content.quality === 'high');
		fields.quality5.setValue(data.content.quality === 'best');

		fields.wmode0.setValue(data.content.wmode === 'window');
		fields.wmode1.setValue(data.content.wmode === 'transparent');
		fields.wmode2.setValue(data.content.wmode === 'opaque');
		fields.wmode3.setValue(data.content.wmode === 'direct');
		fields.wmode4.setValue(data.content.wmode === 'gpu'); */
	},
	applyAction: function (fields, data, elem) {
		data.content.groupId = fields.groupId.getText();
		data.content.play = fields.autoplay.getValue() ? '1' : '0';
		this.setFinalGroupId(data);
//		data.content.startAt = fields.startAt.getValue();
		/* data.content.color = fields.color.getValue().replace('#', '');
		data.content.finalGroupId = this._resolveFinalGroupId(data.content.groupId);

		if (fields.autoplay0.getValue()) data.content.play = 'true';
		if (fields.autoplay1.getValue()) data.content.play = 'false';

		if (fields.quality0.getValue()) data.content.quality = 'low';
		if (fields.quality1.getValue())data.content.quality = 'autolow';
		if (fields.quality2.getValue())data.content.quality = 'autohigh';
		if (fields.quality3.getValue())data.content.quality = 'medium';
		if (fields.quality4.getValue())data.content.quality = 'high';
		if (fields.quality5.getValue())data.content.quality = 'best';

		if (fields.wmode0.getValue())data.content.wmode = 'window';
		if (fields.wmode1.getValue())data.content.wmode = 'transparent';
		if (fields.wmode2.getValue())data.content.wmode = 'opaque';
		if (fields.wmode3.getValue())data.content.wmode = 'direct';
		if (fields.wmode4.getValue())data.content.wmode = 'gpu'; */
	},
	_resolveFinalGroupId: function(groupId, api) {
		if (/https?:\/\/v.youku.com\/v_show\/id_([A-Za-z0-9=]+)(?:$|[^A-Za-z0-9=])/.test(groupId)
				|| /https?:\/\/player\.youku\.com\/player\.php\/sid\/([A-Za-z0-9=]+)(?:$|[^A-Za-z0-9=])/.test(groupId)
				|| /https?:\/\/player\.youku\.com\/embed\/([A-Za-z0-9=]+)(?:$|[^A-Za-z0-9=])/.test(groupId)) {
			if(api) api.setError('');
			return RegExp.$1;
		} else {
			if(api) api.setError(__('Invalid URL'));
		}
		return groupId;
	},
	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
//		if (!data.content.startAt) data.content.startAt = '';
		if (!data.content.play) data.content.play = '0';
		if (!data.content.play_checkbox) data.content.play_checkbox = false;
		/* if (!data.content.quality) data.content.quality = 'high';
		if (!data.content.wmode) data.content.wmode = 'window';
		if (!data.content.color) data.content.color = 'ffffff'; */
		this.setFinalGroupId(data);
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"braintree","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/braintree","pluginUri":"plugins\/braintree","customConfiguration":null};
PluginWrapper._config.id = 'braintree';
PluginWrapper._config.baseUri = "plugins\/braintree";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/braintree\/main.png";
PluginWrapper._config.template = "{{#content.store}}\r\n<form method=\"post\" data-gateway-id=\"Braintree\" id=\"{{id}}_form\" style=\"width: 100%; height: 100%;\">\r\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\r\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\r\n\t{{{content.paymentGatewayButton}}}\r\n<\/form>\r\n<script type=\"text\/javascript\">\r\n\tsetTimeout(function() { \/\/ use timeout so that StoreModule.js assigned event to form in time\r\n\t\t$('#{{id}}_form').on('beforesend', function() {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.{{id}}_show_braintree();\r\n\t\t\t}, 100);\r\n\t\t});\r\n\t}, 50);\r\n<\/script>\r\n{{\/content.store}}\r\n{{^content.store}}\r\n{{{content.paymentGatewayButton}}}\r\n{{\/content.store}}\r\n\r\n{{#isPublished}}\r\n<script type=\"text\/javascript\">\r\n\t(function() {\r\n\t\twindow.{{id}}_show_braintree = function() {\r\n\t\t\t$('#{{id}}_braintree_modal').modal('show');\r\n\t\t};\r\n\t\twindow.{{id}}_submit = function() {\r\n\t\t\t$('#{{id}}_form').find('input[type=\"submit\"]').trigger('click');\r\n\t\t};\r\n\t\t{{^content.store}}\r\n\t\t$('#{{id}}_payment_gateway_button').on('click', {{id}}_show_braintree);\r\n\t\t{{\/content.store}}\r\n\t})();\r\n<\/script>\r\n<div class=\"modal fade\" id=\"{{id}}_braintree_modal\" role=\"dialog\">\r\n\t<div class=\"modal-dialog\">\r\n\t\t<div class=\"modal-content\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;<\/button>\r\n\t\t\t\t<h4 class=\"modal-title\">Braintree<\/h4>\r\n\t\t\t<\/div>\r\n\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t{{{requireService}}}\r\n\t\t\t<\/div>\r\n\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" id=\"{{id}}_braintree-close-button\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" id=\"{{id}}_braintree-submit-button\">{{\"Pay\" | tr}}<\/button>\r\n\t\t\t<\/div>\r\n\t\t<\/div>\r\n\t<\/div>\r\n<\/div>\r\n<script type=\"text\/javascript\">\r\n\t$('#{{id}}_braintree_modal').appendTo('body');\r\n<\/script>\r\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/braintree/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#000',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #000' },
				cssRaw: 'border: 1px solid #000'
			},
			logo: 'braintree_color2.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'braintree_color.svg', name: 'coloured'},
			{id: 'braintree_color2.svg', name: 'coloured2'},
			{id: 'braintree_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'braintree_white_tiny.svg', name: 'white tiny' , backgroundColor: '#000000'},
			{id: 'braintree_black_tiny.svg', name: 'black tiny'},
		];
	}
};

ElementRegister.registerPaymentGateway({
    name: 'Braintree',
    id: 'braintree',
	pageUrl: 'https://www.braintreepayments.com/',
    keyFieldId: 'merchant_id',
    keyField2Id: 'public_key',
    keyField3Id: 'private_key',
	keyField4Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Public Key')},
			{type: 'TextField', placeholder: __('Public Key'), id: 'key2', css: {marginTop: 5}},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Private Key')},
			{type: 'TextField', placeholder: __('Private Key'), id: 'key3', password: true, css: {marginTop: 5}},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key4', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
    priceFieldId: 'amount',
	titleFieldId: 'label',
	globalVars: ['merchant_id', 'public_key', 'private_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'braintree', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('braintree', {
    name: 'Braintree',
    element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 81},
		resizable: true
    },
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchant_id', type: 'BraintreeMerchantId', helpText: __('This key you can get in account settings page'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchant_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchant_id; },
			set: function(value, data) {
				data.content.merchant_id = value;
			}
		},
		{id: 'public_key', type: 'BraintreePublicKey', helpText: __('This key you can get in account settings page'),
			get: function(data) { return data.content.public_key; },
			set: function(value, data) {
				data.content.public_key = value;
			}
		},
		{id: 'private_key', type: 'BraintreePrivateKey', helpText: __('This key you can get in account settings page'),
			get: function(data) { return data.content.private_key; },
			set: function(value, data) {
				data.content.private_key = value;
			}
		},
		{id: 'amount', type: 'BraintreeAmount', helpText: __('Amount to be transferred') + '. ' + __('Currency is set in accounts settings page'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'demo', type: 'BraintreeDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'braintree'),
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [
				{type: 'HorizontalLayout', columnWeights: [4, 4, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), helpText: __('This key you can get in account settings page'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchant_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchant_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Public Key'), helpText: __('This key you can get in account settings page')},
						{type: 'TextField', id: 'public_key'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Private Key'), helpText: __('This key you can get in account settings page')},
						{type: 'TextField', id: 'private_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [8], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + '. ' + __('Currency is set in accounts settings page')},
						{type: 'TextField', id: 'amount'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
	        PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'braintree')
        ]
    },
    openAction: function (fields, data, elem) {
        var itm;
        fields.amount.setText(data.content.amount);
        fields.merchant_id.setText(data.content.merchant_id);
        fields.public_key.setText(data.content.public_key);
        fields.private_key.setText(data.content.private_key);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        var itm;
        data.content.amount = fields.amount.getText();
        data.content.merchant_id = fields.merchant_id.getText();
        data.content.public_key = fields.public_key.getText();
        data.content.private_key = fields.private_key.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
    },
    loadAction: function (data) {
        if (!data.content.amount) data.content.amount = '1';
        if (!data.content.merchant_id) data.content.merchant_id = ''; // wd36rwgys9sbgp5h
        if (!data.content.public_key) data.content.public_key = ''; // pxnqqygsb8jnkgvh
        if (!data.content.private_key) data.content.private_key = ''; // 58639f7fd806508c101f9f78c61ddab3
		if (data.content.demo === undefined) data.content.demo = false;
		if (['logo.svg', 'logo-2.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'braintree_color2.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.fontFamily ) items.push(data.content.fontFamily);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchant_id');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"yandex_maps","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/yandex_maps","pluginUri":"plugins\/yandex_maps","customConfiguration":null};
PluginWrapper._config.id = 'yandex_maps';
PluginWrapper._config.baseUri = "plugins\/yandex_maps";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/yandex_maps\/main.png";
PluginWrapper._config.template = "<div class=\"ymaps\" id=\"{{id}}_ymaps\" style=\"width: 100%; height: 100%;\"><\/div>\n{{#isPublished}}\n\t{{#firstOnPage}}\n<script type=\"text\/javascript\">\n\twindow.WB_YandexMaps = {\n\t\tscriptReady: false,\n\t\tymaps: null,\n\t\tmaps: [],\n\t\tlisteners: [],\n\t\taddListener: function(inst, func) {\n\t\t\tif (this.scriptReady) {\n\t\t\t\tvar map = func.call(inst, this.ymaps);\n\t\t\t\tthis.maps.push(map);\n\t\t\t} else {\n\t\t\t\tthis.listeners.push({inst: inst, func: func});\n\t\t\t}\n\t\t},\n\t\tready: function(ymaps) {\n\t\t\tthis.scriptReady = true;\n\t\t\tthis.ymaps = ymaps;\n\t\t\tfor (var i = 0; i < this.listeners.length; i++) {\n\t\t\t\tvar map = this.listeners[i].func.call(this.listeners[i].inst, ymaps);\n\t\t\t\tthis.maps.push(map);\n\t\t\t}\n\t\t}\n\t};\n\twindow.WB_YandexMaps_script_fn = function(ymaps) { window.WB_YandexMaps.ready(ymaps); };\n<\/script>\n{{{requireService}}}\n\t{{\/firstOnPage}}\n<script type=\"text\/javascript\">\n\twindow.WB_YandexMaps.addListener(window, function(ymaps) {\n\t\tvar ll = [{{#content.strll}}{{content.strll}}{{\/content.strll}}{{^content.strll}}{{#content.ll}}{{.}},{{\/content.ll}}0{{\/content.strll}}], zoom = {{content.zoomLevel}}, type = '{{content.type}}';\n\t\tvar map = new ymaps.Map('{{id}}_ymaps', { center: ll, zoom: zoom });\n\t\tif (type) map.setType(type);\n\t\tvar marker = new ymaps.Placemark(ll, {});\n\t\tmap.geoObjects.add(marker);\n\t\treturn map;\n\t});\n<\/script>\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/yandex_maps/main.php';
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('yandex_maps', {
	name: __('Yandex Maps'),
	icon: 'ico-pl-yandex_maps',
	noButton: true,
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 602, height: 327},
		resizable: true,
		renderOnce: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{
						type: 'Label',
						text: __('API Key'),
						helpText: __('Get API Key from %s').replace('%s', '<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://yandex.ru/dev/maps/jsapi/doc/2.1/quick-start/index.html" target="_blank">https://yandex.ru/dev/maps/jsapi/doc/2.1/quick-start/index.html</a><br /><br /><div style="text-align: left;">' + __('Make sure that the following APIs are enabled for your key') + ':<ul style="padding-left: 22px;"><li>JavaScript API  HTTP Geocoder</li></ul></div>'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = (data.content.apiKey && data.content.apiKey.length > 0) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
							return opts;
						}
					},
					{type: 'TextField', id: 'apiKey', placeholder: __('Example') + ': AE4ftlCBAAAA0Y5IfCIAPV4d9jYjMZGyd2z26kswgP7=='}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [8, 4], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Coordinates or address'), helpText: __('Location address or coordinates'), uiComponentOptions: function(data, opts) {
								opts.validateText = (JSON.stringify(data.content.ll) !== JSON.stringify(this.pluginScoped.defaultLatLng)) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates or address')));
								return opts;
						}},
						{type: 'TextField', id: 'address', uiComponentOptions: function(data, opts) {
							opts.placeholder = this.pluginScoped.defaultLatLng.join(',');
							return opts;
						}},
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: 'Zoom level', helpText: __('ex. 4')},
						{type: 'SizeSelector', id: 'zoomLevel'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Drag marker to set your location')},
					{type: 'CustomContainer', id: 'mapElem', css: {width: '100%', height: 220, border: '1px solid #cccccc', backgroundColor: '#ebebeb'}}
				]}
			]}
		]
	},
	properties: [
		{id: 'apiKey', type: 'YandexApiKey',
			get: function(data) { return data.content.apiKey; },
			set: function(value, data) {
				data.content.apiKey = value;

				this.updateNoKeyMsg(data);
			},
			helpText: __('Get API Key from %s').replace('%s', '<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://yandex.ru/dev/maps/jsapi/doc/2.1/quick-start/index.html" target="_blank">https://yandex.ru/dev/maps/jsapi/doc/2.1/quick-start/index.html</a><br /><br /><div style="text-align: left;">' + __('Make sure that the following APIs are enabled for your key') + ':<ul style="padding-left: 22px;"><li>JavaScript API  HTTP Geocoder</li></ul></div>'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = (data.content.apiKey && data.content.apiKey.length > 0) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
				return opts;
			}
		},
		{id: 'address', type: 'YandexAddress', helpText: __('Location address or coordinates'),
			uiComponentOptions: function(data, opts) {
				opts.placeholder = this.pluginScoped.defaultLatLng.join(', ');
				opts.validateText = (JSON.stringify(data.content.strll) !== JSON.stringify(this.pluginScoped.defaultLatLng.join(','))) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates or address')));
				return opts;
			},
			get: function(data) { return {text: data.content.address, latLng: data.content.ll ? data.content.ll : this.pluginScoped.defaultLatLng}; },
			set: function(value, data) {
				var self = this;
				data.content.address = value.text;
				this.pluginScoped.handleAddress(data.content.address, function (ll) {
					data.content.ll = ll ? ll : self.pluginScoped.defaultLatLng;
					data.content.strll = data.content.ll.join(',');
					self.map.setCenter(data.content.ll);
					self.mapMarker.geometry.setCoordinates(data.content.ll);
				});
			}
		},
		{id: 'zoomLevel', type: 'YandexMapZoom', helpText: __('ex. 4'),
			get: function(data) { return data.content.zoomLevel; },
			set: function(value, data) {
				data.content.zoomLevel = value;
				if (this.map) {
					this.map.setZoom(data.content.zoomLevel);
				}
			}
		},
		{id: 'mapType', type: 'YandexMapType',
			get: function(data) { return data.content.type; },
			set: function(value, data) {
				data.content.type = value;
				if (this.map) this.map.setType(data.content.type);
			}
		}
	],
	
	pluginScoped: {
		apiKey: (wb_builder.mapsConfig && (typeof wb_builder.mapsConfig === 'object') && wb_builder.mapsConfig.yandexMapsApiKey) ? wb_builder.mapsConfig.yandexMapsApiKey : null,
		clientApiKey: (wb_builder.mapsConfig && (typeof wb_builder.mapsConfig === 'object') && wb_builder.mapsConfig.yandexMapsClientApiKey) ? wb_builder.mapsConfig.yandexMapsClientApiKey : null,
		defaultLatLng: wb_builder.mapsConfig.address ? wb_builder.mapsConfig.address.split(',').map(item => parseFloat(item)) : [40.689181, -74.044526],
		scriptLoaded: false,
		scriptReady: false,
		ymaps: null,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst, this.ymaps);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				window.WB_YandexMaps_script_fn = function(ymaps) {
					self.scriptReady = true;
					self.ymaps = ymaps;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst, ymaps);
					}
				};
				$.getScript('https://api-maps.yandex.ru/2.1/?' + (this.apiKey ? 'apikey=' + this.apiKey + '&' : '') + 'onload=WB_YandexMaps_script_fn&lang=ru_RU');
			}
		},
		handleAddress: function(address, func) {
			if (!this.ymaps) return;
			if (('' + address).match(/-?[0-9\.]+[\ ]*,[\ ]*-?[0-9\.]+/i)) {
				var parts = ('' + address).split(',');
				if (typeof func === 'function') func.call(this, [parseFloat(parts[0]), parseFloat(parts[1])]);
			} else if (address.length) {
				var self = this, selfFunc = func, geoc = this.ymaps.geocode(address);
				geoc.then(function(res) {
					if (typeof selfFunc === 'function') selfFunc.call(self, res.geoObjects.get(0).geometry.getCoordinates());
				}, function(err) {});
			} else {
				func.call(this, this.defaultLatLng);
			}
		}
	},
	elem: null,
	map: null,
	mapMarker: null,
	mapElem: null,
	disabledOverlay: null,
	
	resizeAction: function(data, elem) {
		if (this.mapElem) this.mapElem.css({width: data.width, height: data.height});
		if (this.map) this.map.container.fitToViewport();
	},
	
	openAction: function(fields, data, elem) {
		fields.apiKey.setText(data.content.apiKey);
		fields.address.setText(data.content.address);
		fields.zoomLevel.setValue(data.content.zoomLevel);
		fields.type = data.content.type;
		var self = this;
		if (!fields.map) {
			fields.address.on('change', function() {
				self.pluginScoped.handleAddress(fields.address.getText(), function(ll) {
					fields.map.setCenter(ll);
					fields.mapMarker.geometry.setCoordinates(ll);
				});
			});
			fields.address.on('keydown', function(e) {
				if (e.keyCode === 13) {
					self.pluginScoped.handleAddress(fields.address.getText(), function(ll) {
						fields.map.setCenter(ll);
						fields.mapMarker.geometry.setCoordinates(ll);
					});
				}
			});
			fields.zoomLevel.on('change', function() {
				if (fields.map) fields.map.setZoom(fields.zoomLevel.getValue());
			});
			this.pluginScoped.addListener(this, function(ymaps) {
				//fields.mapElem.css({width: fields.mapElem.getElem().outerWidth()});
				fields.map = new ymaps.Map(fields.mapElem.getElem().get(0), {
					center: data.content.ll,
					zoom: data.content.zoomLevel,
					controls: ['searchControl', 'typeSelector', 'zoomControl']
				});
				fields.map.events.add('boundschange', function(e) {
					fields.zoomLevel.setValue(e.get('newZoom'));
				});
				fields.map.events.add('typechange', function() {
					fields.type = fields.map.getType();
				});
				if (!fields.type) {
					fields.type = fields.map.getType();
				} else {
					fields.map.setType(fields.type);
				}
				fields.map.setZoom(data.content.zoomLevel);
				fields.mapMarker = new ymaps.Placemark(data.content.ll, {}, {draggable: true});
				fields.mapMarker.events.add('dragend', function() {
					var p = fields.mapMarker.geometry.getCoordinates();
					fields.address.setText(p[0] + ', ' + p[1]);
				});
				fields.map.geoObjects.add(fields.mapMarker);
				var searchControl = fields.map.controls.get(0);
				searchControl.events.add('resultselect', function() {
					if (searchControl.getResultsCount() > 0) {
						fields.address.setText(searchControl.getRequestString());
						var results = searchControl.getResultsArray();
						fields.mapMarker.geometry.setCoordinates(results[searchControl.getSelectedIndex()].geometry.getCoordinates());
					}
				});
				searchControl.events.add('load', function() {
					
				});
			});
		} else {
			if (data.content.type) fields.map.setType(data.content.type);
			fields.map.setZoom(data.content.zoomLevel);
			fields.map.setCenter(data.content.ll);
			fields.mapMarker.geometry.setCoordinates(data.content.ll);
		}
	},
	applyAction: function(fields, data, elem) {
		data.content.apiKey = fields.apiKey.getText();
		data.content.address = fields.address.getText();
		data.content.zoomLevel = fields.zoomLevel.getValue();
		data.content.type = fields.type;
		if (this.map) {
			this.map.setZoom(data.content.zoomLevel);
			if (data.content.type) this.map.setType(data.content.type);
		}
		var self = this;
		this.pluginScoped.handleAddress(data.content.address, function(ll) {
			data.content.ll = ll;
			data.content.strll = data.content.ll.join(',');
			self.map.setCenter(data.content.ll);
			self.mapMarker.geometry.setCoordinates(data.content.ll);
		});
	},
	loadAction: function(data) {
		if (!data.content.apiKey) data.content.apiKey = '';
		if (!data.content.ll || data.content.ll.hasOwnProperty('length') && !data.content.ll.length)
			data.content.ll = null;
		data.content.strll = (data.content.ll ? data.content.ll : this.pluginScoped.defaultLatLng).join(',');
		if (!data.content.address || !data.content.ll) data.content.address = data.content.strll;
		if (!data.content.zoomLevel) data.content.zoomLevel = 12;
		data.content.builderApiKey = this.pluginScoped.apiKey;
		data.content.clientApiKey = this.pluginScoped.clientApiKey;
	},
	loadedAction: function(data, elem) {
		this.elem = elem;
		this.mapElem = elem.find('.ymaps');
		var self = this;
		this.pluginScoped.addListener(this, function(ymaps) {
			self.map = new ymaps.Map(self.mapElem.get(0), {
				center: data.content.ll ? data.content.ll : self.pluginScoped.defaultLatLng,
				zoom: data.content.zoomLevel
			});
			if (data.content.type) self.map.setType(data.content.type);
			self.mapMarker = new ymaps.Placemark(data.content.ll ? data.content.ll : self.pluginScoped.defaultLatLng, {});
			self.map.geoObjects.add(self.mapMarker);

			self.updateNoKeyMsg(data);
		});
	},
	saveAction: function(data, elem) {
		// TODO: save data
	},

	updateNoKeyMsg: function(data) {
		if (!data.content.apiKey && !wb_builder.mapsConfig.yandexMapsClientApiKey) {
			var thisClass = this;
			if (!this.disabledOverlay) {
				var text = __('Get %sAPI key from Yandex%s and insert it to %splugin properties%s to enable maps on your website.');
				var parts = text.split('%s');
				var text_start = parts[0],
					text_link_1 = ((parts.length > 0) && parts[1]) ? parts[1] : null,
					text_middle = ((parts.length > 1) && parts[2]) ? parts[2] : null,
					text_link_2 = ((parts.length > 2) && parts[3]) ? parts[3] : null,
					text_end = ((parts.length > 3) && parts[4]) ? parts[4] : null;
				if (!text_start || !text_link_1 || !text_middle || !text_link_2 || !text_end) {
					text_start = 'Get ';
					text_link_1 = 'API key from Yandex';
					text_middle = ' and insert it to ';
					text_link_2 = 'plugin properties';
					text_end = ' to enable maps on your website.';
				}
				var link_1 = $('<a>').text(text_link_1).attr('href', 'javascript:void(0)').on('click', function() {
					window.open('https://yandex.ru/dev/maps/jsapi/doc/2.1/quick-start/index.html', '_blank');
					return false;
				});
				this.disabledOverlay = $('<div class="wb_yandex_maps_overlay">')
					.append(text_start)
					.append(link_1)
					.append(text_middle)
					.append(text_link_2)
					.append(text_end);
			}
			setTimeout(function() {
				thisClass.disabledOverlay.appendTo(thisClass.elem);
				thisClass.disabledOverlay.show();
			}, 250);
		} else {
			if (this.disabledOverlay) {
				this.disabledOverlay.hide();
			}
		}
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('address');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"instagram_video","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/instagram_video","pluginUri":"plugins\/instagram_video","customConfiguration":null};
PluginWrapper._config.id = 'instagram_video';
PluginWrapper._config.baseUri = "plugins\/instagram_video";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/instagram_video\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_instagram_video\"\n        src=\"https:\/\/www.instagram.com\/{{content.finalVideoId}}\/embed\"\n        width=\"100%\" height=\"100%\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('instagram_video', {
	name: __('Instagram video'),
	icon: 'ico-pl-instagram',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 400, height: 480},
		resizable: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Instagram ID or URL'),
						helpText: '<span style="white-space: pre-wrap; word-break: break-word;">' + __('Instagram video ID or URL with format %s').replace('%s', 'https://www.instagram.com/{video_id}') + '</span>',
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.videoId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Instagram ID or URL')));
							return opts;
						},
					},
					{type: 'TextField', id: 'videoId', uiComponentOptions: function(data, opts) {
						opts.placeholder = this.pluginScoped.defaultVideoId;
						return opts;
					}}
				]},
			]}
		]
	},
	pluginScoped: {
		defaultVideoId: 'tv/Ca_EQwRlfwf',
	},
	batchUpdates: true,
	properties: [
		{id: 'videoId', type: 'InstagramVideoId', helpText: '<span style="white-space: pre-wrap; word-break: break-word;">' + __('Instagram video ID or URL with format %s').replace('%s', 'https://www.instagram.com/{video_id}') + '</span>',
			uiComponentOptions: function(data, opts) {
				opts.placeholder = this.pluginScoped.defaultVideoId;
				opts.validateText = data.content.videoId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Instagram ID or URL')));
				return opts;
			},
			get: function(data) { return data.content.videoId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.videoId = url ? url : value;
				data.content.finalVideoId = data.content.videoId ? data.content.videoId : this.pluginScoped.defaultVideoId;
			}
		},
	],
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';

		if (/^([a-zA-Z\d\-_\/]+)$/.test(value) || /https?:\/\/(?:www\.)?instagram.com\/(\w+\/[\w\-_]+)(?:$|\/)/.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL or ID'));
			api.setError(__('Invalid URL or ID'));
		}
		return url;
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.videoId.setText(data.content.videoId);

		fields.videoId.on('change', function(e) {
			fields.videoId.setText(self.getVideoId(e.target.value));
		});
	},
	applyAction: function(fields, data, elem) {
		data.content.videoId = fields.videoId.getText();
		data.content.finalVideoId = data.content.videoId ? data.content.videoId : this.pluginScoped.defaultVideoId;
	},
	loadAction: function (data) {
		if (!data.content.videoId) data.content.videoId = '';
		data.content.finalVideoId = data.content.videoId ? data.content.videoId : this.pluginScoped.defaultVideoId;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('videoId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"bing_maps","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/bing_maps","pluginUri":"plugins\/bing_maps","customConfiguration":null};
PluginWrapper._config.id = 'bing_maps';
PluginWrapper._config.baseUri = "plugins\/bing_maps";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/bing_maps\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_myMap\" class=\"bingmap\" style=\"position: relative; min-width: 200px; width: 100%; height: 100%;\"><\/div>\n{{#isPublished}}\n\t{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"https:\/\/ecn.dev.virtualearth.net\/mapcontrol\/mapcontrol.ashx?v=7.0\"><\/script>\n\t{{\/firstOnPage}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar getMap_{{id}} = function() {\n\t\t\tMicrosoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', { callback: function() {\n\t\t\t\tmap_{{id}} = new Microsoft.Maps.Map(document.getElementById('{{id}}_myMap'), { \n\t\t\t\t\tcredentials: '{{#isPreview}}{{content.previewKey}}{{\/isPreview}}{{^isPreview}}{{content.apiKey}}{{\/isPreview}}', \n\t\t\t\t\tmapTypeId: (\"{{content.type}}\" || Microsoft.Maps.MapTypeId.road),\n\t\t\t\t\ttheme: new Microsoft.Maps.Themes.BingTheme(),\n\t\t\t\t\tzoom: {{content.zoomLevel}},\n\t\t\t\t\tcenter: new Microsoft.Maps.Location(Number(\"{{content.finalLoc1}}\").valueOf(), Number(\"{{content.finalLoc2}}\").valueOf())\n\t\t\t\t});\n\t\t\t\tvar pushpin= new Microsoft.Maps.Pushpin(map_{{id}}.getCenter(), null);\n\t\t\t\tpushpin.setLocation(new Microsoft.Maps.Location(Number(\"{{content.finalLoc1}}\").valueOf(), Number(\"{{content.finalLoc2}}\").valueOf()));\n\t\t\t\tmap_{{id}}.entities.push(pushpin)\n\t\t\t}});\n\t\t}\n\t\ttwait = function() {\n\t\t\tif (window.Microsoft && window.Microsoft.Maps && typeof window.Microsoft.Maps.loadModule === 'function') {\n\t\t\t\tgetMap_{{id}}();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetTimeout(twait, 100);\n\t\t};\n\t\ttwait();\n\t})();\n<\/script>\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('bing_maps', {
	name: __('Bing Maps'),
	icon: 'ico-pl-bing_maps',
	noButton: true,
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 602, height: 327},
		resizable: true,
		renderOnce: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('API Key'), helpText: __('Get API Key from %s').replace('%s', '<a style="word-break: break-word;" href="https://msdn.microsoft.com/library/ff428642.aspx" target="_blank">https://msdn.microsoft.com/library/ff428642.aspx</a>')},
					{type: 'TextField', id: 'apiKey'}
				]},
				{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Coordinates or address'), helpText: __('Location address or coordinates'), uiComponentOptions: function(data, opts) {
							opts.validateText = (JSON.stringify([data.content.loc1, data.content.loc2]) !== JSON.stringify(this.pluginScoped.defaultLatLng)) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates or address')));
							return opts;
						}},
						{type: 'TextField', id: 'address', uiComponentOptions: function(data, opts) {
							opts.placeholder = this.pluginScoped.defaultLatLng.join(',');
							return opts;
						}}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Zoom level'), helpText: __('ex. 4')},
						{type: 'SizeSelector', id: 'zoomLevel'}
					]}
				]},
				{type: 'Label', text: __('Drag marker to set your location'), css: {marginTop: 15}},
				{type: 'CustomContainer', id: 'mapElem', css: {width: '100%', height: '234px', position: 'relative', border: '1px solid #aaaaaa', backgroundColor: '#ebebeb'}, init: function() { this.getElem().append('<div>'); }}
			]}
		]
	},
	properties: [
		{id: 'apiKey', type: 'BingApiKey',
			get: function(data) { return data.content.apiKey; },
			set: function(value, data) {
				data.content.apiKey = value;
			}
		},
		{id: 'address', type: 'BingAddress', helpText: __('Location address or coordinates'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = (JSON.stringify([data.content.finalLoc1, data.content.finalLoc2]) !== JSON.stringify(this.pluginScoped.defaultLatLng)) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates or address')));
				return opts;
			},
			get: function(data) { return {text: data.content.address, latLng: [data.content.finalLoc1.trim ? data.content.finalLoc1.trim() : data.content.finalLoc1, data.content.finalLoc2.trim ? data.content.finalLoc2.trim() : data.content.finalLoc2]}; },
			set: function(value, data) {
				var wnd = window;
				data.content.address = value.text;
				if (!value.latLng || !value.latLng[0] || !value.latLng[1]) {
					value.latLng = data.content.address.split(',').map(function (item) {
						return item.trim();
					})
				}
				data.content.finalLoc1 = data.content.loc1 = value.latLng[0].trim ? value.latLng[0].trim() : value.latLng[0];
				data.content.finalLoc2 = data.content.loc2 = value.latLng[1].trim ? value.latLng[1].trim() : value.latLng[1];
				var loc = new wnd.Microsoft.Maps.Location(data.content.finalLoc1, data.content.finalLoc2);
				this.map.setView({center: loc});
				this.mapMarker.setLocation(loc);
			}
		},
		{id: 'zoomLevel', type: 'BingMapZoom', helpText: __('ex. 4'),
			get: function(data) { return data.content.zoomLevel; },
			set: function(value, data) {
				data.content.zoomLevel = value;
				this.map.setView({
					zoom: (typeof data.content.zoomLevel === "string") ? parseFloat(data.content.zoomLevel) : data.content.zoomLevel,
				});
			}
		},
		{id: 'mapType', type: 'BingMapType',
			get: function(data) { return (data.content.type || 'r'); },
			set: function(value, data) {
				data.content.type = value;
				this.map.setMapType(data.content.type);
			}
		}
	],
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		defaultLatLng: wb_builder.mapsConfig.address ? wb_builder.mapsConfig.address.split(',') : ["40.6898193359375", "-74.0456314086914"],
		key: wb_builder.mapsConfig.bingMapsApiKey,
		addListener: function (inst, func) {
			if (this.scriptReady) {
				func.call(inst, this.ymaps);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://www.bing.com/mapspreview/sdk/mapcontrol?v=7.0', function () {
					var twait = function () {
						var wnd = window;
						if (wnd.Microsoft && wnd.Microsoft.Maps && typeof wnd.Microsoft.Maps.loadModule === 'function') {
							wnd.Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', {
								callback: function () {
									self.scriptReady = true;
									for (var i = 0; i < self.listeners.length; i++) {
										self.listeners[i].func.call(self.listeners[i].inst);
									}
								}
							});
							return;
						}
						setTimeout(twait, 100);
					};
					twait();
				});
			}
		},
		setKey: function(key) {
			if (!key || this.key) return;
			this.key = key;
			this.addListener();
		}
	},
	map: null,
	mapMarker: null,
	mapElem: null,
	resizeAction: function (data, elem) {
		if (this.mapElem)
			this.mapElem.css({
				width: data.width,
				height: data.height
			});
		if (this.map && this.map.container)
			this.map.container.fitToViewport();
	},
	openAction: function (fields, data, elem) {
		fields.apiKey.setText(data.content.apiKey);
		fields.address.setText(data.content.address);
		fields.zoomLevel.setValue(data.content.zoomLevel);
		var self = this, wnd = window;

		if (!fields.map) {
			$(fields.address.getElem().get(0)).autocomplete({
				source: function(request, response) {
					$.ajax({
						url: 'https://dev.virtualearth.net/REST/v1/Locations',
						dataType: 'jsonp',
						data: {
							key: self.pluginScoped.key,
							q: request.term
						},
						jsonp: 'jsonp',
						success: function (data) {
							var result = data.resourceSets[0];
							if (!result || result.estimatedTotal <= 0) return;

							response($.map(result.resources, function(item) {
								return {
									data: item,
									label: item.name + ' (' + item.address.countryRegion + ')',
									value: item.name
								};
							}));
						}
					});
				},
				minLength: 1,
				change: function (e, ui) {
					if (!ui.item) return;
					var loc = ui.item.data.point;
					setLocation(loc.coordinates[0], loc.coordinates[1]);
				},
				select: function (e, ui) {
					if (!ui.item) return;
					var loc = ui.item.data.point;
					setLocation(loc.coordinates[0], loc.coordinates[1]);
				}
			});
			function setLocation(lat, lng, noMap) {
				data.content.address = lat + ',' + lng;
				fields.address.setText(data.content.address);
				data.content.loc1 = data.content.finalLoc1 = lat;
				data.content.loc2 = data.content.finalLoc2 = lng;

				if (!noMap) {
					var loc = new wnd.Microsoft.Maps.Location(lat, lng);
					fields.map.setView({center: loc});
					fields.mapMarker.setLocation(loc);
				}
			}
			wnd.Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', {
				callback: function() {
					var loc = new wnd.Microsoft.Maps.Location(data.content.loc1, data.content.loc2);
					fields.map = new wnd.Microsoft.Maps.Map(fields.mapElem.getElem().children('div').get(0), {
						credentials: self.pluginScoped.key,
						mapTypeId: wnd.Microsoft.Maps.MapTypeId.road,
						theme: new wnd.Microsoft.Maps.Themes.BingTheme(),
						zoom: (typeof data.content.zoomLevel === "string") ? parseFloat(data.content.zoomLevel) : data.content.zoomLevel,
						center: loc
					});
					fields.mapMarker = new wnd.Microsoft.Maps.Pushpin(loc, {draggable: true});
					wnd.Microsoft.Maps.Events.addHandler(fields.mapMarker, 'dragend', function(e) {
						var loc = e.location || e.entity.getLocation();
						if (loc) {
							setLocation(loc.latitude, loc.longitude, true);
						}
					});
					fields.map.entities.push(fields.mapMarker);
				}
			});
			wnd.Microsoft.Maps.loadModule('Microsoft.Maps.Search', {
				callback: function() {
					fields.searchManager = new wnd.Microsoft.Maps.Search.SearchManager(fields.map);
				}
			});
		}
		

		fields.zoomLevel.on('change', function () {
			data.content.zoomLevel = fields.zoomLevel.getValue();
			fields.map.setView({
				zoom: (typeof data.content.zoomLevel === "string") ? parseFloat(data.content.zoomLevel) : data.content.zoomLevel
			});
		});

		fields.address.on('change', function () {
			data.content.address = fields.address.getText();
			data.content.zoomLevel = fields.zoomLevel.getValue();

			if (/[a-zA-Z]/.test(data.content.address)) {
				fields.searchManager.geocode({
					where: data.content.address,
					count: 5,
					bounds: fields.map.getBounds(),
					callback: function(resp) {
						if (!resp || !resp.results || resp.results.length === 0) return;
						var loc = resp.results[0].location;
						setLocation(loc.latitude, loc.longitude);
					},
					errorCallback: function() { console.error('Geolocate failed'); },
					userData: {name: 'Maps Test User', id: 'XYZ'}
				});
			} else {
				var loc = data.content.address.split(",");
				setLocation(loc[0], loc[1]);
			}

		});

		this.pluginScoped.addListener(this, function () {});

	},
	applyAction: function (fields, data, elem) {
		var wnd = window;
		data.content.address = fields.address.getText();
		data.content.apiKey = fields.apiKey.getText();
		this.pluginScoped.setKey(data.content.apiKey);
		data.content.zoomLevel = fields.zoomLevel.getValue();
		var coord = data.content.address.split(',').map(function (item) {
			return item.trim ? item.trim() : item;
		});
		data.content.loc1 = data.content.finalLoc1 = coord[0];
		data.content.loc2 = data.content.finalLoc2 = coord[1];
		
		var loc = new wnd.Microsoft.Maps.Location(data.content.finalLoc1, data.content.finalLoc2);
		this.map.setView({
			zoom: (typeof data.content.zoomLevel === "string") ? parseFloat(data.content.zoomLevel) : data.content.zoomLevel,
			center: loc
		});
		this.mapMarker.setLocation(loc);
	},
	loadAction: function (data) {
		data.content.previewKey = this.pluginScoped.key;
		if (!data.content.loc1) data.content.loc1 = null;
		if (!data.content.loc2) data.content.loc2 = null;
		data.content.finalLoc1 = (data.content.loc1 && data.content.loc2) ? data.content.loc1 : this.pluginScoped.defaultLatLng[0];
		data.content.finalLoc2 = (data.content.loc1 && data.content.loc2) ? data.content.loc2 : this.pluginScoped.defaultLatLng[1];
		if (!data.content.address || !data.content.loc1 || !data.content.loc2) data.content.address = [data.content.finalLoc1,data.content.finalLoc2].join(',');

		if (!data.content.type)
			data.content.type = 'r';
		if (!data.content.zoomLevel)
			data.content.zoomLevel = 16;
		if (!data.content.apiKey)
			data.content.apiKey = null;
		this.pluginScoped.setKey(data.content.apiKey);
	},
	loadedAction: function (data, elem) {
		var self = this;
		this.pluginScoped.addListener(this, function () {
			var wnd = window;
			var loc = new wnd.Microsoft.Maps.Location(data.content.finalLoc1, data.content.finalLoc2);
			self.map = new wnd.Microsoft.Maps.Map(elem.children('.bingmap').get(0), {
				credentials: self.pluginScoped.key,
				mapTypeId: (data.content.type || wnd.Microsoft.Maps.MapTypeId.road),
				theme: new wnd.Microsoft.Maps.Themes.BingTheme(),
				zoom: (typeof data.content.zoomLevel === "string") ? parseFloat(data.content.zoomLevel) : data.content.zoomLevel,
				center: loc
			});
			this.mapMarker = new wnd.Microsoft.Maps.Pushpin(loc, {draggable: false});
			self.map.entities.push(this.mapMarker);
		});
	},
	trim: function (str, symbols) {
		var cont = true, a, b, i;
		var symbs = {};
		if (typeof symbols !== 'undefined') {
			symbols = symbols.split('');
		} else {
			symbols = [' '];
		}
		for (i = 0; i < symbols.length; i++) {
			symbs[symbols[i]] = true;
		}
		while (cont) {
			cont = false;
			a = str.substring(0, 1);
			b = str.substring(str.length - 1);
			if (a in symbs) {
				str = str.substring(1);
				cont = true;
			}
			if (b in symbs) {
				str = str.substring(0, str.length - 1);
				cont = true;
			}
		}
		return str;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('address');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"telegram_widget","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/telegram_widget","pluginUri":"plugins\/telegram_widget","customConfiguration":null};
PluginWrapper._config.id = 'telegram_widget';
PluginWrapper._config.baseUri = "plugins\/telegram_widget";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/telegram_widget\/main.png";
PluginWrapper._config.template = "<script async\n        src=\"https:\/\/telegram.org\/js\/telegram-widget.js?21\"\n        data-telegram-post=\"{{content.finalTelegramPost}}\"\n        data-width=\"100%\"\n        data-userpic=\"{{content.userPic}}\"\n        data-color=\"{{content.color}}\"\n        data-dark=\"{{content.isDark}}\"\n        data-dark-color=\"{{content.darkColor}}\"\n><\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
function checkUnique(telegramPost, elem) {
    let telegramElements = document.querySelectorAll('[data-telegram-post="' + telegramPost + '"]');

    if (!telegramElements.length) return true;

    for (let i = 0; i < telegramElements.length; i++) {
        let telegramElement = telegramElements[i];
        if (telegramElement && !elem[0].contains(telegramElement)) return false;
    }
    return true;
}

PluginWrapper.registerPlugin('telegram_widget', {
    name: 'Telegram',
    icon: 'fa fa-telegram',
    element: {
        minSize: {width: 100, height: 100},
        defaultSize: {width: 480, height: 380},
        resizable: true,
    },
    batchUpdates: true,
    properties: [
        {id: 'telegramPost', type: 'TelegramWidgetPost', helpText: __('Link to a public post, e.g. %s').replace('%s', 'https://t.me/telegram/83'),
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.telegramPost ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Link to Telegram post')));
                return opts;
            },
            get: function(data) { return data.content.telegramPost; },
            validate: function (value, data, api) {
                this.getPostId(value, api);
            },
            set: function(value, data) {
                var url = this.getPostId(value);
                data.content.telegramPost = url ? url : value;
                data.content.finalTelegramPost = url ? url : 'telegram/83';
            }
        },
        {id: 'userPic', type: 'TelegramWidgetUserPic',
            get: function(data) { return data.content.userPic; },
            set: function(value, data) {
                data.content.userPic = value;
            }
        },
        {id: 'theme', type: 'TelegramWidgetDark',
            get: function(data) { return data.content.isDark === '1'; },
            set: function(value, data) {
                data.content.isDark = value ? '1' : '0';
            }
        },
        {id: 'color', type: 'TelegramWidgetColor',
            get: function(data) { return data.content.color; },
            set: function(value, data) {
                data.content.color = value.replace('#', '');
            }
        },
    ],
    getPostId: function(value, api) {
        var url = '';
        if (value === '') return '';

        url = value.replace(/https?:\/\/(?:www\.)?t.me\//, '');
        return url;
    },
    pluginScoped: {
        scriptLoaded: false,
        scriptReady: false,
        listeners: []
    },
    resizeTimeout: null,
    resizeAction: function (data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function () {
                self.resizeTimeout = null;
                self.updateElement();
            }, 2000);
        }
    },
    onRender: function(data, elem, self) {
        if (checkUnique(data.content.finalTelegramPost, elem)) {
            self.displayErrorMessage(false);
        } else {
            self.setErrorMessage(__('Non unique URL or ID'));
        }
    },
    openAction: function (fields, data, elem) {
        var self = this;
        fields.telegramPost.setText(data.content.telegramPost);
        fields.telegramPost.on('change', function(e) {
            fields.telegramPost.setText(self.getPostId(e.target.value));
        });

        fields.userPic.setValue(data.content.userPic);
        fields.light.setValue(data.content.isDark === '0');
        fields.dark.setValue(data.content.isDark === '1');
        fields.color.setValue(data.content.color);
    },
    applyAction: function (fields, data, elem) {
        data.content.telegramPost = fields.telegramPost.getText();
        data.content.finalTelegramPost = data.content.telegramPost ? data.content.telegramPost : 'telegram/83';
        data.content.userPic = fields.userPic.getValue();
        if (fields.light.getValue())
            data.content.isDark = '0';
        if (fields.dark.getValue())
            data.content.isDark = '1';
        data.content.color = fields.color.getValue();
    },
    loadAction: function (data) {
        if (!data.content.telegramPost)
            data.content.telegramPost = '';
        data.content.finalTelegramPost = data.content.telegramPost ? data.content.telegramPost : 'telegram/83';
    },

    supportsAutoWidth: function() {
        return true;
    },
    supportsAutoHeight: function() {
        return true;
    },

    onDblClick: function() {
        var thisClass = this;
        setTimeout(function() {
            var component = thisClass.getPropertyComponent('telegramPost');
            if (component) component.focus();
        }, 50);
    }
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"robokassa","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/robokassa","pluginUri":"plugins\/robokassa","customConfiguration":null};
PluginWrapper._config.id = 'robokassa';
PluginWrapper._config.baseUri = "plugins\/robokassa";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/robokassa\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Robokassa\" method=\"post\" action=\"https:\/\/auth.robokassa.ru\/Merchant\/Index.aspx\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"MerchantLogin\" value=\"{{content.merch_id}}\" \/>\n\t<input type=\"hidden\" name=\"OutSum\" value=\"{{content.amount}}\" data-fixed-decimal=\"2\" \/>\n\t<input type=\"hidden\" name=\"InvDesc\" value=\"{{content.description}}\" \/>\n\t{{#content.demo}}\n\t<input type=\"hidden\" name=\"IsTest\" value=\"1\" \/>\n\t{{\/content.demo}}\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"InvId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/robokassa/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://www.robokassa.ru/" target="_blank">https://www.robokassa.ru/</a></p>'
				+ '<p><strong>Result URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Robokassa' + '</pre></p>'
				+ '<p><strong>Success URL:</strong><br />'
				+ '<pre>' + base_url + 'store-return/Robokassa' + '</pre></p>'
				+ '<p><strong>Fail URL:</strong><br />'
				+ '<pre>' + base_url + 'store-cancel/Robokassa' + '</pre></p>';
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#e8edf1',
			button_border: {
				color: '#beccd5',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #beccd5' },
				cssRaw: 'border: 1px solid #beccd5'
			},
			logo: 'robokassa_color_4.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#7995b8'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'robokassa_color.svg', name: 'coloured'},
			{id: 'robokassa_color_2.svg', name: 'coloured 2'},
			{id: 'robokassa_color_3.svg', name: 'coloured 3'},
			{id: 'robokassa_color_4.svg', name: 'coloured 4'},
			{id: 'robokassa_black.svg', name: 'black'},
			{id: 'robokassa_black_2.svg', name: 'black 2'},
			{id: 'robokassa_black_3.svg', name: 'black 3'},
			{id: 'robokassa_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'robokassa_white_2.svg', name: 'white 2', backgroundColor: '#000000'},
			{id: 'robokassa_white_3.svg', name: 'white 3', backgroundColor: '#000000'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Robokassa',
	id: 'robokassa',
	keyFieldId: 'merch_id',
	keyField2Id: 'merch_pass1',
	keyField3Id: 'merch_pass2',
	keyField4Id: 'hash_type',
	keyField5Id: 'vatCode',
	keyField6Id: 'sno',
	keyField7Id: 'demo',
	keyFieldDef: {type: 'VerticalLayout', children: [
		{type: 'HorizontalLayout', columnWeights: [12,6,6,6,6,6], children: [
			{type: 'VerticalLayout', css: {}, children: [
				{type: 'Label', text: __('Store identifier'), helpText: __('Shop identifer from Technical preferences')},
				{type: 'TextField', placeholder: __('Store identifier'), id: 'key'},
			]},
			{type: 'VerticalLayout', css: {marginTop: 15}, children: [
				{type: 'Label', text: __('Password') + ' 1', helpText: __('Password from Technical preferences')},
				{type: 'TextField', placeholder: __('Password') + ' 1', id: 'key2', password: true, css: {marginTop: 5}},
			]},
			{type: 'VerticalLayout', css: {marginTop: 15}, children: [
				{type: 'Label', text: __('Password') + ' 2', helpText: __('Password from Technical preferences')},
				{type: 'TextField', placeholder: __('Password') + ' 2', id: 'key3', password: true, css: {marginTop: 5}},
			]},
			{type: 'VerticalLayout', css: {marginTop: 15}, children: [
				{type: 'Label', text: __('Hash Type')},
				{type: 'DropdownBox', id: 'key4', css: {marginTop: 5}, options: [
					{id: 'MD5', name: 'MD5'},
					{id: 'RIPEMD160', name: 'RIPEMD160'},
					{id: 'SHA1', name: 'SHA1'},
					{id: 'SHA256', name: 'SHA256'},
					{id: 'SHA384', name: 'SHA384'},
					{id: 'SHA512', name: 'SHA512'}
				]}
			]},
			{type: 'VerticalLayout', css: {marginTop: 15}, children: [
				{type: 'Label', text: __('VAT rate'), helpText: __('VAT rate from Robokassa')},
				{type: 'DropdownBox', placeholder: __('VAT rate'), css: {marginTop: 5}, id: 'key5', options: [
					{id: 'none', name: ' '},
					{id: 'vat0', name: '   0%'},
					{id: 'vat10', name: '   10%'},
					{id: 'vat20', name: '    20%'},
					{id: 'vat110', name: '     10/110'},
					{id: 'vat120', name: '     20/120'},
				]},
			]},
			{type: 'VerticalLayout', css: {marginTop: 15}, children: [
				{type: 'Label', text: __('Tax system'), helpText: __('Tax system from Robokassa')},
				{type: 'DropdownBox', placeholder: __('Tax system'), css: {marginTop: 5}, id: 'key6', options: [
					{id: 'osn', name: ''},
					{id: 'usn_income', name: '  ()'},
					{id: 'usn_income_outcome', name: '  (  )'},
					{id: 'esn', name: '  '},
					{id: 'patent', name: ' '},
				]},
			]},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key7', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['merch_id', 'merch_pass1', 'merch_pass2', 'hash_type', 'vatCode', 'sno', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'robokassa', true),
	settingsTabDef: Globals.getSettingsContent(),
	logos: Globals.getLogosList(),
	forceActive: true
});

PluginWrapper.registerPlugin('robokassa', {
	name: 'Robokassa',
	element: {
		minSize: {width: 60, height: 20},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merch_id', type: 'RobokassaMerchId', helpText: __('Shop identifer from Technical preferences'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merch_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store identifier')));
				return opts;
			},
			get: function(data) { return data.content.merch_id; },
			set: function(value, data) {
				data.content.merch_id = value;
			}
		},
		{id: 'merch_pass1', type: 'RobokassaMerchPass1', helpText: __('Password from Technical preferences'),
			get: function(data) { return data.content.merch_pass1; },
			set: function(value, data) {
				data.content.merch_pass1 = value;
			}
		},
		{id: 'merch_pass2', type: 'RobokassaMerchPass2', helpText: __('Password from Technical preferences'),
			get: function(data) { return data.content.merch_pass2; },
			set: function(value, data) {
				data.content.merch_pass2 = value;
			}
		},
		{id: 'description', type: 'RobokassaDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'RobokassaAmount', helpText: __('Amount to be transferred') + ', RUB',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'RobokassaCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'vatCode', type: 'RobokassaVatCode', helpText: __('VAT rate from Robokassa'),
			get: function(data) { return data.content.vatCode; },
			set: function(value, data) {
				data.content.vatCode = value;
			}
		},
		{id: 'sno', type: 'RobokassaSno', helpText: __('Tax system from Robokassa'),
			get: function(data) { return data.content.sno; },
			set: function(value, data) {
				data.content.sno = value;
			}
		},
		{id: 'hashtype', type: 'RobokassaHashtype',
			get: function(data) { return data.content.hashtype; },
			set: function(value, data) {
				data.content.hashtype = value;
			}
		},
		{id: 'demo', type: 'RobokassaDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'robokassa'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Store identifier'), helpText: __('Shop identifer from Technical preferences'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merch_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store identifier')));
							return opts;
						}},
						{type: 'TextField', id: 'merch_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Password') + ' 1', helpText: __('Password from Technical preferences')},
						{type: 'TextField', id: 'merch_pass1'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Password') + ' 2', helpText: __('Password from Technical preferences')},
						{type: 'TextField', id: 'merch_pass2'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + ', RUB'},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: ('Hash (' + __('Type').toLowerCase() + ')'), helpText: __('Hash calculation algorithm from Technical preferences')},
						{type: 'DropdownBox', id: 'hashtype', options: [
							{id: 'MD5', name: 'MD5'},
							{id: 'RIPEMD160', name: 'RIPEMD160'},
							{id: 'SHA1', name: 'SHA1'},
							{id: 'SHA256', name: 'SHA256'},
							{id: 'SHA384', name: 'SHA384'},
							{id: 'SHA512', name: 'SHA512'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [4], columnWeightsSmall: [8, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'RUB', name: 'RUB'},
							{id: 'KZT', name: 'KZT'},
							{id: 'EUR', name: 'EUR'},
							{id: 'USD', name: 'USD'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('VAT rate'), helpText: __('VAT rate from Robokassa')},
						{type: 'DropdownBox', id: 'vatCode', options: [
							{id: 'none', name: ' '},
							{id: 'vat0', name: '   0%'},
							{id: 'vat10', name: '   10%'},
							{id: 'vat20', name: '    20%'},
							{id: 'vat110', name: '     10/110'},
							{id: 'vat120', name: '     20/120'},
						]}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Tax system'), helpText: __('Tax system from Robokassa')},
						{type: 'DropdownBox', id: 'sno', options: [
							{id: 'osn', name: ''},
							{id: 'usn_income', name: '  ()'},
							{id: 'usn_income_outcome', name: '  (  )'},
							{id: 'esn', name: '  '},
							{id: 'patent', name: ' '},
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'robokassa'),
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		fields.merch_id.setText(data.content.merch_id);
		fields.merch_pass1.setText(data.content.merch_pass1);
		fields.merch_pass2.setText(data.content.merch_pass2);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		itm = fields.hashtype.getItemById(data.content.hashtype);
		fields.hashtype.selectItem(itm);

		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);

		itm = fields.vatCode.getItemById(data.content.vatCode);
		fields.vatCode.selectItem(itm);

		itm = fields.sno.getItemById(data.content.sno);
		fields.sno.selectItem(itm);

		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		data.content.merch_id = fields.merch_id.getText();
		data.content.merch_pass1 = fields.merch_pass1.getText();
		data.content.merch_pass2 = fields.merch_pass2.getText();
		data.content.description = fields.description.getText();
		data.content.amount = (itm = fields.amount.getText()) ? parseFloat(itm.replace(',', '.')).toFixed(2) : '0.00';

		itm = fields.hashtype.getSelectedItem();
		data.content.hashtype = itm.getOriginal().id;

		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;

		itm = fields.vatCode.getSelectedItem();
		data.content.vatCode = itm.getOriginal().id;

		itm = fields.sno.getSelectedItem();
		data.content.sno = itm.getOriginal().id;

		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		if (!data.content.merch_id) data.content.merch_id = '';
		if (!data.content.merch_pass1) data.content.merch_pass1 = '';
		if (!data.content.merch_pass2) data.content.merch_pass2 = '';
		if (!data.content.description) data.content.description = '';
		if (!data.content.amount) data.content.amount = '1.00';
		if (!data.content.hashtype) data.content.hashtype = 'MD5';
		if (!data.content.currency) data.content.currency = 'RUB';
		if (data.content.demo === undefined) data.content.demo = false;
		if (!data.content.vatCode) data.content.vatCode = '';
		if (!data.content.sno) data.content.sno = '';
		if (['robokassa.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'robokassa_color_4.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merch_id');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"payme","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/payme","pluginUri":"plugins\/payme","customConfiguration":null};
PluginWrapper._config.id = 'payme';
PluginWrapper._config.baseUri = "plugins\/payme";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/payme\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Payme\" action=\"{{#content.demo}}https:\/\/test.paycom.uz{{\/content.demo}}{{^content.demo}}https:\/\/checkout.paycom.uz{{\/content.demo}}\" method=\"post\" style=\"width: 100%; height: 100%;\" id=\"{{id}}_payme_form\">\n\t<input type=\"hidden\" name=\"merchant\" value=\"{{content.merchantId}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" data-multiplier=\"100\" data-fixed-decimal=\"0\" \/>\n\t<input type=\"hidden\" name=\"account[order_id]\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"callback\" value=\"{returnUrl}?txnid=:transaction_id\" \/>\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n\n{{#isPublished}}{{^content.store}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\t$('#{{id}}_payme_form').on('submit', function(e, forceSubmit) {\n\t\t\tif (forceSubmit) return true;\n\t\t\tvar formElements = this.elements;\n\t\t\tvar formData = [];\n\t\t\tvar transactionId = null, orderPrice = null;\n\t\t\tfor (var i=0; i < formElements.length; i++) {\n\t\t\t\tif (!formElements[i].name) continue;\n\t\t\t\tif (formElements[i].name === 'account[order_id]') {\n\t\t\t\t\ttransactionId = formElements[i].value;\n\t\t\t\t} else if (formElements[i].name === 'amount') {\n\t\t\t\t\torderPrice = formElements[i].value;\n\t\t\t\t}\n\t\t\t\tformData.push({\n\t\t\t\t\tname: formElements[i].name,\n\t\t\t\t\tvalue: formElements[i].value,\n\t\t\t\t\tisPrice: false,\n\t\t\t\t\tfixedDecimal: -1,\n\t\t\t\t\tmultiplier: 0\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar thisSelf = this;\n\t\t\t$.ajax({\n\t\t\t\turl: $('base').attr('href') + 'store-submit\/Payme',\n\t\t\t\ttype: 'POST',\n\t\t\t\tcontentType: 'application\/json; charset=utf-8',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\tformData: formData,\n\t\t\t\t\ttransactionId: transactionId,\n\t\t\t\t\torderPrice: orderPrice\n\t\t\t\t}),\n\t\t\t\tcomplete: function() {\n\t\t\t\t\t$(thisSelf).trigger('submit', [true]);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t})();\n<\/script>\n{{\/content.store}}{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/payme/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'payme_color_horizontal.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'payme_color_horizontal.svg', name: 'coloured'},
			{id: 'payme_color_vertical.svg', name: 'coloured 2'},
			{id: 'payme_dark_horizontal.svg', name: 'dark'},
			{id: 'payme_dark_vertical.svg', name: 'dark 2'},
			{id: 'payme_white_horizontal.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'payme_white_vertical.svg', name: 'white 2', backgroundColor: '#000000'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Payme',
	id: 'payme',
	pageUrl: 'https://payme.uz/',
	keyFieldId: 'merchantId',
	keyField2Id: 'merchantKey',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant Key')},
			{type: 'TextField', placeholder: __('Merchant Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['merchantId', 'merchantKey', 'demo'],
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payme', true),
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('payme', {
	name: 'Payme',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchantId', type: 'PaymeMerchantId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchantId; },
			set: function(value, data) {
				data.content.merchantId = value;
			}
		},
		{id: 'merchantKey', type: 'PaymeMerchantKey',
			get: function(data) { return data.content.merchantKey; },
			set: function(value, data) {
				data.content.merchantKey = value;
			}
		},
		{id: 'description', type: 'PaymeDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'PaymeAmount', helpText: __('Amount to be transferred'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'PaymeCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'PaymeDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'payme'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant Key')},
						{type: 'TextField', id: 'merchantKey'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6,3,3], columnWeightsSmall: [6,3,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '643', name: 'RUB'},
							{id: '840', name: 'USD'},
							{id: '860', name: 'UZS'},
							{id: '978', name: 'EUR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payme')
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		fields.merchantId.setText(data.content.merchantId);
		fields.merchantKey.setText(data.content.merchantKey);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		itm = fields.logo.getItemById(data.content.logo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		data.content.merchantId = fields.merchantId.getText();
		data.content.merchantKey = fields.merchantKey.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (data.content.logo && data.content.logo.indexOf('.') === -1) {
			data.content.logo += '.png';
		}
		if (!data.content.merchantId) data.content.merchantId = '';
		if (!data.content.merchantKey) data.content.merchantKey = '';
		if (!data.content.description) data.content.description = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.currency) data.content.currency = '860';
		if (['payme-1-white.png', 'payme-1-black.png', 'payme-2-white.png', 'payme-2-black.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'payme_color_horizontal.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"spotify","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/spotify","pluginUri":"plugins\/spotify","customConfiguration":null};
PluginWrapper._config.id = 'spotify';
PluginWrapper._config.baseUri = "plugins\/spotify";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/spotify\/main.png";
PluginWrapper._config.template = "<style>\n\t#{{id}}_wb_caption:before {\n\t\tcontent: none;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t\theight: auto;\n\t}\n\n\t#{{id}}_wb_caption {\n\t\tbackground-color: transparent !important;\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n<\/style>\n<div id=\"{{id}}_wb_caption\" class=\"wb-prevent-layout-click\">\n\t<iframe src=\"{{{content.finalLink}}}\" width=\"100%\" height=\"100%\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\" frame><\/iframe>\n<\/div>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('spotify', {
	name: 'Spotify',
	icon: 'ico-pl-spotify',
	element: {
		minSize: {
			width: 200,
			height: 25
		},
		defaultSize: {
			width: 300,
			height: 380
		},
		resizable: true,
		supportsFullWidth: true
	},
	properties: [
		{id: 'control', type: 'SpotifyControl',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.src ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Spotify Link or URI')));
				return opts;
			},
			get: function(data) {
				return {
					link: data.content.src
				};
			},
			set: function(value, data, elem) {
				data.content.src = value.link || null;
				this.updateFinalLink(data);
			}
		}
	],
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Spotify Link or URI'),
						helpText: __('Right-click any song, album, artist, playlist, podcast or episode in the Spotify player and select Share. Click on \'Copy Link\' or \'Copy Spotify URI\' to copy the Spotify Link or URI'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.src ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Spotify Link or URI')));
							return opts;
						},
					},
					{type: 'TextField', id: 'src', placeholder: 'https://open.spotify.com/track/0bYg9bo50gSsH3LtXe2SQn'}
				]}
			]}
		]
	},

	pluginScoped: {
		defaultPlaylistId: '37i9dQZEVXbMXbN3EUUhlg'
	},

	getSrcFromLink: function(link) {
		if (/^https:\/\/open.spotify.com\/embed\/playlist\/[A-Za-z0-9]+$/.test(link))
			return link;
		var src = link;
		var linkBase = 'https://open.spotify.com/embed/';
		var matches = src.match(/iframe.+src="([^&"]+).*?"/i);
		if (matches && '1' in matches) {
			src = matches[1];
		} else {
			var matches2 = src.match(/spotify:(.+):(.+)/i);
			if (matches2 && '1' in matches2 && '2' in matches2) {
				src = linkBase + matches2[1] + "/" + matches2[2];
			} else {
				var matches3 = src.match(/https:\/\/open.spotify.com\/(.+)\/(.+)/i);
				if (matches3 && '1' in matches3 && '2' in matches3) {
					src = linkBase + matches3[1] + "/" + matches3[2];
				} else {
					src = '';
				}
			}
		}
		return src;
	},
	
	openAction: function(fields, data, elem) {
		fields.src.setText(data.content.src);
	},
	
	applyAction: function(fields, data, elem) {
		data.content.src = fields.src.getText();
		this.updateFinalLink(data);
	},
	
	loadAction: function(data) {
		this.updateFinalLink(data);
	},

	supportsAutoWidth: function() {
		return true;
	},
	
	supportsAutoHeight: function() {
		return true;
	},

	updateFinalLink: function(data) {
		data.content.finalLink = data.content.src
				? this.getSrcFromLink(data.content.src)
				: ('https://open.spotify.com/embed/playlist/' + this.pluginScoped.defaultPlaylistId);
	},

	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('control');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"BuyNow","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/BuyNow","pluginUri":"plugins\/BuyNow","customConfiguration":null};
PluginWrapper._config.id = 'BuyNow';
PluginWrapper._config.baseUri = "plugins\/BuyNow";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/BuyNow\/main.png";
PluginWrapper._config.template = "{{#content.clientId}}{{#content.clientSecret}}\n\t<form data-gateway-id=\"Paypal\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\n\t\t<input name=\"amount\" value=\"{{content.amount}}\" type=\"hidden\" \/>\n\t\t<input name=\"currency\" value=\"{{content.currencyCode}}\" type=\"hidden\" \/>\n\t\t<input name=\"description\" value=\"{{content.itemName}}\" type=\"hidden\" \/>\n\t\t<input name=\"shipping\" value=\"{{content.shipping}}\" type=\"hidden\" \/>\n\t\t{{#content.store}}\n\t\t<input type=\"hidden\" name=\"returnUrl\" value=\"{callbackUrl}\" \/>\n\t\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t\t{{\/content.store}}\n\t\t{{^content.store}}\n\t\t{{{requireService}}}\n\t\t{{\/content.store}}\n\t\t{{{content.paymentGatewayButton}}}\n\t<\/form>\n{{\/content.clientSecret}}{{\/content.clientId}}\n\n{{^isPublished}}\n{{#content.clientId}}{{^content.clientSecret}}\n<div class=\"wb_caption smaller wb-prevent-layout-click\">\n\t<div>\n\t\t<i class=\"fa fa-paypal\"><\/i> PayPal\n\t<\/div>\n<\/div>\n{{\/content.clientSecret}}{{\/content.clientId}}\n{{#content.clientSecret}}{{^content.clientId}}\n<div class=\"wb_caption smaller wb-prevent-layout-click\">\n\t<div>\n\t\t<i class=\"fa fa-paypal\"><\/i> PayPal\n\t<\/div>\n<\/div>\n{{\/content.clientId}}{{\/content.clientSecret}}\n{{\/isPublished}}\n\n{{^content.clientId}}{{^content.clientSecret}}\n\t{{^isPublished}}\n\t{{{content.paymentGatewayButton}}}\n\t{{\/isPublished}}\n\t{{#isPublished}}\n\t<form action=\"{{#content.demo}}https:\/\/www.sandbox.paypal.com\/cgi-bin\/webscr{{\/content.demo}}{{^content.demo}}https:\/\/www.paypal.com\/cgi-bin\/webscr{{\/content.demo}}\" method=\"post\" data-gateway-id=\"Paypal\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t\t<input type=\"hidden\" name=\"cmd\" value=\"_xclick\" \/>\n\t\t<input type=\"hidden\" name=\"business\" value=\"{{content.business}}\" \/>\n\t\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t\t<input type=\"hidden\" name=\"currency_code\" value=\"{{content.currencyCode}}\" \/>\n\t\t<input type=\"hidden\" name=\"button_subtype\" value=\"services\" \/>\n\t\t<input type=\"hidden\" name=\"no_note\" value=\"0\" \/>\n\t\t<input type=\"hidden\" name=\"shipping\" value=\"{{content.shipping}}\" \/>\n\t\t<input type=\"hidden\" name=\"bn\" value=\"JSCProfis_SP\" \/>\n\t\t{{#content.store}}\n\t\t<input type=\"hidden\" name=\"custom\" value=\"{transactionId}\" \/>\n\t\t<input type=\"hidden\" name=\"notify_url\" value=\"{callbackUrl}\" \/>\n\t\t<input type=\"hidden\" name=\"return\" value=\"{returnUrl}\" \/>\n\t\t<input type=\"hidden\" name=\"cancel_return\" value=\"{cancelUrl}\" \/>\n\t\t{{\/content.store}}\n\t\t{{{requireService}}}\n\t<\/form>\n\t{{\/isPublished}}\n{{\/content.clientSecret}}{{\/content.clientId}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/BuyNow/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'CheckBox', 'TextField', 'DropdownBox' ], function (PropertyTypeModule, CheckBox, TextField, DropdownBox) {

	if (PropertyTypeModule) {
		var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
		var PropertyType = PropertyTypeModule.PropertyType;
		var CheckBox = CheckBox.default;
		var TextField = TextField.TextField;
		var DropdownBox = DropdownBox.DropdownBox;

		var PayPalBusiness = new PropertyType("PayPal/PayPalBusiness", PropertyTypeAccess.User, true, __('Email address to receive payments'), TextField, null, {
			placeholder: ''
		});
		var PayPalClientId = new PropertyType("PayPal/PayPalClientId", PropertyTypeAccess.User, true, __('Client ID'), TextField, null, {
			placeholder: ''
		});
		var PayPalClientSecret = new PropertyType("PayPal/PayPalClientSecret", PropertyTypeAccess.User, true, __('Client Secret'), TextField, null, {
			placeholder: ''
		});

		var PayPalClientItemName = new PropertyType("PayPal/PayPalItemName", PropertyTypeAccess.User, true, __('Item Name'), TextField, null, {
			placeholder: ''
		});
		var PayPalShipping = new PropertyType("PayPal/PayPalShipping", PropertyTypeAccess.User, true, __('Shipping'), TextField, null, {
			placeholder: ''
		});
		var PayPalPrice = new PropertyType("PayPal/PayPalPrice", PropertyTypeAccess.User, true, __('Price'), TextField, null, {
			placeholder: ''
		}).inline(6);
		var PayPalCurrency = new PropertyType("PayPal/PayPalCurrency", PropertyTypeAccess.User, true, __('Currency'), DropdownBox, null, {
			placeholder: '',
			options: [
				{id: 'USD', name: 'USD', value: 'USD'},
				{id: 'AUD', name: 'AUD', value: 'AUD'},
				{id: 'BRL', name: 'BRL', value: 'BRL'},
				{id: 'GBP', name: 'GBP', value: 'GBP'},
				{id: 'CAD', name: 'CAD', value: 'CAD'},
				{id: 'CZK', name: 'CZK', value: 'CZK'},
				{id: 'DKK', name: 'DKK', value: 'DKK'},
				{id: 'EUR', name: 'EUR', value: 'EUR'},
				{id: 'HKD', name: 'HKD', value: 'HKD'},
				{id: 'HUF', name: 'HUF', value: 'HUF'},
				{id: 'ILS', name: 'ILS', value: 'ILS'},
				{id: 'JPY', name: 'JPY', value: 'JPY'},
				{id: 'MYR', name: 'MYR', value: 'MYR'},
				{id: 'MXN', name: 'MXN', value: 'MXN'},
				{id: 'TWD', name: 'TWD', value: 'TWD'},
				{id: 'NZD', name: 'NZD', value: 'NZD'},
				{id: 'NOK', name: 'NOK', value: 'NOK'},
				{id: 'PHP', name: 'PHP', value: 'PHP'},
				{id: 'PLN', name: 'PLN', value: 'PLN'},
				{id: 'RUB', name: 'RUB', value: 'RUB'},
				{id: 'SGD', name: 'SGD', value: 'SGD'},
				{id: 'SEK', name: 'SEK', value: 'SEK'},
				{id: 'CHF', name: 'CHF', value: 'CHF'},
				{id: 'THB', name: 'THB', value: 'THB'}
			],
		}).inline(6);
		var PayPalDemo = new PropertyType("PayPal/PayPalDemo", PropertyTypeAccess.User, true, __('Test mode'), CheckBox, null, {
			placeholder: ''
		});
		PropertyType.setSortOrder('PayPal', 1);
		PropertyType.setDefaultOpenCategory('PayPal');
		PropertyType.setSortOrder('PayPal/PayPalBusiness', PropertyType.sortOrderAfter('PayPal/PayPalClientSecret'));
	}


	var pluginId = 'BuyNow';
	var Globals = {
		_settingsContent: null,
		_settingsContent2: null,
		_settingsDialog: null,
		_settingsDialogV2: null,
		getSettingsContent: function () {
			if (!Globals._settingsContent) {
				Globals._settingsContent = '<p><strong>' + __('Page URL') + ':</strong> <a href="https://paypal.com/" target="_blank">https://paypal.com/</a></p>' +
					'<p><strong>' + __('Important') + ':</strong> ' + __('Make sure that IPN setting are enabled in your Paypal account.') + '<br/>'
					+ '<strong>' + __('More info') + ':</strong> <a href="https://developer.paypal.com/api/nvp-soap/ipn/IPNSetup/#link-settingupipnnotificationsonpaypal" target="_blank">' + __('Setting Up IPN Notifications on PayPal') + '</a></p>';
			}
			return Globals._settingsContent;
		},
		getSettingsContentV2: function () {
			if (!Globals._settingsContent2) {
				Globals._settingsContent2 = '<p><strong>' + __('Page URL') + ':</strong> <a href="https://paypal.com/" target="_blank">https://paypal.com/</a></p>' +
					'<p><strong>' + __('Important') + ':</strong> ' + __('To integrate PayPal Checkout, you will need a Business account. If you have a business registered in Mainland China, you can upgrade your Personal account to a Business account.') + '<br/>'
					+ '<strong>' + __('More info') + ':</strong> <a href="https://developer.paypal.com/api/rest/" target="_blank">' + __('Get client ID and client secret') + '</a></p>'
					+ '<strong>' + __('Need configure webhooks') + ':</strong> In <a href="https://developer.paypal.com/dashboard/applications/" target="_blank">' + __('Application management') + '</a>, under each App\'s settings.</p><p>Webhook url: "' + 'https://' + wb_builder.siteDomain + '/store-callback/Paypal' + '".</p><p>Event types: <ul><li>Checkout checkout buyer-approved</li><li>Checkout order approved</li><li>Checkout order completed</li><li>Checkout order declined</li><li>Checkout order saved</li><li>Checkout order voided</li></ul> </p>';
			}
			return Globals._settingsContent2;
		},
		getSettingsDialog: function () {
			if (!Globals._settingsDialog) {
				var dlg = new WB_Dialog(__('Settings'));
				dlg.setContent(Globals.getSettingsContent());
				dlg.removeAllButtons();
				dlg.addButton(__('Close'), function () {
					dlg.setVisible(false);
				}, false, 'btn-default');
				Globals._settingsDialog = dlg;
			}
			return Globals._settingsDialog;
		},
		getSettingsDialogV2: function () {
			if (!Globals._settingsDialogV2) {
				var dlg = new WB_Dialog(__('Settings'));
				dlg.setContent(Globals.getSettingsContentV2());
				dlg.removeAllButtons();
				dlg.addButton(__('Close'), function () {
					dlg.setVisible(false);
				}, false, 'btn-default');
				Globals._settingsDialogV2 = dlg;
			}
			return Globals._settingsDialogV2;
		},
		getDefaultStyles: function (isStore) {
			var styles = {
				button_color: '#ffffff',
				button_border: {
					color: "#cccccc",
					style: 'solid',
					weight: 1,
					differ: false,
					css: "1px solid #cccccc",
					cssRaw: 'border: 1px solid #cccccc;'
				},
				logo: 'paypal_color.svg',
				font_family: 'Arial',
				font_size: 12,
				label_color: '#949494'
			};
			return isStore ? styles : $.extend(true, styles, {
				button_label: __('Pay with %s').replace('%s', ''),
				showlogo: true,
				logo_width: 110,
				button_padding: 4
			});
		},
		getLogosList: function () {
			return [
				{id: 'paypal_color.svg', name: 'coloured'},
				{id: 'paypal_black.svg', name: 'black'},
				{id: 'paypal_white.svg', name: 'white', backgroundColor: '#000000'}
			];
		},
		supportedLocales: [
			'en_US', 'en_AU', 'en_GB', 'fr_CA', 'es_ES',
			'it_IT', 'fr_FR', 'de_DE', 'pt_BR', 'zh_CN',
			'da_DK', 'zh_HK', 'he_IL', 'no_NO', 'pl_PL',
			'pt_PT', 'ru_RU', 'sv_SE', 'th_TH', 'zh_TW',
			'nl_NL'
		],
		filterLocale: function (locale) {
			for (var i in this.supportedLocales) {
				if (this.supportedLocales[i] === locale) {
					if (locale === 'nl_NL') return 'nl_NL/NL';
					return locale;
				}
			}
			return 'en_US';
		},
		genLogoSrc: function (data, locale) {
			if (data.content.logo === 'buy-now') {
				data.content.logo = "paypal_color.svg";
				// var lang;
				// locale = locale || ((lang = wb_builder.getLanguageByCode(wb_builder.site.currSelLang)) ? lang.locale : null);
				// locale = locale || ((lang = wb_builder.getLanguageByCode(wb_builder.site.getLastDefLang())) ? lang.locale : null);
				// locale = locale || wb_builder.locale;
				// locale = locale || 'en_US';
				// return 'https://www.paypalobjects.com/' + this.filterLocale(locale) + '/i/btn/btn_buynow_LG.gif';
			}
			return (wb_builder.pluginRepoPath ? wb_builder.pluginRepoPath : 'plugins') + '/' + pluginId + '/site/gallery_gen/' + pluginId + '/' + data.content.logo;
		},
		updateLogoSrc: function (data, locale) {
			data.content.logo_src = Globals.genLogoSrc(data);
			data.content.paymentGatewayButton = PluginWrapper.paymentGatewayGenButton(data);
		},
		preOpenCallback: function (fields) {
			if (!fields.__paymentGatewayBuyNowEventsSet__) {
				fields.__oriPreviewUpdateFunc__ = fields.preview.update;
				fields.preview.update = function () {
				};
			}
		},
		postOpenCallback: function (fields) {
			if (!fields.__paymentGatewayBuyNowEventsSet__) {
				fields.__paymentGatewayBuyNowEventsSet__ = true;
				fields.preview.update = fields.__oriPreviewUpdateFunc__;
				fields.__oriPreviewUpdateFunc__ = null;
				delete fields.__oriPreviewUpdateFunc__;
				fields.__paymentGatewayGenLogoSrc__ = function (data) {
					return Globals.genLogoSrc(data);
				};
				fields.preview.update();
			}
		},
		postApplyCallback: function (fields, data, elem) {
			Globals.updateLogoSrc(data);
		},
		postLoadCallback: function (data) {
			Globals.updateLogoSrc(data);
		}
	};

	ElementRegister.registerPaymentGateway({
		name: 'PayPal',
		id: 'paypal',
		pluginId: pluginId,
		priority: 1,
		pageUrl: 'https://paypal.com/',
		className: pluginId,

		keyFieldId: 'business',
		keyField2Id: 'demo',
		keyField3Id: 'clientId',
		keyField4Id: 'clientSecret',
		keyFieldDef: {
			type: 'VerticalLayout', children: [
				{
					type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: 'PayPal business account ' + __('Email')},
						{type: 'TextField', placeholder: __('Email'), id: 'key'},
					]
				},
				{
					type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Client ID')},
						{type: 'TextField', placeholder: __('Client ID'), id: 'key3'},
					]
				},
				{
					type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Client Secret')},
						{type: 'TextField', placeholder: __('Client Secret'), id: 'key4', password: true},
					]
				},
				{
					type: 'CheckBox',
					label: __('Test mode'),
					id: 'key2',
					css: {padding: 7, marginTop: 5, display: 'inline-block'},
					init: function () {
						this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
					}
				}
			]
		},
		titleFieldId: null,
		nameFieldId: 'itemName',
		priceFieldId: 'amount',
		currencyFieldId: 'currencyCode',
		globalVars: ['clientId', 'clientSecret', 'demo'],
		useStylesInStoreCart: true,
		settingsTabDef: Globals.getSettingsContentV2(),
		defaultStyles: Globals.getDefaultStyles(true),
		styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), pluginId, true),
		preOpenStylesCallback: Globals.preOpenCallback,
		postOpenStylesCallback: Globals.postOpenCallback,
		postApplyStylesCallback: Globals.postApplyCallback,
		postLoadStylesCallback: Globals.postLoadCallback,
		postLoadCallback: Globals.postLoadCallback,
		logos: Globals.getLogosList()
	});

	PluginWrapper.registerPlugin(pluginId, {
		name: 'Buy Now (PayPal)',
		element: {
			minSize: {width: 24, height: 24},
			defaultSize: {width: 160, height: 81}
		},
		properties: PluginWrapper.paymentGatewayStylePropertiesDef([
			{
				id: 'itemName', type: PayPalClientItemName,
				uiComponentOptions: function (data, opts) {
					opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Item Name')));
					return opts;
				},
				get: function (data) {
					return data.content.itemName;
				},
				set: function (value, data) {
					data.content.itemName = value;
				}
			},
			{
				id: 'shipping', type: PayPalShipping,
				get: function (data) {
					return data.content.shipping;
				},
				set: function (value, data) {
					data.content.shipping = value;
				}
			},
			{
				id: 'amount', type: PayPalPrice,
				get: function (data) {
					return data.content.amount;
				},
				validate: function (value) {
					if (/^[\d.,]+$/.test(value)) {
						return '';
					} else {
						return (__('Incorrect format'));
					}
				},
				set: function (value, data) {
					data.content.amount = value.replace(/,/, '.');
				}
			},
			{
				id: 'currencyCode', type: PayPalCurrency,
				get: function (data) {
					return data.content.currencyCode;
				},
				set: function (value, data) {
					data.content.currencyCode = value;
				}
			},
			{
				id: 'business', type: PayPalBusiness, dependencies: ['clientId', 'clientSecret'],
				uiComponentOptions: function (data, opts) {
					opts.visible = !data.content.clientId || !data.content.clientSecret;
					opts.validateText = (data.content.business || (data.content.clientId && data.content.clientSecret)) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Email address to receive payments')));
					return opts;
				},
				get: function (data) {
					return data.content.business;
				},
				set: function (value, data) {
					data.content.business = value;
				}
			},
			{
				id: 'clientId', type: PayPalClientId, helpText: __('Unique identificator from Paypal'),
				dependencies: ['business'],
				uiComponentOptions: function (data, opts) {
					opts.validateText = data.content.clientId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client ID')));
					return opts;
				},
				get: function (data) {
					return data.content.clientId;
				},
				set: function (value, data) {
					data.content.clientId = value;
				}
			},
			{
				id: 'clientSecret', type: PayPalClientSecret, helpText: __('Unique identificator from Paypal'),
				dependencies: ['business'],
				uiComponentOptions: function (data, opts) {
					opts.password = true;
					opts.validateText = data.content.clientSecret ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client Secret')));
					return opts;
				},
				get: function (data) {
					return data.content.clientSecret;
				},
				set: function (value, data) {
					data.content.clientSecret = value;
				}
			},
			{
				id: 'demo', type: PayPalDemo, helpText: __('For testing purpose without real payments'),
				moreInfo: function (data) {
					if (data.content.clientId && data.content.clientSecret) {
						Globals.getSettingsDialogV2().setVisible(true);
					} else {
						Globals.getSettingsDialog().setVisible(true);
					}
				},
				get: function (data) {
					return data.content.demo;
				},
				set: function (value, data) {
					data.content.demo = value;
				}
			},
		], Globals.getLogosList(), pluginId),
		propertyDialog: {
			noScroll: true,
			tabs: [
				{
					children: [
						{
							type: 'Label', text: __('Item Name'),
							helpText: __('Item name to be shown in paypal checkout window.')
						},
						{type: 'MultilangTextField', id: 'itemName'},
						{
							type: 'HorizontalLayout', css: {marginTop: 15}, children: [
								{
									type: 'VerticalLayout', children: [
										{type: 'Label', text: __('Price')},
										{
											type: 'TextField', id: 'amount', change: function () {
												this.setValue(this.getValue().replace(/,/, '.'));
											}
										}
									]
								},
								{
									type: 'VerticalLayout', children: [
										{type: 'Label', text: __('Shipping')},
										{type: 'TextField', id: 'shipping'}
									]
								},
								{
									type: 'VerticalLayout', children: [
										{type: 'Label', text: __('Currency')},
										{
											type: 'DropdownBox', id: 'currencyCode', options: [
												{id: '#USD', name: 'USD', value: 'USD'},
												{id: '#AUD', name: 'AUD', value: 'AUD'},
												{id: '#BRL', name: 'BRL', value: 'BRL'},
												{id: '#GBP', name: 'GBP', value: 'GBP'},
												{id: '#CAD', name: 'CAD', value: 'CAD'},
												{id: '#CZK', name: 'CZK', value: 'CZK'},
												{id: '#DKK', name: 'DKK', value: 'DKK'},
												{id: '#EUR', name: 'EUR', value: 'EUR'},
												{id: '#HKD', name: 'HKD', value: 'HKD'},
												{id: '#HUF', name: 'HUF', value: 'HUF'},
												{id: '#ILS', name: 'ILS', value: 'ILS'},
												{id: '#JPY', name: 'JPY', value: 'JPY'},
												{id: '#MYR', name: 'MYR', value: 'MYR'},
												{id: '#MXN', name: 'MXN', value: 'MXN'},
												{id: '#TWD', name: 'TWD', value: 'TWD'},
												{id: '#NZD', name: 'NZD', value: 'NZD'},
												{id: '#NOK', name: 'NOK', value: 'NOK'},
												{id: '#PHP', name: 'PHP', value: 'PHP'},
												{id: '#PLN', name: 'PLN', value: 'PLN'},
												{id: '#RUB', name: 'RUB', value: 'RUB'},
												{id: '#SGD', name: 'SGD', value: 'SGD'},
												{id: '#SEK', name: 'SEK', value: 'SEK'},
												{id: '#CHF', name: 'CHF', value: 'CHF'},
												{id: '#THB', name: 'THB', value: 'THB'}
											]
										}
									]
								}
							]
						},
						{
							type: 'Label', text: __('Email address to receive payments'),
							css: {marginTop: 15},
							helpText: __('Email registered to your PayPal account.'),
							uiComponentOptions: function (data, opts) {
								opts.validateText = data.content.business ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Email address to receive payments')));
								return opts;
							},
						},
						{type: 'TextField', id: 'business'},
						{
							type: 'VerticalLayout', css: {marginTop: 15}, children: [
								{
									type: 'CheckBox',
									id: 'demo',
									css: {display: 'inline-block'},
									label: __('Test mode'),
									init: function () {
										this.getElem().attr('title', __('For testing purpose without real payments'));
										this.getElem().tooltip({placement: 'right'});
									}
								}
							]
						}
					]
				},
				PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), pluginId)
			]
		},
		pluginScoped: {},

		openAction: function (fields, data, elem) {
			var itm;
			fields.business.setText(data.content.business);
			fields.clientId.setText(data.content.clientId);
			fields.clientSecret.setText(data.content.clientSecret);
			fields.itemName.setText(data.content.itemName);
			itm = fields.currencyCode.getItemById('#' + data.content.currencyCode);
			fields.currencyCode.selectItem(itm);
			fields.amount.setText(data.content.amount);
			fields.shipping.setText(data.content.shipping);
			fields.demo.setValue(data.content.demo);
			Globals.preOpenCallback(fields);
			PluginWrapper.paymentGatewayOpenAction(fields, data, elem);
			Globals.postOpenCallback(fields);
		},
		applyAction: function (fields, data, elem) {
			var itm;
			data.content.business = fields.business.getText();
			data.content.clientId = fields.clientId.getText();
			data.content.clientSecret = fields.clientSecret.getText();
			data.content.itemName = fields.itemName.getText();
			itm = fields.currencyCode.getSelectedItem();
			data.content.currencyCode = itm.getOriginal().value;
			data.content.amount = fields.amount.getText();
			data.content.shipping = fields.shipping.getText();
			data.content.demo = fields.demo.getValue();
			PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
			Globals.postApplyCallback(fields, data, elem);
		},
		loadAction: function (data) {
			data.content.__globalVars = ['demo'];
			if (!data.content.business) data.content.business = '';
			if (!data.content.clientId) data.content.clientId = '';
			if (!data.content.clientSecret) data.content.clientSecret = '';
			if (!data.content.itemName) data.content.itemName = '';
			if (!data.content.amount) data.content.amount = '1';
			if (!data.content.currencyCode) data.content.currencyCode = 'USD';
			if (!data.content.shipping) data.content.shipping = '';
			if (data.content.demo === undefined) data.content.demo = false;
			if (['buy-now', 'paypal-logo-1.png', 'paypal-logo-full-1.png', 'paypal-logo-full-2.png'].indexOf(data.content.logo) > -1) {
				data.content.logo = 'paypal_color.svg';
			}
			PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
			Globals.postLoadCallback(data);
		},
		switchLanguageAction: function (data, elem, langCode) {
			var language = wb_builder.getLanguageByCode(langCode);
			var locale = language ? language.locale : null;
			Globals.updateLogoSrc(data, locale);
			this.updateElement();
		},
		onDblClick: function () {
			var thisClass = this;
			setTimeout(function () {
				var component = thisClass.getPropertyComponent('business');
				if (component) component.focus();
			}, 50);
		}
	});
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"count_up","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/count_up","pluginUri":"plugins\/count_up","customConfiguration":null};
PluginWrapper._config.id = 'count_up';
PluginWrapper._config.baseUri = "plugins\/count_up";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/count_up\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_wb_count_up\"><\/div>\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar id = \"{{id}}_wb_count_up\";\n\t\tvar easingFn = function (t, b, c, d) {\n            return c * (-Math.pow(2, -10 * t \/ d) + 1) * 1024 \/ 1023 + b;\n        }\n\n        var useEasing = parseInt(\"{{content.useEasing}}\") || 0;\n\t\tvar fromValue = Math.max(\"{{content.fromValue}}\" * 1, 0);\n\t\tvar toValue = Math.max(\"{{content.toValue}}\" * 1, fromValue);\n\t\tif (fromValue < 0) fromValue = 0;\n\t\tif (toValue < fromValue) toValue = fromValue;\n\t\tvar duration = parseInt(\"{{content.duration}}\");\n\t\tif (duration <= 0) duration = 1;\n\t\tvar elem = document.getElementById(id);\n\n\t\telem.style.color = \"{{content.text.color}}\";\n\t\telem.style.fontSize = \"{{content.text.size}}px\";\n\t\telem.style.fontFamily = \"{{{content.text.font}}}\";\n\t\telem.style.textAlign = \"{{content.text.align}}\" || \"center\";\n\t\telem.style.fontWeight = (\"{{content.text.style.bold}}\" == \"true\" || \"{{content.text.style.bold}}\" == \"1\") ? \"bold\" : \"normal\";\n\t\telem.style.fontStyle = (\"{{content.text.style.italic}}\" == \"true\" || \"{{content.text.style.italic}}\" == \"1\") ? \"italic\" : \"normal\";\n\t\telem.style.textDecoration = (\"{{content.text.style.underline}}\" == \"true\" || \"{{content.text.style.underline}}\" == \"1\") ? \"underline\" : \"none\";\n\t\telem.style.letterSpacing = \"{{content.text.letterSpacing}}px\";\n\t\telem.style.width = \"100%\";\n\n\t\tvar nowValue = fromValue;\n\t\telem.innerText = nowValue;\n\t\tvar animFrame = null;\n\n\t\tvar startTime = null;\n\t\tvar start = function(timestamp) {\n            if (!startTime) { startTime = timestamp; }\n            const progress = timestamp - startTime;\n\n            if (useEasing) {\n                nowValue = easingFn(progress, fromValue, toValue - fromValue, duration * 1000);\n            } else {\n                nowValue = fromValue + ((toValue - fromValue) * (progress \/ duration \/ 1000));\n            }\n            nowValue = Math.round(nowValue);\n\n            if (nowValue >= toValue) {\n                nowValue = toValue;\n            }\n            elem.innerText = nowValue;\n\n            if (progress < duration * 1000) {\n                animFrame = requestAnimationFrame(start);\n            }\n\t\t};\n\n\t\tif ((typeof window.IntersectionObserver === 'function')) {\n\t\t\tvar observer = new IntersectionObserver(function(entries) {\n\t\t\t\tfor (var i = 0, c = entries.length; i < c; i++) {\n\t\t\t\t\tif (!entries[i].isIntersecting) continue;\n\t\t\t\t\tstart();\n                    animFrame = requestAnimationFrame(start)\n\t\t\t\t}\n\t\t\t}, {});\n\t\t\tobserver.observe(elem);\n\t\t} else {\n\t\t\tstart();\n\t\t}\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('count_up', {
	name: __('Count Up'),
	icon: 'fa fa-angle-double-up',
	element: {
		minSize: {
			width: 80,
			height: 20
		},
		defaultSize: {
			width: 100,
			height: 46
		},
		resizable: true,
		supportsFullWidth: false
	},
	properties: [
		{id: 'fromValue', type: 'CountUpFrom',
			get: function(data) { return data.content.fromValue; },
			set: function(value, data) { data.content.fromValue = value; }
		},
		{id: 'toValue', type: 'CountUpTo',
			get: function(data) { return data.content.toValue; },
			set: function(value, data) { data.content.toValue = value; }
		},
		{id: 'duration', type: 'CountUpDuration',
			get: function(data) { return data.content.duration; },
			set: function(value, data) { data.content.duration = value; }
		},
		{id: 'text', type: 'CountUpText',
			get: function(data) { return data.content.text; },
			set: function(value, data) { data.content.text = value; }
		},
	],
	propertyDialog: {
		noScroll: true,
		tabs: [{name: 'General', children: [
			{type: 'VerticalLayout', spacing: 15, children: [
				{type: 'FlowLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('From')},
						{type: 'SizeSelector', id: 'fromValue', min: 0}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('To')},
						{type: 'SizeSelector', id: 'toValue', min: 0},
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Duration')},
						{type: 'SliderControl', id: 'duration', min: 1, max: 6, unit: 's'},
					]}
				]},
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Text')},
					{type: 'FontSelector', id: 'text'}
				]}
			]}
		]}]
	},

	supportsAutoHeight: function() { return true; },
	openAction: function(fields, data, elem) {
		var o = data.content;
		fields.fromValue.setValue(o.fromValue);
		fields.toValue.setValue(o.toValue);
		fields.duration.setValue(o.duration);
		fields.text.setValue(o.text);
		// fields.useEasing(o.useEasing);
	},
	applyAction: function(fields, data, elem) {
		var o = data.content;
		o.fromValue = Math.max(Math.round(fields.fromValue.getValue()), 0);
		o.toValue = Math.max(Math.round(fields.toValue.getValue()), o.fromValue);
		o.duration = Math.max(fields.duration.getValue(), 0);
		o.text = fields.text.getValue();
		// o.useEasing = fields.useEasing.getValue();
		o.useEasing = 1;
	},
	loadAction: function(data) {
		var o = data.content;
		o.fromValue = o.fromValue || 0;
		o.toValue = o.toValue || 41;
		if (o.fromValue < 0) o.fromValue = 0;
		if (o.toValue < o.fromValue) o.toValue = o.fromValue;
		o.duration = o.duration || 2;
		o.useEasing = o.useEasing || 1;
		o.text = o.text || {
			color: '#333',
			size: 36,
			align: 'center',
			style: {bold: true}
		};
	},
	getUsedFonts: function(data) {
		var items = [];
		if (data.content.text) items.push(data.content.text.font);
		return items;
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"pagseguro","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/pagseguro","pluginUri":"plugins\/pagseguro","customConfiguration":null};
PluginWrapper._config.id = 'pagseguro';
PluginWrapper._config.baseUri = "plugins\/pagseguro";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/pagseguro\/main.png";
PluginWrapper._config.template = "<form method=\"post\"\r\n\t  data-gateway-id=\"Pagseguro\"{{^content.store}} target=\"_blank\"{{\/content.store}}\r\n      style=\"width: 100%; height: 100%;\">\r\n\t<input name=\"currency\" type=\"hidden\" value=\"{{content.currency}}\" \/>\r\n\t<input name=\"itemDescription1\" type=\"hidden\" value=\"{{content.itemdescription}}\" \/>\r\n\t<input name=\"itemQuantity1\" type=\"hidden\" value=\"{{#content.itemquantity}}{{content.itemquantity}}{{\/content.itemquantity}}{{^content.itemquantity}}1{{\/content.itemquantity}}\" \/>\r\n\t<input name=\"itemAmount1\" type=\"hidden\" value=\"{{content.itemamount}}\" data-fixed-decimal=\"2\" \/>\r\n\t{{#content.store}}\r\n\t<input name=\"itemId1\" type=\"hidden\" value=\"{transactionId}\" \/>\r\n\r\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\r\n\t{{\/content.store}}\r\n\t{{^content.store}}\r\n\t{{{requireService}}}\r\n\t{{\/content.store}}\r\n\t{{{content.paymentGatewayButton}}}\r\n<\/form>\r\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/pagseguro/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {	
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'pagseguro_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: '',
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'pagseguro_color.svg', name: 'coloured'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'PagSeguro',
	id: 'pagseguro',
	pageUrl: 'https://pagseguro.uol.com.br/',
	keyField: __('Email'),
	keyFieldId: 'email',
	keyField2: __('Token'),
	keyField2Id: 'token',
	keyField3: __('Sandbox'),
	keyField3Id: 'sandbox',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6, 6, 12, 12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Email')},
			{type: 'TextField', placeholder: __('Email'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Token')},
			{type: 'TextField', placeholder: __('Token'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	nameFieldId: 'itemdescription',
	priceFieldId: 'itemamount',
	currencyFieldId: 'currency',
	globalVars: ['email', 'token', 'sandbox'],
	priceFixedDecimal: 2,
	defaultStyles: Globals.getDefaultStyles(true),
	useStylesInStoreCart: true,
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'pagseguro', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('pagseguro', {
	name: 'PagSeguro',
	element: {
		minSize: {width: 120, height: 55},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'email', type: 'PagseguroEmail', helpText:__("Email registered to your PagSeguro account."),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.email ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('E-mail')));
				return opts;
			},
			get: function(data) { return data.content.email; },
			set: function(value, data) {
				data.content.email = value;
			}
		},
		{id: 'token', type: 'PagseguroToken', helpText:__("Token given from your PagSeguro account."),
			get: function(data) { return data.content.token; },
			set: function(value, data) {
				data.content.token = value;
			}
		},
		{id: 'sandbox', type: 'PagseguroSandbox', helpText:__("For testing purpose without real payments"),
			get: function(data) { return data.content.sandbox; },
			set: function(value, data) {
				data.content.sandbox = value;
			}
		},
		{id: 'itemdescription', type: 'PagseguroItemDescription',  helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.itemdescription; },
			set: function(value, data) {
				data.content.itemdescription = value;
			}
		},
		{id: 'itemamount', type: 'PagseguroItemAmount', helpText: __("Amount to be transferred") + ', ' + __('BRL'),
			get: function(data) { return data.content.itemamount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.itemamount = value;
			}
		},
		{id: 'itemquantity', type: 'PagseguroItemQuantity',
			get: function(data) { return data.content.itemquantity; },
			set: function(value, data) {
				data.content.itemquantity = value;
			}
		},
	], Globals.getLogosList(), 'pagseguro'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Email'), helpText:__("Email registered to your PagSeguro account."), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.email ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('E-mail')));
								return opts;
							}},
							{type: 'TextField', id: 'email'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Token'), helpText:__("Token given from your PagSeguro account.")},
							{type: 'TextField', id: 'token'}
						]}
					]},
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Sandbox'), helpText:__("For testing purpose without real payments")},
							{type: 'CheckBox', id: 'sandbox'}
						]}
					]},
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + __('BRL')},
							{type: 'TextField', id: 'itemamount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Quantity')},
							{type: 'TextField', id: 'itemquantity'}
						]}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'itemdescription'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'pagseguro', true)
		]
	},
	openAction: function(fields, data, elem) {
		fields.email.setText(data.content.email);
		fields.token.setText(data.content.token);
		fields.sandbox.setText(data.content.sandbox);
		fields.itemdescription.setText(data.content.itemdescription);
		fields.itemamount.setText(data.content.itemamount);
		fields.itemquantity.setText(data.content.itemquantity);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.email = fields.email.getText();
		data.content.token = fields.token.getText();
		data.content.sandbox = fields.sandbox.getValue();
		data.content.itemdescription = fields.itemdescription.getText();
		data.content.itemamount = fields.itemamount.getText();
		data.content.itemquantity = fields.itemquantity.getText();
		data.content.currency = fields.currency.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['email', 'token'];
		if (!data.content.email) data.content.email = '';
		if (!data.content.token) data.content.token = '';
		if (!data.content.sandbox) data.content.sandbox = false;
		if (!data.content.itemdescription) data.content.itemdescription = 'Donate';
		if (!data.content.itemamount) data.content.itemamount = '1';
		if (!data.content.itemquantity) data.content.itemquantity = 1;
		if (!data.content.currency) data.content.currency = 'BRL';
		if (['logo_old.gif', 'logo1.png', 'logo2.png', 'pagseguro.gif'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'pagseguro_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('email');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"webpay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/webpay","pluginUri":"plugins\/webpay","customConfiguration":null};
PluginWrapper._config.id = 'webpay';
PluginWrapper._config.baseUri = "plugins\/webpay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/webpay\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Webpay\" action=\"https:\/\/{{#content.demo}}sandbox{{\/content.demo}}{{^content.demo}}payment{{\/content.demo}}.webpay.by\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} class=\"webpay\" style=\"width: 100%; height: 100%;\">\n    {{^content.store}}\n\t<input type=\"hidden\" name=\"*scart\" \/>\n    <input type=\"hidden\" name=\"wsb_version\" value=\"2\" \/>\n    <input type=\"hidden\" name=\"wsb_storeid\" value=\"{{content.wsb_storeid}}\" \/>\n    <input type=\"hidden\" name=\"wsb_order_num\" value=\"{{content.wsb_order_num}}\" \/>\n    <input type=\"hidden\" name=\"wsb_test\" value=\"0\" \/>\n    <input type=\"hidden\" name=\"wsb_currency_id\" value=\"{{content.wsb_currency_id}}\" \/>\n    <input type=\"hidden\" name=\"wsb_seed\" value=\"{{content.wsb_seed}}\" \/>\n    <input type=\"hidden\" name=\"wsb_invoice_item_name[0]\" value=\"{{content.wsb_invoice_item_name}}\" \/>\n    <input type=\"hidden\" name=\"wsb_invoice_item_quantity[0]\" value=\"1\" \/>\n    <input type=\"hidden\" name=\"wsb_invoice_item_price[0]\" value=\"{{content.wsb_invoice_item_price}}\" \/>\n    <input type=\"hidden\" name=\"wsb_total\" value=\"{{content.wsb_total}}\" \/>\n    <input type=\"hidden\" name=\"wsb_tax\" value=\"{{content.wsb_tax}}\" \/>\n    <input type=\"hidden\" name=\"wsb_shipping_name\" value=\"{{content.wsb_shipping_name}}\" \/>\n    <input type=\"hidden\" name=\"wsb_shipping_price\" value=\"{{content.wsb_shipping_price}}\" \/>\n    <input type=\"hidden\" name=\"wsb_store\" value=\"{{content.wsb_store}}\" \/>\n    <input type=\"submit\" class=\"btn btn-info\" value=\"{{content.label}}\"\n           title=\"{{content.label}}\"\n           style=\"width: 100%; height: 100%;\n           {{#content.border}}border: {{content.border.style}} {{content.border.weight}}px {{content.border.color}};{{\/content.border}}\n           {{#content.background}}background: {{content.background}};{{\/content.background}}\n           padding: 6px 10px;\n           {{#content.fontColor}}color: {{content.fontColor}};{{\/content.fontColor}}\n           {{#content.fontSize}}font-size: {{content.fontSize}}px;{{\/content.fontSize}}\n           {{#content.fontFamily}}font-family: {{content.fontFamily}};{{\/content.fontFamily}}\"\n    \/>\n    {{\/content.store}}\n\t{{#content.demo}}\n\t<input type=\"hidden\" name=\"wsb_test\" value=\"1\" \/>\n\t{{\/content.demo}}\n    {{#content.store}}\n    <input type=\"hidden\" name=\"total\" value=\"{{content.wsb_invoice_item_price}}\" \/>\n    <input type=\"hidden\" name=\"currency_id\" value=\"{{content.wsb_currency_id}}\" \/>\n    <input type=\"hidden\" name=\"order_num\" value=\"{transactionId}\" \/>\n    <input type=\"hidden\" name=\"return_url\" value=\"{returnUrl}\" \/>\n    <input type=\"hidden\" name=\"cancel_return_url\" value=\"{cancelUrl}\" \/>\n    <input type=\"hidden\" name=\"notify_url\" value=\"{callbackUrl}\" \/>\n    <input type=\"hidden\" name=\"store\" value=\"Store\" \/>\n    <input type=\"submit\" class=\"btn btn-info\" value=\"{{content.label}}\" title=\"{{content.label}}\"\n\t\t   style=\"width: 160px;\n           height: 40px;\n           border: solid 2px #fbe116;\n           background: #fbe116;\n           padding: 6px 10px;\n           color: #000;\n           font-size: 15px;\n           font-family: Trebuchet MS,sans-serif;\" \/>\n    {{\/content.store}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
	name: 'Webpay',
	id: 'webpay',
	pageUrl: 'https://webpay.by/',
	keyField: __('Store identifier'),
	keyFieldId: 'wsb_storeid',
	keyField2: __('Secret Key'),
	keyField2Id: 'secret_key',
	keyField3: {type: 'CheckBox', label: __('Test mode'), css: {padding: 7}},
	keyField3Id: 'demo',
	titleFieldId: 'label',
	nameFieldId: 'wsb_invoice_item_name',
	priceFieldId: 'wsb_invoice_item_price',
	currencyFieldId: 'wsb_currency_id',
	globalVars: ['wsb_storeid', 'secret_key']
});
PluginWrapper.registerPlugin('webpay', {
	name: 'Webpay',
	element: {
		minSize: {width: 100, height: 30},
		defaultSize: {width: 160, height: 40},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [6, 6], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Store identifier'), helpText: __('This identifier is created during registration in WebPay and is sent via email')},
						{type: 'TextField', id: 'wsb_storeid'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key'), helpText: __('The value of the Secret Key field in your billing account settings')},
						{type: 'TextField', id: 'secret_key', password: true}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'wsb_invoice_item_name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'wsb_invoice_item_price'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'wsb_currency_id', options: [
							{id: '#BYN', name: 'BYN', value: 'BYN'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'},
							{id: '#RUB', name: 'RUB', value: 'RUB'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [4, 4, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Delivery method')},
							{type: 'TextField', id: 'wsb_shipping_name'}
						]}
					]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Shipping'), helpText: __('The value of this field is the amount of delivery added to the total order')},
							{type: 'TextField', id: 'wsb_shipping_price'}
						]}
					]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Tax amount'), helpText: __('The value of this field is the tax amount added to the total order amount.')},
							{type: 'TextField', id: 'wsb_tax'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Button Label'), helpText: __('Label name on submit button')},
							{type: 'TextField', id: 'label'}
						]}
					]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Store name'), helpText: __('The store name which will be displayed on the payment form. Maximum field length is 64 characters.')},
							{type: 'TextField', id: 'wsb_store'}
						]}
					]}
				]},
				{type: 'FlowLayout', spacing: 15, css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Border')},
						{type: 'BorderSelector', id: 'border'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Background')},
						{type: 'ColorSelector', id: 'background'}
					]},
					{type: 'VerticalLayout', css: {width: 150}, children: [
						{type: 'Label', text: __('Font')},
						{type: 'FontFamilySelector', id: 'fontFamily', noFixedWidth: true}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Size')},
						{type: 'SizeSelector', id: 'fontSize'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Color')},
						{type: 'ColorSelector', id: 'fontColor', noTransparent: true}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]}
		]
	},
	openAction: function (fields, data, elem) {
		fields.label.setText(data.content.label);
		fields.secret_key.setText(data.content.secret_key);
		fields.wsb_storeid.setText(data.content.wsb_storeid);
		fields.wsb_store.setText(data.content.wsb_store);
		fields.wsb_invoice_item_name.setText(data.content.wsb_invoice_item_name);
		fields.wsb_invoice_item_price.setText(data.content.wsb_invoice_item_price);
		fields.wsb_tax.setText(data.content.wsb_tax);
		fields.wsb_shipping_name.setText(data.content.wsb_shipping_name);
		fields.wsb_shipping_price.setText(data.content.wsb_shipping_price);
		var itm;
		itm = fields.wsb_currency_id.getItemById('#' + data.content.wsb_currency_id);
		fields.wsb_currency_id.selectItem(itm);
		fields.border.setValue(data.content.border);
		fields.background.setValue(data.content.background);
		fields.fontFamily.setValue(data.content.fontFamily);
		fields.fontSize.setValue(data.content.fontSize);
		fields.fontColor.setValue(data.content.fontColor);
		fields.demo.setValue(data.content.demo);
	},
	applyAction: function (fields, data, elem) {
		data.content.label = fields.label.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.wsb_storeid = fields.wsb_storeid.getText();
		data.content.wsb_store = fields.wsb_store.getText();
		data.content.wsb_invoice_item_name = fields.wsb_invoice_item_name.getText();
		data.content.wsb_invoice_item_price = fields.wsb_invoice_item_price.getText();
		data.content.wsb_tax = fields.wsb_tax.getText();
		data.content.wsb_shipping_name = fields.wsb_shipping_name.getText();
		data.content.wsb_shipping_price = fields.wsb_shipping_price.getText();
		data.content.wsb_total = parseInt(data.content.wsb_invoice_item_price) + parseInt(data.content.wsb_tax) + parseInt(data.content.wsb_shipping_price);
		var itm = fields.wsb_currency_id.getSelectedItem();
		data.content.wsb_currency_id = itm.getOriginal().value;
		data.content.border = fields.border.getValue();
		data.content.background = fields.background.getValue();
		data.content.fontFamily = fields.fontFamily.getValue();
		data.content.fontSize = fields.fontSize.getValue();
		data.content.fontColor = fields.fontColor.getValue();
		data.content.demo = fields.demo.getValue();
		data.content.borderCss = this.updateBorderCss(data);
	},
	updateBorderCss: function(data) {
		var borderCss = '';
		var border = data.content.border;
		if (border.css !== undefined) {
			if (typeof border.css === 'string') {
				borderCss = border.css;
			} else {
				for (var i in border.css) {
					borderCss += i + ': ' + border.css[i] + ';';
				}
			}
		} else {
			borderCss = 'border: ' + border.weight + 'px ' + border.style + ' ' + border.color + ';';
		}
		return borderCss;
	},
	loadAction: function (data) {
		if (!data.content.label) data.content.label = 'Pay via WebPay';
		if (!data.content.border) data.content.border = {color: '#fbe116', style: 'solid', weight: 2};
		if (!data.content.background) data.content.background = '#fbe116';
		if (!data.content.fontFamily) data.content.fontFamily = 'Trebuchet MS,sans-serif';
		if (!data.content.fontSize) data.content.fontSize = '15';
		if (!data.content.fontColor) data.content.fontColor = '#000';
		if (!data.content.secret_key) data.content.secret_key = '123456789';
		if (!data.content.wsb_storeid) data.content.wsb_storeid = '123456789';
		if (!data.content.wsb_store) data.content.wsb_store = 'Store name';
		if (!data.content.wsb_currency_id) data.content.wsb_currency_id = 'BYN';
		if (!data.content.wsb_seed) data.content.wsb_seed = Date.now();
		if (!data.content.wsb_invoice_item_name) data.content.wsb_invoice_item_name = 'Product 1';
		if (!data.content.wsb_invoice_item_price) data.content.wsb_invoice_item_price = '10';
		if (!data.content.wsb_total) data.content.wsb_total = '10';
		if (!data.content.wsb_tax) data.content.wsb_tax = '0';
		if (!data.content.wsb_shipping_name) data.content.wsb_shipping_name = 'Courier delivery';
		if (!data.content.wsb_shipping_price) data.content.wsb_shipping_price = '0';
		if (data.content.demo === undefined) data.content.demo = false;
		data.content.borderCss = this.updateBorderCss(data);
	},
	onDblClick: function() {
		this.openProperties();
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"google_calendar","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/google_calendar","pluginUri":"plugins\/google_calendar","customConfiguration":null};
PluginWrapper._config.id = 'google_calendar';
PluginWrapper._config.baseUri = "plugins\/google_calendar";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/google_calendar\/main.png";
PluginWrapper._config.template = "<iframe src=\"https:\/\/calendar.google.com\/calendar\/embed?src={{content.finalGroupId}}&title={{content.finalCalendarName}}&mode={{content.mode}}&ctz={{content.timezone}}&bgcolor=%23{{content.color}}&wkst={{content.weekday}}&hl={{content.language}}{{content.check1}}{{content.check2}}{{content.check3}}{{content.check4}}{{content.check5}}{{content.check6}}{{content.check7}}\" style=\"{{content.border_style}} \" width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"no\"><\/iframe>\n\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('google_calendar', {
    name: __('Calendar'),
	icon: 'ico-pl-google_calendar',
    element: {
        minSize: {width: 100, height: 100},
        defaultSize: {width: 800, height: 600},
        resizable: true
    },
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [7, 5], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Google calendar ID'),
							helpText: __('To find calendar ID, go to calendar settings'),
							uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Google calendar ID')));
								return opts;
							}
						},
						{type: 'TextField', id: 'groupId', placeholder: 'uk__en_gb@holiday.calendar.google.com'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Calendar name')},
						{type: 'TextField', id: 'calendar_name', placeholder: 'Calendar name'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Language')},
						{type: 'DropdownBox', id: 'language', options: [
							{id: '', name: 'Default'},
							{id: 'id', name: 'Bahasa Indonesia'},
							{id: 'ca', name: 'Catal'},
							{id: 'cs', name: 'etina'},
							{id: 'da', name: 'Dansk'},
							{id: 'de', name: 'Deutsch'},
							{id: 'en_GB', name: 'English (UK)'},
							{id: 'en', name: 'English (US)'},
							{id: 'es', name: 'Espaol'},
							{id: 'es_419', name: 'Espaol (Latinoamrica)'},
							{id: 'fil', name: 'Filipino'},
							{id: 'fr', name: 'Franais'},
							{id: 'hr', name: 'Hrvatski'},
							{id: 'it', name: 'Italiano'},
							{id: 'lv', name: 'Latvieu'},
							{id: 'lt', name: 'Lietuvi'},
							{id: 'hu', name: 'Magyar'},
							{id: 'nl', name: 'Nederlands'},
							{id: 'no', name: 'Norsk (bokml)'},
							{id: 'pl', name: 'Polski'},
							{id: 'pt_BR', name: 'Portugus (Brasil)'},
							{id: 'pt_PT', name: 'Portugus (Portugal)'},
							{id: 'ro', name: 'Romn'},
							{id: 'sk', name: 'Slovenina'},
							{id: 'sl', name: 'Slovenina'},
							{id: 'fi', name: 'Suomi'},
							{id: 'sv', name: 'Svenska'},
							{id: 'tr', name: 'Trke'},
							{id: 'vi', name: 'Ting Vit'},
							{id: 'el', name: ''},
							{id: 'ru', name: ''},
							{id: 'sr', name: ''},
							{id: 'uk', name: ''},
							{id: 'bg', name: ''},
							{id: 'iw', name: ''},
							{id: 'ar', name: ''},
							{id: 'fa', name: ''},
							{id: 'hi', name: ''},
							{id: 'th', name: ''},
							{id: 'zh_TW', name: ''},
							{id: 'zh_CN', name: ''},
							{id: 'ja', name: ''},
							{id: 'ko', name: ''}
						]}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Time zone')},
						{type: 'DropdownBox', id: 'timezone', options: [
							{id: '', name: 'Default'},
							{id: 'Pacific/Niue', name: '(GMT-11:00) Niue'},
							{id: 'Pacific/Pago_Pago', name: '(GMT-11:00) Pago Pago'},
							{id: 'Pacific/Honolulu', name: '(GMT-10:00) Honolulu'},
							{id: 'Pacific/Rarotonga', name: '(GMT-10:00) Rarotonga'},
							{id: 'Pacific/Tahiti', name: '(GMT-10:00) Tahiti'},
							{id: 'Pacific/Marquesas', name: '(GMT-09:30) Marquesas'},
							{id: 'America/Anchorage', name: '(GMT-09:00) Anchorage'},
							{id: 'Pacific/Gambier', name: '(GMT-09:00) Gambier'},
							{id: 'America/Los_Angeles', name: '(GMT-08:00) Los Angeles'},
							{id: 'America/Tijuana', name: '(GMT-08:00) Tijuana'},
							{id: 'America/Vancouver', name: '(GMT-08:00) Vancouver'},
							{id: 'America/Whitehorse', name: '(GMT-08:00) Whitehorse'},
							{id: 'Pacific/Pitcairn', name: '(GMT-08:00) Pitcairn'},
							{id: 'America/Dawson_Creek', name: '(GMT-07:00) Dawson Creek'},
							{id: 'America/Denver', name: '(GMT-07:00) Denver'},
							{id: 'America/Edmonton', name: '(GMT-07:00) Edmonton'},
							{id: 'America/Hermosillo', name: '(GMT-07:00) Hermosillo'},
							{id: 'America/Mazatlan', name: '(GMT-07:00) Mazatlan'},
							{id: 'America/Phoenix', name: '(GMT-07:00) Phoenix'},
							{id: 'America/Yellowknife', name: '(GMT-07:00) Yellowknife'},
							{id: 'America/Belize', name: '(GMT-06:00) Belize'},
							{id: 'America/Chicago', name: '(GMT-06:00) Chicago'},
							{id: 'America/Costa_Rica', name: '(GMT-06:00) Costa Rica'},
							{id: 'America/El_Salvador', name: '(GMT-06:00) El Salvador'},
							{id: 'America/Guatemala', name: '(GMT-06:00) Guatemala'},
							{id: 'America/Managua', name: '(GMT-06:00) Managua'},
							{id: 'America/Mexico_City', name: '(GMT-06:00) Mexico City'},
							{id: 'America/Regina', name: '(GMT-06:00) Regina'},
							{id: 'America/Tegucigalpa', name: '(GMT-06:00)Tegucigalpa'},
							{id: 'America/Winnipeg', name: '(GMT-06:00) Winnipeg'},
							{id: 'Pacific/Galapagos', name: '(GMT-06:00) Galapagos'},
							{id: 'America/Bogota', name: '(GMT-05:00) Bogota'},
							{id: 'America/Cancun', name: '(GMT-05:00) Cancun'},
							{id: 'America/Cayman', name: '(GMT-05:00) Cayman'},
							{id: 'America/Guayaquil', name: '(GMT-05:00) Guayaquil'},
							{id: 'America/Havana', name: '(GMT-05:00) Havana'},
							{id: 'America/Iqaluit', name: '(GMT-05:00) Iqaluit'},
							{id: 'America/Jamaica', name: '(GMT-05:00) Jamaica'},
							{id: 'America/Lima', name: '(GMT-05:00) Lima'},
							{id: 'America/Nassau', name: '(GMT-05:00) Nassau'},
							{id: 'America/New_York', name: '(GMT-05:00) New York'},
							{id: 'America/Panama', name: '(GMT-05:00) Panama'},
							{id: 'America/Port-au-Prince', name: '(GMT-05:00) Port au Prince'},
							{id: 'America/Rio_Branco', name: '(GMT-05:00) Rio Branco'},
							{id: 'America/Toronto', name: '(GMT-05:00) Toronto'},
							{id: 'Pacific/Easter', name: '(GMT-05:00) Easter'},
							{id: 'America/Caracas', name: '(GMT-04:30) Caracas'},
							{id: 'America/Asuncion', name: '(GMT-04:00) Asuncion'},
							{id: 'America/Barbados', name: '(GMT-04:00) Barbados'},
							{id: 'America/Boa_Vista', name: '(GMT-04:00) Boa Vista'},
							{id: 'America/Campo_Grande', name: '(GMT-04:00) Campo Grande'},
							{id: 'America/Cuiaba', name: '(GMT-04:00) Cuiaba'},
							{id: 'America/Curacao', name: '(GMT-04:00) Curacao'},
							{id: 'America/Grand_Turk', name: '(GMT-04:00) Grand Turk'},
							{id: 'America/Guyana', name: '(GMT-04:00) Guyana'},
							{id: 'America/Halifax', name: '(GMT-04:00) Halifax'},
							{id: 'America/La_Paz', name: '(GMT-04:00) La Paz'},
							{id: 'America/Manaus', name: '(GMT-04:00) Manaus'},
							{id: 'America/Martinique', name: '(GMT-04:00) Martinique'},
							{id: 'America/Port_of_Spain', name: '(GMT-04:00) Port of Spain'},
							{id: 'America/Porto_Velho', name: '(GMT-04:00) Porto Velho'},
							{id: 'America/Puerto_Rico', name: '(GMT-04:00) Puerto Rico'},
							{id: 'America/Santo_Domingo', name: '(GMT-04:00) Santo Domingo'},
							{id: 'America/Thule', name: '(GMT-04:00) Thule'},
							{id: 'Atlantic/Bermuda', name: '(GMT-04:00) Bermuda'},
							{id: 'America/St_Johns', name: '(GMT-03:30) St Johns'},
							{id: 'America/Araguaina', name: '(GMT-03:00) Araguaina'},
							{id: 'America/Argentina/Buenos_Aires', name: '(GMT-03:00) Buenos Aires'},
							{id: 'America/Bahia', name: '(GMT-03:00) Bahia'},
							{id: 'America/Belem', name: '(GMT-03:00) Belem'},
							{id: 'America/Cayenne', name: '(GMT-03:00) Cayenne'},
							{id: 'America/Fortaleza', name: '(GMT-03:00) Fortaleza'},
							{id: 'America/Godthab', name: '(GMT-03:00) Godthab'},
							{id: 'America/Maceio', name: '(GMT-03:00) Maceio'},
							{id: 'America/Miquelon', name: '(GMT-03:00) Miquelon'},
							{id: 'America/Montevideo', name: '(GMT-03:00) Montevideo'},
							{id: 'America/Paramaribo', name: '(GMT-03:00) Paramaribo'},
							{id: 'America/Recife', name: '(GMT-03:00) Recife'},
							{id: 'America/Santiago', name: '(GMT-03:00) Santiago'},
							{id: 'America/Sao_Paulo', name: '(GMT-03:00) Sao Paulo'},
							{id: 'Antarctica/Palmer', name: '(GMT-03:00) Palmer'},
							{id: 'Antarctica/Rothera', name: '(GMT-03:00) Rothera'},
							{id: 'Atlantic/Stanley', name: '(GMT-03:00) Stanley'},
							{id: 'America/Noronha', name: '(GMT-02:00) Noronha'},
							{id: 'Atlantic/South_Georgia', name: '(GMT-02:00) South Georgia'},
							{id: 'America/Scoresbysund', name: '(GMT-01:00) Scoresbysund'},
							{id: 'Atlantic/Azores', name: '(GMT-01:00) Azores'},
							{id: 'Atlantic/Cape_Verde', name: '(GMT-01:00) Cape Verde'},
							{id: 'Africa/Abidjan', name: '(GMT+00:00) Abidjan'},
							{id: 'Africa/Accra', name: '(GMT+00:00) Accra'},
							{id: 'Africa/Bissau', name: '(GMT+00:00) Bissau'},
							{id: 'Africa/Casablanca', name: '(GMT+00:00) Casablanca'},
							{id: 'Africa/El_Aaiun', name: '(GMT+00:00) El Aaiun'},
							{id: 'Africa/Monrovia', name: '(GMT+00:00) Monrovia'},
							{id: 'America/Danmarkshavn', name: '(GMT+00:00) Danmarkshavn'},
							{id: 'Atlantic/Canary', name: '(GMT+00:00) Canary'},
							{id: 'Atlantic/Faroe', name: '(GMT+00:00) Faroe'},
							{id: 'Atlantic/Reykjavik', name: '(GMT+00:00) Reykjavik'},
							{id: 'Etc/GMT', name: '(GMT+00:00) GMT'},
							{id: 'Europe/Dublin', name: '(GMT+00:00) Dublin'},
							{id: 'Europe/Lisbon', name: '(GMT+00:00) Lisbon'},
							{id: 'Europe/London', name: '(GMT+00:00) London'},
							{id: 'Africa/Algiers', name: '(GMT+01:00) Algiers'},
							{id: 'Africa/Ceuta', name: '(GMT+01:00) Ceuta'},
							{id: 'Africa/Lagos', name: '(GMT+01:00) Lagos'},
							{id: 'Africa/Ndjamena', name: '(GMT+01:00) Ndjamena'},
							{id: 'Africa/Tunis', name: '(GMT+01:00) Tunis'},
							{id: 'Africa/Windhoek', name: '(GMT+01:00) Windhoek'},
							{id: 'Europe/Amsterdam', name: '(GMT+01:00) Amsterdam'},
							{id: 'Europe/Andorra', name: '(GMT+01:00) Andorra'},
							{id: 'Europe/Belgrade', name: '(GMT+01:00) Belgrade'},
							{id: 'Europe/Berlin', name: '(GMT+01:00) Berlin'},
							{id: 'Europe/Brussels', name: '(GMT+01:00) Brussels'},
							{id: 'Europe/Budapest', name: '(GMT+01:00) Budapest'},
							{id: 'Europe/Copenhagen', name: '(GMT+01:00) Copenhagen'},
							{id: 'Europe/Gibraltar', name: '(GMT+01:00) Gibraltar'},
							{id: 'Europe/Luxembourg', name: '(GMT+01:00) Luxembourg'},
							{id: 'Europe/Madrid', name: '(GMT+01:00) Madrid'},
							{id: 'Europe/Malta', name: '(GMT+01:00) Malta'},
							{id: 'Europe/Monaco', name: '(GMT+01:00) Monaco'},
							{id: 'Europe/Oslo', name: '(GMT+01:00) Oslo'},
							{id: 'Europe/Paris', name: '(GMT+01:00) Paris'},
							{id: 'Europe/Prague', name: '(GMT+01:00) Prague'},
							{id: 'Europe/Rome', name: '(GMT+01:00) Rome'},
							{id: 'Europe/Stockholm', name: '(GMT+01:00) Stockholm'},
							{id: 'Europe/Tirane', name: '(GMT+01:00) Tirane'},
							{id: 'Europe/Vienna', name: '(GMT+01:00) Vienna'},
							{id: 'Europe/Warsaw', name: '(GMT+01:00) Warsaw'},
							{id: 'Europe/Zurich', name: '(GMT+01:00) Zurich'},
							{id: 'Africa/Cairo', name: '(GMT+02:00) Cairo'},
							{id: 'Africa/Johannesburg', name: '(GMT+02:00) Johannesburg'},
							{id: 'Africa/Maputo', name: '(GMT+02:00) Maputo'},
							{id: 'Africa/Tripoli', name: '(GMT+02:00) Tripoli'},
							{id: 'Asia/Amman', name: '(GMT+02:00) Amman'},
							{id: 'Asia/Beirut', name: '(GMT+02:00) Beirut'},
							{id: 'Asia/Damascus', name: '(GMT+02:00) Damascus'},
							{id: 'Asia/Gaza', name: '(GMT+02:00) Gaza'},
							{id: 'Asia/Jerusalem', name: '(GMT+02:00) Jerusalem'},
							{id: 'Asia/Nicosia', name: '(GMT+02:00) Nicosia'},
							{id: 'Europe/Athens', name: '(GMT+02:00) Athens'},
							{id: 'Europe/Bucharest', name: '(GMT+02:00) Bucharest'},
							{id: 'Europe/Chisinau', name: '(GMT+02:00) Chisinau'},
							{id: 'Europe/Helsinki', name: '(GMT+02:00) Helsinki'},
							{id: 'Europe/Istanbul', name: '(GMT+02:00) Istanbul'},
							{id: 'Europe/Kaliningrad', name: '(GMT+02:00) Kaliningrad'},
							{id: 'Europe/Kiev', name: '(GMT+02:00) Kiev'},
							{id: 'Europe/Riga', name: '(GMT+02:00) Riga'},
							{id: 'Europe/Sofia', name: '(GMT+02:00) Sofia'},
							{id: 'Europe/Tallinn', name: '(GMT+02:00) Tallinn'},
							{id: 'Europe/Vilnius', name: '(GMT+02:00) Vilnius'},
							{id: 'Africa/Khartoum', name: '(GMT+03:00) Khartoum'},
							{id: 'Africa/Nairobi', name: '(GMT+03:00) Nairobi'},
							{id: 'Antarctica/Syowa', name: '(GMT+03:00) Syowa'},
							{id: 'Asia/Baghdad', name: '(GMT+03:00) Baghdad'},
							{id: 'Asia/Qatar', name: '(GMT+03:00) Qatar'},
							{id: 'Asia/Riyadh', name: '(GMT+03:00) Riyadh'},
							{id: 'Europe/Minsk', name: '(GMT+03:00) Minsk'},
							{id: 'Europe/Moscow', name: '(GMT+03:00) Moscow'},
							{id: 'Asia/Tehran', name: '(GMT+03:30) Tehran'},
							{id: 'Asia/Baku', name: '(GMT+04:00) Baku'},
							{id: 'Asia/Dubai', name: '(GMT+04:00) Dubai'},
							{id: 'Asia/Tbilisi', name: '(GMT+04:00) Tbilisi'},
							{id: 'Asia/Yerevan', name: '(GMT+04:00) Yerevan'},
							{id: 'Europe/Samara', name: '(GMT+04:00) Samara'},
							{id: 'Indian/Mahe', name: '(GMT+04:00) Mahe'},
							{id: 'Indian/Mauritius', name: '(GMT+04:00) Mauritius'},
							{id: 'Indian/Reunion', name: '(GMT+04:00) Reunion'},
							{id: 'Asia/Kabul', name: '(GMT+04:30) Kabul'},
							{id: 'Antarctica/Mawson', name: '(GMT+05:00) Mawson'},
							{id: 'Asia/Aqtau', name: '(GMT+05:00) Aqtau'},
							{id: 'Asia/Aqtobe', name: '(GMT+05:00) Aqtobe'},
							{id: 'Asia/Ashgabat', name: '(GMT+05:00) Ashgabat'},
							{id: 'Asia/Dushanbe', name: '(GMT+05:00) Dushanbe'},
							{id: 'Asia/Karachi', name: '(GMT+05:00) Karachi'},
							{id: 'Asia/Tashkent', name: '(GMT+05:00) Tashkent'},
							{id: 'Asia/Yekaterinburg', name: '(GMT+05:00) Yekaterinburg'},
							{id: 'Indian/Kerguelen', name: '(GMT+05:00) Kerguelen'},
							{id: 'Indian/Maldives', name: '(GMT+05:00) Maldives'},
							{id: 'Asia/Calcutta', name: '(GMT+05:30) Calcutta'},
							{id: 'Asia/Colombo', name: '(GMT+05:30) Colombo'},
							{id: 'Asia/Katmandu', name: '(GMT+05:45) Katmandu'},
							{id: 'Antarctica/Vostok', name: '(GMT+06:00) Vostok'},
							{id: 'Asia/Almaty', name: '(GMT+06:00) Almaty'},
							{id: 'Asia/Bishkek', name: '(GMT+06:00) Bishkek'},
							{id: 'Asia/Dhaka', name: '(GMT+06:00) Dhaka'},
							{id: 'Asia/Omsk', name: '(GMT+06:00) Omsk'},
							{id: 'Asia/Thimphu', name: '(GMT+06:00) Thimphu'},
							{id: 'Indian/Chagos', name: '(GMT+06:00) Chagos'},
							{id: 'Asia/Rangoon', name: '(GMT+06:30) Rangoon'},
							{id: 'Indian/Cocos', name: '(GMT+06:30) Cocos'},
							{id: 'Antarctica/Davis', name: '(GMT+07:00) Davis'},
							{id: 'Asia/Bangkok', name: '(GMT+07:00) Bangkok'},
							{id: 'Asia/Hovd', name: '(GMT+07:00) Hovd'},
							{id: 'Asia/Jakarta', name: '(GMT+07:00) Jakarta'},
							{id: 'Asia/Krasnoyarsk', name: '(GMT+07:00) Krasnoyarsk'},
							{id: 'Asia/Saigon', name: '(GMT+07:00) Saigon'},
							{id: 'Indian/Christmas', name: '(GMT+07:00) Christmas'},
							{id: 'Antarctica/Casey', name: '(GMT+08:00) Casey'},
							{id: 'Asia/Brunei', name: '(GMT+08:00) Brunei'},
							{id: 'Asia/Choibalsan', name: '(GMT+08:00) Choibalsan'},
							{id: 'Asia/Hong_Kong', name: '(GMT+08:00) Hong Kong'},
							{id: 'Asia/Irkutsk', name: '(GMT+08:00) Irkutsk'},
							{id: 'Asia/Kuala_Lumpur', name: '(GMT+08:00) Kuala Lumpur'},
							{id: 'Asia/Macau', name: '(GMT+08:00) Macau'},
							{id: 'Asia/Makassar', name: '(GMT+08:00) Makassar'},
							{id: 'Asia/Manila', name: '(GMT+08:00) Manila'},
							{id: 'Asia/Shanghai', name: '(GMT+08:00) Shanghai'},
							{id: 'Asia/Singapore', name: '(GMT+08:00) Singapore'},
							{id: 'Asia/Taipei', name: '(GMT+08:00) Taipei'},
							{id: 'Asia/Ulaanbaatar', name: '(GMT+08:00) Ulaanbaatar'},
							{id: 'Australia/Perth', name: '(GMT+08:00) Perth'},
							{id: 'Asia/Pyongyang', name: '(GMT+08:30) Pyongyang'},
							{id: 'Asia/Dili', name: '(GMT+09:00) Dili'},
							{id: 'Asia/Jayapura', name: '(GMT+09:00) Jayapura'},
							{id: 'Asia/Seoul', name: '(GMT+09:00) Seoul'},
							{id: 'Asia/Tokyo', name: '(GMT+09:00) Tokyo'},
							{id: 'Asia/Yakutsk', name: '(GMT+09:00) Yakutsk'},
							{id: 'Pacific/Palau', name: '(GMT+09:00) Palau'},
							{id: 'Australia/Adelaide', name: '(GMT+09:30) Adelaide'},
							{id: 'Australia/Darwin', name: '(GMT+09:30) Darwin'},
							{id: 'Antarctica/DumontDUrville', name: '(GMT+10:00) DumontDUrville'},
							{id: 'Asia/Magadan', name: '(GMT+10:00) Magadan'},
							{id: 'Asia/Vladivostok', name: '(GMT+10:00) Vladivostok'},
							{id: 'Australia/Brisbane', name: '(GMT+10:00) Brisbane'},
							{id: 'Australia/Hobart', name: '(GMT+10:00) Hobart'},
							{id: 'Australia/Sydney', name: '(GMT+10:00) Sydney'},
							{id: 'Pacific/Chuuk', name: '(GMT+10:00) Chuuk'},
							{id: 'Pacific/Guam', name: '(GMT+10:00) Guam'},
							{id: 'Pacific/Port_Moresby', name: '(GMT+10:00) Port Moresby'},
							{id: 'Pacific/Efate', name: '(GMT+11:00) Efate'},
							{id: 'Pacific/Guadalcanal', name: '(GMT+11:00) Guadalcanal'},
							{id: 'Pacific/Kosrae', name: '(GMT+11:00) Kosrae'},
							{id: 'Pacific/Norfolk', name: '(GMT+11:00) Norfolk'},
							{id: 'Pacific/Noumea', name: '(GMT+11:00) Noumea'},
							{id: 'Pacific/Pohnpei', name: '(GMT+11:00) Pohnpei'},
							{id: 'Asia/Kamchatka', name: '(GMT+12:00) Kamchatka'},
							{id: 'Pacific/Auckland', name: '(GMT+12:00) Auckland'},
							{id: 'Pacific/Fiji', name: '(GMT+12:00) Fiji'},
							{id: 'Pacific/Funafuti', name: '(GMT+12:00) Funafuti'},
							{id: 'Pacific/Kwajalein', name: '(GMT+12:00) Kwajalein'},
							{id: 'Pacific/Majuro', name: '(GMT+12:00) Majuro'},
							{id: 'Pacific/Nauru', name: '(GMT+12:00) Nauru'},
							{id: 'Pacific/Tarawa', name: '(GMT+12:00) Tarawa'},
							{id: 'Pacific/Wake', name: '(GMT+12:00) Wake'},
							{id: 'Pacific/Wallis', name: '(GMT+12:00) Wallis'},
							{id: 'Pacific/Apia', name: '(GMT+13:00) Apia'},
							{id: 'Pacific/Enderbury', name: '(GMT+13:00) Enderbury'},
							{id: 'Pacific/Fakaofo', name: '(GMT+13:00) Fakaofo'},
							{id: 'Pacific/Tongatapu', name: '(GMT+13:00) Tongatapu'},
							{id: 'Pacific/Kiritimati', name: '(GMT+14:00) Kiritimati'}
						]}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('First day')},
						{type: 'DropdownBox', id: 'weekday', options: [
							{id: '1', name: 'Sunday'},
							{id: '2', name: 'Monday'},
							{id: '7', name: 'Saturday'}
						]}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('View mode')},
						{type: 'RadioBox', id: 'mode0', label: __('Week'), group: 'mode'},
						{type: 'RadioBox', id: 'mode1', label: __('Month'), group: 'mode'},
						{type: 'RadioBox', id: 'mode2', label: __('Agenda'), group: 'mode'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Border'), helpText: __('Show border on calendar')},
						{type: 'RadioBox', id: 'border0', label: __('Yes'), group: 'border'},
						{type: 'RadioBox', id: 'border1', label: __('No'), group: 'border'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Background color')},
						{type: 'ColorSelector', id: 'color'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'CheckBox', id: 'check1', label: __('Title')},
						{type: 'CheckBox', id: 'check2', label: __('Navigation')},
						{type: 'CheckBox', id: 'check3', label: __('Date')}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'CheckBox', id: 'check4', label: __('Print icon')},
						{type: 'CheckBox', id: 'check5', label: __('Tabs')}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'CheckBox', id: 'check6', label: __('Calendars list')},
						{type: 'CheckBox', id: 'check7', label: __('Time zone')}
					]}
				]}
			]}
		]
	},
	pluginScoped: {
		placeholderGroupId: 'uk__en_gb@holiday.calendar.google.com',
		placeholderCalendarName: 'Calendar name',
	},
	properties: [
		{id: 'calendarId', type: 'GoogleCalendarId', helpText: __('To find calendar ID, go to calendar settings.'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Google calendar ID')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function(value) {
				if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(value))
					{
						return '';
					}
				return (__("'%s' field value is incorrect.").replace('%s', 'Email'));
			},
			set: function(value, data) {
				data.content.groupId = value;
				this.updateFinalGroupId(data, value);
			}

		},
		{id: 'calendarName', type: 'GoogleCalendarName',
			get: function(data) { return data.content.calendar_name; },
			set: function(value, data) {
				data.content.calendar_name = value;
				this.updateFinalCalendarName(data);
			}
		},
		{id: 'calendarLanguage', type: 'GoogleCalendarLanguage',
			get: function(data) { return data.content.language; },
			set: function(value, data) {
			data.content.language = value;
			}
		},
		{id: 'calendarTimezone', type: 'GoogleCalendarTimezone',
			get: function(data) { return data.content.timezone; },
			set: function(value, data) {
				data.content.timezone = value;
			}
		},
		{id: 'calendarFirstDay', type: 'GoogleCalendarFirstDay',
			get: function(data) { return data.content.weekday; },
			set: function(value, data) {
				data.content.weekday = value;
			}
		},
		{id: 'calendarBackgroundColor', type: 'GoogleCalendarBackgroundColor',
			get: function(data) { return data.content.color; },
			set: function(value, data) {
				data.content.color = value.replace('#', '');
			}
		},
		{id: 'calendarViewMode', type: 'GoogleCalendarViewMode',
			get: function(data) { return data.content.mode; },
			set: function(value, data) {
				data.content.mode = value;
			}
		},
		{id: 'calendarBorder', type: 'GoogleCalendarBorder',
			get: function(data) {return data.content.checkbox_border; },
			set: function(value, data) {
			console.log(value);
				data.content.checkbox_border = value;
				data.content.border = value ? '1' : '0';
				data.content.border_style = value ? 'border:solid 1px #777' : 'border-width:0';

			}
		},
		{id: 'calendarTitle', type: 'GoogleCalendarTitle',
			get: function(data) { return data.content.checkbox_check1; },
			set: function(value, data) {
				data.content.checkbox_check1 = value;
				data.content.check1 = value ? '' : '&showTitle=0';
			}
		},
		{id: 'calendarNavigation', type: 'GoogleCalendarNavigation',
			get: function(data) { return data.content.checkbox_check2; },
			set: function(value, data) {
				data.content.checkbox_check2 = value;
				data.content.check2 = value ? '' : '&showNav=0';
			}
		},
		{id: 'calendarDate', type: 'GoogleCalendarDate',
			get: function(data) { return data.content.checkbox_check3; },
			set: function(value, data) {
				data.content.checkbox_check3 = value;
				data.content.check3 = value ? '' : '&showDate=0';
			}
		},
		{id: 'calendarPrintIcon', type: 'GoogleCalendarPrintIcon',
			get: function(data) { return data.content.checkbox_check4; },
			set: function(value, data) {
				data.content.checkbox_check4 = value;
				data.content.check4 = value ? '' : '&showPrint=0';
			}
		},
		{id: 'calendarTabs', type: 'GoogleCalendarTabs',
			get: function(data) { return data.content.checkbox_check5; },
			set: function(value, data) {
				data.content.checkbox_check5 = value;
				data.content.check5 = value ? '' : '&showTabs=0';
			}
		},
		{id: 'calendarList', type: 'GoogleCalendarList',
			get: function(data) { return data.content.checkbox_check6; },
			set: function(value, data) {
				data.content.checkbox_check6 = value;
				data.content.check6 = value ? '' : '&showCalendars=0';
			}
		},
		{id: 'calendarShowTimezone', type: 'GoogleCalendarShowTimezone',
			get: function(data) { return data.content.checkbox_check7; },
			set: function(value, data) {
				data.content.checkbox_check7 = value;
				data.content.check7 = value ? '' : '&showTz=0';
			}
		},
	],
	batchUpdates: true,
	resizeTimeout: null,
	
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function() {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	updateFinalGroupId: function(data) {
		data.content.finalGroupId = (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(data.content.groupId))
				? data.content.groupId : this.pluginScoped.placeholderGroupId;
	},
	updateFinalCalendarName: function(data) {
		var map = {
			'&': '&amp;',
			'<': '&lt;',
			'>': '&gt;',
			'"': '&quot;',
			"'": '&#039;'
		};
		data.content.finalCalendarName = data.content.calendar_name ? data.content.calendar_name.replace(/[&<>"']/g, function(m) {return map[m];}) : this.pluginScoped.placeholderCalendarName;
		data.content.finalCalendarName = encodeURIComponent(data.content.finalCalendarName);
	},
	openAction: function(fields, data, elem) {
		var itm;
		itm = fields.timezone.getItemById(data.content.timezone);
		if (!itm) itm = fields.timezone.getItem(0);
		fields.timezone.selectItem(itm);
		itm = fields.language.getItemById(data.content.language);
		if (!itm) itm = fields.language.getItem(0);
		fields.language.selectItem(itm);
		itm = fields.weekday.getItemById(data.content.weekday);
		if (!itm) itm = fields.weekday.getItem(0);
		fields.weekday.selectItem(itm);
		fields.groupId.setText(data.content.groupId);
		fields.calendar_name.setText(data.content.calendar_name);
		fields.border0.setValue(data.content.border === '1');
		fields.border1.setValue(data.content.border === '0');
		
		fields.check1.setValue(data.content.check1 === '');
		fields.check2.setValue(data.content.check2 === '');
		fields.check3.setValue(data.content.check3 === '');
		fields.check4.setValue(data.content.check4 === '');
		fields.check5.setValue(data.content.check5 === '');
		fields.check6.setValue(data.content.check6 === '');
		fields.check7.setValue(data.content.check7 === '');
		
		fields.mode0.setValue(data.content.mode === 'WEEK');
		fields.mode1.setValue(data.content.mode === 'MONTH');
		fields.mode2.setValue(data.content.mode === 'AGENDA');
		
		fields.color.setValue(data.content.color);
	},
	applyAction: function(fields, data, elem) {
		var itm, color;
		itm = fields.timezone.getSelectedItem();
		data.content.timezone = itm.getOriginal().id;
		itm = fields.language.getSelectedItem();
		data.content.language = itm.getOriginal().id;
		itm = fields.weekday.getSelectedItem();
		data.content.weekday = itm.getOriginal().id;
		
		data.content.check1 = fields.check1.getValue() ? '' : '&showTitle=0';
		data.content.check2 = fields.check2.getValue() ? '' : '&showNav=0';
		data.content.check3 = fields.check3.getValue() ? '' : '&showDate=0';
		data.content.check4 = fields.check4.getValue() ? '' : '&showPrint=0';
		data.content.check5 = fields.check5.getValue() ? '' : '&showTabs=0';
		data.content.check6 = fields.check6.getValue() ? '' : '&showCalendars=0';
		data.content.check7 = fields.check7.getValue() ? '' : '&showTz=0';
		
		if (fields.border0.getValue()) {
			data.content.border = '1';
			data.content.border_style = 'border:solid 1px #777';
		}
		if (fields.border1.getValue()) {
			data.content.border = '0';
			data.content.border_style = 'border-width:0';
		}
		if (fields.mode0.getValue()) data.content.mode = 'WEEK';
		if (fields.mode1.getValue()) data.content.mode = 'MONTH';
		if (fields.mode2.getValue()) data.content.mode = 'AGENDA';
		
		color = fields.color.getValue();
		data.content.color = color.replace('#', '');
		
		data.content.groupId = fields.groupId.getText();
		data.content.calendar_name = fields.calendar_name.getText();
		this.updateFinalGroupId(data);
		this.updateFinalCalendarName(data);
	},
	loadAction: function(data) {
		if (!data.content.timezone) data.content.timezone = '';
		if (!data.content.language) data.content.language = '';
		if (!data.content.weekday) data.content.weekday = '2';
		if (!data.content.groupId) data.content.groupId = '';
		if (!data.content.calendar_name) data.content.calendar_name = '';
		if (!data.content.border) {data.content.border = '0'; data.content.checkbox_border = false;}
		else {data.content.border = '1'; data.content.checkbox_border = true;}
		if (!data.content.check1) {data.content.check1 = ''; data.content.checkbox_check1 = true;}
		else {data.content.check1 = '&showTitle=0'; data.content.checkbox_check1 = false;}
		if (!data.content.check2) {data.content.check2 = ''; data.content.checkbox_check2 = true;}
		else {data.content.check2 = '&showNav=0'; data.content.checkbox_check2 = false;}
		if (!data.content.check3) {data.content.check3 = ''; data.content.checkbox_check3 = true;}
		else {data.content.check3 = '&showDate=0'; data.content.checkbox_check3 = false;}
		if (!data.content.check4) {data.content.check4 = ''; data.content.checkbox_check4 = true;}
		else {data.content.check4 = '&showPrint=0'; data.content.checkbox_check5 = false;}
		if (!data.content.check5) {data.content.check5 = ''; data.content.checkbox_check5 = true;}
		else {data.content.check5 = '&showTabs=0'; data.content.checkbox_check5 = false;}
		if (!data.content.check6) {data.content.check6 = ''; data.content.checkbox_check6 = true;}
		else {data.content.check6 = '&showCalendars=0'; data.content.checkbox_check6 = false;}
		if (!data.content.check7) {data.content.check7 = ''; data.content.checkbox_check7 = true;}
		else {data.content.check7 = '&showTz=0'; data.content.checkbox_check7 = false;}

		if (!data.content.mode) data.content.mode = 'MONTH';
		if (!data.content.border_style) data.content.border_style = 'border-width:0';
		if (!data.content.color) data.content.color = '00adef';
		this.updateFinalGroupId(data);
		this.updateFinalCalendarName(data);
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('calendarId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"assist","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/assist","pluginUri":"plugins\/assist","customConfiguration":null};
PluginWrapper._config.id = 'assist';
PluginWrapper._config.baseUri = "plugins\/assist";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/assist\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Assist\" method=\"post\" action=\"https:\/\/{{#content.demo}}payments.demo.paysecure.ru{{\/content.demo}}{{^content.demo}}{{content.servername}}{{\/content.demo}}\/pay\/order.cfm\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"Merchant_ID\" value=\"{{content.merchantid}}\">\n\t<input type=\"hidden\" name=\"OrderAmount\" value=\"{{content.orderamount}}\">\n\t<input type=\"hidden\" name=\"OrderComment\" value=\"{{content.ordercomment}}\">\n\t<input type=\"hidden\" name=\"OrderCurrency\" value=\"{{content.ordercurrency}}\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"OrderNumber\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"URL_RETURN\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"URL_RETURN_OK\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"URL_RETURN_NO\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/assist/main.php';
PluginWrapper._config.active = false;

var Globals = {
	_settingsContent: null,
	_settingsDialog: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			Globals._settingsContent = '<p><strong>' + __('Page URL') + ':</strong> <a href="https://assist.ru/" target="_blank">https://assist.ru/</a></p>' +
					'<p><strong>:</strong> ,    <em>"   "</em>  <em>"    URL  "</em>     Assist.<br />' +
					'    ,         .</p></div>';
		}
		return Globals._settingsContent;
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'assist_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'assist_color.svg', name: 'coloured'},
			{id: 'assist_black.svg', name: 'black'},
			{id: 'assist_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Assist',
	id: 'assist',
	pageUrl: 'https://www.assist.ru/',
	keyFieldId: 'merchantid',
	keyField2Id: 'servername',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Server name')},
			{type: 'TextField', placeholder: __('Server name'), id: 'key2'},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'ordercomment',
	priceFieldId: 'orderamount',
	currencyFieldId: 'ordercurrency',
	globalVars: ['merchantid', 'servername', 'demo'],
	useStylesInStoreCart: true,
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'assist', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('assist', {
	name: 'Assist',
	element: {
		minSize: {width: 100, height: 35},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchantid', type: 'AssistMerchantId', helpText:__("Identifier from Assist"),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchantid; },
			set: function(value, data) {
				data.content.merchantid = value;
			}
		},
		{id: 'servername', type: 'AssistServerName', helpText:__("Server name provided by Assist support team"),
			get: function(data) { return data.content.servername; },
			set: function(value, data) {
				data.content.servername = value;
			}
		},
		{id: 'ordercomment', type: 'AssistOrderComment', helpText:__('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.ordercomment; },
			set: function(value, data) {
				data.content.ordercomment = value;
			}
		},
		{id: 'orderamount', type: 'AssistOrderAmount', helpText: __("Amount to be transferred"),
			get: function(data) { return data.content.orderamount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.orderamount = value;
			}
		},
		{id: 'ordercurrency', type: 'AssistOrderCurrency',
			get: function(data) { return data.content.ordercurrency; },
			set: function(value, data) {
				data.content.ordercurrency = value;
			}
		},
		{id: 'demo', type: 'AssistDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'assist'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), helpText:__("Identifier from Assist"), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantid'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Server name'), helpText:__("Server name provided by Assist support team")},
						{type: 'TextField', id: 'servername'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], columnWeightsSmall: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name'), helpText:__('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'ordercomment'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred")},
						{type: 'TextField', id: 'orderamount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'ordercurrency', options: [
							{id: 'RUB', name: 'RUB'},
							{id: 'USD', name: 'USD'},
							{id: 'EUR', name: 'EUR'},
							{id: 'BYN', name: 'BYN'},
							{id: 'AMD', name: 'AMD'},
							{id: 'AUD', name: 'AUD'},
							{id: 'AZN', name: 'AZN'},
							{id: 'BGN', name: 'BGN'},
							{id: 'BRL', name: 'BRL'},
							{id: 'CAD', name: 'CAD'},
							{id: 'CHF', name: 'CHF'},
							{id: 'CNY', name: 'CNY'},
							{id: 'CZK', name: 'CZK'},
							{id: 'DKK', name: 'DKK'},
							{id: 'GBP', name: 'GBP'},
							{id: 'HUF', name: 'HUF'},
							{id: 'INR', name: 'INR'},
							{id: 'JPY', name: 'JPY'},
							{id: 'KGS', name: 'KGS'},
							{id: 'KRW', name: 'KRW'},
							{id: 'KZT', name: 'KZT'},
							{id: 'MDL', name: 'MDL'},
							{id: 'NOK', name: 'NOK'},
							{id: 'PLN', name: 'PLN'},
							{id: 'RON', name: 'RON'},
							{id: 'SEK', name: 'SEK'},
							{id: 'SGD', name: 'SGD'},
							{id: 'TJS', name: 'TJS'},
							{id: 'TMT', name: 'TMT'},
							{id: 'TRY', name: 'TRY'},
							{id: 'UAH', name: 'UAH'},
							{id: 'UZS', name: 'UZS'},
							{id: 'ZAR', name: 'ZAR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'bottom'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'assist')
		]
	},
	openAction: function(fields, data, elem) {
		var itm;
		fields.merchantid.setText(data.content.merchantid);
		fields.servername.setText(data.content.servername);
		fields.orderamount.setText(data.content.orderamount);
		itm = fields.ordercurrency.getItemById(data.content.ordercurrency);
		fields.ordercurrency.selectItem(itm);
		fields.ordercomment.setText(data.content.ordercomment);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		data.content.merchantid = fields.merchantid.getText();
		data.content.servername = fields.servername.getText();
		data.content.orderamount = fields.orderamount.getText();
		itm = fields.ordercurrency.getSelectedItem();
		data.content.ordercurrency = itm.getOriginal().id;
		data.content.ordercomment = fields.ordercomment.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.merchantid) data.content.merchantid = '';
		if (!data.content.servername) data.content.servername = '';
		if (!data.content.orderamount) data.content.orderamount = '1';
		if (!data.content.ordercurrency) data.content.ordercurrency = 'RUB';
		if (!data.content.ordercomment) data.content.ordercomment = 'Donate';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['assist.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'assist_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantid');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"payfast","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/payfast","pluginUri":"plugins\/payfast","customConfiguration":null};
PluginWrapper._config.id = 'payfast';
PluginWrapper._config.baseUri = "plugins\/payfast";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/payfast\/main.png";
PluginWrapper._config.template = "<form action=\"https:\/\/www.payfast.co.za\/eng\/process\" method=\"post\" data-gateway-id=\"Payfast\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"merchant_id\" value=\"{{content.merchantId}}\" \/>\n\t<input type=\"hidden\" name=\"merchant_key\" value=\"{{content.merchantKey}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"return_url\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancel_url\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"notify_url\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"m_payment_id\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"item_name\" value=\"{{content.itemName}}\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/payfast/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: "#cccccc",
				style: 'solid',
				weight: 1,
				differ: false,
				css: "1px solid #cccccc",
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'PayFast_color2.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'PayFast_color.svg', name: 'coloured'},
			{id: 'Payfast_color_vertical.svg', name: 'coloured 2'},
			{id: 'PayFast_color2.svg', name: 'coloured 3'},
			{id: 'PayFast_dark.svg', name: 'dark'},
			{id: 'Payfast_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'PayFast_tiny.svg', name: 'tiny'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'PayFast',
	id: 'payfast',
	pageUrl: 'https://www.payfast.co.za/',
	keyFieldId: 'merchantId',
	keyField2Id: 'merchantKey',
	keyField3Id: 'passphrase',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [12,6,6], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Merchant Key')},
			{type: 'TextField', placeholder: __('Merchant Key'), id: 'key2', css: {marginTop: 5}},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Passphrase')},
			{type: 'TextField', placeholder: __('Passphrase'), id: 'key3', password: true, css: {marginTop: 5}}
		]},
	]},
	titleFieldId: 'label',
	nameFieldId: 'itemName',
	priceFieldId: 'amount',
	globalVars: ['merchantId', 'merchantKey', 'passphrase'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payfast', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('payfast', {
	name: 'PayFast',
	element: {
		minSize: {width: 106, height: 32},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchantId', type: 'PayfastMerchantId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchantId; },
			set: function(value, data) {
				data.content.merchantId = value;
			}
		},
		{id: 'merchantKey', type: 'PayfastMerchantKey',
			get: function(data) { return data.content.merchantKey; },
			set: function(value, data) {
				data.content.merchantKey = value;
			}
		},
		{id: 'passphrase', type: 'PayfastPassphrase',
			get: function(data) { return data.content.passphrase; },
			set: function(value, data) {
				data.content.passphrase = value;
			}
		},
		{id: 'itemName', type: 'PayfastItemName',
			get: function(data) { return data.content.itemName; },
			set: function(value, data) {
				data.content.itemName = value;
			}
		},
		{id: 'amount', type: 'PayfastAmount',  helpText: __("Amount to be transferred") + ', ' + 'ZAR',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'payfast'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', columnWeights: [9, 3], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'itemName'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + 'ZAR'},
						{type: 'TextField', id: 'amount'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant Key')},
						{type: 'TextField', id: 'merchantKey'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Passphrase')},
						{type: 'TextField', id: 'passphrase'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payfast')
		]
	},
	openAction: function (fields, data, elem) {
		fields.merchantId.setText(data.content.merchantId);
		fields.merchantKey.setText(data.content.merchantKey);
		fields.passphrase.setText(data.content.passphrase);
		fields.itemName.setText(data.content.itemName);
		fields.amount.setText(data.content.amount);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.merchantId = fields.merchantId.getText();
		data.content.merchantKey = fields.merchantKey.getText();
		data.content.passphrase = fields.passphrase.getText();
		data.content.itemName = fields.itemName.getText();
		data.content.amount = fields.amount.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.merchantId)
			data.content.merchantId = ''; // 10005521
		if (!data.content.merchantKey)
			data.content.merchantKey = ''; // o3mztwvetaxrk
		if (!data.content.passphrase)
			data.content.passphrase = ''; // sitepro4payfast
		if (!data.content.itemName)
			data.content.itemName = ''; // Black Eye Boxing Gloves
		if (!data.content.amount)
			data.content.amount = '1'; // 129.99
		
		if (data.content.button) {
			data.content.logo = data.content.button + '.png';
			data.content.button = null;
			delete data.content.button;
		}
		if (['PayFast_tiny2.svg', 'buynow-dark.png', 'buynow-light.png', 'donate-dark.png', 'donate-light.png', 'logo_coins.png', 'logo-payfast.png',
		'logo-stacked.png', 'paynow-dark.png', 'paynow-light'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'PayFast_color2.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"paytrail","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/paytrail","pluginUri":"plugins\/paytrail","customConfiguration":null};
PluginWrapper._config.id = 'paytrail';
PluginWrapper._config.baseUri = "plugins\/paytrail";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/paytrail\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Paytrail\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\n\t<input name=\"amount\" value=\"{{content.amount}}\" type=\"hidden\" \/>\n\t<input name=\"currency\" value=\"{{content.currency}}\" type=\"hidden\" \/>\n\t<input name=\"description\" value=\"{{content.name}}\" type=\"hidden\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/paytrail/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#e60094',
			button_border: {
				color: '#cccccc',
				style: 'none',
				weight: 1,
				css: { border: '1px none #cccccc' },
				cssRaw: 'border: 1px none #cccccc'
			},
			logo: 'paytrail_white_line.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#ffa6e0'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'paytrail_color_block.svg', name: 'block coloured'},
			{id: 'paytrail_black_block.svg', name: 'block black'},
			{id: 'paytrail_white_block.svg', name: 'block white'},
			{id: 'paytrail_color_line.svg', name: 'coloured'},
			{id: 'paytrail_black_line.svg', name: 'black'},
			{id: 'paytrail_white_line.svg', name: 'white'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Paytrail',
	id: 'paytrail',
	pageUrl: 'https://www.paytrail.com/',
	keyField: __('Merchant ID'),
	keyFieldId: 'merchantId',
	keyField2: __('Secret Key'),
	keyField2Id: 'secretKey',
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['merchantId', 'secretKey'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paytrail', true),
	logos: Globals.getLogosList(),
	defaultLogo: 'paytrail_black_block.svg',
});
PluginWrapper.registerPlugin('paytrail', {
	name: 'Paytrail',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchantId', type: 'PaytrailMerchantId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchantId; },
			set: function(value, data) {
				data.content.merchantId = value;
			}
		},
		{id: 'secretKey', type: 'PaytrailSecretKey',
			get: function(data) { return data.content.secretKey; },
			set: function(value, data) {
				data.content.secretKey = value;
			}
		},
		{id: 'name', type: 'PaytrailName',
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'amount', type: 'PaytrailAmount', helpText: __('Amount to be transferred') + ', EUR',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'paytrail'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', children: [
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Merchant ID'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantId'}
					]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'secretKey'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [9,3], columnWeightsSmall: [9,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description')},
						{type: 'TextField', id: 'name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + ', EUR'},
						{type: 'TextField', id: 'amount'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paytrail')
		]
	},
	openAction: function (fields, data, elem) {
		fields.merchantId.setText(data.content.merchantId);
		fields.secretKey.setText(data.content.secretKey);
		fields.amount.setValue(data.content.amount);
		fields.name.setText(data.content.name);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.merchantId = fields.merchantId.getText();
		data.content.secretKey = fields.secretKey.getText();
		data.content.amount = fields.amount.getValue();
		data.content.name = fields.name.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['merchantId', 'secretKey'];
		if (!data.content.merchantId) data.content.merchantId = '';
		if (!data.content.secretKey) data.content.secretKey = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.currency) data.content.currency = 'EUR';
		if (!data.content.name) data.content.name = '';
		if (['paytrail.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'paytrail_color_block.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"qiwi_kz","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/qiwi_kz","pluginUri":"plugins\/qiwi_kz","customConfiguration":null};
PluginWrapper._config.id = 'qiwi_kz';
PluginWrapper._config.baseUri = "plugins\/qiwi_kz";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/qiwi_kz\/main.png";
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n<div class=\"modal fade\" id=\"{{id}}_modal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\">Qiwi.kz<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n\t\t\t\t<form data-gateway-id=\"QiwiKz\" id=\"{{id}}_form\" action=\"https:\/\/bill.qiwi.com\/order\/external\/main.action\" method=\"get\" style=\"width: 100%; height: 100%;\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label>{{\"Phone\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\n\t\t\t\t\t\t<input class=\"form-control input-sm\" type=\"text\" name=\"phone\" placeholder=\"{{\"Example\" | tr}}: +7 700 1234567\" required \/>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<input type=\"hidden\" name=\"ccy\" value=\"{{content.currency}}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"comment\" value=\"{{content.name}}\" \/>\n\t\t\t\t\t<input type=\"submit\" class=\"hidden\" \/>\n\t\t\t\t\t{{{requireService}}}\n\t\t\t\t\t{{#content.store}}\n\t\t\t\t\t<input type=\"hidden\" name=\"successUrl\" value=\"{returnUrl}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"failUrl\" value=\"{cancelUrl}\" \/>\n\t\t\t\t\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t\t\t\t\t{{\/content.store}}\n\t\t\t\t<\/form>\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n                <button type=\"button\" class=\"btn btn-primary\" id=\"{{id}}_pay_btn\">{{\"Pay\" | tr}}<\/button>\n            <\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n\n{{#isPublished}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar modalAppendToBody = false;\n\t\twindow.{{id}}_showModal = function() {\n\t\t\tif (!modalAppendToBody) {\n\t\t\t\t$('#{{id}}_modal').appendTo('body');\n\t\t\t\tmodalAppendToBody = true;\n\t\t\t}\n\t\t\t$('#{{id}}_modal').modal('show');\n\t\t};\n\t\t$('#{{id}}_pay_btn').on('click', function() {\n\t\t\t$(this).attr('disabled', 'disabled');\n\t\t\t$('#{{id}}_modal').find('input[type=\"submit\"]').trigger('click');\n\t\t});\n\t\t$('#{{id}}_modal').on('show.bs.modal', function() {\n\t\t\t$('#{{id}}_pay_btn').removeAttr('disabled');\n\t\t});\n\t\t$('#{{id}}_payment_gateway_button').on('click', window.{{id}}_showModal);\n\t})();\n<\/script>\n{{\/isPublished}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/qiwi_kz/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'qiwi_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'qiwi_color.svg', name: 'coloured'},
			{id: 'qiwi_dark.svg', name: 'dark'},
			{id: 'qiwi_white.svg', name: 'white'}
		];
	},
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://qiwi.kz/" target="_blank">https://qiwi.kz/</a></p>'
				+ '<p><strong>Callback URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Qiwi' + '</pre></p>';
	}
};

ElementRegister.registerPaymentGateway({
	name: 'QIWI.kz',
	id: 'qiwi_kz',
	pageUrl: 'https://qiwi.kz/',
	keyFieldId: 'api_id',
	keyField2Id: 'api_password',
	keyField3Id: 'prv_id',
	keyFieldDef: {type: 'HorizontalLayout', children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('API ID')},
			{type: 'TextField', placeholder: 'API ID', id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('API Password')},
			{type: 'TextField', placeholder: __('API Password'), id: 'key2', password: true},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Provider ID')},
			{type: 'TextField', placeholder: __('Provider ID'), id: 'key3'}
		]},
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['api_id', 'api_password', 'prv_id'],
	useStylesInStoreCart: true,
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'qiwi_kz', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('qiwi_kz', {
	name: 'QIWI.kz',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'api_id', type: 'KiwiQZApiId', helpText: __('Provider ID in API Visa QIWI Wallet'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.api_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API ID')));
				return opts;
			},
			get: function(data) { return data.content.api_id; },
			set: function(value, data) {
				data.content.api_id = value;
			}
		},
		{id: 'api_password', type: 'KiwiQZApiPassword', helpText: __('Provider password in API Visa QIWI Wallet'),
			get: function(data) { return data.content.api_password; },
			set: function(value, data) {
				data.content.api_password = value;
			}
		},
		{id: 'prv_id', type: 'KiwiQZProviderId', helpText: __('Provider numeric ID in QIWI'),
			get: function(data) { return data.content.prv_id; },
			set: function(value, data) {
				data.content.prv_id = value;
			}
		},
		{id: 'name', type: 'KiwiQZName', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'amount', type: 'KiwiQZAmount', helpText: __('Amount to be transferred') + ', KZT',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'qiwi_kz'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: 'API ID', helpText: __('Provider ID in API Visa QIWI Wallet'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.api_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API ID')));
								return opts;
							}},
							{type: 'TextField', id: 'api_id'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('API Password'), helpText: __('Provider password in API Visa QIWI Wallet')},
							{type: 'TextField', id: 'api_password'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Provider ID'), helpText: __('Provider numeric ID in QIWI')},
							{type: 'TextField', id: 'prv_id'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'name'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + ', KZT'},
							{type: 'TextField', id: 'amount'}
						]}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'qiwi_kz')
		]
	},
	openAction: function (fields, data, elem) {
		fields.api_id.setText(data.content.api_id);
		fields.api_password.setText(data.content.api_password);
		fields.prv_id.setText(data.content.prv_id);
		fields.amount.setText(data.content.amount);
		fields.name.setText(data.content.name);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.api_id = fields.api_id.getText();
		data.content.api_password = fields.api_password.getText();
		data.content.prv_id = fields.prv_id.getText();
		data.content.name = fields.name.getText();
		data.content.amount = fields.amount.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['api_id', 'api_password', 'prv_id'];
		if (!data.content.api_id) data.content.api_id = '';
		if (!data.content.api_password) data.content.api_password = '';
		if (!data.content.prv_id) data.content.prv_id = '';
		if (!data.content.name) data.content.name = '';
		if (!data.content.amount) data.content.summ = '1';
		if (!data.content.currency) data.content.currency = 'KZT';
		if (['qiwi_kz.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'qiwi_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('api_id');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"webmoney_widget","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/webmoney_widget","pluginUri":"plugins\/webmoney_widget","customConfiguration":null};
PluginWrapper._config.id = 'webmoney_widget';
PluginWrapper._config.baseUri = "plugins\/webmoney_widget";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/webmoney_widget\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n<div class=\"alert alert-warning\">{{tr.preview_not_available}}<\/div>\n{{\/isPublished}}\n{{#isPublished}}\n<script id=\"wm-script\" type=\"text\/javascript\"\n\t\tsrc=\"\/\/merchant.webmoney.ru\/conf\/lib\/wm-simple-x20.min.js?lang=en&amp;wmid={{content.wmId}}&amp;purse={{content.purseId}}&amp;key={{content.key}}&amp;amount={{content.amount}}&amp;desc={{content.descriptionUrlEnc}}\"><\/script>\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('webmoney_widget', {
	name: __('WM Widget'),
	element: {
		minSize: {width: 25, height: 25},
		defaultSize: {width: 450, height: 224},
		resizable: false
	},
	properties: [
		{id: 'wmId', type: 'WebmoneyWidgetWmId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.wmId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('WebMoney ID')));
				return opts;
			},
			get: function(data) { return data.content.wmId; },
			set: function(value, data) {
				data.content.wmId = value;
			}
		},
		{id: 'purseId', type: 'WebmoneyWidgetPurseId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.purseId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Purse ID')));
				return opts;
			},
			get: function(data) { return data.content.purseId; },
			set: function(value, data) {
				data.content.purseId = value;
			}
		},
		{id: 'key', type: 'WebmoneyWidgetKey', helpText: __('"Secret Key X20" field from your purse settings page'/* ctx: Option name in WM Widget plugin properties */),
			get: function(data) { return data.content.key; },
			set: function(value, data) {
				data.content.key = value;
			}
		},
		{id: 'description', type: 'WebmoneyWidgetDescription',
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'WebmoneyWidgetAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	],
	propertyDialog: {
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('WebMoney ID'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.wmId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('WebMoney ID')));
								return opts;
							}},
							{type: 'TextField', id: 'wmId'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Purse ID'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.wmId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('WebMoney ID')));
								return opts;
							}},
							{type: 'TextField', id: 'purseId'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Key'), helpText: __('"Secret Key X20" field from your purse settings page'/* ctx: Option name in WM Widget plugin properties */)},
							{type: 'TextField', id: 'key'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [9, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Description')},
							{type: 'TextField', id: 'description'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __('In WM units defined by purse')},
							{type: 'TextField', id: 'amount'}
						]}
					]}
				]}
			]}
		]
	},
	
	pluginScoped: {
		urlEncode: function (str) {
			//       discuss at: http://phpjs.org/functions/urlencode/
			//      original by: Philip Peterson
			//      improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
			//      improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
			//      improved by: Brett Zamir (http://brett-zamir.me)
			//      improved by: Lars Fischer
			//         input by: AJ
			//         input by: travc
			//         input by: Brett Zamir (http://brett-zamir.me)
			//         input by: Ratheous
			//      bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
			//      bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
			//      bugfixed by: Joris
			// reimplemented by: Brett Zamir (http://brett-zamir.me)
			// reimplemented by: Brett Zamir (http://brett-zamir.me)

			str = (str + '').toString();
			return window.encodeURIComponent(str)
					.replace(/!/g, '%21')
					.replace(/'/g, '%27')
					.replace(/\(/g, '%28')
					.replace(/\)/g, '%29')
					.replace(/\*/g, '%2A')
					.replace(/%20/g, '+');
		}
	},
	
	resizeAction: function(data, elem) {
		elem.find('.wmbtn').eq(0).css({width: data.width, height: data.height});
	},
	openAction: function(fields, data, elem) {
		fields.wmId.setText(data.content.wmId);
		fields.purseId.setText(data.content.purseId);
		fields.key.setText(data.content.key);
		fields.amount.setText(data.content.amount);
		fields.description.setText(data.content.description);
	},
	applyAction: function(fields, data, elem) {
		data.content.wmId = fields.wmId.getText();
		data.content.purseId = fields.purseId.getText();
		data.content.key = fields.key.getText();
		data.content.amount = parseFloat(fields.amount.getText().replace(',', '.'));
		if (isNaN(data.content.amount)) data.content.amount = 1.0;
		data.content.description = fields.description.getText();
		data.content.descriptionUrlEnc = this.pluginScoped.urlEncode(data.content.description);
	},
	loadAction: function(data) {
		if (!data.content.wmId) data.content.wmId = '';
		if (!data.content.purseId) data.content.purseId = '';
		if (!data.content.key) data.content.key = '';
		if (!data.content.amount) data.content.amount = 1.0;
		if (!data.content.description) data.content.description = __('Donation to charitable fund');
		if (!data.content.descriptionUrlEnc) data.content.descriptionUrlEnc = this.pluginScoped.urlEncode(data.content.description);
		data.tr = {preview_not_available: __('Preview not available')};
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('wmId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"vkontakte_community","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_community","pluginUri":"plugins\/vkontakte_community","customConfiguration":null};
PluginWrapper._config.id = 'vkontakte_community';
PluginWrapper._config.baseUri = "plugins\/vkontakte_community";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/vkontakte_community\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n\t{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"\/\/vk.com\/js\/api\/openapi.js?116\"><\/script>\n\t{{\/firstOnPage}}\n{{\/isPublished}}\n<div id=\"{{id}}_vk_groups\" class=\"vk_groups wb-prevent-layout-click\"><\/div>\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar onVKLoaded = function(callback) {\n\t\t\tif (!window.VK) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tonVKLoaded(callback);\n\t\t\t\t}, 200);\n\t\t\t} else if (typeof(callback) === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\tvar render = function(w, h) {\n\t\t\ttry {\n{{#isPublished}}\n\t\t\t\tw = w || $('#{{id}}').width();\n\t\t\t\th = h || $('#{{id}}').height();\n{{\/isPublished}}\n{{^isPublished}}\n\t\t\t\tw = 'auto';\n\t\t\t\th = {{height}};\n{{\/isPublished}}\n\t\t\t\t$('#{{id}}_vk_groups').empty();\n\t\t\t\tVK.Widgets.Group('{{id}}_vk_groups', {mode: {{content.mode}}, width: w, height: h, color1: '{{content.color1}}', color2: '{{content.color2}}', color3: '{{content.color3}}'}, '{{content.finalProfileId}}');\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('VK Community error: ' + error.message);\n\t\t\t}\n\t\t};\n\t\tonVKLoaded(render);\n{{#isPublished}}\n\t\tvar resizeTimeout;\n\t\tvar elem = $('#{{id}}'), inner = $('#{{id}}_vk_groups');\n\t\tvar resizeHandler = function() {\n\t\t\tvar iw = inner.width(),\n\t\t\t\tih = inner.height();\n\t\t\tvar ew = elem.width(),\n\t\t\t\teh = elem.height();\n\t\t\tif (iw != ew || ih != eh) {\n\t\t\t\tclearTimeout(resizeTimeout);\n\t\t\t\t(function(w, h) {\n\t\t\t\t\tresizeTimeout = setTimeout(function() {\n\t\t\t\t\t\trender(w, h);\n\t\t\t\t\t}, 500);\n\t\t\t\t})(ew, eh);\n\t\t\t}\n\t\t};\n\t\t$(window).on('resize', resizeHandler);\n\t\tresizeHandler();\n{{\/isPublished}}\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('vkontakte_community', {
	name: 'VK',
	icon: 'fa fa-vk',
	noButton: true,
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 220, height: 260},
		resizable: true
	},
	propertyDialog: {
		//size: {width: 500, height: 400},
		noScroll: true,
		tabs: [
			{name: 'General', children: [
				{type: 'VerticalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('ID for Page or Group'),
							helpText: __('Note that ID for profile page must be entered with "-" sign at the beginning. Use this page to find your ID: %s').replace('%s', '<a href="https://vk.com/dev/Community" target="_blank">https://vk.com/dev/Community</a>'),
							uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.profileId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('ID for Page or Group')));
								return opts;
							}
						},
						{type: 'TextField', id: 'link', placeholder: '20003922', change: function(fields) {
							fields.__self.notifyHelpSystemPlayer('prop-link-change');
							this.setValue(this.getValue().replace(/^.*?(\-*\d+).*$/, '$1'));
						}}
					]},
					{type: 'HorizontalLayout',
						css: {marginTop: 15},
						columnWeights: [5, 7],
						children: [
							{type: 'VerticalLayout', children: [
								{type: 'Label', text: __('Layout')},
								{type: 'RadioBox', id: 'mode0', label: __('Members'), group: 'mode', change: function(fields) {
									fields.__self.notifyHelpSystemPlayer('prop-mode0-change');
								}},
								{type: 'RadioBox', id: 'mode2', label: __('News'), group: 'mode', change: function(fields) {
									fields.__self.notifyHelpSystemPlayer('prop-mode2-change');
								}},
								{type: 'RadioBox', id: 'mode1', label: __('Name only'), group: 'mode', change: function(fields) {
									fields.__self.notifyHelpSystemPlayer('prop-mode1-change');
								}}
							]},
							{type: 'VerticalLayout', children: [
								{type: 'HorizontalLayout', columnWeights: [8, 4], children: [
									{type: 'Label', text: __('Background color')},
									{type: 'ColorSelector', id: 'color1', noTransparent: true, change: function(fields) {
										fields.__self.notifyHelpSystemPlayer('prop-color1-change');
									}}
								]},
								{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 4}, children: [
									{type: 'Label', text: __('Text color')},
									{type: 'ColorSelector', id: 'color2', noTransparent: true, change: function(fields) {
										fields.__self.notifyHelpSystemPlayer('prop-color2-change');
									}}
								]},
								{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 4}, children: [
									{type: 'Label', text: __('Buttons color')},
									{type: 'ColorSelector', id: 'color3', noTransparent: true, change: function(fields) {
										fields.__self.notifyHelpSystemPlayer('prop-color3-change');
									}}
								]}
							]}
						]
					}
				]}
			]}
		]
	},
	
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://vk.com/js/api/openapi.js?116', function() {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		},
		handleLink: function(link, func) {
			var selfFunc = func;
			if (('' + link).match(/^([0-9]+|\-[0-9]+)$/i)) {
				if (typeof selfFunc === 'function') selfFunc(link);
			} else {
				$.post('https://vk.com/al_pages.php', {act: 'a_oid_by_link', url: link}, function(oid) {
					if (typeof selfFunc === 'function') selfFunc((oid && oid.match(/^[0-9]+$/)) ? oid : null);
				});
			}
		}
	},
	properties: [
		{id: 'profileId', type: 'VkontakteProfileId', helpText: __('Note that ID for profile page must be entered with "-" sign at the beginning. Use this page to find your ID: %s').replace('%s', '<a href="https://vk.com/dev/Community" target="_blank">https://vk.com/dev/Community</a>'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.profileId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('ID for Page or Group')));
				return opts;
			},
			get: function(data) { return data.content.profileId; },
			validate: function (value, data, api) {
				this.setFinalProfileId(data, api);
			},
			set: function(value, data) {
				data.content.profileId = value.replace(/^.*?(\-*\d+).*$/, '$1');
				this.setFinalProfileId(data);
			}
		},
		{id: 'layout', type: 'VkontakteLayout',
			get: function(data) { return data.content.mode; },
			set: function(value, data) {
				data.content.mode = value;
			}
		},
		{id: 'backgroundColor', type: 'VkontakteBackgroundColor',
			get: function(data) { return data.content.color1; },
			set: function(value, data) {
				data.content.color1 = value.substring(1);
			}
		},
		{id: 'textColor', type: 'VkontakteTextColor',
			get: function(data) { return data.content.color2; },
			set: function(value, data) {
				data.content.color2 = value.substring(1);
			}
		},
		{id: 'buttonsColor', type: 'VkontakteButtonsColor',
			get: function(data) { return data.content.color3; },
			set: function(value, data) {
				data.content.color3 = value.substring(1);
			}
		},
	],
	setFinalProfileId: function (data, api) {
		if (/^-*(\d+)$/.test(data.content.profileId)) {
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
			data.content.finalProfileId = data.content.profileId;
		} else {
			if (api) {
				this.setErrorMessage(__('Incorrect ID'));
				api.setError(__('Incorrect ID'));
			}
			data.content.finalProfileId = '86093450' // before was '22822305';
		}

	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		var self = this;
		clearTimeout(this.resizeTimeout);
		this.resizeTimeout = setTimeout(function() { self.updateElement(); }, 500);
	},
	openAction: function(fields, data, elem) {
		fields.__self = this;
		fields.link.setText(data.content.profileId);
		fields.mode0.setValue(data.content.mode === 0);
		fields.mode1.setValue(data.content.mode === 1);
		fields.mode2.setValue(data.content.mode === 2);
		fields.color1.setValue(data.content.color1);
		fields.color2.setValue(data.content.color2);
		fields.color3.setValue(data.content.color3);
	},
	applyAction: function(fields, data, elem) {
		data.content.profileId = fields.link.getText();
		if (fields.mode0.getValue()) data.content.mode = 0;
		if (fields.mode1.getValue()) data.content.mode = 1;
		if (fields.mode2.getValue()) data.content.mode = 2;
		data.content.color1 = fields.color1.getValue().substring(1);
		data.content.color2 = fields.color2.getValue().substring(1);
		data.content.color3 = fields.color3.getValue().substring(1);
		this.setFinalProfileId(data);
	},
	loadAction: function(data) {
		if (!data.content.mode) data.content.mode = 0;
		if (!data.content.color1) data.content.color1 = 'ffffff';
		if (!data.content.color2) data.content.color2 = '2B587A';
		if (!data.content.color3) data.content.color3 = '5B7FA6';
		if (!data.content.profileId) data.content.profileId = '';
		this.setFinalProfileId(data);
	},
	loadedAction: function(data, elem) {
		this.pluginScoped.addListener(this, function() {
//			window.VK.Widgets.Group(data.id + '_vk_groups', {mode: data.content.mode, width: data.width, height: data.height, color1: data.content.color1, color2: data.content.color2, color3: data.content.color3}, data.content.finalProfileId);
		});
	},
	switchModeAction: function(data, elem) {
		clearTimeout(this.resizeTimeout);
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('profileId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"paytr","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/paytr","pluginUri":"plugins\/paytr","customConfiguration":null};
PluginWrapper._config.id = 'paytr';
PluginWrapper._config.baseUri = "plugins\/paytr";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/paytr\/main.png";
PluginWrapper._config.template = "<script src=\"https:\/\/www.paytr.com\/js\/iframeResizer.min.js\"><\/script>\n<iframe src=\"https:\/\/www.paytr.com\/odeme\/guvenli\/{{content.token}}\" id=\"paytriframe\" frameborder=\"0\" scrolling=\"no\" style=\"width: 100%;\"><\/iframe>\n<!--<script>iFrameResize({},'#paytriframe');<\/script>-->";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
    name: __('PayTR'),
    id: 'paytr',
    keyField: __('Merchant ID'),
    keyFieldId: 'merchant_id',
    keyField2: __('Merchant Key'),
    keyField2Id: 'merchant_key',
    keyField3: __('Merchant Salt'),
    keyField3Id: 'merchant_salt',
    titleFieldId: 'label',
    nameFieldId: 'user_basket',
    priceFieldId: 'payment_amount'
});
PluginWrapper.registerPlugin('paytr', {
    name: 'PayTR',
    element: {
        minSize: {width: 208, height: 50},
        defaultSize: {width: 208, height: 50},
        resizable: true
    },
    propertyDialog: {
        noScroll: true,
        tabs: [
            {children: [{type: 'VerticalLayout', spacing: 15, children: [
                            {type: 'HorizontalLayout', columnWeights: [4, 4, 4], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Merchant ID'), helpText: __('Your Merchant ID provided by PayTR')},
                                            {type: 'TextField', id: 'merchant_id'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Merchant Key'), helpText: __('Your Merchant Key provided by PayTR')},
                                            {type: 'TextField', id: 'merchant_key'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Merchant Salt'), helpText: __('Your Merchant Salt provided by PayTR')},
                                            {type: 'TextField', id: 'merchant_salt', password: true}
                                        ]}
                                ]},
                            {type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Item Name')},
                                            {type: 'TextField', id: 'user_basket'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Amount')},
                                            {type: 'TextField', id: 'payment_amount'}
                                        ]},
                                    {type: 'VerticalLayout', children: [
                                            {type: 'Label', text: __('Currency')},
                                            {type: 'DropdownBox', id: 'currency', options: [
                                                    {id: '#TL', name: 'TL', value: 'TL'},
                                                    {id: '#EUR', name: 'EUR', value: 'EUR'},
                                                    {id: '#USD', name: 'USD', value: 'USD'}
                                                ]}
                                        ]}
                                ]}
                        ]}
            ]}
        ]
    },
    resizeAction: function (data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function () {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function (fields, data, elem) {
        var itm;
        itm = fields.currency.getItemById('#' + data.content.currency);
        fields.currency.selectItem(itm);
        fields.user_basket.setText(data.content.user_basket);
        fields.payment_amount.setText(data.content.payment_amount);
        fields.merchant_id.setText(data.content.merchant_id);
        fields.merchant_key.setText(data.content.merchant_key);
        fields.merchant_salt.setText(data.content.merchant_salt);
    },
    applyAction: function (fields, data, elem) {
        var itm;
        itm = fields.currency.getSelectedItem();
        data.content.currency = itm.getOriginal().value;
        data.content.user_basket = fields.user_basket.getText();
        data.content.paymemt_amount = fields.payment_amount.getText();
        data.content.merchant_id = fields.merchant_id.getText();
        data.content.merchant_key = fields.merchant_key.getText();
        data.content.merchant_salt = fields.merchant_salt.getText();
    },
    loadAction: function (data) {
        if (!data.content.user_basket)
            data.content.user_basket = 'Items description';
        if (!data.content.payment_amount)
            data.content.payment_amount = '129.99';
        if (!data.content.currency)
            data.content.currency = 'TL';
        if (!data.content.merchant_id)
            data.content.merchant_id = 'XXXXXX';
        if (!data.content.merchant_key)
            data.content.merchant_key = 'YYYYYYYYYYYYYY';
        if (!data.content.merchant_salt)
            data.content.merchant_salt = 'ZZZZZZZZZZZZZZ';

    }
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"coinpayments","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/coinpayments","pluginUri":"plugins\/coinpayments","customConfiguration":null};
PluginWrapper._config.id = 'coinpayments';
PluginWrapper._config.baseUri = "plugins\/coinpayments";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n\n{{#isPublished}}\n<div class=\"modal fade\" id=\"coinpaymentsModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\" id=\"myModalLabel\">CoinPayments<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n                <form id=\"coinpaymentsForm_{{id}}\" method=\"post\" action=\"\" data-gateway-id=\"Coinpayments\">\n                    <div class=\"form-group\">\n                        <label>{{\"Email\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n                        <input type=\"text\" class=\"form-control\" name=\"email\" id=\"email_{{id}}\" value=\"\" required=\"required\" \/>\n                    <\/div>\n                    <div class=\"form-group\">\n                        <label>{{\"Coin\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n                        <div id=\"coinsUpdate_{{id}}\"><\/div>\n                        <select class=\"form-control\" id=\"coin_{{id}}\" name=\"coin\" required=\"required\" style=\"display: none;\">\n                        <\/select>\n                    <\/div>\n                    <div class=\"form-group\">\n                        <label>{{\"Price\" | tr}}:<\/label>\n                        <span id=\"price_{{id}}\"><\/span>\n                        <strong id=\"userCoin_{{id}}\"><\/strong>\n                        <div id=\"priceChanged_{{id}}\" style=\"display: none;\"><\/div>\n                    <\/div>\n                    {{^content.store}}\n                    {{\/content.store}}\n                    {{#content.store}}\n                    <input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n                    <input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n                    <input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n                    <input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n                    <input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n                    <input class=\"hidden\" type=\"submit\"\/>\n                   {{\/content.store}}\n                <\/form>\n                <div id=\"coinpaymentsCheckoutRender_{{id}}\"><\/div>\n                <div id=\"coinpaymentsError_{{id}}\" class=\"alert alert-danger\"><\/div>\n\n            <\/div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n                <button id=\"coinpaymentsBackBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"showModal_{{id}}()\">{{\"Back\" | tr}}<\/button>\n                {{^content.store}}\n                <button id=\"coinpaymentsNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startPaymentFlow_{{id}}()\">{{\"Pay\" | tr}}<\/button>\n                {{\/content.store}}\n                {{#content.store}}\n                <button id=\"coinpaymentsNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startStorePaymentFlow_{{id}}()\">{{\"Pay\" | tr}}<\/button>\n                {{\/content.store}}\n\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div>\n{{{requireService}}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/coinpayments/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'DropdownBox', 'TextField',  'UIButton', 'store/StoreModule', 'core/BuilderConfig' ], function (PropertyTypeModule, DropdownBox, TextField, UIButton, StoreModule, BuilderConfig) {

var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
var PropertyType = PropertyTypeModule.PropertyType;
var TextField = TextField.TextField;
var DropdownBox = DropdownBox.DropdownBox;

var publicKey = new PropertyType("CoinPayments/publicKey", PropertyTypeAccess.User, true, __('Public Key'), TextField, null, {
    placeholder: ''
});
var privateKey = new PropertyType("CoinPayments/privateKey", PropertyTypeAccess.User, true, __('Private Key'), TextField, null, {
    placeholder: '',
    password: true
});
var Price = new PropertyType("CoinPayments/Price", PropertyTypeAccess.User, true, __('Price'), TextField, null, {
    placeholder: ''
}).inline(6);
var Coin = new PropertyType("CoinPayments/Coin", PropertyTypeAccess.User, true, __("Coin"), DropdownBox, null, {
    dropdownWidth: 145
}).inline(6);
var coinsButton = new PropertyType("CoinPayments/coinsButton", PropertyTypeAccess.User, true, '', UIButton.UIButton);

var coinOptions = [];
function loadCoins(publicKey, privateKey, button, callback) {
    if (button !== null) {
        button.attr('disabled', 'disabled');
        button.find('i').removeClass('fa-refresh').addClass('fa-spinner fa-spin');
    }


    let url = BuilderConfig.wbConfig.getLnUrl('store/coinpayments-get-coins');
    $.post(url, {
        privateKey: privateKey,
        publicKey: publicKey
    }, (data) => {

        if (button !== null) {
            button.removeAttr('disabled');
            button.find('i').removeClass('fa-spinner fa-spin').addClass('fa-refresh');
        }

        if (data?.error) {
            alert(data.error);
            return;
        }
        if (data?.results) {
            coinOptions = [];
            for (let item of data.results) {
                coinOptions.push({id: item, name: item});
            }
            if (typeof callback === 'function') {
                callback();
            }
        }
    });
};


PropertyType.setSortOrder('CoinPayments', 1);


var Globals = {
    getDefaultStyles: function(isStore) {
		var styles = {
            button_color: '#fafafa',
            button_border: {
                color: '#fff',
                style: 'solid',
                weight: 1,
                css: { border: '1px solid #fff' },
                cssRaw: 'border: 1px solid #fff'
            },
            logo: 'coinpayments-dark.svg',
            font_family: 'Arial',
            font_size: 12,
            label_color: '#949494'
		};
        return isStore ? styles : $.extend(true, styles, {
            button_label: __('Pay with %s').replace('%s', ''),
            showlogo: true,
            logo_width: 110,
            button_padding: 4
        });
    },
	getLogosList: function() {
		return [
			{id: 'coinpayments-dark.svg', name: 'coloured'},
            {id: 'coinpayments-black.svg', name: 'black'},
            {id: 'coinpayments-light.svg', name: 'light'},
            {id: 'coinpayments-white.svg', name: 'white'}
		];
	}
};


ElementRegister.registerPaymentGateway({
    name: 'CoinPayments',
    id: 'coinpayments',
    pageUrl: 'https://www.coinpayments.net/',
    keyField: __('Public Key'),
    keyFieldId: 'publicKey',
    keyField2: __('Private Key'),
    keyField2Id: 'privateKey',
    keyField3: __('Coin'),
    keyField3Id: 'coin',
    keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,6], children: [
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Public Key')},
		    {type: 'TextField', placeholder: __('Public Key'), id: 'key'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Private Key')},
		    {type: 'TextField', placeholder: __('Private Key'), password: true, id: 'key2'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', css: {marginTop: '5px'}, text: __('Coin')},
            {type: 'TextField', id: 'key3', css: {display: 'none'} },
		    {type: 'DropdownBox', placeholder: __('Coin'), id: 'key4', init: function(def, fields) {
                setTimeout(() => {
                    if (!coinOptions.length) {
                        loadCoins(fields.key.getValue(), fields.key2.getValue(), fields.updateCoins.getElem(), () => {
                            fields.key4.setOptions(coinOptions);
                            if (fields.key3.getValue()) {
                                fields.key4.setValue(fields.key3.getValue());
                            }
                        });
                    }
                    else if (coinOptions.length) {
                        fields.key4.setOptions(coinOptions);
                        if (fields.key3.getValue()) {
                            fields.key4.setValue(fields.key3.getValue());
                        }
                    }
                }, 100);
            }, change: function(fields) {
                fields.key3.setValue(this.getValue());
            }},
        ]},
        {type: 'VerticalLayout', css: {marginTop: '20px'}, children: [
            {type: 'Button', text: __('Update list of coins'), id: 'updateCoins', icon: 'fa fa-refresh', click: (e, fields) => {
                loadCoins(fields.key.getValue(), fields.key2.getValue(), $(e.target), () => {
                    fields.key4.setOptions(coinOptions);
                    if (fields.key3.getValue()) {
                        fields.key4.setValue(fields.key3.getValue());
                    }
                });
            }},
        ]},
	]},
    priceFieldId: 'price',
    
    defaultStyles: Globals.getDefaultStyles(true),
    styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'coinpayments', true),
    globalVars: ['publicKey', 'privateKey', 'coin', 'price'],
    useStylesInStoreCart: true,
    logos: Globals.getLogosList(),
    forceActive: true
});

PluginWrapper.registerPlugin('coinpayments', {
    name: 'CoinPayments',
    element: {
        minSize: {width: 100, height: 50},
        defaultSize: {width: 160, height: 81},
        resizable: true
    },

    properties: PluginWrapper.paymentGatewayStylePropertiesDef([
        {id: 'publicKey', type: publicKey,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.publicKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Key')));
                return opts;
            },
            get: function(data) { return data.content.publicKey; },
            set: function(value, data) {
                data.content.publicKey = value;
            }
        },
        {id: 'privateKey', type: privateKey,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.privateKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Private Key')));
                return opts;
            },
            get: function(data) { return data.content.privateKey; },
            set: function(value, data) {
                data.content.privateKey = value;
            }
        },
        {
            id: "coinsButton",
            type: coinsButton,
            uiComponentOptions: function (elem, opts) {
              var thisClass = this;
    
              return Object.assign({}, opts,{
                enabled: false,
                loading: false,
                label: __("Update list of coins"),
                icon: 'fa fa-refresh',
                click: function () {
                    let publicKey = thisClass.getPropertyComponent('publicKey').getValue();
                    let privateKey = thisClass.getPropertyComponent('privateKey').getValue();
                    let coin = thisClass.getPropertyComponent('Coin').getValue();
                    let CoinDropdown = thisClass.getPropertyComponent('Coin');
                    let button = thisClass.getPropertyComponent('coinsButton').getElem();
                    loadCoins(publicKey, privateKey, button, () => {
                        if (coinOptions.length) {
                            CoinDropdown.setOptions(coinOptions);
                            CoinDropdown.setValue(coin);
                        }
                    });
                }
              });
            },
            get: function (data) {},
            set: function (value, data) {},
          },

        {id: 'Coin', type: Coin,
            uiComponentOptions: (data, opts) => {
                return {
                    options: coinOptions
                };
            },
            get: function(data) { return data.content.coin; },
            set: function(value, data) {
                data.content.coin = value;
            }
        },
        {id: 'price', type: Price,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                return opts;
            },
            get: function(data) { return data.content.price; },
            validate: function(value) {
                if (/^[\d.,]+$/.test(value)) {
                    return '';
                } else {
                    return (__('Incorrect format'));
                }
            },
            set: function(value, data) {
                data.content.price = value;
            }
        }
    ], Globals.getLogosList(), 'coinpayments'),

    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Public Key'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.publicKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'publicKey'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('privateKey'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.privateKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Private Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'privateKey', password: true}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Coin'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.oin ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coin')));
                                        return opts;
                                    }},
                                    {type: 'DropdownBox', id: 'Coin', options: []}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Price'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'price'}
                                ]
                            },
                        ]
                    }
                ]
            },
            PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'coinpayments'),
        ]
    },

    openAction: function (fields, data, elem) {
        fields.publicKey.setValue(data.content.publicKey);
        fields.privateKey.setValue(data.content.privateKey);
        fields.coin.setValue(data.content.coin);
        fields.price.setValue(data.content.price);
        PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.publicKey = fields.publicKey.getValue();
        data.content.privateKey = fields.privateKey.getValue();
        data.content.coin = fields.coin.getValue();
        data.content.price = fields.price.getValue();
        PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
    },
    loadAction: function (data) {
        data.content.__globalVars = ['publicKey', 'privateKey', 'coin', 'price'];
        if (!data.content.publicKey)
            data.content.publicKey = '';
        if (!data.content.privateKey)
            data.content.privateKey = '';
        if (!data.content.coin)
            data.content.coin = '';
        if(!data.content.price)
            data.content.price = '1';
        if (['logo.svg'].indexOf(data.content.logo) > -1) {
            data.content.logo = 'coinpayments-dark.svg';
        }
        PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());

        if (!coinOptions.length) {
            loadCoins(data.content.publicKey, data.content.privateKey, null, () => {
                let CoinDropdown = this.getPropertyComponent('Coin');
                if (CoinDropdown) {
                    CoinDropdown.setOptions(coinOptions);
                    if (data.content.coin) {
                        CoinDropdown.setValue(data.content.coin);
                    }
                }
            });
        }
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('publicKey');
			if (component) component.focus();
		}, 50);
	}
});

});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"payumoney","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/payumoney","pluginUri":"plugins\/payumoney","customConfiguration":null};
PluginWrapper._config.id = 'payumoney';
PluginWrapper._config.baseUri = "plugins\/payumoney";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/payumoney\/main.png";
PluginWrapper._config.template = "<form method=\"post\" action=\"https:\/\/secure.payu.in\/_payment\" data-gateway-id=\"Payumoney\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"key\" value=\"{{content.key}}\" \/>\n\t<input type=\"hidden\" name=\"productinfo\" value=\"{{content.productinfo}}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"txnid\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"surl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"furl\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n\t<input type=\"hidden\" name=\"service_provider\" value=\"payu_paisa\" \/>\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/payumoney/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: "#cccccc",
				style: 'solid',
				weight: 1,
				differ: false,
				css: "1px solid #cccccc",
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'payumoney_color.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'payumoney_color.svg', name: 'coloured'},
			{id: 'payumoney_black.svg', name: 'black'},
			{id: 'payumoney_dark.svg', name: 'dark'},
			{id: 'payumoney_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'PayUmoney',
	id: 'payumoney',
	pageUrl: 'https://www.payumoney.com/',
	keyField: __('Key'),
	keyFieldId: 'key',
	keyField2: __('Salt'),
	keyField2Id: 'salt',
	titleFieldId: 'label',
	nameFieldId: 'productinfo',
	priceFieldId: 'amount',
	globalVars: ['key', 'salt'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payumoney', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('payumoney', {
	name: 'PayUmoney',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'productinfo', type: 'PayumoneyProductInfo',
			get: function(data) { return data.content.productinfo; },
			set: function(value, data) {
				data.content.productinfo = value;
			}
		},
		{id: 'key', type: 'PayumoneyKey', helpText: __("Unique merchant key provided by PayUmoney"),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Key')));
				return opts;
			},
			get: function(data) { return data.content.key; },
			set: function(value, data) {
				data.content.key = value;
			}
		},
		{id: 'salt', type: 'PayumoneySalt', helpText: __("Merchant salt as provided by PayUmoney"),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.salt ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Salt')));
				return opts;
			},
			get: function(data) { return data.content.salt; },
			set: function(value, data) {
				data.content.salt = value;
			}
		},
		{id: 'amount', type: 'PayumoneyAmount', helpText: __("Amount to be transferred") + ', INR',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'payumoney'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [9, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'productinfo'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', INR'},
							{type: 'TextField', id: 'amount'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Key'), helpText: __("Unique merchant key provided by PayUmoney"), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Key')));
								return opts;
							}},
							{type: 'TextField', id: 'key'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Salt'), helpText: __("Merchant salt as provided by PayUmoney"), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.salt ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Salt')));
								return opts;
							}},
							{type: 'TextField', id: 'salt'}
						]}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payumoney')
		]
	},
	openAction: function (fields, data, elem) {
		fields.productinfo.setText(data.content.productinfo);
		fields.amount.setText(data.content.amount);
		fields.key.setText(data.content.key);
		fields.salt.setText(data.content.salt);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.productinfo = fields.productinfo.getText();
		data.content.amount = fields.amount.getText();
		data.content.key = fields.key.getText();
		data.content.salt = fields.salt.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.productinfo) data.content.productinfo = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.key) data.content.key = '';
		if (!data.content.salt) data.content.salt = '';
		if (['payumoney.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'payumoney_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('key');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"payu","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/payu","pluginUri":"plugins\/payu","customConfiguration":null};
PluginWrapper._config.id = 'payu';
PluginWrapper._config.baseUri = "plugins\/payu";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/payu\/main.png";
PluginWrapper._config.template = "<form method=\"post\" action=\"https:\/\/secure.payu.com\/api\/v2_1\/orders\"{{^content.store}} target=\"_blank\"{{\/content.store}} data-gateway-id=\"Payu\" style=\"width: 100%; height: 100%;\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"merchantPosId\" value=\"{{content.merchantPosId}}\" \/>\n\t<input type=\"hidden\" name=\"currencyCode\" value=\"{{content.currencyCode}}\" \/>\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.productName}}\" \/>\n\t<input type=\"hidden\" name=\"products[0].name\" value=\"{{content.productName}}\" \/>\n\t<input type=\"hidden\" name=\"products[0].unitPrice\" value=\"{{content.productPrice}}\" data-fixed-decimal=\"0\" data-multiplier=\"100\" \/>\n\t<input type=\"hidden\" name=\"products[0].quantity\" value=\"1\" \/>\n\t<input type=\"hidden\" name=\"totalAmount\" value=\"{{content.productPrice}}\" data-fixed-decimal=\"0\" data-multiplier=\"100\" \/>\n\t<input type=\"hidden\" name=\"extOrderId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"notifyUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"continueUrl\" value=\"{returnUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/payu/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: "#cccccc",
				style: 'solid',
				weight: 1,
				differ: false,
				css: "1px solid #cccccc",
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'payu_color.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'payu_color.svg', name: 'coloured'},
			{id: 'payu_black.svg', name: 'black'},
			{id: 'payu_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'PayU',
	id: 'payu',
	pageUrl: 'https://corporate.payu.com/',
	keyField: __('POS identifier'),
	keyFieldId: 'merchantPosId',
	keyField2: __('Private Key'),
	keyField2Id: 'privateKey',
	titleFieldId: 'label',
	nameFieldId: 'productName,description',
	priceFieldId: 'productPrice,totalAmount',
	currencyFieldId: 'currencyCode',
	globalVars: ['merchantPosId', 'privateKey'],
	defaultStyles: Globals.getDefaultStyles(true),
	useStylesInStoreCart: true,
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payu', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('payu', {
	name: 'PayU',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'productName', type: 'PayuProductName',
			get: function(data) { return data.content.productName; },
			set: function(value, data) {
				data.content.productName = value;
			}
		},
		{id: 'merchantPosId', type: 'PayuMerchantPosId', helpText: __("POS identifier provided by PayU"),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantPosId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('POS identifier')));
				return opts;
			},
			get: function(data) { return data.content.merchantPosId; },
			set: function(value, data) {
				data.content.merchantPosId = value;
			}
		},
		{id: 'privateKey', type: 'PayuPrivateKey', helpText: __("Available in PayU Panel Manager as Second key (MD5)"),
			get: function(data) { return data.content.privateKey; },
			set: function(value, data) {
				data.content.privateKey = value;
			}
		},
		{id: 'productPrice', type: 'PayuProductPrice', helpText: __("Amount to be transferred"),
			get: function(data) { return data.content.productPrice; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.productPrice = value;
			}
		},
		{id: 'currencyCode', type: 'PayuCurrencyCode',
			get: function(data) { return data.content.currencyCode; },
			set: function(value, data) {
				data.content.currencyCode = value;
			}
		},
	], Globals.getLogosList(), 'payu'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'productName'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currencyCode', options: [
								{id: '#AED', name: 'AED', value: 'AED'},
								{id: '#ALL', name: 'ALL', value: 'ALL'},
								{id: '#AMD', name: 'AMD', value: 'AMD'},
								{id: '#ARS', name: 'ARS', value: 'ARS'},
								{id: '#AUD', name: 'AUD', value: 'AUD'},
								{id: '#AZN', name: 'AZN', value: 'AZN'},
								{id: '#BAM', name: 'BAM', value: 'BAM'},
								{id: '#BDT', name: 'BDT', value: 'BDT'},
								{id: '#BGN', name: 'BGN', value: 'BGN'},
								{id: '#BHD', name: 'BHD', value: 'BHD'},
								{id: '#BOB', name: 'BOB', value: 'BOB'},
								{id: '#BRL', name: 'BRL', value: 'BRL'},
								{id: '#BYN', name: 'BYN', value: 'BYN'},
								{id: '#CAD', name: 'CAD', value: 'CAD'},
								{id: '#CHF', name: 'CHF', value: 'CHF'},
								{id: '#CLP', name: 'CLP', value: 'CLP'},
								{id: '#CNY', name: 'CNY', value: 'CNY'},
								{id: '#COP', name: 'COP', value: 'COP'},
								{id: '#CRC', name: 'CRC', value: 'CRC'},
								{id: '#CVE', name: 'CVE', value: 'CVE'},
								{id: '#CZK', name: 'CZK', value: 'CZK'},
								{id: '#DKK', name: 'DKK', value: 'DKK'},
								{id: '#DOP', name: 'DOP', value: 'DOP'},
								{id: '#DZD', name: 'DZD', value: 'DZD'},
								{id: '#EGP', name: 'EGP', value: 'EGP'},
								{id: '#ETB', name: 'ETB', value: 'ETB'},
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#GBP', name: 'GBP', value: 'GBP'},
								{id: '#GEL', name: 'GEL', value: 'GEL'},
								{id: '#GNF', name: 'GNF', value: 'GNF'},
								{id: '#GTQ', name: 'GTQ', value: 'GTQ'},
								{id: '#HKD', name: 'HKD', value: 'HKD'},
								{id: '#HNL', name: 'HNL', value: 'HNL'},
								{id: '#HRK', name: 'HRK', value: 'HRK'},
								{id: '#HUF', name: 'HUF', value: 'HUF'},
								{id: '#IDR', name: 'IDR', value: 'IDR'},
								{id: '#ILS', name: 'ILS', value: 'ILS'},
								{id: '#INR', name: 'INR', value: 'INR'},
								{id: '#IQD', name: 'IQD', value: 'IQD'},
								{id: '#IRR', name: 'IRR', value: 'IRR'},
								{id: '#ISK', name: 'ISK', value: 'ISK'},
								{id: '#JOD', name: 'JOD', value: 'JOD'},
								{id: '#JPY', name: 'JPY', value: 'JPY'},
								{id: '#KES', name: 'KES', value: 'KES'},
								{id: '#KGS', name: 'KGS', value: 'KGS'},
								{id: '#KRW', name: 'KRW', value: 'KRW'},
								{id: '#KWD', name: 'KWD', value: 'KWD'},
								{id: '#KZT', name: 'KZT', value: 'KZT'},
								{id: '#LBP', name: 'LBP', value: 'LBP'},
								{id: '#LKR', name: 'LKR', value: 'LKR'},
								{id: '#MAD', name: 'MAD', value: 'MAD'},
								{id: '#MDL', name: 'MDL', value: 'MDL'},
								{id: '#MGA', name: 'MGA', value: 'MGA'},
								{id: '#MKD', name: 'MKD', value: 'MKD'},
								{id: '#MNT', name: 'MNT', value: 'MNT'},
								{id: '#MXN', name: 'MXN', value: 'MXN'},
								{id: '#MYR', name: 'MYR', value: 'MYR'},
								{id: '#MZN', name: 'MZN', value: 'MZN'},
								{id: '#NGN', name: 'NGN', value: 'NGN'},
								{id: '#NIO', name: 'NIO', value: 'NIO'},
								{id: '#NOK', name: 'NOK', value: 'NOK'},
								{id: '#NZD', name: 'NZD', value: 'NZD'},
								{id: '#OMR', name: 'OMR', value: 'OMR'},
								{id: '#PEN', name: 'PEN', value: 'PEN'},
								{id: '#PHP', name: 'PHP', value: 'PHP'},
								{id: '#PKR', name: 'PKR', value: 'PKR'},
								{id: '#PLN', name: 'PLN', value: 'PLN'},
								{id: '#PYG', name: 'PYG', value: 'PYG'},
								{id: '#QAR', name: 'QAR', value: 'QAR'},
								{id: '#RON', name: 'RON', value: 'RON'},
								{id: '#RSD', name: 'RSD', value: 'RSD'},
								{id: '#RUB', name: 'RUB', value: 'RUB'},
								{id: '#SAR', name: 'SAR', value: 'SAR'},
								{id: '#SEK', name: 'SEK', value: 'SEK'},
								{id: '#SGD', name: 'SGD', value: 'SGD'},
								{id: '#SYP', name: 'SYP', value: 'SYP'},
								{id: '#THB', name: 'THB', value: 'THB'},
								{id: '#TJS', name: 'TJS', value: 'TJS'},
								{id: '#TND', name: 'TND', value: 'TND'},
								{id: '#TRY', name: 'TRY', value: 'TRY'},
								{id: '#TWD', name: 'TWD', value: 'TWD'},
								{id: '#TZS', name: 'TZS', value: 'TZS'},
								{id: '#UAH', name: 'UAH', value: 'UAH'},
								{id: '#UGX', name: 'UGX', value: 'UGX'},
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#UYU', name: 'UYU', value: 'UYU'},
								{id: '#UZS', name: 'UZS', value: 'UZS'},
								{id: '#VEF', name: 'VEF', value: 'VEF'},
								{id: '#VND', name: 'VND', value: 'VND'},
								{id: '#XAF', name: 'XAF', value: 'XAF'},
								{id: '#XOF', name: 'XOF', value: 'XOF'},
								{id: '#YER', name: 'YER', value: 'YER'},
								{id: '#ZAR', name: 'ZAR', value: 'ZAR'}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred")},
							{type: 'TextField', id: 'productPrice'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('POS identifier'), helpText: __("POS identifier provided by PayU"), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.merchantPosId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('POS identifier')));
								return opts;
							}},
							{type: 'TextField', id: 'merchantPosId'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Private Key'), helpText: __("Available in PayU Panel Manager as Second key (MD5)")},
							{type: 'TextField', id: 'privateKey'}
						]}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'payu')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.productName.setText(data.content.productName);
		fields.productPrice.setText(data.content.productPrice);
		itm = fields.currencyCode.getItemById('#' + data.content.currencyCode);
		fields.currencyCode.selectItem(itm);
		fields.merchantPosId.setText(data.content.merchantPosId);
		fields.privateKey.setText(data.content.privateKey);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.productName = fields.productName.getText();
		data.content.productPrice = fields.productPrice.getText();
		itm = fields.currencyCode.getSelectedItem();
		data.content.currencyCode = itm.getOriginal().value;
		data.content.merchantPosId = fields.merchantPosId.getText();
		data.content.privateKey  = fields.privateKey .getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.productName) data.content.productName = '';
		if (!data.content.productPrice) data.content.productPrice = '1';
		if (!data.content.currencyCode) data.content.currencyCode = 'USD';
		if (!data.content.merchantPosId) data.content.merchantPosId = '';
		if (!data.content.privateKey) data.content.privateKey = '';
		if (['payu.png', 'payu-logo.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'payu_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantPosId');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"default_bubble_ui","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/default_bubble_ui","pluginUri":"plugins\/default_bubble_ui","customConfiguration":{}};
PluginWrapper._config.id = 'default_bubble_ui';
PluginWrapper._config.baseUri = "plugins\/default_bubble_ui";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "<div id=\"builder_canvas\"><\/div>\n<div id=\"elements_toolbar\" class=\"spbbl-collapsed\"><\/div>\n<div id=\"builder_toolbar\"><\/div>\n<div id=\"builder_notification\" class=\"hidden\"><\/div>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper._config.fileInfo = {"main.min.css":{"time":1755156796}};
var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__spreadArray=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var n,i=0,l=t.length;i<l;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};define("default_bubble_ui/SPBblBuilderNotification",["require","exports","BuilderEvent","Service"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblBuilderNotification=void 0,o=__importDefault(o);var i=function(){function e(e,t){var o=this;this.builderBannerOriginalBottom=null,this.visible=!0,this.tempHidden=!1,this.empty=!0,this.builder=e,this.elem=t,this.content=$("<div/>"),this.closeButton=$('<button class="close">&times;</button>').on("click touchend",function(){return o.setVisible(!1)}),this.elem.append(this.content,this.closeButton),setTimeout(function(){var e=o.getBuilderImageBanner();e&&(o.builderBannerOriginalBottom=parseInt(e.css("bottom")),e.css("bottom",o.builderBannerOriginalBottom+t.outerHeight()+"px"))},500),n.GlobalEvents.on("notification.changed",function(e){o.setMessage(e.message,e.isHtml)}),n.GlobalEvents.on("help.show help.hide help.playershow help.playerhide preview.show preview.hide",function(e){o.tempHidden=e.visible,o.updateVisibility()})}return e.prototype.getBuilderImageBanner=function(){return o.default.RemoteLoginDialog.getImageBanner()},e.prototype.setMessage=function(e,t){return void 0===t&&(t=!1),this.empty=!e||(t||"string"!=typeof e?this.content.empty().append(e):this.content.text(e),!1),this.updateVisibility()},e.prototype.setVisible=function(e){return this.visible=e,this.updateVisibility()},e.prototype.updateVisibility=function(){var e=this.getBuilderImageBanner();return e&&e.css("bottom",this.builderBannerOriginalBottom+"px"),!this.visible||this.tempHidden||this.empty?this.elem.addClass("hidden"):this.elem.removeClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e}();t.SPBblBuilderNotification=i}),define("default_bubble_ui/SPBblMenuNode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblMenuNode=void 0;var o=function(){function e(){this.visible=!0,this.enabled=!0,this.available=!0,this.locked=!1,this.iconVisible=!1,this.iconClass=null,this.textVisible=!1,this.isActive=!1,this.isChecked=!1,this.isPremium=!1,this.autoHideLabel=!1,this.elem=$('<div class="spbbl-menu-node"/>'),this.content=$('<span class="spbbl-mn-content"/>'),this.icon=$('<i class="ico-tb-i"/>'),this.text=$('<span class="spbbl-mn-text"/>'),this.elem.append(this.content)}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return(this.visible=e)?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this.elem.trigger(e?"toolbaritem.show":"toolbaritem.hide"),this},e.prototype.getVisible=function(){return this.visible},e.prototype.getIcon=function(){return this.iconClass},e.prototype.setIcon=function(e){return null===(this.iconClass=e)?this.iconVisible&&(this.iconVisible=!1,this.icon.detach()):(this.icon.attr("class","ico-tb-i "+e),this.iconVisible||(this.iconVisible=!0,this.content.prepend(this.icon))),this},e.prototype.setIconEnabled=function(e){return e?this.elem.addClass("enabled"):this.elem.removeClass("enabled"),this},e.prototype.setText=function(e){return null===e?this.textVisible&&(this.textVisible=!1,this.text.detach()):(this.text.empty().append(e),this.textVisible||(this.textVisible=!0,this.iconVisible?this.text.insertAfter(this.icon):this.content.prepend(this.text))),this},e.prototype.getTextElem=function(){return this.text},e.prototype.setTooltipMark=function(e,t){void 0===t&&(t="");var o=$('<span class="badge wb_badge_help" >?</span>');return t&&""!=t&&o.attr("data-placement",t),this.content.after(o.attr("data-original-title",e)),this},e.prototype.setTooltip=function(e){return this.content.attr("title",e),this},e.prototype.setActive=function(e){return e?this.elem.addClass("active"):this.elem.removeClass("active"),this.isActive=e,this},e.prototype.getActive=function(){return this.isActive},e.prototype.setEnabled=function(e){return this.enabled=e,this.updateStateStyle(),this},e.prototype.setAvailable=function(e){return this.available=e,this.updateStateStyle(),this},e.prototype.setLocked=function(e){return this.locked=e,this.updateStateStyle(),this},e.prototype.getEnabled=function(){return this.enabled},e.prototype.getAvailable=function(){return this.available},e.prototype.getLocked=function(){return this.locked},e.prototype.updateStateStyle=function(){return this.enabled&&this.available&&!this.locked?this.elem.removeClass("disabled"):this.elem.addClass("disabled"),this},e.prototype.addSpacer=function(){return $('<span class="spacer"></span>').insertAfter(this.elem.find(".spbbl-mn-text")),this},e.prototype.setAutoHideLabel=function(e){return e==this.autoHideLabel||((this.autoHideLabel=e)?this.text.addClass("spbbl-mobile-hidden"):this.text.removeClass("spbbl-mobile-hidden")),this},e.prototype.getPremium=function(){return this.isPremium},e.prototype.setPremium=function(e,t){return void 0===t&&(t=""),this.isPremium===e||(this.isPremium=e,this.isPremium?this.elem.append($('<i class="premium-marker fa fa-star '+t+'"></i>')):this.elem.children(".premium-marker").remove()),this},e}();t.SPBblMenuNode=o}),define("default_bubble_ui/SPBblMenuItem",["require","exports","default_bubble_ui/SPBblMenuNode","PluginApi/PluginTranslation","default_bubble_ui/SPBblMenu"],function(e,t,o,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblMenuItem=void 0;var n=function(l){function s(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);var i=l.call(this)||this;return i.switcherBlock=o,i.builder=n,i.clickCallback=null,i.switchCallback=null,i.data=null,i.switchVisible=!1,i.isDraggable=!1,i.dots=null,i.setIcon(e).setText(t),i.name=null!==t?i.text.text():"",i.name&&i.setTooltip(i.name),i.switch=$('<div class="spbbl-mn-switch"><input type="checkbox" class="spbbl-switch-input" id="spbbl-ims-'+s.nextSwitchId+'" /><label for="spbbl-ims-'+s.nextSwitchId+++'" class="spbbl-switch-label spbbl-no-text"></label></div>'),o&&n&&i.switch.prepend($("<span>"+t+(t==(0,a.__)("Auto Layout")?"":" "+(0,a.__)("version"))+"</span>")),i.switch.find("input").on("change",function(e){if(s.isClickPrevented()||!i.getEnabled()||i.getLocked())return e.stopImmediatePropagation(),void e.preventDefault();i.isActive=$(e.target).is(":checked"),i.isChecked=$(e.target).is(":checked"),i.switchCallback&&i.switchCallback(i)}).on("click",function(e){if(s.isClickPrevented()||!i.getEnabled()||i.getLocked())return e.stopImmediatePropagation(),void e.preventDefault()}),i.elem.on("touchstart",function(e){s.isClickPrevented()||$(e.target).closest(".spbbl-mn-switch").length||(s.lastTouchedItem=i)}),i.elem.on("touchmove touchcancel",function(e){s.isClickPrevented()||$(e.target).closest(".spbbl-mn-switch").length||(s.lastTouchedItem=null)}),i.elem.on("touchend",function(e){s.isClickPrevented()||$(e.target).closest(".spbbl-mn-switch").length||s.lastTouchedItem===i&&(s.lastTouchedItem=null,e.stopImmediatePropagation(),e.preventDefault(),i.elem.trigger("click"))}),i.elem.on("click",function(e){s.isClickPrevented()||$(e.target).closest(".spbbl-mn-switch").length||(e.stopImmediatePropagation(),e.preventDefault(),i.getEnabled()&&!i.getLocked()&&(i.clickCallback?(r.SPBblMenu.closeAllDropDowns(),i.clickCallback(i)):i.switchVisible&&(i.setActive(!i.getActive()),i.switchCallback&&i.switchCallback(i))))}),i}return __extends(s,l),s.prototype.setDragable=function(e){if(this.isDraggable==e)return this;if(this.isDraggable=e){if(!this.dots){var t='<svg width="3" height="3"><circle cx="1.5" cy="1.5" r="1.5" fill="#919191"/></svg>';this.dots=$("<div>").addClass("spbbl-mn-dots").append($("<div>").append(t).append(t).append(t)).append($("<div>").append(t).append(t).append(t))}this.elem.addClass("spbbl-mn-draggable"),this.text.before(this.dots)}else this.dots&&this.dots.detach(),this.elem.removeClass("spbbl-mn-draggable");return this},s.isClickPrevented=function(){return s.preventClickUntil>(new Date).getTime()},s.preventClick=function(){s.preventClickUntil=(new Date).getTime()+250},s.prototype.onClick=function(e){return this.clickCallback=e,this},s.prototype.onSwitch=function(e){return this.switchCallback=e,this},s.prototype.setSwitchVisible=function(e){return this.switchVisible!=e&&((this.switchVisible=e)?(this.switcherBlock?this.switcherBlock.append(this.switch):this.content.append(this.switch),this.elem.addClass("spbbl-mn-has-switch")):(this.switch.detach(),this.elem.removeClass("spbbl-mn-has-switch"))),this},s.prototype.setActive=function(e){return this.isActive=e,l.prototype.setActive.call(this,e)},s.prototype.setChecked=function(e){return this.isChecked=e,this.switch.children("input").prop("checked",e),e?this.elem.addClass("checked"):this.elem.removeClass("checked"),this},s.prototype.getChecked=function(){return this.isChecked},s.prototype.setData=function(e){return this.data=e,this},s.prototype.getData=function(){return this.data},s.prototype.addCssClass=function(e){return this.elem.addClass(e),this},s.prototype.removeCssClass=function(e){return this.elem.removeClass(e),this},s.prototype.toggleCssClass=function(e){return this.elem.toggleClass(e),this},s.lastTouchedItem=null,s.nextSwitchId=0,s.preventClickUntil=0,s}(o.SPBblMenuNode);t.SPBblMenuItem=n}),define("default_bubble_ui/SPBblMenu",["require","exports","default_bubble_ui/SPBblMenuNode","default_bubble_ui/SPBblMenuItem","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,o,l,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblMenu=void 0;var i=function(t){function i(e){void 0===e&&(e=!1);var n=t.call(this)||this;n.searchBlockVisible=!1,n.footerContainer=null,n.footerVisible=!0,n.massAddMode=!1,n.items=[],n.inline=!1,n.oneRow=!0,n.caretVisible=!1,n.clickCallback=null;var s=n;return n.dropdown=$('<div class="spbbl-dropdown" title=""/>'),e&&(n.searchBlockVisible=!0,n.searchBlock=$("<div>").addClass("spbbl-dd-search").appendTo(n.dropdown),n.searchInput=$("<input>").addClass("form-control").attr("type","text").attr("placeholder",(0,a.__)("Search")).on("change keyup",function(e){27===e.keyCode&&(this.value="");for(var t=this.value.toLowerCase(),o=0,n=s.items;o<n.length;o++){var i=n[o];if(i){var l=0<=i.getTextElem().text().toLowerCase().indexOf(t);i.setVisible(l)}}}).appendTo(n.searchBlock)),n.itemContainer=$('<div class="spbbl-dd-item-container"/>'),n.dropdown.append($('<div class="spbbl-dd-scroll"/>').append(n.itemContainer)),n.elem.addClass("spbbl-mn-has-dropdown spbbl-dd-right").on("mouseover",function(e){var t=$(e.target);if(!(n.elem.is(".spbbl-over")||n.elem.is(".no-over")||t.closest(".spbbl-et-vertical").length)){var o=t.parents().addBack().filter(".spbbl-mn-has-dropdown");o.length<2&&(i.closeAllDropDowns(),o.each(function(){$(this).addClass("spbbl-over")}))}}).on("mouseout",function(e){$(e.target).closest(".spbbl-et-vertical").length||n.elem.is(".no-over")||n.elem.parents(".spbbl-dropdown").length||n.elem[0].contains(e.relatedTarget)||(l.SPBblMenuItem.preventClick(),n.elem.removeClass("spbbl-over ext-open"))}).on("touchstart",function(e){i.lastTouchedMenu=n}).on("touchmove touchcancel",function(e){i.lastTouchedMenu=null}).on("touchend",function(e){if(i.lastTouchedMenu===n){i.lastTouchedMenu=null,e.stopImmediatePropagation();try{e.preventDefault()}catch(e){}$(e.target).trigger("click")}}).on("click",function(e){var t=$(e.target);if(!n.elem.parent().is(".spbbl-side-collapse-btn")){if(n.elem.is(".spbbl-over")){var o=t.closest(".spbbl-dropdown,.spbbl-menu-node");if(o.length&&o[0]===n.elem[0])return e.preventDefault(),void n.elem.removeClass("spbbl-over ext-open").find(".spbbl-over").removeClass("spbbl-over ext-open-submenu");n.elem.removeClass("spbbl-over ext-open ext-open-submenu").find(".spbbl-over").removeClass("spbbl-over ext-open ext-open-submenu")}i.closeAllDropDowns(),$(e.target).parents().addBack().filter(".spbbl-mn-has-dropdown").each(function(){$(this).addClass("spbbl-over")})}}).append(n.dropdown,'<div class="spbbl-dd-arrow"/>'),n.caret=$('<span class="caret"></span>'),n.content.on("click",function(e){n.clickCallback&&!$(e.target).is(".caret-box")&&n.clickCallback.call(n)}),n}return __extends(i,t),i.firstInit=function(){i.firstInitDone||(i.firstInitDone=!0,$(document.body).on("touchstart",function(e){$(e.target).closest(".spbbl-has-dropdown").length||i.closeAllDropDowns()}),n.GlobalEvents.on("modal.show contextmenu.show",function(){i.closeAllDropDowns()}))},i.closeAllDropDowns=function(){$(document.body).trigger("close-all-dropdown"),$(".spbbl-over").removeClass("spbbl-over ext-open ext-open-submenu")},i.prototype.beginMassAddItems=function(){this.massAddMode=!0},i.prototype.endMassAddItems=function(){this.massAddMode=!1,this.updateSearchBlockVisibility()},i.prototype.updateSearchBlockVisibility=function(){if(this.searchBlock&&this.searchInput){this.searchInput.val("");var e=this.items.length>=i.minOptionsNumberForSearchShowing;if(this.searchBlockVisible!==e&&(this.searchBlockVisible=e,this.searchBlock.css("display",e?"block":"none"),!e))for(var t=0,o=this.items;t<o.length;t++){var n=o[t];n&&n.setVisible(!0)}}},i.prototype.clearItems=function(){return this.items=[],this.itemContainer.empty(),this},i.prototype.addItem=function(e,t){void 0===t&&(t=""),this.items.push(e);var o=e?e.getElem():$('<div class="spbbl-dropdown-separator"/>');return t&&o.addClass(t),this.itemContainer.append(o),this.massAddMode||this.updateSearchBlockVisibility(),this},i.prototype.setSeparatorForItemVisible=function(e,t){var o=this.items.indexOf(t),n=this.items.length;if(!(o<0)){var i=null;0==o&&1<n&&!this.items[o+1]?i=t.getElem().next():0<o&&!this.items[o-1]&&(n<=o+1||!this.items[o+1])&&(i=t.getElem().prev()),i&&(e?i.show():i.hide())}},i.prototype.getItems=function(){return this.items},i.prototype.addFooterItem=function(e){return e&&(this.footerContainer||(this.footerContainer=$('<div class="spbbl-dd-footer"></div>'),this.footerVisible||this.footerContainer.addClass("hidden"),this.dropdown.append(this.footerContainer)),this.footerContainer.append(e.getElem())),this},i.prototype.setFooterVisibility=function(e){return this.footerVisible=e,this.footerContainer&&(e?this.footerContainer.removeClass("hidden"):this.footerContainer.addClass("hidden")),this},i.prototype.setInline=function(e){return(this.inline=e)?this.elem.addClass("spbbl-dd-inline"):this.elem.removeClass("spbbl-dd-inline"),this},i.prototype.setOneRow=function(e){return(this.oneRow=e)?this.elem.addClass("spbbl-dd-onerow"):this.elem.removeClass("spbbl-dd-onerow"),this},i.prototype.getInline=function(){return this.inline},i.prototype.getOneRow=function(){return this.oneRow},i.prototype.setDropdownDirection=function(e){return this.elem.removeClass("spbbl-dd-left spbbl-dd-right").addClass("spbbl-dd-"+e),this},i.prototype.setCaretVisible=function(e,t,o,n){return void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=""),this.caretVisible!=e&&(this.caretVisible=e,""!==n&&this.caret.removeClass("caret").addClass("caret-c "+n),t&&this.caret.addClass("closely"),e?o?this.content.append($('<span class="caret-box"></span>').append(this.caret)):this.content.append(this.caret):(this.caret.detach(),this.content.find(".caret-box").detach())),this},i.prototype.setOpen=function(e){return e?this.elem.addClass("spbbl-over"):this.elem.removeClass("spbbl-over"),this},i.prototype.onClick=function(e){return this.clickCallback=e,this},i.lastTouchedMenu=null,i.minOptionsNumberForSearchShowing=8,i.firstInitDone=!1,i}(o.SPBblMenuNode);t.SPBblMenu=i}),define("default_bubble_ui/SPBblPageSelector",["require","exports","default_bubble_ui/SPBblMenu","BuilderEvent","default_bubble_ui/SPBblMenuItem","PluginApi/PluginTranslation","default_bubble_ui/SPBblMenuNode"],function(e,t,o,i,b,l,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblPageSelector=void 0;var s=function(n){function e(e,t){void 0===t&&(t=!1);var o=n.call(this,!0)||this;return o.builder=e,o.mobile=t,o.inPreview=!1,o.queueUpdateTimeout=0,o.elem.addClass("spbbl-page-selector"),o.setCaretVisible(!0,!1,!0),o.addFooterItem(new a(o.builder)),i.GlobalEvents.on("preview.show",function(e){o.inPreview=e.visible,o.updateVisibility()}),i.GlobalEvents.on("preview.hide",function(e){o.inPreview=e.visible,o.updateVisibility()}),i.GlobalEvents.on("page.load pages.changed anchors.changed",function(){o.queueUpdate(),o.updateVisibility()}),o.queueUpdate(),o.updateVisibility(),o}return __extends(e,n),e.prototype.updateVisibility=function(){this.setVisible((!this.inPreview||this.mobile)&&0<this.getItems().length),this.setFooterVisibility(!this.inPreview)},e.prototype.queueUpdate=function(){var e=this;this.queueUpdateTimeout&&clearTimeout(this.queueUpdateTimeout),this.queueUpdateTimeout=window.setTimeout(function(){e.queueUpdateTimeout=0,e.update(),e.updateVisibility()},1e3)},e.prototype.update=function(){this.clearItems();var e=this.builder.getSiteTree();this.beginMassAddItems();var t=this.buildTree(e);this.endMassAddItems();var o=t?t.name:(0,l.__)("Home");return this.mobile||this.setText($("<span>").append($("<span>").addClass("spbbl-selected-page-name").html(o))),this},e.prototype.buildTree=function(e,t){void 0===t&&(t=0);for(var o,n=null,i=!1,l=0,s=e;l<s.length;l++){var a=s[l];a.isServicePage&&!i&&(this.addItem(null),i=!0);var r="";for(o=t;0<o;o--)r+=a.isAnchor?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";"icon"in a&&a.icon?r+='<i class="'+a.icon+'"></i>':r+="&nbsp;",r+=a.name,this.addItem(new b.SPBblMenuItem(null,r).setTooltip(a.name).setData(a).setActive(a.isCurrent()).setAvailable(a.enabled).onClick(this.onPageSelect.bind(this)).addCssClass(a.isAnchor?"spbbl-anchor-link":"")),a.isCurrent()&&(n=a);var u=this.buildTree(a.children,t+1);u&&(n=u)}return n},e.prototype.onPageSelect=function(e){var t=e.getData();this.inPreview?t.preview():t.navigate()},e}(o.SPBblMenu);t.SPBblPageSelector=s;var a=function(n){function e(e){var t=n.call(this)||this;t.builder=e;var o=[];return t.elem.addClass("spbbl-ps-menu-buttons no-hover").on("click",function(){t.builder.showSitePagesDialog()}),t.setEnabled(!e.isEditingLocked()),i.GlobalEvents.on("builder.editing.changed",function(e){t.setEnabled(!e.editingLocked)}),o.push($('<span class="spbbl-inner-btn"><i class="fa fa-pencil"></i>'+(0,l.__)("Edit")+"</span>").attr("title",(0,l.__)("Edit"))),t.setText(o),t.setTooltip(""),t}return __extends(e,n),e}(n.SPBblMenuNode)}),define("default_bubble_ui/SPBblToolbarGroup",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblToolbarGroup=void 0;var o=function(){function e(){var e=this;this.visible=!0,this.elem=$('<div class="spbbl-tb-group" />').on("toolbaritem.show toolbaritem.hide",function(){e.update()}),this.items=[]}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return this.visible=e,this.update(),this},e.prototype.update=function(){var e=this.visible;if(e){e=!1;for(var t=0,o=this.items;t<o.length;t++){if(o[t].getVisible()){e=!0;break}}}return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.addItem=function(e){return this.items.push(e),this.elem.append(e.getElem()),this.update(),this},e.prototype.removeItem=function(e){var t=this.items.indexOf(e);return 0<=t&&(this.items.splice(t,1),e.getElem().remove(),this.update()),this},e.prototype.getItems=function(){return this.items},e}();t.SPBblToolbarGroup=o}),define("default_bubble_ui/SPBblPreviewModeSelector",["require","exports","default_bubble_ui/SPBblMenu","BuilderEvent","default_bubble_ui/SPBblMenuItem"],function(e,t,o,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblPreviewModeSelector=void 0;var n=function(s){function e(e){var i=s.call(this)||this;i.builder=e,i.modeButtons={},i.elem.addClass("spbbl-dd-inline");for(var t=0,o=__spreadArray([],e.getModes(),!0).sort(function(e,t){return t.width-e.width});t<o.length;t++){var n=o[t],l="tv"===n.id&&"function"==typeof e.getMaxPreviewWidth?"1200px+":n.width+"px";i.addItem(i.modeButtons[n.id]=new r.SPBblMenuItem("ico-tb-mode-"+n.id,l).setTooltip(n.name).onClick(i.onSelectMode.bind(i)).setData(n)),"tv"==n.id&&i.modeButtons[n.id].getElem().addClass("spbbl-hide-lt-wide"),"desktop"==n.id&&i.modeButtons[n.id].getElem().addClass("spbbl-hide-lt-desktop")}return a.GlobalEvents.on("preview.size.changed",function(e){var t=null,o=null;for(var n in i.modeButtons)i.modeButtons[n].getVisible()&&(i.modeButtons[n].getData().width<=e.width&&!t&&(t=i.modeButtons[n]),o=i.modeButtons[n]);for(var n in t||(t=o),i.modeButtons)i.modeButtons[n].setActive(i.modeButtons[n]===t)}),a.GlobalEvents.on("preview.show",function(e){i.update()}),a.GlobalEvents.on("modes.enabled.change",function(e){i.modeButtons.hasOwnProperty(e.mode)&&i.modeButtons[e.mode].setChecked(e.value)}),i}return __extends(e,s),e.prototype.onSelectMode=function(e){var t=e.getData(),o="tv"===t.id&&"function"==typeof this.builder.getMaxPreviewWidth?this.builder.getMaxPreviewWidth():t.width;this.builder.setPreviewWidth(o)},e.prototype.update=function(){for(var e=this.builder.getModes(),t=this.builder.getMinMode(),o=this.builder.getMaxMode(),n=0,i=e;n<i.length;n++){var l=i[n],s=this.modeButtons[l.id],a=(!t||0<=this.builder.compareModes(l.id,t))&&(!o||this.builder.compareModes(l.id,o)<=0);s.setVisible(a)}return this},e}(o.SPBblMenu);t.SPBblPreviewModeSelector=n}),define("default_bubble_ui/SPBblTemplateMenu",["require","exports","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblMenu","PluginApi/PluginTranslation"],function(e,t,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblTemplateMenu=void 0;var l=function(o){function e(e){var t=o.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setIcon("ico-tb-reset"),t.setText((0,i.__)("New")+"/"+(0,i.__)("Reset")),t.setCaretVisible(!0),t.addItem(t.functionButtonMap.new=new n.SPBblMenuItem(null,(0,i.__)("Change template")).setIcon("ico-change-template").onClick(function(){t.builder.showTemplateChooser()}).setVisible(t.builder.isTemplateSelectorVisible())),t.addItem(t.functionButtonMap.reset=new n.SPBblMenuItem(null,(0,i.__)("Reset")).setIcon("fa fa-refresh").onClick(function(){t.builder.resetSite(!0)}).setVisible(t.builder.isResetTemplateButtonVisible())),t.addItem(t.functionButtonMap.import=new n.SPBblMenuItem(null,(0,i.__)("Import")).setIcon("fa fa-download").onClick(function(){t.builder.showImportDialog()}).setEnabled(t.builder.isImportAvailable()).setVisible(t.builder.isImportVisible())),t}return __extends(e,o),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPBblMenu);t.SPBblTemplateMenu=l}),define("default_bubble_ui/SPBblLanguagesMenu",["require","exports","default_bubble_ui/SPBblMenu","PluginApi/PluginTranslation","default_bubble_ui/SPBblMenuItem"],function(e,t,o,b,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblLanguagesMenu=void 0;var n=function(r){function u(e){var t=r.call(this)||this;t.builder=e,t.setTooltip((0,b.__)("Language")),t.setCaretVisible(!0,!0);var o,n=t.builder.getLanguage();t.setIcon(u.getLanguageIcon(n));for(var i=0,l=t.builder.getLanguages();i<l.length;i++){var s=l[i];t.addItem(o=new d.SPBblMenuItem(u.getLanguageIcon(s),s.name).setData(s).setActive(!!n&&s.locale===n.locale).setVisible(!s.hidden).onClick(t.onLanguageSelect.bind(t))),o.getElem().addClass("spbbl-limit-text")}var a=t.getElem();return a.on("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();var t=a.parent(".spbbl-dd-item-container"),o=t.parents(".spbbl-mn-has-dropdown"),n=a.find(".spbbl-dd-item-container"),i=t.children(".spbbl-menu-node").length;if(0<i){var l=a.outerHeight(!0);t.css("minHeight",l*i),n.css("minHeight",l*(i-1))}return a.hasClass("ext-open-submenu")&&o.hasClass("ext-open")?(a.removeClass("ext-open-submenu"),o.removeClass("ext-open")):(a.addClass("ext-open-submenu"),o.addClass("ext-open")),!1}),a.on("mouseout",function(){t.setIcon(u.getLanguageIcon(n))}),t}return __extends(u,r),u.getLanguageIcon=function(e){var t,o=e?e.countryCode:"";switch(o){case"cs":t="rs";break;case"ct":t="es-ct";break;case"gb":t="gb-wls";break;case"gl":t="gal";break;case"us":t="uk";break;default:t=o}return"flag-icon-def flag-icon-"+t},u.prototype.onLanguageSelect=function(e){this.builder.setLanguage(e.getData())},u}(o.SPBblMenu);t.SPBblLanguagesMenu=n}),define("default_bubble_ui/SPBblSettingsMenu",["require","exports","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblMenu","PluginApi/PluginTranslation","default_bubble_ui/SPBblLanguagesMenu"],function(e,t,i,o,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblSettingsMenu=void 0;var n=function(n){function e(e){var t=n.call(this)||this;t.builder=e,t.functionButtonMap={},t.setText((0,l.__)("Settings")),t.setCaretVisible(!0,!0),t.setIcon("ico-settings spbbl-mobile-visible"),t.text.addClass("spbbl-mobile-hidden"),t.addItem(t.functionButtonMap.background=new i.SPBblMenuItem("ico-tb-pages",(0,l.__)("Pages")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePagesDialog()})),t.addItem(new i.SPBblMenuItem("ico-tb-styles",(0,l.__)("Styles")).onClick(function(){t.builder.showSiteStylesDialog()})),t.addItem(new i.SPBblMenuItem("ico-tb-favicon",(0,l.__)("Favicon")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSiteFaviconDialog()})),t.addItem(new i.SPBblMenuItem("ico-settings",(0,l.__)("Settings")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePropertiesDialog()})),t.builder.isFullScreenSupported()&&t.addItem(new i.SPBblMenuItem("ico-tb-fullscreen",(0,l.__)("Full Screen")).onClick(function(){t.builder.toggleFullScreen()})),t.addItem(null,"spbbl-mobile-visible");var o=new s.SPBblLanguagesMenu(e);return o.setCaretVisible(!1).setText((0,l.__)("Language")),o.getElem().addClass("lang-btn spbbl-mobile-visible"),t.addItem(o),t.addItem(null),t.addItem(new i.SPBblMenuItem("ico-tb-logout",(0,l.__)("Log Out")).onClick(function(){t.builder.logout()})),t}return __extends(e,n),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPBblMenu);t.SPBblSettingsMenu=n}),define("default_bubble_ui/SPBblPublishMenu",["require","exports","PluginApi/PluginTranslation","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblMenu","jquery","core/BuilderConfig"],function(e,t,i,l,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblPublishMenu=void 0,s=__importDefault(s);var n=function(n){function e(e){var o=n.call(this)||this;if(o.builder=e,o.setDropdownDirection("left"),o.setIcon("fa fa-floppy-o"),o.builder.isComposerMode())o.setText((0,i.__)("Save Composition")),o.onClick(function(){return o.builder.saveElementComposition()}),o.addItem(new l.SPBblMenuItem(null,(0,i.__)("Save Composition")).setIcon("fa fa-floppy-o").setEnabled(o.builder.isElementCompositionSavingEnabled()).setTooltip(o.builder.isElementCompositionSavingEnabled()?"":"Please switch builder to English language").onClick(function(e){o.builder.saveElementComposition()}));else{if(o.setText((0,i.__)("Publish")),o.onClick(function(){window.matchMedia("(pointer: coarse)").matches||o.builder.publish()}),o.builder.isB2C()&&!o.builder.getWasPublished()){o.setTooltip((0,i.__)('Build website and click "Publish"'));var t=768<window.outerWidth?"desktop":"mobile";o.content.tooltip({template:'<div class="tooltip warn publish-tooltip '+t+'" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',placement:768<window.outerWidth?"bottom":"left",trigger:"manual",html:!0}),setTimeout(function(){function e(e){return e.preventDefault(),!1}o.content.tooltip("show"),o.content.hover(function(){return o.content.tooltip("hide")}),o.content.click(function(){return o.content.tooltip("hide")});var t=o.content.attr("aria-describedby");(0,s.default)("#"+t).click(function(e){return e.preventDefault(),o.content.tooltip("hide"),!1}).on("mouseover",e).on("hover",e)},3e3),setTimeout(function(){return o.content.tooltip("hide")},3e4)}o.addItem(new l.SPBblMenuItem(null,(0,i.__)("Publish")).setIcon("fa fa-floppy-o").onClick(function(e){o.builder.publish()}).setEnabled(o.builder.isPublishAvailable()).setTooltipMark((0,i.__)("Save site and Publish it to the internet"),"bottom")),o.addItem(new l.SPBblMenuItem(null,(0,i.__)("Save")).setIcon("ico-save").onClick(function(e){o.builder.save(!0)}).setPremium(a.wbConfig.isFreeB2CB2B2C,"mid").setTooltipMark((0,i.__)("Save site without Publishing it"),"bottom")),o.addItem(new l.SPBblMenuItem(null,(0,i.__)("Backup/Restore")).setIcon("ico-backup").onClick(function(e){o.builder.showBackupRestoreDialog()}).setPremium(a.wbConfig.isFreeB2CB2B2C,"mid")),o.builder.isTemplateSavingAvailable()&&o.addItem(null),o.addItem(new l.SPBblMenuItem(null,(0,i.__)("Save As...")).setVisible(o.builder.isTemplateSavingAvailable()).setEnabled(o.builder.isTemplateSavingEnabled()).setTooltip(o.builder.isTemplateSavingEnabled()?"":"Please switch builder to English language").onClick(function(){o.builder.showSaveAsTemplateDialog()}))}return o}return __extends(e,n),e}(o.SPBblMenu);t.SPBblPublishMenu=n}),define("default_bubble_ui/SPBblBuilderToolbar",["require","exports","default_bubble_ui/SPBblPageSelector","default_bubble_ui/SPBblToolbarGroup","default_bubble_ui/SPBblPreviewModeSelector","default_bubble_ui/SPBblTemplateMenu","default_bubble_ui/SPBblSettingsMenu","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblPublishMenu","BuilderEvent","PluginApi/PluginTranslation","default_bubble_ui/SPBblMenu","default_bubble_ui/SPBblLanguagesMenu","Dialog"],function(e,t,p,c,h,m,g,f,v,B,C,w,_,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblBuilderToolbar=void 0,P=__importDefault(P);var o=function(){function e(e,t){var o=this;if(this.functionButtonMap={},this.customButtonsGroup=null,this.firstUpdate=!0,this.rightSizesMap={},this.lastSpaceForRight=0,this.builder=e,this.elem=t,e.isAdminMode()?this.elem.append($('<div class="spbbl-logo"/>').append($('<span class="admin-mode-label"></span>').text(" ADMIN MODE "))):(this.elem.append($('<div class="spbbl-logo"/>').append($('<div class="spbbl-logo-pad"/>').append($('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoUrl()+")")))),this.builder.getLogoMobileUrl()&&this.elem.append($('<div class="spbbl-logo-mobile"/>').append($('<div class="spbbl-logo-pad"/>').append($('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoMobileUrl()+")"))))),this.elem.append(this.left=$('<div class="spbbl-tb-left spbbl-tb-part"/>')),this.elem.append(this.right=$('<div class="spbbl-tb-right spbbl-tb-part"/>')),this.elem.append(this.side=$('<div class="spbbl-tb-side spbbl-tb-part spbbl-mobile-hidden"/>')),this.mobileExtrasMenu=new w.SPBblMenu(!1).setIcon("fa fa-rocket").setTooltip((0,C.__)("More actions")).setCaretVisible(!0),this.pageSelector=new p.SPBblPageSelector(this.builder),this.pageSelectorMobile=new p.SPBblPageSelector(this.builder,!0),this.previewModeSelector=new h.SPBblPreviewModeSelector(this.builder),this.templateMenu=new m.SPBblTemplateMenu(this.builder),this.templateMenuMobile=new m.SPBblTemplateMenu(this.builder),this.templateMenuMobile.getElem().addClass("spbbl-template-menu"),this.templateMenuMobile.setAutoHideLabel(!0),this.settingsMenu=new g.SPBblSettingsMenu(this.builder).setText("").setTooltip((0,C.__)("Settings")).setIcon("fa fa-cogs"),this.settingsMenuMobile=new g.SPBblSettingsMenu(this.builder).setText("").setTooltip((0,C.__)("Settings")).setIcon("ico-settings").setCaretVisible(!0),this.saveMenu=new v.SPBblPublishMenu(this.builder).setCaretVisible(!0,!1,!0,"fa fa-angle-down"),this.saveMenuMobile=new v.SPBblPublishMenu(this.builder).setCaretVisible(!0),this.languagesMenu=new _.SPBblLanguagesMenu(this.builder),this.helpButton=new f.SPBblMenuItem("fa fa-question",null).setTooltip((0,C.__)("Help")).onClick(function(){o.builder.showHelp(),o.builder.forwardFlowStep(6,!0)}),e.canShowDesignerHelpDialog&&e.canShowDesignerHelpDialog()){var n=function(){return new f.SPBblMenuItem("ico-designer",null).setText((0,C.__)("Need designer help?")).setTooltip((0,C.__)("Need designer help?")).setPremium(!o.builder.isDesignerHelpAvailable()).onClick(function(){return e.showDesignerHelpDialog()})};this.designerHelpButton=n(),this.designerHelpButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(n())}if(e.canShareAccess&&e.canShareAccess()){var i=function(){return new f.SPBblMenuItem("ico-share",null).setText((0,C.__)("Share access")).setTooltip((0,C.__)("Share access")).onClick(function(){return e.openShareAccess()})};this.shareButton=i(),this.shareButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(i())}var l=function(){return new f.SPBblMenuItem("ico-ai",null).setTooltip((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").setText((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").onClick(function(){o.builder.showHelpChatDialog()})};if(this.helpChatButton=l(),this.helpChatButton.setAutoHideLabel(!0),this.helpChatButtonMobile=l(),this.mobileExtrasMenu.addItem(this.helpChatButtonMobile),!e.isTestMode()&&e.isB2C()&&/\.site\.pro$/.test(e.getSiteDomain())){var s,a=function(){if(!s){(s=new P.default).setTitle((0,C.__)("Choose the professional name for your website")),s.addButton((0,C.__)("Close"));var t=$('<iframe src="'+e.getB2cDomainsUrl()+'&notitle=1" style="width: 100%; height: 130px; border: none;">');$(window).on("message",function(e){e.originalEvent.data&&"resize"===e.originalEvent.data.action&&e.originalEvent.data.value&&t.css("height",e.originalEvent.data.value+35+"px")}),s.setContent(t)}s.show()},r=function(){return new f.SPBblMenuItem("ico-tb-domains",null).setText((0,C.__)("Domains")).setTooltip((0,C.__)("Domains")).onClick(a)};this.domainsButton=r(),this.mobileExtrasMenu.addItem(r())}this.helpButtonMobile=new f.SPBblMenuItem("fa fa-question-circle-o",null).setTooltip((0,C.__)("Help")).onClick(function(){o.builder.showHelp()}),this.functionButtonMap.undo=this.undoButton=new f.SPBblMenuItem("ico-tb-undo",null).setTooltip((0,C.__)("Undo")).onClick(function(){o.builder.historyUndo()}),this.functionButtonMap.redo=this.redoButton=new f.SPBblMenuItem("ico-tb-redo",null).setTooltip((0,C.__)("Redo")).onClick(function(){o.builder.historyRedo()}),this.functionButtonMap.preview=this.showPreviewButton=new f.SPBblMenuItem(null,(0,C.__)("Preview")).setIcon("ico-tb-preview").setTooltip((0,C.__)("Preview")).onClick(function(){o.showPreviewButton.setEnabled(!1),o.showPreviewButton.setIcon("fa fa-spinner fa-pulse"),o.builder.preview().always(function(){o.showPreviewButton.setEnabled(!0),o.showPreviewButton.setIcon("ico-tb-preview")})}),this.showPreviewButton.setAutoHideLabel(!0),this.showPreviewButton.getTextElem(),this.hidePreviewButton=new f.SPBblMenuItem(null,(0,C.__)("Close preview")).setIcon("fa fa-eye-slash").setTooltip((0,C.__)("Back to Editor")).onClick(function(){o.builder.hidePreview()});var u=e.getSignUpInfo();u&&(this.signUpButton=new f.SPBblMenuItem("ico-tb-sign-in",null).setAutoHideLabel(!0).setText(u.title).onClick(function(){u&&window.open(u.url)}));var b=new c.SPBblToolbarGroup;b.addItem(this.undoButton),b.addItem(this.redoButton),this.left.append((new c.SPBblToolbarGroup).addItem(this.pageSelector).getElem().addClass("spbbl-mobile-hidden"),(new c.SPBblToolbarGroup).addItem(this.templateMenu).getElem().addClass("spbbl-hide-lt-tablet"),b.getElem().addClass("spbbl-hide-lt-tablet combined-group"),(new c.SPBblToolbarGroup).addItem(this.previewModeSelector).getElem().addClass("no-hover preview-mode-selector spbbl-hide-lt-tablet"));var d=[];wb_builder.uiDef&&"object"==typeof wb_builder.uiDef&&wb_builder.uiDef.toolbars&&"object"==typeof wb_builder.uiDef.toolbars&&wb_builder.uiDef.toolbars["control-toolbar-cont"]&&"object"==typeof wb_builder.uiDef.toolbars["control-toolbar-cont"]&&wb_builder.uiDef.toolbars["control-toolbar-cont"].items&&(wb_builder.uiDef.toolbars["control-toolbar-cont"].items,1)&&(d=wb_builder.uiDef.toolbars["control-toolbar-cont"].items),this.buildUIItems(d,e),this.right.append((new c.SPBblToolbarGroup).addItem(this.pageSelectorMobile.setIcon("ico-tb-landing").setText(null).setCaretVisible(!1)).getElem().addClass("spbbl-mobile-visible"),(new c.SPBblToolbarGroup).addItem(this.templateMenuMobile).getElem().addClass("spbbl-visible-lt-tablet")),this.right.append($('<div class="spacer"></div>'),this.designerHelpButton?(new c.SPBblToolbarGroup).addItem(this.designerHelpButton).getElem().addClass("spbbl-mobile-hidden"):null,this.shareButton?(new c.SPBblToolbarGroup).addItem(this.shareButton).getElem().addClass("spbbl-mobile-hidden"):null,(new c.SPBblToolbarGroup).addItem(this.helpChatButton).getElem().addClass("spbbl-mobile-hidden"),this.domainsButton?(new c.SPBblToolbarGroup).addItem(this.domainsButton).getElem().addClass("spbbl-mobile-hidden"):null,this.mobileExtrasMenu.getItems().length?(new c.SPBblToolbarGroup).addItem(this.mobileExtrasMenu).getElem().addClass("spbbl-mobile-visible"):null,(new c.SPBblToolbarGroup).addItem(this.settingsMenuMobile).getElem().addClass("spbbl-mobile-visible"),(new c.SPBblToolbarGroup).addItem(this.languagesMenu).getElem().addClass("spbbl-mobile-hidden"),this.signUpButton?(new c.SPBblToolbarGroup).addItem(this.signUpButton).getElem():null,(new c.SPBblToolbarGroup).addItem(this.showPreviewButton).getElem(),(new c.SPBblToolbarGroup).addItem(this.hidePreviewButton).getElem().addClass("hide-preview"),(new c.SPBblToolbarGroup).addItem(this.saveMenu).getElem().addClass("no-hover spbbl-mobile-hidden"),(new c.SPBblToolbarGroup).addItem(this.saveMenuMobile).getElem().addClass("spbbl-mobile-visible")),this.settingsMenu.getElem().addClass("no-over"),this.side.append((new c.SPBblToolbarGroup).addItem(this.settingsMenu.setText("").setCaretVisible(!1).setIcon("fa fa-cogs")).getElem().addClass("spbbl-side-settings-btn"),(new c.SPBblToolbarGroup).addItem(this.helpButton).getElem().addClass("spbbl-side-help-btn")),this.saveMenu.getElem().addClass("spbbl-publish-menu"),this.saveMenuMobile.getElem().addClass("spbbl-publish-menu"),B.GlobalEvents.on("preview.show",function(){o.onPreviewVisibilityChange(!0)}),B.GlobalEvents.on("preview.hide",function(){o.onPreviewVisibilityChange(!1)}),B.GlobalEvents.on("history.changed",function(){o.onHistoryChange()}),B.GlobalEvents.on("builder.editing.changed",function(){o.updateButtons(),o.onHistoryChange()}),this.elem.on("touchstart touchmove touchend touchcancel",function(e){e.stopImmediatePropagation(),o.builder.hideContextMenus()}).on("mousedown mouseover",function(){o.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||o.builder.unselectAll()}),this.updateButtons(),this.onHistoryChange(),this.onPreviewVisibilityChange(!1),$(window).on("resize orientationchange",function(){o.update()}),this.update()}return e.prototype.buildUIItems=function(e,t){var i=[],o=0;this.left.children().each(function(){o+=20,i.push({order:o,elem:$(this)})});for(var n=function(e){var t=new c.SPBblToolbarGroup,o=new f.SPBblMenuItem(e.img?e.img:null,e.name?e.name:null);if(e.url){var n="target"in e?e.target:"_blank";o.onClick(function(){window.open(e.url,n)})}t.addItem(o),i.push({order:e.order,elem:t.getElem()})},l=0,s=e;l<s.length;l++){n(s[l])}i.sort(function(e,t){return e.order===t.order?0:e.order>t.order?1:-1});for(var a=0,r=i;a<r.length;a++){var u=r[a];this.left.append(u.elem)}},e.prototype.calcRightWidth=function(){var o=0;return this.right.children().each(function(e,t){o+=$(t).outerWidth()}),o},e.prototype.update=function(){var n=this,i=this.right.children();this.firstUpdate&&(i.each(function(e,t){n.rightSizesMap[e]=$(t).outerWidth()}),this.firstUpdate=!1),requestAnimationFrame(function(){var o=n.elem.width();n.elem.children().each(function(e,t){t!==n.right.get(0)&&(o-=$(t).outerWidth())}),o-=10;var e=n.calcRightWidth();if(o<e&&(!n.lastSpaceForRight||n.lastSpaceForRight>o))for(var t=-1;o<e&&t<i.length;)i.eq(++t).addClass("hide-lbl"),e=n.calcRightWidth();else if(!n.lastSpaceForRight||n.lastSpaceForRight<o)for(t=i.length;e<o&&0<t;)i.eq(--t).removeClass("hide-lbl"),e=n.calcRightWidth();n.lastSpaceForRight=o})},e.prototype.updateButtons=function(){var e=!this.builder.isEditingLocked();this.settingsMenu.setEnabled(e),this.settingsMenuMobile&&this.settingsMenuMobile.setEnabled(e),this.showPreviewButton.setEnabled(e),this.saveMenu&&this.saveMenu.setEnabled(e),this.saveMenuMobile&&this.saveMenuMobile.setEnabled(e),this.templateMenu&&this.templateMenu.setEnabled(e),this.templateMenuMobile&&this.templateMenuMobile.setEnabled(e)},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e.prototype.onPreviewVisibilityChange=function(e){var t,o=this,n=this.builder.isComposerMode();this.previewModeSelector.setVisible(e),this.templateMenu.setVisible(!e&&!n),this.templateMenuMobile.setVisible(!e&&!n),this.settingsMenu.setVisible(!e),this.settingsMenuMobile.setVisible(!e),this.domainsButton&&this.domainsButton.setVisible(!e),this.designerHelpButton&&this.designerHelpButton.setVisible(!e),[this.helpChatButton,this.helpChatButtonMobile].forEach(function(e){return e.setVisible(!1)}),e||n||this.builder.isHelpChatVisible().then(function(e){(null==e?void 0:e.visible)&&(e.enabled?[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").setEnabled(!0).onClick(function(){o.builder.showHelpChatDialog()})}):[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,C.__)("Ask administrator to enable this feature")).setEnabled(!1).onClick(function(){})}),[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setVisible(!0)}))}),this.mobileExtrasMenu.setVisible(!e),this.shareButton&&this.shareButton.setVisible(!e),this.helpButton.setVisible(!e&&this.builder.isHelpAvailable()&&!n),this.helpButtonMobile.setVisible(!e&&this.builder.isHelpAvailable()&&!n),this.undoButton.setVisible(!e),this.redoButton.setVisible(!e),this.showPreviewButton.setVisible(!e&&!n),this.hidePreviewButton.setVisible(e),this.languagesMenu.setVisible(!e),this.saveMenu.setVisible(!e),this.saveMenuMobile.setVisible(!e),null===(t=this.signUpButton)||void 0===t||t.setVisible(!e)},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e.prototype.getHidePreviewButton=function(){return this.hidePreviewButton},e.prototype.getButtonByFunction=function(e){var t=e.split("-");return"config"===t[0]?1<t.length?this.settingsMenu.getButtonByFunction(t[1]):this.settingsMenu:"change"===t[0]?1<t.length?this.templateMenu.getButtonByFunction(t[1]):this.templateMenu:this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e.prototype.addToolbarButton=function(){this.customButtonsGroup||(this.customButtonsGroup=new c.SPBblToolbarGroup,this.right.append(this.customButtonsGroup.getElem().addClass("custom-buttons")));var e=new f.SPBblMenuItem(null,null);return this.customButtonsGroup.addItem(e),e},e.prototype.removeToolbarButton=function(e){this.customButtonsGroup&&(this.customButtonsGroup.removeItem(e),this.customButtonsGroup.getItems().length||(this.customButtonsGroup.getElem().remove(),this.customButtonsGroup=null))},e}();t.SPBblBuilderToolbar=o}),define("default_bubble_ui/SPBblElementsToolbar",["require","exports","default_bubble_ui/SPBblToolbarGroup","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblMenu","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,d,p,c,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblElementsToolbar=void 0;var o=function(){function e(e,t){var o=this;this.groupsSizes=[],this.UIButtonSize={width:80,height:80},this.pluginTBWidth=260,this.pluginTBLeft=107,this.sideOffsetTop=135,this.totalCollapsedGroupsWidth=0,this.mobile=!1,this.allButtons=[],this.builder=e,this.elem=t,this.side=this.elem.parents("body").find(".spbbl-tb-side");var n=$('<div class="spbbl-tb-part"/>');this.elem.append(n),this.elem.append(this.bottom=$('<div class="spbbl-tb-bottom spbbl-tb-part spbbl-mobile-visible"/>')),this.collapseButtonMobile=new p.SPBblMenuItem("fa fa-plus",null).onClick(function(e){o.builder.hideContextMenus(),c.SPBblMenu.closeAllDropDowns(),o.setCollapsed(!o.getCollapsed())}),this.collapseButtonDesktop=new p.SPBblMenuItem("fa fa-plus",null).onClick(function(e){o.builder.hideContextMenus();var t=o.getCollapsed();c.SPBblMenu.closeAllDropDowns(),o.setCollapsed(!t,t)}),this.redoButton=new p.SPBblMenuItem("ico-tb-redo",null).setTooltip((0,m.__)("Redo")).onClick(function(){o.builder.historyRedo()}),this.undoButton=new p.SPBblMenuItem("ico-tb-undo",null).setTooltip((0,m.__)("Undo")).onClick(function(){o.builder.historyUndo()}),this.bottom.append((new d.SPBblToolbarGroup).addItem(this.undoButton).getElem().addClass("no-border"),(new d.SPBblToolbarGroup).addItem(this.collapseButtonMobile).getElem().addClass("button-bottom-collapse no-border"),(new d.SPBblToolbarGroup).addItem(this.redoButton).getElem().addClass("no-border")),this.side.prepend((new d.SPBblToolbarGroup).addItem(this.collapseButtonDesktop).getElem().addClass("spbbl-side-collapse-btn")),this.pluginButtons=new d.SPBblToolbarGroup,this.pluginButtons.setVisible(!0);var i=this;this.pluginButtons.getElem().append($("<div class='button-top-collapse spbbl-mobile-visible'><i class='fa fa-chevron-down'></i></div>").click(function(){i.builder.hideContextMenus(),c.SPBblMenu.closeAllDropDowns(),i.setCollapsed(!0)})),n.append(this.pluginButtons.getElem().addClass("spbbl-et-plugins no-border")),this.setCollapsed(!1);var l=new c.SPBblMenu;l.setInline(!0),l.getElem().addClass("no-over");for(var s=0,a=this.builder.getCompositionCollections();s<a.length;s++){var r=a[s],u=void 0;u="-"===r.name?null:new p.SPBblMenuItem(r.icon,r.name||r.id).setEnabled(!0).setPremium(r.inactive).setData(r.id).setDragable(!0),l.addItem(u),u&&(this.allButtons.push(u),u.getElem().attr("id","wb__"+r.id),u.getElem().addClass("ui-draggable"),e.bindCompositionButton({id:r.id,name:r.name,icon:r.icon,elem:u.getElem()},function(){o.mobile&&o.setCollapsed(!0),c.SPBblMenu.closeAllDropDowns()},function(){o.setCollapsed(!0)},function(){o.mobile&&o.setCollapsed(!0),c.SPBblMenu.closeAllDropDowns()}))}var b=l.getElem().find(".spbbl-dd-item-container").detach();l.getElem().find(".spbbl-dd-scroll").append(b),this.pluginButtons.addItem(l),l.setInline(!0),l.getElem().offset(),this.setCollapsed(!0),$(window).on("resize orientationchange",function(){o.pluginTBWidth=260,o.update(!0)}),this.update(),h.GlobalEvents.on("modal.show contextmenu.show",function(e){o.setCollapsed(!0)}),h.GlobalEvents.on("modal.show contextmenu.show",function(e){o.setCollapsed(!0)}),$(document.body).on("close-all-dropdown",function(e){o.setCollapsed(!0)}),this.elem.on("touchstart touchmove touchend touchcancel",function(e){o.builder.hideContextMenus()}).on("mousedown mouseover",function(e){o.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||o.builder.unselectAll()}),$(document.body).on("touchstart mousedown",function(e){$(e.target).closest(o.elem[0]).length||$(e.target).closest(".spbbl-et-switch").length||$(e.target).closest(".spbbl-side-collapse-btn").length||$(e.target).is(".spbbl-side-collapse-btn")||o.setCollapsed(!0)}),h.GlobalEvents.on("history.changed",function(){o.onHistoryChange()}),h.GlobalEvents.on("builder.editing.changed",function(){o.updateButtons(),o.onHistoryChange()}),this.updateButtons(),this.onHistoryChange()}return e.prototype.getElem=function(){return this.elem},e.prototype.updateButtons=function(){var e=this.builder.isEditingLocked();this.collapseButtonDesktop.setEnabled(!e),this.collapseButtonMobile.setEnabled(!e);for(var t=0,o=this.allButtons;t<o.length;t++){o[t].setLocked(e)}return this},e.prototype.update=function(e){var t;void 0===e&&(e=!1);for(var o=$(window).width(),n=$(window).height()-this.sideOffsetTop,i=$(".spbbl-menu-node.ui-draggable").outerWidth(!0),l=this.pluginButtons.getItems(),s=this.pluginButtons.getElem().find(".spbbl-dropdown"),a=s?Math.floor(s.outerHeight(!0)/(this.UIButtonSize.height?this.UIButtonSize.height:80)):1,r=0,u=l.length;r<u;r++)(t=l[r]).setInline(!0),t.setOneRow(1==a);return o<1100?(this.pluginButtons.getElem().addClass("mobile"),this.mobile=!0,this.pluginButtons.getElem().outerWidth("100%")):(this.pluginButtons.getElem().removeClass("mobile"),this.mobile=!1),!this.mobile&&e&&(this.pluginButtons.getElem().outerWidth(this.pluginTBWidth),this.pluginButtons.getElem().outerHeight()>n&&this.pluginButtons.getElem().outerWidth()<o-i-this.pluginTBLeft?(this.pluginTBWidth+=i,this.update(e)):this.pluginButtons.getElem().outerWidth(this.pluginTBWidth)),this},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.setCollapsed=function(e,t){return void 0===t&&(t=!1),e?(this.elem.addClass("spbbl-collapsed"),this.elem.parents("body").find(".spbbl-tb-bottom").addClass("spbbl-collapsed"),this.elem.parents("body").find(".spbbl-side-collapse-btn").addClass("spbbl-collapsed")):(this.elem.removeClass("spbbl-collapsed"),this.elem.parents("body").find(".spbbl-tb-bottom").removeClass("spbbl-collapsed"),this.elem.parents("body").find(".spbbl-side-collapse-btn").removeClass("spbbl-collapsed")),this.pluginButtons.setVisible(!e),!e&&t&&this.update(t),this},e.prototype.getCollapsed=function(){return this.elem.is(".spbbl-collapsed")},e.prototype.getPluginButtonAndGroup=function(e){for(var t=0,o=this.pluginButtons.getItems();t<o.length;t++){var n=o[t];if(n instanceof c.SPBblMenu)for(var i=0,l=n.getItems();i<l.length;i++){var s=l[i];if(s instanceof p.SPBblMenuItem)if(e===s.getData()||e===s.name||("Layout"===s.name||s.name===(0,m.__)("Layout"))&&"LayoutElement"===e||("Text"===s.name||s.name===(0,m.__)("Text"))&&"TextArea"===e||("Media"===s.name||s.name===(0,m.__)("Media"))&&"Youtube"===e||("Maps"===s.name||s.name===(0,m.__)("Maps"))&&"GoogleMaps"===e||s.name===(0,m.__)("Picture")&&"Picture"===e||s.name===(0,m.__)("Gallery")&&"Gallery"===e||s.name===(0,m.__)("Shape")&&"Shape"===e||s.name===(0,m.__)("Line")&&"Line"===e||s.name===(0,m.__)("Button")&&"Button"===e||s.name===(0,m.__)("Form")&&"Form"===e||s.name===(0,m.__)("Menu")&&"Menu"===e||s.name===(0,m.__)("Commerce")&&"StoreCart"===e||s.name===(0,m.__)("Commerce")&&"Store"===e||s.name===(0,m.__)("Languages")&&"Languages"===e)return{group:n,button:s}}}return null},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e}();t.SPBblElementsToolbar=o}),define("default_bubble_ui/SPBblMobileMainMenu",["require","exports","default_bubble_ui/SPBblMenuItem","default_bubble_ui/SPBblMenu","PluginApi/PluginTranslation","default_bubble_ui/SPBblLanguagesMenu","default_bubble_ui/SPBblSettingsMenu","default_bubble_ui/SPBblTemplateMenu"],function(e,t,n,o,i,l,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPBblMobileMainMenu=void 0;var r=function(o){function e(e){var t=o.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setText(null),t.setIcon("spbbl-icon-i-menu"),t.templateMenu=new a.SPBblTemplateMenu(t.builder).addSpacer(),t.settingsMenu=new s.SPBblSettingsMenu(t.builder).setText((0,i.__)("Settings")).setIcon("icon-cog-big").setCaretVisible(!0).addSpacer(),t.settingsMenu.getTextElem().removeClass("spbbl-mobile-hidden"),t.languageMenu=new l.SPBblLanguagesMenu(t.builder).setText((0,i.__)("Languages")).setCaretVisible(!0).addSpacer(),t.helpButton=new n.SPBblMenuItem("spbbl-icon-hint",null).setTooltip((0,i.__)("Help")).setText((0,i.__)("Help")).onClick(function(){t.builder.showHelp()}).addSpacer(),t.addItem(t.templateMenu),t.addItem(t.settingsMenu),t.addItem(t.languageMenu),t.addItem(t.helpButton),t}return __extends(e,o),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPBblMenu);t.SPBblMobileMainMenu=r}),define("default_bubble_ui/SPBblUI",["require","exports","PluginApi/UIManager","BuilderEvent","default_bubble_ui/SPBblBuilderToolbar","default_bubble_ui/SPBblElementsToolbar","PluginApi/PluginResourceLoader","PluginApi/PluginTranslation","default_bubble_ui/SPBblBuilderNotification","HelpSystem/Tooltip","default_bubble_ui/SPBblMenu"],function(e,t,o,n,c,h,i,m,g,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(a){function e(r){var u=a.call(this,r)||this;u.visible=!0,u.isPreviewOpen=!1,u.builder=r;var b=$(document.body),d=new i.PluginResourceLoader(pluginData),p="main.min.css?"+PluginWrapper._config.fileInfo["main.min.css"].time;return d.loadResources(["fonts.css",p,"main.html","translations.json"],function(e){var t=u.builder.getLanguage();if(t&&e["translations.json"].data&&"object"==typeof e["translations.json"].data&&e["translations.json"].data.hasOwnProperty(t.locale)&&(0,m.extendTranslations)(e["translations.json"].data[t.locale]),e["fonts.css"].data&&d.addRawStyleSheet(e["fonts.css"].data),e[p].data){var o=e[p].url.replace(/\/[^\/]+$/,""),n=e[p].data;n=n.replace('@import"fonts/Roboto/main.css";','@import"'.concat(o,'/fonts/Roboto/main.css";')),d.addRawStyleSheet(n)}if(pluginData.customConfiguration){var i=[];if(pluginData.customConfiguration.hasOwnProperty("controlToolbarItemTextColor")&&(i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node>.spbbl-mn-content .spbbl-selected-page-name { color: "+pluginData.customConfiguration.controlToolbarItemTextColor+"; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarItemBackgroundColor")&&(i.push("#builder_toolbar .spbbl-tb-part>.spbbl-tb-group>.spbbl-menu-node>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.controlToolbarItemBackgroundColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node { background-color: "+pluginData.customConfiguration.controlToolbarItemBackgroundColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarActiveItemTextColor")&&(i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node.active:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarActiveItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node.active:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarActiveItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node.active:not(.disabled)>.spbbl-mn-content .spbbl-selected-page-name { color: "+pluginData.customConfiguration.controlToolbarActiveItemTextColor+"; }"),i.push(".preview-mode-selector .spbbl-menu-node .spbbl-menu-node.active:not(.disabled) .spbbl-mn-text, .preview-mode-selector .spbbl-menu-node .spbbl-menu-node.active:not(.disabled) .ico-tb-i { color: "+pluginData.customConfiguration.controlToolbarActiveItemTextColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarActiveItemBackgroundColor")&&(i.push("#builder_toolbar .spbbl-tb-part>.spbbl-tb-group>.spbbl-menu-node.active:not(.disabled)>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.controlToolbarActiveItemBackgroundColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node.active:not(.disabled) { background-color: "+pluginData.customConfiguration.controlToolbarActiveItemBackgroundColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarHoverItemTextColor")&&(i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarHoverItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.controlToolbarHoverItemTextColor+"; }"),i.push("#builder_toolbar .spbbl-tb-group>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content .spbbl-selected-page-name { color: "+pluginData.customConfiguration.controlToolbarHoverItemTextColor+"; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarHoverItemBackgroundColor")&&(i.push("#builder_toolbar .spbbl-tb-part>.spbbl-tb-group>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.controlToolbarHoverItemBackgroundColor+"; }"),i.push("#builder_toolbar .spbbl-dd-inline .spbbl-menu-node:hover:not(.disabled) { background-color: "+pluginData.customConfiguration.controlToolbarHoverItemBackgroundColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarBackgroundColor")){i.push("#builder_toolbar { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; }");var l=pluginData.customConfiguration.controlToolbarBackgroundColor.match(/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i),s=1;if(l)s=(.2126*parseInt(l[1],16)+.7152*parseInt(l[2],16)+.0722*parseInt(l[3],16))/255;var a=.5<s?"#232323":"#FFFFFF";i.push(".wb-tpl-dialog .modal-header .close { color: "+a+" ! important; }"),i.push(".wb-tpl-dialog .modal-header { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; color: "+a+"; }")}pluginData.customConfiguration.hasOwnProperty("disabledItemOpacity")&&i.push(".spbbl-menu-node.disabled>.spbbl-mn-content { opacity: "+(pluginData.customConfiguration.disabledItemOpacity/100).toFixed(3)+"; }"),pluginData.customConfiguration.hasOwnProperty("elementToolbarBackgroundColor")&&i.push("#builder_toolbar .spbbl-tb-part.spbbl-tb-side>.spbbl-tb-group>.spbbl-menu-node>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+" ! important; }"),pluginData.customConfiguration.hasOwnProperty("elementToolbarAddIconColor")&&i.push("#builder_toolbar .spbbl-tb-part.spbbl-tb-side .spbbl-side-collapse-btn .ico-tb-i { color: "+pluginData.customConfiguration.elementToolbarAddIconColor+"; }"),pluginData.customConfiguration.hasOwnProperty("elementToolbarSettingsIconColor")&&i.push("#builder_toolbar .spbbl-tb-part.spbbl-tb-side .spbbl-side-settings-btn .ico-tb-i { color: "+pluginData.customConfiguration.elementToolbarSettingsIconColor+"; }"),pluginData.customConfiguration.hasOwnProperty("elementToolbarHelpIconColor")&&i.push("#builder_toolbar .spbbl-tb-part.spbbl-tb-side .spbbl-side-help-btn .ico-tb-i { color: "+pluginData.customConfiguration.elementToolbarHelpIconColor+"; }"),pluginData.customConfiguration.hasOwnProperty("hideTextUnderIcons")&&"1"===pluginData.customConfiguration.hideTextUnderIcons&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node>.spbbl-mn-content>.spbbl-mn-text { display: none; }"),i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node>.spbbl-mn-content>.ico-tb-i { margin-bottom: 0; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonTextColor")&&(i.push(".spbbl-menu-node.spbbl-publish-menu>.spbbl-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push(".spbbl-menu-node.spbbl-publish-menu .spbbl-dropdown .spbbl-dd-scroll .spbbl-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push("#builder_toolbar .spbbl-publish-menu .wb_badge_help { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; border-color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header, .modal-dialog:not(.wb-tpl-dialog) .modal-header .close { color: "+pluginData.customConfiguration.publishButtonTextColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonBackgroundColor")&&(i.push(".spbbl-menu-node.spbbl-publish-menu>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+" ! important; }"),i.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundColor")&&(i.push(".spbbl-menu-node.spbbl-publish-menu .spbbl-dropdown .spbbl-dd-scroll { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+" ! important; }"),i.push(".spbbl-menu-node.spbbl-publish-menu>.spbbl-mn-content .caret-box { border-left-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }"),i.push(".spbbl-menu-node.spbbl-publish-menu:hover .caret-box { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }"),i.push(".spbbl-menu-node.spbbl-publish-menu .spbbl-dd-arrow:after { border-bottom-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundHoverColor")&&i.push(".spbbl-menu-node.spbbl-publish-menu .spbbl-dropdown .spbbl-dd-scroll .spbbl-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundHoverColor+" ! important; }"),pluginData.customConfiguration.hasOwnProperty("dropdownBackgroundColor")&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline>.spbbl-dropdown>.spbbl-dd-scroll { background-color: "+pluginData.customConfiguration.dropdownBackgroundColor+"; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline)>.spbbl-dropdown>.spbbl-dd-scroll { background-color: "+pluginData.customConfiguration.dropdownBackgroundColor+"; }"),i.push(".spbbl-menu-node .spbbl-dd-arrow:after { border-bottom-color: "+pluginData.customConfiguration.dropdownBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("dropdownNormalTextColor")&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownNormalTextColor+" ! important; }"),i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node>.spbbl-mn-content>.spbbl-mn-text { color: "+pluginData.customConfiguration.dropdownNormalTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu) .spbbl-menu-node>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownNormalTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node>.spbbl-mn-content>.spbbl-mn-text, .spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node>.spbbl-mn-content>.ico-tb-i { color: "+pluginData.customConfiguration.dropdownNormalTextColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("dropdownActiveTextColor")&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node.active>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownActiveTextColor+" ! important; }"),i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node.active>.spbbl-mn-content>.spbbl-mn-text { color: "+pluginData.customConfiguration.dropdownActiveTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu) .spbbl-menu-node.active>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownActiveTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node.active>.spbbl-mn-content>.spbbl-mn-text, .spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node.active>.spbbl-mn-content>.ico-tb-i { color: "+pluginData.customConfiguration.dropdownActiveTextColor+" ! important; }"),i.push(".spbbl-switch-input:checked+.spbbl-switch-label:after { background-color: "+pluginData.customConfiguration.dropdownActiveTextColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("dropdownHoverTextColor")&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownHoverTextColor+" ! important; }"),i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content>.spbbl-mn-text { color: "+pluginData.customConfiguration.dropdownHoverTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu) .spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { color: "+pluginData.customConfiguration.dropdownHoverTextColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content>.spbbl-mn-text, .spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content>.ico-tb-i { color: "+pluginData.customConfiguration.dropdownHoverTextColor+" ! important; }"),i.push(".spbbl-page-selector .spbbl-ps-menu-buttons .spbbl-inner-btn:hover { color: "+pluginData.customConfiguration.dropdownHoverTextColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("dropdownHoverBackgroundColor")&&(i.push("#elements_toolbar .spbbl-menu-node.spbbl-dd-inline .spbbl-menu-node:hover:not(.disabled) { background-color: "+pluginData.customConfiguration.dropdownHoverBackgroundColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu) .spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.dropdownHoverBackgroundColor+" ! important; }"),i.push(".spbbl-menu-node:not(.spbbl-dd-inline):not(.spbbl-publish-menu)>.spbbl-dropdown>.spbbl-dd-scroll>.spbbl-dd-item-container>.spbbl-menu-node:hover:not(.disabled)>.spbbl-mn-content { background-color: "+pluginData.customConfiguration.dropdownHoverBackgroundColor+" ! important; }")),d.addRawStyleSheet(i.join("\n"))}e["main.html"].data&&b.append(e["main.html"].data),u.builderToolbar=new c.SPBblBuilderToolbar(r,$("#builder_toolbar")),u.elementsToolbar=new h.SPBblElementsToolbar(r,$("#elements_toolbar")),u.builderNotification=new g.SPBblBuilderNotification(r,$("#builder_notification")),u.builder.init($("#builder_canvas"))}),n.GlobalEvents.on("preview.show",function(){u.elementsToolbar&&u.elementsToolbar.setVisible(!1),u.builderToolbar&&u.builderToolbar.side&&u.builderToolbar.side.hide(),b.addClass("preview-mode")}),n.GlobalEvents.on("preview.hide",function(){u.elementsToolbar&&u.elementsToolbar.setVisible(!0),u.builderToolbar&&u.builderToolbar.side&&u.builderToolbar.side.show(),b.removeClass("preview-mode")}),n.GlobalEvents.on("inplaceeditor.state.changed",function(e){u.builderToolbar&&(e.active?u.builderToolbar.side.addClass("spbbl-tb-move-away"):u.builderToolbar.side.removeClass("spbbl-tb-move-away"))}),r.isAdminMode()&&$("body").addClass("admin-mode"),u}return __extends(e,a),e.prototype.lookupUIElement=function(e,t){var o=a.prototype.lookupUIElement.call(this,e,t);if(!o)switch(e){case"control":if(!this.builderToolbar)break;var n=this.builderToolbar.getButtonByFunction(t);n&&(o=new r.ScenarioStepSubject(n.getElem(),null,10));break;case"plugin":if(this.elementsToolbar){var i=this.elementsToolbar.getPluginButtonAndGroup(t);if(i){this.elementsToolbar.setCollapsed(!1);var l=i.group,s=i.button;l.setOpen(!0),o=new r.ScenarioStepSubject(s.getElem(),null,10)}else o=new r.ScenarioStepSubject(this.elementsToolbar.getElem(),null,10)}break;case"preview":if(!this.builderToolbar)break;"close"===t&&(o=new r.ScenarioStepSubject(this.builderToolbar.getHidePreviewButton().getElem(),null,10))}return o},e.prototype.getToolbarHeight=function(){return this.builderToolbar?this.builderToolbar.getElem().outerHeight():0},e.prototype.closeAll=function(){a.prototype.closeAll.call(this),l.SPBblMenu.closeAllDropDowns(),this.elementsToolbar&&this.elementsToolbar.mobile&&this.elementsToolbar.setCollapsed(!0)},e.prototype.setVisible=function(e){var t,o,n;this.visible=e,null===(t=this.elementsToolbar)||void 0===t||t.setVisible(e&&!this.isPreviewOpen),null===(o=this.builderToolbar)||void 0===o||o.setVisible(e),null===(n=this.builderNotification)||void 0===n||n.setVisible(e&&!this.isPreviewOpen)},e.prototype.addToolbarButton=function(){var e;return null===(e=this.builderToolbar)||void 0===e?void 0:e.addToolbarButton()},e.prototype.removeToolbarButton=function(e){var t;null===(t=this.builderToolbar)||void 0===t||t.removeToolbarButton(e)},e}(o.UIManager);(0,o.registerUI)(pluginData.id,s)});require(["default_bubble_ui\/SPBblUI"], function(){});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"webmoney_button","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/webmoney_button","pluginUri":"plugins\/webmoney_button","customConfiguration":null};
PluginWrapper._config.id = 'webmoney_button';
PluginWrapper._config.baseUri = "plugins\/webmoney_button";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/webmoney_button\/main.png";
PluginWrapper._config.template = "<form method=\"post\" action=\"https:\/\/merchant.wmtransfer.com\/lmi\/payment.asp\" data-gateway-id=\"WebmoneyButton\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input name=\"LMI_PAYMENT_AMOUNT\" value=\"{{content.amount}}\" type=\"hidden\" \/>\n\t<input name=\"LMI_PAYEE_PURSE\" value=\"{{content.purseId}}\" type=\"hidden\" \/>\n\t{{#content.store}}\n\t<input name=\"LMI_PAYMENT_DESC_BASE64\" value=\"{{content.description}}\" type=\"hidden\" \/>\n\t<input type=\"hidden\" name=\"LMI_RESULT_URL\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"LMI_SUCCESS_URL\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"LMI_FAIL_URL\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"TRANSACTION_ID\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/webmoney_button/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#036cb5',
			button_border: {
				color: '#538ec1',
				style: 'none',
				weight: 1,
				css: { border: '1px none #538ec1' },
				cssRaw: 'border: 1px none #538ec1'
			},
			logo: 'webmoney_color_block_nobg.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#8abcdb'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: (isStore ? 'WebMoney' : __('pay 1.00 WMZ')),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	_settingsContent: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			var base_url = 'http://' + wb_builder.siteDomain + '/';
			var html = '<p><strong>Page URL:</strong> <a href="https://www.wmtransfer.com/" target="_blank">https://www.wmtransfer.com/</a></p>'
					+ '<p>Result URL:<br />'
					+ '<pre>' + base_url + '0/store-callback/Webmoneybutton' + '</pre></p>'
					+ '<p>Success URL:<br />'
					+ '<pre>' + base_url + '0/store-return/Webmoneybutton' + '</pre></p>'
					+ '<p>Fail URL:<br />'
					+ '<pre>' + base_url + '0/store-cancel/Webmoneybutton' + '</pre></p>';
			Globals._settingsContent = html;
		}
		return Globals._settingsContent;
	},
	getLogosList: function() {
		return [
			{id: 'webmoney_color.svg', name: 'coloured'},
			{id: 'webmoney_color_block.svg', name: 'coloured 2'},
			{id: 'webmoney_color_block_nobg.svg', name: 'coloured 3'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'WebMoney',
	id: 'webmoney_button',
	keyField: __('Purse ID'),
	keyFieldId: 'purseId',
	titleFieldId: 'title',
	nameFieldId: 'description|base64',
	priceFieldId: 'amount',
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'webmoney_button', true),
	settingsTabDef: Globals.getSettingsContent(),
	logos: Globals.getLogosList(),
	defaultLogo: 'webmoney_color.svg',
});
PluginWrapper.registerPlugin('webmoney_button', {
	name: __('WM Button'),
	element: {
		minSize: {width: 25, height: 25},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'purseId', type: 'WebmoneyPurseId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.purseId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Purse ID')));
				return opts;
			},
			get: function(data) { return data.content.purseId; },
			set: function(value, data) {
				data.content.purseId = value;
			}
		},
		{id: 'description', type: 'WebmoneyDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'WebmoneyAmount', helpText: __('In WM units defined by purse'),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'webmoney_button'),
	propertyDialog: {
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Purse ID'), uiComponentOptions: function(data, opts) {
						opts.validateText = data.content.purseId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Purse ID')));
						return opts;
					}},
					{type: 'TextField', id: 'purseId'}
				]},
				{type: 'HorizontalLayout', columnWeights: [9, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('In WM units defined by purse')},
						{type: 'TextField', id: 'amount'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'webmoney_button')
		]
	},
	openAction: function(fields, data, elem) {
		fields.purseId.setText(data.content.purseId);
		fields.amount.setText(data.content.amount);
		fields.description.setText(data.content.description);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.purseId = fields.purseId.getText();
		data.content.amount = parseFloat(fields.amount.getText().replace(',', '.'));
		if (isNaN(data.content.amount)) data.content.amount = 1.0;
		data.content.description = fields.description.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function(data) {
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'title': 'button_label',
			'border': 'button_border',
			'background': 'button_color',
			'fontFamily': 'font_family',
			'fontSize': 'font_size',
			'fontColor': 'label_color'
		});
		if (!data.content.purseId) data.content.purseId = '';
		if (!data.content.amount) data.content.amount = 1.0;
		if (!data.content.description) data.content.description = __('Donation to charitable fund');
		if (['logo.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'webmoney_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('purseId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"baidu_maps","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/baidu_maps","pluginUri":"plugins\/baidu_maps","customConfiguration":null};
PluginWrapper._config.id = 'baidu_maps';
PluginWrapper._config.baseUri = "plugins\/baidu_maps";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/baidu_maps\/main.png";
PluginWrapper._config.template = "<script type=\"text\/javascript\" src=\"https:\/\/api.map.baidu.com\/getscript?v=2.1&ak=cfa0fgLRZZjvHugmDo51EPtUHgW0buAG&s=1\"><\/script>\n<div id=\"allmap_{{id}}\" style=\"width: 100%; height: 100%; overflow: hidden; margin: 0;\"><\/div>\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar getMap = function() {\n\t\t\tvar map = new BMap.Map(\"allmap_{{id}}\"), point;\n\t\t\ttry {\n\t\t\t\teval(\"map.centerAndZoom(new BMap.Point({{content.coordsFinal}}), 11)\");\n\t\t\t\teval(\"point = new BMap.Point({{content.coordsFinal}})\");\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t\tif (\"{{content.type}}\" && window[\"{{content.type}}\"]) map.setMapType(window[\"{{content.type}}\"]);\n\n\t\t\tmap.addControl(new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_LEFT, type: BMAP_NAVIGATION_CONTROL_SMALL}));\n\n\t\t\tmap.addControl(new BMap.MapTypeControl());\n\t\t\tmap.enableScrollWheelZoom(true);\n\t\t\tmap.centerAndZoom(point, {{content.zoom}});\n\t\t\t{{#content.marker}}\n\t\t\tvar marker = new BMap.Marker(point);\n\t\t\tmap.addOverlay(marker);\n\t\t\t{{#content.animate}}marker.setAnimation(BMAP_ANIMATION_BOUNCE);{{\/content.animate}}\n\t\t\t{{\/content.marker}}\n\t\t},\n\t\ttwait = function() {\n\t\t\tif (typeof window.BMap == 'object') {\n\t\t\t\tgetMap();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetTimeout(twait, 100);\n\t\t};\n\t\ttwait();\n\t})();\n<\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('baidu_maps', {
	name: __('Baidu Maps'),
	icon: 'ico-pl-baidu_maps',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 602, height: 327},
		resizable: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Baidu Maps API key'), helpText: __('Get Baidu Maps API key from http://lbsyun.baidu.com/apiconsole/key?application=key')},
					{type: 'TextField', id: 'groupId'}
				]},
				{type: 'HorizontalLayout', columnWeights: [8, 4], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Coordinates'), uiComponentOptions: function(data, opts) {
							opts.validateText = (data.content.coords !== this.pluginScoped.defaultLatLng.join(', ')) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates')));
							return opts;
						}},
						{type: 'TextField', id: 'coords', placeholder: '116.404, 39.915', change: function() {
							var val = this.getValue();
							var parts = val.split(',');
							for (var i=0; i < parts.length; i++) {
								parts[i] = parts[i].replace(/^.*?(\-?\d+(?:[\.,]\d+)?).*$/, '$1').replace(',', '.');
							}
							this.setValue(parts.join(', '));
						}, uiComponentOptions: function(data, opts) {
							opts.placeholder = this.pluginScoped.defaultLatLng.join(', ');
							return opts;
						}},
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Zoom level'), helpText: __('ex. 4')},
						{type: 'SizeSelector', id: 'zoom'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CustomContainer', id: 'map', init: function() {
						var map,
							_animate = false,
							_marker = true,
							_coords = [116.404, 39.915],
							_zoom = 15,
							_markerElem,
							_point,
							_fields;
							
						this.setZoom = function(zoom) {
							_zoom = zoom;
							map.centerAndZoom(new BMap.Point(_coords[0], _coords[1]), _zoom);
						};
						this.setCoords = function(coords) {
							_coords = coords.split(',').map(function(crd) {
								return parseFloat($.trim(crd));
							});
							_point = new BMap.Point(_coords[0], _coords[1]);
							map.centerAndZoom(_point, _zoom);
							this.setMarker(_marker);
						};
						this.setMarker = function(marker) {
							_marker = marker;
							if (_markerElem) map.removeOverlay(_markerElem);
							if (_marker) {
								_markerElem = new BMap.Marker(_point);
								_markerElem.enableDragging();
								_markerElem.addEventListener('dragend', function() {
									_coords = [
										_markerElem.getPosition().lng,
										_markerElem.getPosition().lat
									];
									_point = new BMap.Point(_coords[0], _coords[1]);
									map.centerAndZoom(_point, _zoom);
									_fields.coords.setText(_coords.join(', '));
								});
								map.addOverlay(_markerElem);
								this.setAnimate(_animate);
							} else {
								_markerElem = null;
							}
						};
						this.setAnimate = function(animate) {
							_animate = animate;
							if (_markerElem) _markerElem.setAnimation(_animate ? BMAP_ANIMATION_BOUNCE : null);
						};
						this.initOnView = function(elemId, fields) {
							var self = this;
							_fields = fields;
							this._elem.empty();
							this._elem.attr('id', 'demomap_' + elemId);
							map = new BMap.Map('demomap_' + elemId);
							map.enableScrollWheelZoom(true);
							map.addEventListener('zoomend', function() {
								_zoom = map.getZoom();
								_fields.zoom.setValue(_zoom);
							});
						};
					}, css: {width: '100%', height: 234, position: 'relative', border: '1px solid #aaaaaa', backgroundColor: '#ebebeb'}}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Show marker')},
						{type: 'RadioBox', id: 'marker0', label: __('Enable'), group: 'marker'},
						{type: 'RadioBox', id: 'marker1', label: __('Disable'), group: 'marker'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Animate marker')},
						{type: 'RadioBox', id: 'animate0', label: __('Enable'), group: 'animate'},
						{type: 'RadioBox', id: 'animate1', label: __('Disable'), group: 'animate'}
					]}
				]}
			]}
		]
	},
	batchUpdates: true,
	properties: [
		{id: 'apiKey', type: 'BaiduApiKey',
			get: function(data) { return data.content.groupId; },
			set: function(value, data) {
				data.content.groupId = value;
			}
		},
		{id: 'address', type: 'BaiduAddress', helpText: __('Location address or coordinates'),
			 uiComponentOptions: function(data, opts) {
				opts.validateText = (data.content.coords !== this.pluginScoped.defaultLatLng.join(', ')) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates')));
				return opts;
			},
			get: function(data) { return {text: data.content.coords, latLng: data.content.coordsFinal.split(/\ *,\ */)}; },
			set: function(value, data) {
				data.content.coords = value.text;
				this.fixCoords(data);
				this.updateFinalCoords(data);
			}
		},
		{id: 'zoomLevel', type: 'BaiduMapZoom', helpText: __('ex. 4'),
			get: function(data) { return data.content.zoom; },
			set: function(value, data) {
				data.content.zoom = value;
			}
		},
		{id: 'mapType', type: 'BaiduMapType',
			get: function(data) { return data.content.type || 'BMAP_NORMAL_MAP'; },
			set: function(value, data) { data.content.type = value; }
		},
		{id: 'showMarker', type: 'BaiduShowMarker',
			get: function(data) { return data.content.marker; },
			set: function(value, data) { data.content.marker = value; }
		},
		{id: 'animMarker', type: 'BaiduAnimMarker',
			get: function(data) { return data.content.animate; },
			set: function(value, data) { data.content.animate = value; }
		}
	],
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		defaultLatLng: ['116.404', '39.915'],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://api.map.baidu.com/getscript?v=2.0&ak=cfa0fgLRZZjvHugmDo51EPtUHgW0buAG&s=1', function() {
					var twait = function() {
						var wnd = window;
						if (typeof wnd.BMap == 'object') {
							self.scriptReady = true;
							for (var i = 0; i < self.listeners.length; i++) {
								self.listeners[i].func.call(self.listeners[i].inst);
							}
							return;
						}
						setTimeout(twait, 100);
					};
					twait();
				});
			}
		}
	},

	openAction: function (fields, data, elem) {
		var self = this;
		fields.groupId.setText(data.content.groupId);
		fields.coords.setText(data.content.coords);
		fields.zoom.setValue(data.content.zoom);
		
		fields.marker0.setValue(data.content.marker);
		fields.marker1.setValue(!data.content.marker);
		fields.animate0.setValue(data.content.animate);
		fields.animate1.setValue(!data.content.animate);
		
		this.pluginScoped.addListener(this, function() {
			setTimeout(function() {
				if(fields.coords.getText()) {
					fields.map.initOnView(data.id, fields);
					fields.map.setCoords(fields.coords.getText());
					fields.map.setZoom(fields.zoom.getValue());
					fields.map.setMarker(fields.marker0.getValue());
					fields.map.setAnimate(fields.animate0.getValue());

					fields.coords.on('change', function () {
						fields.map.setCoords(fields.coords.getText());
					});
					fields.zoom.on('change', function () {
						fields.map.setZoom(fields.zoom.getValue());
					});
					fields.marker0.on('change', function () {
						fields.map.setMarker(true);
					});
					fields.marker1.on('change', function () {
						fields.map.setMarker(false);
					});
					fields.animate0.on('change', function () {
						fields.map.setAnimate(true);
					});
					fields.animate1.on('change', function () {
						fields.map.setAnimate(false);
					});
				} else {
					fields.map.initOnView(data.id, fields);
					fields.map.setCoords(self.pluginScoped.defaultLatLng.join(', '));
				}
			}, 500);
		});
	},
	
	updateFinalCoords: function(data) {
		data.content.coordsFinal = data.content.coords ? data.content.coords : this.pluginScoped.defaultLatLng.join(', ');
	},

	applyAction: function (fields, data, elem) {
		data.content.groupId = fields.groupId.getText();
		data.content.coords = fields.coords.getText();
		data.content.zoom = fields.zoom.getValue();
		this.fixCoords(data);

		data.content.marker = (fields.marker0.getValue());
		data.content.animate = (fields.animate0.getValue());
		this.updateFinalCoords(data);
	},

	loadAction: function (data) {
		if (!data.content.groupId) data.content.groupId = '';
		if (!data.content.marker) data.content.marker = true;
		if (!data.content.zoom) data.content.zoom = '15';
		if (!data.content.animate) data.content.animate = false;
		if (!data.content.coords) data.content.coords = '';
		this.fixCoords(data);
		this.updateFinalCoords(data);

		this.pluginScoped.addListener(this, function() {});
	},

	fixCoords: function(data) {
		if (data.content.coords) {
			var val = '' + data.content.coords;
			var parts = val.split(',');
			for (var i=0; i < parts.length; i++) {
				parts[i] = parts[i].replace(/^.*?(\-?\d+(?:[\.,]\d+)?).*$/, '$1').replace(',', '.');
			}
			data.content.coords = parts.map(function (item) {return item.trim ? item.trim() : item}).join(', ');
		}
	},

	fullWidthChangeAction: function(fullWidth, data, elem) {
		this.updateElement();
		this.fixCoords(data);
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('address');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"zopim","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/zopim","pluginUri":"plugins\/zopim","customConfiguration":null};
PluginWrapper._config.id = 'zopim';
PluginWrapper._config.baseUri = "plugins\/zopim";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/zopim\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n\t<div class=\"wb_caption smaller\">\n\t\t<div>\n\t\t\t<i class=\"ico-pl-zopim\"><\/i> Zendesk\n\t\t<\/div>\n\t<\/div>\n{{\/isPublished}}\n{{#isPublished}}\n<style>#{{id}} {width: 0; height: 0; min-height: 0; min-width: 0}<\/style>\n{{\/isPublished}}\n{{#firstOnPage}}\n<script id=\"ze-snippet\" src=\"https:\/\/static.zdassets.com\/ekr\/snippet.js?key={{content.groupId}}\"> <\/script>\n{{\/firstOnPage}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('zopim', {
    name: 'Zendesk',
    icon: 'ico-pl-zopim',
    element: {
        minSize: {
            width: 190,
            height: 70
        },
        defaultSize: {
            width: 190,
            height: 70
        },
        resizable: false,
		supportsFullWidth: false
    },
    properties: [
        {id: 'groupId', type: 'ZopimGroupId', helpText: __('SRC ID from widget code "/v2.zopim.com/?SRC_ID" provided by Zopim'),
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Widget key')));
                return opts;
            },
            get: function(data) { return data.content.groupId; },
            validate: function(value, data, api) { this.extractKey(data, value, api); },
            set: function(value, data) {
                this.extractKey(data, value);
            }
        },
    ],
    propertyDialog: {
        noScroll: true,
        tabs: [{
            name: 'General',
            children: [{
                type: 'VerticalLayout',
                children: [{
                    type: 'Label',
                    text: __('Widget key'),
                    helpText: __('Paste full widget code or key from Zendesk Admin Portal'),
                    uiComponentOptions: function(data, opts) {
                        opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Widget key')));
                        return opts;
                    },
                }, {
                    type: 'TextField',
                    id: 'groupId',
                    change: function() {
                        var value = this.getText();
                        var regexp = /^((.*\n)?.*key=)?([A-Za-z0-9\-]+)(.*\n)?/;
                        var result = value.match(regexp);
                        if (result && result[3]) {
                            this.setValue(result[3]);
                        } else {
                            this.setValue(value);
                        }
                    }
                }]
            }]
        }]
    },
    resizeTimeout: null,

    extractKey: function (data, value, api) {
        var regexp = /^((.*\n)?.*key=)?([A-Za-z0-9\-]+)(.*\n)?/;
        var result = value.match(regexp);
        if (result && result[3]) {
            data.content.groupId = result[3];
            if (api) {
                this.displayErrorMessage(false);
                api.setError('');
                this.setSize(190, 70);
            }
        } else {
            if (api) {
                this.setErrorMessage(__('Incorrect ID'));
                api.setError(__('Incorrect ID'));
                this.setSize(190, 200);
            }
            data.content.groupId = '';
        }
    },

    resizeAction: function(data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function() {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function(fields, data, elem) {
        fields.groupId.setText(data.content.groupId);
    },
    applyAction: function(fields, data, elem) {
        data.content.groupId = fields.groupId.getText();
    },
    loadAction: function(data) {
		if (!data.content.groupId) data.content.groupId = '';
    },
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"openstreetmap","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/openstreetmap","pluginUri":"plugins\/openstreetmap","customConfiguration":null};
PluginWrapper._config.id = 'openstreetmap';
PluginWrapper._config.baseUri = "plugins\/openstreetmap";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/openstreetmap\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_openstreetmap\" class=\"openstreetmap\" style=\"width: 100%; height: 100%;z-index: 0\"><\/div>\n{{#isPublished}}\n    {{#firstOnPage}}\n<script>\n    window.WB_OpenStreetMap = {\n        scriptReady: false,\n        L: null,\n        listeners: [],\n        addListener: function(inst, func) {\n            if (this.scriptReady) {\n                func.call(inst, this.L);\n            } else {\n                this.listeners.push({inst: inst, func: func});\n            }\n        },\n        ready: function(L) {\n            this.scriptReady = true;\n            this.L = L;\n            for (var i = 0; i < this.listeners.length; i++) {\n                this.listeners[i].func.call(this.listeners[i].inst, L);\n            }\n        }\n    };\n    window.WB_OpenStreetMap_script_fn = function() {\n        window.WB_OpenStreetMap.ready(L);\n    };\n    const script = document.createElement(\"script\");\n    script.async = true\n    script.onload = WB_OpenStreetMap_script_fn;\n    script.setAttribute(\"src\", '.\/js\/leaflet.js');\n    document.body.appendChild(script);\n<\/script>\n\n<link rel=\"stylesheet\" href=\".\/css\/leaflet.css\"\/>\n\n    {{\/firstOnPage}}\n<script type=\"text\/javascript\">\n    window.WB_OpenStreetMap.addListener(window, function(L) {\n        var map = L.map('{{id}}_openstreetmap');\n        map.setView([{{#content.finalLatLng}}{{.}},{{\/content.finalLatLng}}], {{content.zoomLevel}});\n        var marker = L.marker([{{#content.finalLatLng}}{{.}},{{\/content.finalLatLng}}]).addTo(map);\n\n        var tiles = {\n            'mapnik': 'https:\/\/tile.openstreetmap.org\/{z}\/{x}\/{y}.png',\n            'cyclosm': 'https:\/\/c.tile-cyclosm.openstreetmap.fr\/cyclosm\/{z}\/{x}\/{y}.png',\n            'transportmap': 'https:\/\/tile.thunderforest.com\/transport\/{z}\/{x}\/{y}.png',\n            'hot': 'https:\/\/tile-c.openstreetmap.fr\/hot\/{z}\/{x}\/{y}.png',\n        }\n        L.tileLayer(tiles[{{content.zoomLevel}}] || tiles['mapnik'], {\n            maxZoom: 19,\n            attribution: '&copy; <a href=\"http:\/\/www.openstreetmap.org\/copyright\">OpenStreetMap<\/a>'\n        }).addTo(map);\n    });\n<\/script>\n{{\/isPublished}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/openstreetmap/main.php';
PluginWrapper._config.active = true;
// <iframe width="425" height="350" src="https://www.openstreetmap.org/export/embed.html?bbox=20.477205214207167%2C55.48546775396568%2C21.63145631283998%2C55.86298196603913&amp;layer=mapnik&amp;marker=55.674680221816466%2C21.05433076352358" style="border: 1px solid black"></iframe><br/><small><a href="https://www.openstreetmap.org/?mlat=55.6747&amp;mlon=21.0543#map=11/55.6747/21.0543">   </a></small>
// https://www.openstreetmap.org/export/embed.html?
// 	bbox=20.477205214207167,55.48546775396568,21.63145631283998,55.86298196603913&
// 	layer=mapnik
// 	marker=55.674680221816466,21.05433076352358

require(
	['TextField', 'SizeSelector', 'ui/RadioBoxGroupControl', 'element/PropertyType'],
	function (TextFieldModule, SizeSelector, RadioBoxGroupControl, PropertyTypeModule) {

	if (PropertyTypeModule === null) return;
	var PropertyType = PropertyTypeModule.PropertyType;
	var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;

	// var MapAddress = new PropertyType("openstreetmap/mapAddress", PropertyTypeAccess.User, true, __('Coordinates'), TextFieldModule.TextField)
	var MapZoom = new PropertyType("openstreetmap/mapZoom", PropertyTypeAccess.User, true, __('Zoom level'), SizeSelector.SizeSelector, null, {min: 1, max: 22, hideSpinner: true});
	var MapType = new PropertyType("openstreetmap/mapType", PropertyTypeAccess.User, true, __('Map type'), RadioBoxGroupControl.RadioBoxGroupControl, null, {
		options: [
			{value: 'mapnik', label: __("Standart")},
			{value: 'cyclosm', label: __("CyclOSM")},
			{value: 'transportmap', label: __("Transport")},
			{value: 'hot', label: __("Hot")},
		],
	});

	PropertyType.setDefaultOpenCategory('openstreetmap');
	PropertyType.setCategoryName('openstreetmap', __('OpenStreetMap'));
	PropertyType.setSortOrder('openstreetmap', 1);

	PluginWrapper.registerPlugin('openstreetmap', {
		name: __('OpenStreetMap'),
		icon: 'ico-pl-openstreetmap',
		noButton: true,
		element: {
			minSize: {width: 100, height: 100},
			defaultSize: {width: 602, height: 327},
			resizable: true,
			renderOnce: true,
			supportsFullWidth: true
		},
		batchUpdates: true,
		properties: [
			{
				id: 'mapAddress',
				type: 'OpenStreetMapAddress',
				uiComponentOptions: function(data, opts) {
					opts.placeholder = this.pluginScoped.defaultLatLng.join(',');
					opts.validateText = (JSON.stringify(data.content.ll) !== JSON.stringify(this.pluginScoped.defaultLatLng)) ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Coordinates')));
					return opts;
				},
				get: function(data) { return {text: data.content.address, latLng: data.content.ll || data.content.finalLatLng }; },
				set: function(value, data) {
					var self = this;
					data.content.address = value.text;
					this.pluginScoped.handleAddress(data.content.address, function (ll) {
						data.content.ll = ll ? ll : self.pluginScoped.defaultLatLng;
						data.content.finalLatLng = data.content.ll;

						self.map.setView(data.content.finalLatLng, data.content.zoomLevel);
						self.mapMarker.setLatLng(data.content.finalLatLng);
					});
				}
			},
			{
				id: 'mapZoom',
				type: MapZoom,
				helpText: __('ex. 4'),
				get: function(data) { return data.content.zoomLevel; },
				set: function(value, data) {
					data.content.zoomLevel = value;
					if (this.map) {
						this.map.setZoom(data.content.zoomLevel);
					}
				}
			},
			{
				id: 'mapType',
				type: MapType,
				get: function(data) { return data.content.type; },
				set: function(value, data) {
					data.content.type = value;
					if (this.map) this.setType(data.content.type);
				}
			},
		],
		tileList: function () {
			return {
				'mapnik': 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
				'cyclosm': 'https://c.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png',
				'transportmap': 'https://tile.thunderforest.com/transport/{z}/{x}/{y}.png',
				'hot': 'https://tile-c.openstreetmap.fr/hot/{z}/{x}/{y}.png',
			};
		},
		setType: function (type) {
			var tile = this.tileList()[type] || this.tileList()['mapnik'];

			this.mapTileLayer.setUrl(tile);
		},
		pluginScoped: {
			defaultLatLng: wb_builder.mapsConfig.address ? wb_builder.mapsConfig.address.split(',').map(item => parseFloat(item)) : [40.689181, -74.044526],
			scriptLoaded: false,
			scriptReady: false,
			L: null,
			listeners: [],
			addListener: function(inst, func) {
				if (this.scriptReady) {
					func.call(inst, this.L);
				} else {
					this.listeners.push({inst: inst, func: func});
				}
				if (!this.scriptLoaded) {
					this.scriptLoaded = true;
					var self = this;
					window.WB_OpenStreetMap_script_fn = function(L) {
						self.scriptReady = true;
						self.L = L;
						for (var i = 0; i < self.listeners.length; i++) {
							self.listeners[i].func.call(self.listeners[i].inst, L);
						}
					};
					$.getScript('https://unpkg.com/leaflet@1.9.4/dist/leaflet.js', function () {
						window.WB_OpenStreetMap_script_fn(L);
					});
					var cssElem = $('link#openstreetmap-css');
					if (!cssElem.length) {
						$('<link>')
							.appendTo('head')
							.attr({
								id: "openstreetmap-css",
								crossorigin: "",
								type: 'text/css',
								rel: 'stylesheet',
								href: 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'
							});
					}
				}
			},
			handleAddress: function(address, func) {
				if (!this.L) return;
				if (('' + address).match(/-?[0-9\.]+[\ ]*,[\ ]*-?[0-9\.]+/i)) {
					var parts = ('' + address).split(',');
					if (typeof func === 'function') func.call(this, [parseFloat(parts[0]), parseFloat(parts[1])]);
				} else {
					func.call(this, this.defaultLatLng);
				}
			}
		},
		elem: null,
		map: null,
		mapMarker: null,
		mapTileLayer: null,
		mapElem: null,

		resizeAction: function (data, elem) {
			this.map.invalidateSize();
		},
		loadAction: function (data) {
			if (!data.content.type) data.content.type = 'mapnik';
			if (!data.content.ll || data.content.ll.hasOwnProperty('length') && !data.content.ll.length)
				data.content.ll = null;
			if (!data.content.zoomLevel) data.content.zoomLevel = 16;
			data.content.finalLatLng = (data.content.ll ? data.content.ll : this.pluginScoped.defaultLatLng);
			data.content.address = data.content.finalLatLng.join(',');
		},
		loadedAction: function(data, elem) {
			this.elem = elem;
			this.mapElem = elem.find('.openstreetmap');
			var self = this;
			this.pluginScoped.addListener(this, function(L) {
				self.map = L.map(self.mapElem.get(0));

				self.map.setView(data.content.finalLatLng, data.content.zoomLevel);
				self.mapMarker = L.marker(data.content.finalLatLng).addTo(self.map);

				self.mapTileLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
					maxZoom: 19,
					attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
				}).addTo(self.map);
				self.setType(data.content.type);

				const observer = new ResizeObserver(function () {
					self.map.invalidateSize();
				});
				observer.observe(self.mapElem.get(0));
			});
		},

		supportsAutoWidth: function () {
			return false;
		},
		supportsAutoHeight: function () {
			return true;
		},

		getSupportedSizeUnits: function () {
			let sizeW = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
			let sizeH = [{suffix: '', label: 'px'}, {suffix: '%', min: 1, max: 100, precision: 2, step: 1}];
			if (this.supportsAutoWidth())
				sizeW.push({fixedValue: 'auto', label: __('auto')});
			if (this.supportsAutoHeight())
				sizeH.push({fixedValue: 'auto', label: __('auto')});
			return {sizeW: sizeW, sizeH: sizeH};
		},
		onDblClick: function () {
			var thisClass = this;
			setTimeout(function () {
				var component = thisClass.getPropertyComponent('address');
				if (component) component.focus();
			}, 50);
		}
	});

});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"2checkout","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/2checkout","pluginUri":"plugins\/2checkout","customConfiguration":null};
PluginWrapper._config.id = '2checkout';
PluginWrapper._config.baseUri = "plugins\/2checkout";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/2checkout\/main.png";
PluginWrapper._config.template = "<form action=\"https:\/\/{{#content.demo}}sandbox{{\/content.demo}}{{^content.demo}}www{{\/content.demo}}.2checkout.com\/checkout\/purchase\" method=\"post\" data-gateway-id=\"2checkout\" style=\"width: 100%; height: 100%;\"{{^content.store}} target=\"_blank\"{{\/content.store}}>\n\t<input type=\"hidden\" name=\"sid\" value=\"{{content.sid}}\" \/>\n\t<input type=\"hidden\" name=\"mode\" value=\"2CO\" \/>\n\t<input type=\"hidden\" name=\"li_0_type\" value=\"product\" \/>\n\t<input type=\"hidden\" name=\"li_0_name\" value=\"{{content.name}}\" \/>\n\t<input type=\"hidden\" name=\"li_0_price\" value=\"{{content.price}}\" \/>\n\t<input type=\"hidden\" name=\"currency_code\" value=\"{{content.currency}}\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"merchant_order_id\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"x_receipt_link_url\" value=\"{callbackUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/2checkout/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://www.2checkout.com/" target="_blank">https://www.2checkout.com/</a></p>'
				+ '<p>Approved URL:<br />'
				+ '<pre>' + base_url + 'store-return/2checkout' + '</pre></p>';
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: '2checkout_color2.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return (isStore) ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: '2checkout_color.svg', name: 'coloured'},
			{id: '2checkout_color2.svg', name: 'coloured2'},
			{id: '2checkout_black.svg', name: 'black'},
			{id: '2checkout_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Verifone',
	id: '2checkout',
	keyFieldId: 'sid',
	keyField2Id: 'secret_word',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: 'SID'},
			{type: 'TextField', placeholder: 'SID', id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret word')},
			{type: 'TextField', placeholder: __('Secret word'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'price',
	currencyFieldId: 'currency',
	globalVars: ['secret_word', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	settingsTabDef: Globals.getSettingsContent(),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), '2checkout', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('2checkout', {
	name: 'Verifone',
	element: {
		minSize: {width: 70, height: 55},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'sid', type: 'TwoCheckoutSid', helpText: __('Your Verifone account number'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.sid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('SID')));
				return opts;
			},
			get: function(data) { return data.content.sid; },
			set: function(value, data) {
				data.content.sid = value;
			}
		},
		{id: 'name', type: 'TwoCheckoutName',
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'price', type: 'TwoCheckoutPrice', helpText: __('Amount to be transferred'),
			get: function(data) { return data.content.price; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.price = value;
			}
		},
		{id: 'currency', type: 'TwoCheckoutCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'TwoCheckoutDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), '2checkout'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: 'SID', helpText: __('Your Verifone account number'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.sid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('SID')));
							return opts;
						}},
						{type: 'TextField', id: 'sid'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6,3,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'price'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'USD', name: 'USD'},
							{id: 'EUR', name: 'EUR'},
							{id: 'AED', name: 'AED'},
							{id: 'AFN', name: 'AFN'},
							{id: 'ALL', name: 'ALL'},
							{id: 'ARS', name: 'ARS'},
							{id: 'AUD', name: 'AUD'},
							{id: 'AZN', name: 'AZN'},
							{id: 'BBD', name: 'BBD'},
							{id: 'BDT', name: 'BDT'},
							{id: 'BGN', name: 'BGN'},
							{id: 'BMD', name: 'BMD'},
							{id: 'BND', name: 'BND'},
							{id: 'BOB', name: 'BOB'},
							{id: 'BRL', name: 'BRL'},
							{id: 'BSD', name: 'BSD'},
							{id: 'BWP', name: 'BWP'},
							{id: 'BZD', name: 'BZD'},
							{id: 'CAD', name: 'CAD'},
							{id: 'CHF', name: 'CHF'},
							{id: 'CLP', name: 'CLP'},
							{id: 'CNY', name: 'CNY'},
							{id: 'COP', name: 'COP'},
							{id: 'CRC', name: 'CRC'},
							{id: 'CZK', name: 'CZK'},
							{id: 'DKK', name: 'DKK'},
							{id: 'DOP', name: 'DOP'},
							{id: 'DZD', name: 'DZD'},
							{id: 'EGP', name: 'EGP'},
							{id: 'FJD', name: 'FJD'},
							{id: 'GBP', name: 'GBP'},
							{id: 'GTQ', name: 'GTQ'},
							{id: 'HKD', name: 'HKD'},
							{id: 'HNL', name: 'HNL'},
							{id: 'HRK', name: 'HRK'},
							{id: 'HUF', name: 'HUF'},
							{id: 'IDR', name: 'IDR'},
							{id: 'ILS', name: 'ILS'},
							{id: 'INR', name: 'INR'},
							{id: 'JMD', name: 'JMD'},
							{id: 'JPY', name: 'JPY'},
							{id: 'KES', name: 'KES'},
							{id: 'KRW', name: 'KRW'},
							{id: 'KZT', name: 'KZT'},
							{id: 'LAK', name: 'LAK'},
							{id: 'LBP', name: 'LBP'},
							{id: 'LKR', name: 'LKR'},
							{id: 'LRD', name: 'LRD'},
							{id: 'MAD', name: 'MAD'},
							{id: 'MMK', name: 'MMK'},
							{id: 'MOP', name: 'MOP'},
							{id: 'MRO', name: 'MRO'},
							{id: 'MUR', name: 'MUR'},
							{id: 'MVR', name: 'MVR'},
							{id: 'MXN', name: 'MXN'},
							{id: 'MYR', name: 'MYR'},
							{id: 'NIO', name: 'NIO'},
							{id: 'NOK', name: 'NOK'},
							{id: 'NPR', name: 'NPR'},
							{id: 'NZD', name: 'NZD'},
							{id: 'PEN', name: 'PEN'},
							{id: 'PGK', name: 'PGK'},
							{id: 'PHP', name: 'PHP'},
							{id: 'PKR', name: 'PKR'},
							{id: 'PLN', name: 'PLN'},
							{id: 'QAR', name: 'QAR'},
							{id: 'RON', name: 'RON'},
							{id: 'RUB', name: 'RUB'},
							{id: 'SAR', name: 'SAR'},
							{id: 'SBD', name: 'SBD'},
							{id: 'SCR', name: 'SCR'},
							{id: 'SEK', name: 'SEK'},
							{id: 'SGD', name: 'SGD'},
							{id: 'SYP', name: 'SYP'},
							{id: 'THB', name: 'THB'},
							{id: 'TOP', name: 'TOP'},
							{id: 'TRY', name: 'TRY'},
							{id: 'TTD', name: 'TTD'},
							{id: 'TWD', name: 'TWD'},
							{id: 'UAH', name: 'UAH'},
							{id: 'VND', name: 'VND'},
							{id: 'VUV', name: 'VUV'},
							{id: 'WST', name: 'WST'},
							{id: 'XCD', name: 'XCD'},
							{id: 'XOF', name: 'XOF'},
							{id: 'YER', name: 'YER'},
							{id: 'ZAR', name: 'ZAR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), '2checkout')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.sid.setText(data.content.sid);
		fields.name.setText(data.content.name);
		fields.price.setText(data.content.price);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.sid = fields.sid.getText();
		data.content.name = fields.name.getText();
		data.content.price = fields.price.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (data.content.button_type && data.content.button_type.indexOf('.') === -1) {
			data.content.button_type += '.png';
		}
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			'button_type': 'logo'
		});
		if (!data.content.sid) data.content.sid = ''; // 1303908
		if (!data.content.name) data.content.name = ''; // Products
		if (!data.content.price) data.content.price = '1'; // 25.99
		if (!data.content.currency) data.content.currency = 'USD';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['2checkout2.png', '2checkout3.png','2checkout1.png'].indexOf(data.content.logo) > -1)
			data.content.logo = '2checkout_color2.svg';
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());

	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('sid');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"cash_on_delivery","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/cash_on_delivery","pluginUri":"plugins\/cash_on_delivery","customConfiguration":null};
PluginWrapper._config.id = 'cash_on_delivery';
PluginWrapper._config.baseUri = "plugins\/cash_on_delivery";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/cash_on_delivery\/main.png";
PluginWrapper._config.template = "{{%FILTERS}}\n<form data-gateway-id=\"CashOnDelivery\" action=\"\" method=\"post\" style=\"width: 100%; height: 100%;\" id=\"{{id}}_cash_on_delivery_form\" onsubmit=\"return false;\">\n\t<input type=\"hidden\" name=\"invoiceUrl\" value=\"\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{#content.store}}\n\t<button class=\"btn btn-default btn-raised\" style=\"vertical-align: middle; height: 47px; font-weight: bold;\"><i class=\"fa fa-money\"><\/i> {{\"Cash on Delivery\" | tr}}<\/button>\n\t{{\/content.store}}\n<\/form>\n\n{{#content.store}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\t$('#{{id}}_cash_on_delivery_form').on('beforesend', function(e, checkoutData) {\n\t\t\te.preventDefault();\n\t\t\t$('#{{id}}_cash_on_delivery_invoice_link').attr(\"href\", checkoutData.orderData.invoiceUrl);\n\t\t\t$('#{{id}}_cash_on_delivery_transactionId').text(checkoutData.orderData.transactionId);\n\t\t\t$('#{{id}}_cash_on_delivery_modal')\n\t\t\t\t.appendTo(\"body\")\n\t\t\t\t.modal({\n\t\t\t\t\tbackdrop: 'static',\n\t\t\t\t\tkeyboard: false\n\t\t\t\t})\n\t\t\t\t.on('hide.bs.modal', function() {\n\t\t\t\t\twindow.location.href = checkoutData.backUrl;\n\t\t\t\t})\n\t\t\t;\n\t\t\treturn false;\n\t\t});\n\t})();\n<\/script>\n<div class=\"modal fade\" id=\"{{id}}_cash_on_delivery_modal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n                <h4 class=\"modal-title\">{{\"Cash on Delivery\" | tr}}<\/h4>\n            <\/div>\n            <div class=\"modal-body\">\n\t\t\t\t<div>\n\t\t\t\t\t{{\"Order Id\" | tr}}: <span id=\"{{id}}_cash_on_delivery_transactionId\"><\/span>\n\t\t\t\t<\/div>\n\n\t\t\t\t{{{content.info | i18n}}}\n\t\t\t\t{{#invoiceON}}\n\t\t\t\t<div>\n\t\t\t\t\t<a id=\"{{id}}_cash_on_delivery_invoice_link\" href=\"javascript:void(0)\" target=\"_blank\" class=\"btn btn-success\"><i class=\"fa fa-file-pdf-o\"><\/i> {{{content.btnDownloadLabel | i18n}}}<\/a>\n\t\t\t\t<\/div>\n\t\t\t\t{{\/invoiceON}}\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n            <\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/cash_on_delivery/main.php';
PluginWrapper._config.active = false;

var updateCashOnDeliveryWarning = function(list, store) {
	var _this = this;
	setTimeout(function() {
		var text = '';
		if( _this.enabler.getValue() ) {
			var cartPropertiesFields = list.getUiFields();
			if( !cartPropertiesFields.billingShippingRequired.getValue() )
				text += '<li>' + __('"%s" checkbox must also be checked to enable this gateway.').replace("%s", __('Require Billing/Shipping Information')) + '</li>';
			if( !cartPropertiesFields.companyInfo.getValue() || cartPropertiesFields.companyInfo.getValue() === "" )
				text += '<li>' + __('Seller details are required to create invoices.') + '</li>';
			if( !cartPropertiesFields.invoiceDocumentNumberFormat.getValue() || cartPropertiesFields.invoiceDocumentNumberFormat.getValue() === "" )
				text += '<li>' + __('Invoice document number format is required to create invoices.') + '</li>';
			if( !store.contactForm.content.email || !store.contactForm.content.emailFrom  || store.contactForm.content.emailFrom === "" || store.contactForm.content.email === "" )
				text += '<li>' + __('To send order confirmations recipient and sender emails must be entered in store contact form email settings.') + '</li>';
		}
		if( text === '' )
			_this.cashOnDeliveryWarnings.setContent('');
		else
			_this.cashOnDeliveryWarnings.setContent('<div class="alert alert-warning" style="margin: 5px 0 0;"><ul style="padding: 0 0 0 15px;">' + text + '</ul></div>');
	}, 0);
};

var isV4 = window.wb_builder && wb_builder.builderMajorVersion && wb_builder.builderMajorVersion > 3;

ElementRegister.registerPaymentGateway({
	name: __('Cash on Delivery'),
	id: 'cash_on_delivery',
	priority: 2,
	forceActive: true, // PluginWrapper._config.active,
	pageUrl: null,
	keyFieldId: 'info',
	keyField2Id: 'btnDownloadLabel',
	keyFieldDefaultValue: '<p><span style="color:rgb(0,0,0);">' + __("Your order was successfully placed.") + '<br />' + __("You will be contacted shortly about your order confirmation.") + '</span></p>',
	keyField2DefaultValue: __('Download invoice'),
	keyFieldDef: {type: 'VerticalLayout', children: [
		{type: 'HorizontalLayout', columnWeights: [12, 12, 12], children: [
			{type: 'Label', text: __('Information to display when order is placed')},
			{type: 'WYSIWYGControl', id: 'key', css: {height: 100}, forcePasteAsPlainText: true},
			{type: 'MultilangTextField', id: 'key2', css: {width: 180, marginTop: 5}, visible: isV4, init: function() {
				this.getInputs().css('text-align', 'center');
			}}
		]},
		{type: 'CustomContainer', id: 'cashOnDeliveryWarnings'}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['info', 'btnDownloadLabel'],
	onInit: function(list, store) {
		var _this = this;
		var cartPropertiesFields = list.getUiFields();
		cartPropertiesFields.billingShippingRequired.on("change", function() {
			updateCashOnDeliveryWarning.call(_this, list, store);
		});
		cartPropertiesFields.companyInfo.on("change", function() {
			updateCashOnDeliveryWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberFormat.on("change", function() {
			updateCashOnDeliveryWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberSeries.on("change", function() {
			updateCashOnDeliveryWarning.call(_this, list, store);
		});
		cartPropertiesFields.invoiceDocumentNumberLength.on("change", function() {
			updateCashOnDeliveryWarning.call(_this, list, store);
		});
	},
	onEnable: updateCashOnDeliveryWarning,
	onDisable: updateCashOnDeliveryWarning
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"odnoklassniki","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/odnoklassniki","pluginUri":"plugins\/odnoklassniki","customConfiguration":null};
PluginWrapper._config.id = 'odnoklassniki';
PluginWrapper._config.baseUri = "plugins\/odnoklassniki";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/odnoklassniki\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n\t{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"https:\/\/connect.ok.ru\/connect.js\"><\/script>\n\t{{\/firstOnPage}}\n{{\/isPublished}}\n<div id=\"{{id}}_ok_group_widget\" class=\"wb-prevent-layout-click\"><\/div>\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar onOKLoaded = function(callback) {\n\t\t\tif (!window.OK || !window.OK.CONNECT) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tonOKLoaded(callback);\n\t\t\t\t}, 200);\n\t\t\t} else if (typeof(callback) === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\tvar render = function(w, h) {\n\t\t\ttry {\n{{#isPublished}}\n\t\t\t\tw = w || $('#{{id}}').width();\n\t\t\t\th = h || $('#{{id}}').height();\n{{\/isPublished}}\n{{^isPublished}}\n\t\t\t\tw = '{{width}}'; if (!isNaN(Number(w))) w = Number(w);\n\t\t\t\th = '{{height}}'; if (!isNaN(Number(h))) h = Number(h);\n{{\/isPublished}}\n\t\t\t\t$('#{{id}}_ok_group_widget').empty();\n\t\t\t\twindow.OK.CONNECT.insertGroupWidget('{{id}}_ok_group_widget', '{{content.finalGroupId}}', '{width:' + (isNaN(Number(w)) ? (\"'\" + w + \"'\") : w) + ',height:' + (isNaN(Number(h)) ? (\"'\" + h + \"'\") : h) + '}');\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Odnoklassniki error: ' + error.message);\n\t\t\t}\n\t\t};\n\t\tonOKLoaded(render);\n{{#isPublished}}\n\t\tvar resizeTimeout;\n\t\tvar elem = $('#{{id}}'), inner = $('#{{id}}_ok_group_widget');\n\t\tvar resizeHandler = function() {\n\t\t\tvar iw = inner.width(),\n\t\t\t\tih = inner.height();\n\t\t\tvar ew = elem.width(),\n\t\t\t\teh = elem.height();\n\t\t\tif (iw != ew || ih != eh) {\n\t\t\t\tclearTimeout(resizeTimeout);\n\t\t\t\t(function(w, h) {\n\t\t\t\t\tresizeTimeout = setTimeout(function() {\n\t\t\t\t\t\trender(w, h);\n\t\t\t\t\t}, 500);\n\t\t\t\t})(ew, eh);\n\t\t\t}\n\t\t};\n\t\t$(window).on('resize', resizeHandler);\n\t\tresizeHandler();\n{{\/isPublished}}\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('odnoklassniki', {
	name: 'OK',
	icon: 'ico-pl-odnoklassniki_share',
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 200, height: 285},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{name: 'General', children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Group ID'), helpText: __('Open your group (as administrator), on left side under group logo in menu select "change settings", then at the bottom of the page you will find "ID of this group on Odnoklassniki".'),
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Group ID')));
							return opts;
						}
					},
					{type: 'TextField', id: 'groupId', placeholder: '52101667553405', change: function(fields) {
						fields.__self.notifyHelpSystemPlayer('prop-groupId-change');
					}}
				]}
			]}
		]
	},
	
	pluginScoped: {
		placeholderGroupId: '52101667553405',
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://connect.ok.ru/connect.js', function() {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		}
	},
	properties: [
		{id: 'groupId', type: 'OdnoklassnikiGroupId', helpText: __('Open your group (as administrator), on left side under group logo in menu select "change settings", then at the bottom of the page you will find "ID of this group on Odnoklassniki".'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Group ID')));
				return opts;
			},
			get: function(data) { return data.content.groupId; },
			validate: function (value, data, api) {
				this.updateFinalGroupId(data, api);
			},
			set: function(value, data) {
				data.content.groupId = value;
				this.updateFinalGroupId(data);
			}
		},
	],
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		var self = this;
		clearTimeout(this.resizeTimeout);
		this.resizeTimeout = setTimeout(function() { self.updateElement(); }, 500);
	},
	updateFinalGroupId: function(data, api) {
		if (/^(\d+)$/.test(data.content.groupId)) {
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
			data.content.finalGroupId = data.content.groupId;
		} else {
			if (api) {
				this.setErrorMessage(__('Invalid ID'));
				api.setError(__('Invalid ID'));
			}
			data.content.finalGroupId = this.pluginScoped.placeholderGroupId;
		}
	},
	openAction: function(fields, data, elem) {
		fields.__self = this;
		fields.groupId.setText(data.content.groupId);
	},
	applyAction: function(fields, data, elem) {
		data.content.groupId = fields.groupId.getText();
		this.updateFinalGroupId(data);
	},
	loadAction: function(data) {
		if (!data.content.groupId) data.content.groupId = '';
		this.updateFinalGroupId(data);
	},
	loadedAction: function(data, elem) {
		this.pluginScoped.addListener(this, function() {
			window.OK.CONNECT.insertGroupWidget(data.id + '_ok_group_widget', data.content.finalGroupId, '{width:' + (isNaN(Number(data.width)) ? ("'" + data.width + "'") : data.width) + ',height:' + (isNaN(Number(data.height)) ? ("'" + data.height + "'") : data.height) + '}');
		});
	},
	switchModeAction: function(data, elem) {
		clearTimeout(this.resizeTimeout);
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"odnoklassniki_share","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/odnoklassniki_share","pluginUri":"plugins\/odnoklassniki_share","customConfiguration":null};
PluginWrapper._config.id = 'odnoklassniki_share';
PluginWrapper._config.baseUri = "plugins\/odnoklassniki_share";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/odnoklassniki_share\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n\t{{#firstOnPage}}\n<script type=\"text\/javascript\" src=\"https:\/\/connect.ok.ru\/connect.js\"><\/script>\n\t{{\/firstOnPage}}\n{{\/isPublished}}\n<div id=\"{{id}}_ok_shareWidget\" class=\"wb-prevent-layout-click\"><\/div>\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tvar onOKLoaded = function(callback) {\n\t\t\tif (!window.OK || !window.OK.CONNECT) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tonOKLoaded(callback);\n\t\t\t\t}, 200);\n\t\t\t} else if (typeof(callback) === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\tvar render = function(w, h) {\n\t\t\ttry {\n\t\t\t\tvar timeoutId = '{{id}}_timeout';\n\t\t\t\tif ((timeoutId in window) && window[timeoutId]) {\n\t\t\t\t\tclearTimeout(window[timeoutId]);\n\t\t\t\t}\n\t\t\t\twindow[timeoutId] = setTimeout( function () {\n\t\t\t\t\t$('#{{id}}_ok_shareWidget').empty();\n\t\t\t\t\twindow.OK.CONNECT.insertShareWidget('{{id}}_ok_shareWidget', '{{content.finalUrl}}', \"{{{content.opts}}}\");\n\t\t\t\t}, 100);\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Odnoklassniki error: ' + error.message);\n\t\t\t}\n\t\t};\n\t\tonOKLoaded(render);\n{{#isPublished}}\n\t\tvar resizeTimeout;\n\t\tvar elem = $('#{{id}}'), inner = $('#{{id}}_ok_shareWidget');\n\t\tvar resizeHandler = function() {\n\t\t\tvar iw = inner.width(),\n\t\t\t\tih = inner.height();\n\t\t\tvar ew = elem.width(),\n\t\t\t\teh = elem.height();\n\t\t\tif (iw != ew || ih != eh) {\n\t\t\t\tclearTimeout(resizeTimeout);\n\t\t\t\t(function(w, h) {\n\t\t\t\t\tresizeTimeout = setTimeout(function() {\n\t\t\t\t\t\trender(w, h);\n\t\t\t\t\t}, 500);\n\t\t\t\t})(ew, eh);\n\t\t\t}\n\t\t};\n\t\t$(window).on('resize', resizeHandler);\n\t\tresizeHandler();\n{{\/isPublished}}\n\t})();\n<\/script>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

PluginWrapper.registerPlugin('odnoklassniki_share', {
	name: 'Klass',
	icon: 'ico-pl-odnoklassniki_share',
	element: {
		minSize: {width: 25, height: 25},
		defaultSize: {width: 125, height: 25},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{name: 'General', children: [
				{type: 'VerticalLayout', children: [
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('URL to Like (required)'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.url ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('URL to Like')));
								return opts;
							}},
							{type: 'TextField', id: 'url', placeholder: 'https://www.google.com'}
							// placeholder: (wb_builder.site.publishWithForcedHttps ? 'https' : 'http') + '://' + wb_builder.siteDomain + '/'
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Size')},
							{type: 'DropdownBox', id: 'size', options: [
								{id: '#12', name: '12', value: 12},
								{id: '#20', name: '20', value: 20},
								{id: '#30', name: '30', value: 30},
								{id: '#45', name: '45', value: 45},
								{id: '#70', name: '70', value: 70},
								{id: '#100', name: '100', value: 100},
								{id: '#150', name: '150', value: 150}
							]}
						]}
					]},
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Style')},
							{type: 'DropdownBox', id: 'style', options: [
								{id: 'oval', name: __('Oval')},
								{id: 'rounded', name: __('Rounded')},
								{id: 'straight', name: __('Straight')}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Counter position')},
							{type: 'DropdownBox', id: 'counter', options: [
								{id: 'none', name: __('None'), value: null},
								{id: 'right', name: __('Right'), value: 'right'},
								{id: 'top', name: __('Top'), value: 'top'}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Text')},
							{type: 'DropdownBox', id: 'text', options: [
								{id: '#0', name: __('None'), value: 0},
								{id: '#1', name: __('Klass'), value: 1},
								{id: '#2', name: __('Share'), value: 2},
								{id: '#3', name: __('Like'), value: 3}
							]}
						]}
					]}
				]}
			]}
		]
	},
	properties: [
		{id: 'url', type: 'OdnoklassnikiShareUrl',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.url ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('URL to Like')));
				return opts;
			},
			get: function(data) { return data.content.url; },
			validate: function (value, data, api) {
				this.updateFinalUrl(data, api);
			},
			set: function(value, data) {
				data.content.url = value;
				this.updateFinalUrl(data);
				this.updatePluginPreview(data);
			}
		},
		{id: 'size', type: 'OdnoklassnikiShareSize',
			get: function(data) { return data.content.size; },
			set: function(value, data) {
				data.content.size = value;
				this.updatePluginPreview(data);
			}
		},
		{id: 'style', type: 'OdnoklassnikiShareStyle',
			get: function(data) { return data.content.style; },
			set: function(value, data) {
				data.content.style = value;
				this.updatePluginPreview(data);
			}
		},
		{id: 'counterPosition', type: 'OdnoklassnikiShareCounterPosition',
			get: function(data) { return data.content.counter; },
			set: function(value, data) {
				data.content.counter = value;
				this.updatePluginPreview(data);
			}
		},
		{id: 'text', type: 'OdnoklassnikiShareText',
			get: function(data) { return data.content.text; },
			set: function(value, data) {
				data.content.text = value;
				this.updatePluginPreview(data);
			}
		},
	],
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://connect.ok.ru/connect.js', function(data, textStatus, jqxhr) {
						if (jqxhr.status === 200) {
							self.scriptReady = true;
							inst.setSize(125, 25);
							inst.displayErrorMessage(false);
							for (var i = 0; i < self.listeners.length; i++) {
								self.listeners[i].func.call(self.listeners[i].inst);
							}
						} else {
							inst.setSize(190, 150);
							inst.setErrorMessage(__('Failed to load script'))
							self.scriptReady = false;
						}
					});
			}
		}
	},
	updatePluginPreview: function(data) {
		var width, height, rwidth, rheight;
		if (data.content.size === 150) {
			width = 145;
			height = 145;
			data.content.counter = null;
			data.content.text = 0;
		} else if (data.content.size === 100) {
			width = 100;
			height = 100;
			data.content.counter = null;
			data.content.text = 0;
		} else if (data.content.size === 70) {
			width = 70;
			height = 70;
			data.content.counter = null;
			data.content.text = 0;
		} else if (data.content.size === 45) {
			width = (data.content.counter ? (data.content.counter === 'top' ? 115 : 160) : 45);
			if (data.content.text === 3) {
				width += (data.content.counter === 'top' ? 55 : 125);
			} else if (data.content.text === 2) {
				width += (data.content.counter === 'top' ? 80 : 150);
			} else if (data.content.text === 1) {
				width += (data.content.counter === 'top' ? 10 : 80);
			}
			height = (data.content.counter === 'top' ? 100 : 50);
		} else if (data.content.size === 30) {
			width = (data.content.counter ? (data.content.counter === 'top' ? 85 : 115) : 30);
			if (data.content.text === 3) {
				width += (data.content.counter === 'top' ? 25 : 80);
			} else if (data.content.text === 2) {
				width += (data.content.counter === 'top' ? 40 : 95);
			} else if (data.content.text === 1) {
				width += (data.content.counter === 'top' ? 0 : 50);
			}
			height = (data.content.counter === 'top' ? 70 : 35);
		} else if (data.content.size === 20) {
			width = (data.content.counter ? (data.content.counter === 'top' ? 75 : 100) : 25);
			if (data.content.text === 3) {
				width += (data.content.counter === 'top' ? 20 : 70);
			} else if (data.content.text === 2) {
				width += (data.content.counter === 'top' ? 40 : 90);
			} else if (data.content.text === 1) {
				width += (data.content.counter === 'top' ? 0 : 45);
			}
			height = (data.content.counter === 'top' ? 65 : 30);
		} else { // 12
			width = (data.content.counter ? (data.content.counter === 'top' ? 70 : 85) : 20);
			if (data.content.text === 3) {
				width += (data.content.counter === 'top' ? 10 : 60);
			} else if (data.content.text === 2) {
				width += (data.content.counter === 'top' ? 25 : 75);
			} else if (data.content.text === 1) {
				width += (data.content.counter === 'top' ? 0 : 40);
			}
			height = (data.content.counter === 'top' ? 50 : 25);
		}
		data.content.opts = "{width:" + (isNaN(Number(width)) ? ("'" + width + "'") : width)
				+ ",height:" + (isNaN(Number(height)) ? ("'" + height + "'") : height)
				+ ",st:'" + data.content.style + "'"
				+ ",sz:" + data.content.size
				+ (data.content.counter ? ((data.content.counter === 'top') ? ",vt:'1'" : "") : ",nc:1")
				+ (data.content.text ? (",ck:" + data.content.text) : ",nt:1")
			+ "}";
		rwidth = width;
		rheight = height;
		if (data.content.counter === 'top' && data.content.size > 20) {
			rheight += data.content.size;
		} else if (data.content.size === 150) {
			rwidth += 8;
			rheight += 8;
		}

		this.setSize(rwidth, rheight);
	},
	updateFinalUrl: function(data, api) {
		if(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/im.test(data.content.url)
			|| data.content.url == '') {
			if (api) {
				this.setSize(125, 25);
				this.displayErrorMessage(false);
				api.setError(__(''));
			}
			data.content.finalUrl = data.content.url
		} else {
			if (api) {
				this.setSize(190, 150);
				this.setErrorMessage(__('Invalid URL'));
				api.setError(__('Invalid URL'));
			}
			data.content.finalUrl = 'https://www.google.com';
		}
	},
	openAction: function(fields, data, elem) {
		var itm;
		fields.url.setText(data.content.url);
		itm = fields.size.getItemById('#' + data.content.size);
		fields.size.selectItem(itm);
		itm = fields.style.getItemById(data.content.style);
		fields.style.selectItem(itm);
		itm = fields.counter.getItemById(data.content.counter ? data.content.counter : 'none');
		fields.counter.selectItem(itm);
		itm = fields.text.getItemById('#' + data.content.text);
		fields.text.selectItem(itm);
	},
	applyAction: function(fields, data, elem) {
		var itm, width, height, rwidth, rheight;
		data.content.url = fields.url.getText();
		itm = fields.size.getSelectedItem();
		data.content.size = itm.getOriginal().value;
		itm = fields.style.getSelectedItem();
		data.content.style = itm.getOriginal().id;
		itm = fields.counter.getSelectedItem();
		data.content.counter = itm.getOriginal().value;
		itm = fields.text.getSelectedItem();
		data.content.text = itm.getOriginal().value;
		this.updateFinalUrl(data);
		this.updatePluginPreview(data);
	},
	loadAction: function(data) {
		if (!data.content.url || data.content.url === 'http://dev.ok.ru')
			data.content.url = '';
		if (!data.content.size) data.content.size = 12;
		if (!data.content.style) data.content.style = 'oval';
		if (!data.content.counter) data.content.counter = 'right';
		if (!data.content.text) data.content.text = 1;
		if (!data.content.opts) data.content.opts = "{width:125,height:25,st:'oval',sz:12,ck:1}";
		this.updateFinalUrl(data);
	},
	loadedAction: function(data, elem) {
		this.pluginScoped.addListener(this, function() {
			window.OK.CONNECT.insertGroupWidget(data.id + '_ok_shareWidget', data.content.groupId, data.content.opts);
		});
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('url');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"aamarpay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/aamarpay","pluginUri":"plugins\/aamarpay","customConfiguration":null};
PluginWrapper._config.id = 'aamarpay';
PluginWrapper._config.baseUri = "plugins\/aamarpay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/aamarpay\/main.png";
PluginWrapper._config.template = "<form method=\"post\"\r\n\t  data-gateway-id=\"Aamarpay\"{{^content.store}} target=\"_blank\"{{\/content.store}}\r\n\tstyle=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\r\n\t<input name=\"currency\" type=\"hidden\" value=\"{{content.currency}}\" \/>\r\n\t<input name=\"itemDescription1\" type=\"hidden\" value=\"{{content.itemdescription}}\" \/>\r\n\t<input name=\"itemQuantity1\" type=\"hidden\" value=\"{{#content.itemquantity}}{{content.itemquantity}}{{\/content.itemquantity}}{{^content.itemquantity}}1{{\/content.itemquantity}}\" \/>\r\n\t<input name=\"itemAmount1\" type=\"hidden\" value=\"{{content.itemamount}}\" data-fixed-decimal=\"2\" \/>\r\n\t{{#content.store}}\r\n\t<input name=\"itemId1\" type=\"hidden\" value=\"{transactionId}\" \/>\r\n\r\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\r\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\r\n\t{{\/content.store}}\r\n\t{{^content.store}}\r\n\t{{{requireService}}}\r\n\t{{\/content.store}}\r\n\t{{{content.paymentGatewayButton}}}\r\n<\/form>\r\n\r\n{{#isPublished}}\r\n{{^content.store}}\r\n<div class=\"modal fade\" id=\"aamarpayModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\r\n\t<div class=\"modal-dialog\" role=\"document\">\r\n\t\t<form class=\"modal-content\" id=\"aamarpayForm_{{id}}\" method=\"post\" action=\"\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\r\n\t\t\t\t<h4 class=\"modal-title\" id=\"myModalLabel\">Aamarpay<\/h4>\r\n\t\t\t<\/div>\r\n\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"aamarpayForm_{{id}}-name\">{{\"Name\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"name\" form=\"aamarpayForm_{{id}}\" id=\"aamarpayForm_{{id}}-name\" required=\"required\">\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"aamarpayForm_{{id}}-phone\">{{\"Phone\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"phone\" form=\"aamarpayForm_{{id}}\" id=\"aamarpayForm_{{id}}-phone\" required=\"required\">\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"aamarpayForm_{{id}}-email\">{{\"Email\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\r\n\t\t\t\t\t<input type=\"email\" class=\"form-control\" name=\"email\" form=\"aamarpayForm_{{id}}\" id=\"aamarpayForm_{{id}}-email\" required=\"required\">\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\r\n\t\t\t\t<button id=\"aamarpayNextBtn_{{id}}\" type=\"submit\" class=\"btn btn-primary\">{{\"Next\" | tr}}<\/button>\r\n\t\t\t<\/div>\r\n\t\t<\/form>\r\n\t<\/div>\r\n<\/div>\r\n{{\/content.store}}\r\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/aamarpay/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'CheckBox', 'TextField', 'DropdownBox' ], function (PropertyTypeModule, CheckBox, TextField, DropdownBox) {
	var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
	var PropertyType = PropertyTypeModule.PropertyType;
	var CheckBox = CheckBox.default;
	var TextField = TextField.TextField;
	var DropdownBox = DropdownBox.DropdownBox;

	var AamarpayStoreId = new PropertyType("Aamarpay/AamarpayStoreId", PropertyTypeAccess.User, true, __('Store Id'), TextField, null, {
		placeholder: ''
	});
	var AamarpaySignatureKey = new PropertyType("Aamarpay/AamarpaySignatureKey", PropertyTypeAccess.User, true, __('Signature Key'), TextField, null, {
		placeholder: ''
	});
	var AamarpayCurrency = new PropertyType("Aamarpay/AamarpayCurrency", PropertyTypeAccess.User, true, __('Currency'), DropdownBox, null, {
		placeholder: '',
		options: [
			{id: 'USD', name: 'USD', value: 'USD'},
			{id: 'BDT', name: 'BDT', value: 'BDT'},
		],
	}).inline(6);

	var AamarpaySandbox = new PropertyType("Aamarpay/AamarpaySandbox", PropertyTypeAccess.User, true, __('Sandbox mode'), CheckBox, null, {
		placeholder: ''
	});
	var AamarpayItemDescription = new PropertyType("Aamarpay/AamarpayItemDescription", PropertyTypeAccess.User, true, __('Product description'), TextField, null, {
		placeholder: ''
	});
	var AamarpayItemAmount = new PropertyType("Aamarpay/AamarpayItemAmount", PropertyTypeAccess.User, true, __('Price'), TextField, null, {
		placeholder: ''
	}).inline(6);
	PropertyType.setSortOrder('Aamarpay', 1);
	PropertyType.setDefaultOpenCategory('Aamarpay');

	var pluginId = 'aamarpay';
	var Globals = {
		getDefaultStyles: function (isStore) {
			var styles = {
				button_color: '#ffffff',
				button_border: {
					color: '#cccccc',
					style: 'solid',
					weight: 1,
					css: {border: '1px solid #cccccc'},
					cssRaw: 'border: 1px solid #cccccc'
				},
				logo: 'aamarpay_color.svg',
				font_family: 'Arial',
				font_size: 12,
				label_color: '#949494'
			};
			return isStore ? styles : $.extend(true, styles, {
				button_label: '',
				showlogo: true,
				logo_width: 110,
				button_padding: 4
			});
		},
		getLogosList: function () {
			return [
				{id: 'aamarpay_color.svg', name: 'coloured'},
			];
		}
	};

	ElementRegister.registerPaymentGateway({
		name: 'Aamarpay',
		id: pluginId,
		forceActive: true,
		// pluginId: pluginId,
		// className: 'Aamarpay',
		pageUrl: 'https://aamarpay.com/',
		keyField: __('Store Id'),
		keyFieldId: 'storeId',
		keyField2: __('Signature Key'),
		keyField2Id: 'signatureKey',
		keyField3: __('Sandbox'),
		keyField3Id: 'sandbox',
		keyFieldDef: {
			type: 'HorizontalLayout', columnWeights: [6, 6, 12, 12], children: [
				{
					type: 'VerticalLayout', css: {}, children: [
						{type: 'Label', text: __('Store Id')},
						{type: 'TextField', placeholder: __('Store Id'), id: 'key'},
					]
				},
				{
					type: 'VerticalLayout', css: {}, children: [
						{type: 'Label', text: __('Signature Key')},
						{type: 'TextField', placeholder: __('Signature Key'), id: 'key2', password: true},
					]
				},
				{
					type: 'CheckBox',
					label: __('Test mode'),
					id: 'key3',
					css: {padding: 7, marginTop: 5, display: 'inline-block'},
					init: function () {
						this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
					}
				}
			]
		},
		nameFieldId: 'itemdescription',
		priceFieldId: 'itemamount',
		currencyFieldId: 'currency',
		globalVars: ['storeId', 'signatureKey', 'sandbox'],
		useStylesInStoreCart: true,
		priceFixedDecimal: 2,
		defaultStyles: Globals.getDefaultStyles(true),
		styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), pluginId, true),
		logos: Globals.getLogosList()
	});

	PluginWrapper.registerPlugin(pluginId, {
		name: 'Aamarpay',
		element: {
			minSize: {width: 120, height: 55},
			defaultSize: {width: 160, height: 81},
			resizable: true
		},
		properties: PluginWrapper.paymentGatewayStylePropertiesDef([
			{
				id: 'storeId', type: AamarpayStoreId, helpText: __("Your Merchant ID  Provided by AamarPay"),
				uiComponentOptions: function (data, opts) {
					opts.validateText = data.content.storeId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store Id')));
					return opts;
				},
				get: function (data) {
					return data.content.storeId;
				},
				set: function (value, data) {
					data.content.storeId = value;
				}
			},
			{
				id: 'signatureKey', type: AamarpaySignatureKey, helpText: __("You will need to provide the Signature Key issued by AamarPay, which serves as a unique authentication key."),
				uiComponentOptions: function (data, opts) {
					opts.validateText = data.content.signatureKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Signature Key')));
					return opts;
				},
				get: function (data) {
					return data.content.signatureKey;
				},
				set: function (value, data) {
					data.content.signatureKey = value;
				}
			},
			{
				id: 'sandbox', type: AamarpaySandbox, helpText: __("For testing purpose without real payments"),
				get: function (data) {
					return data.content.sandbox;
				},
				set: function (value, data) {
					data.content.sandbox = value;
				}
			},
			{
				id: 'itemdescription',
				type: AamarpayItemDescription,
				helpText: __('The name of the goods. Cannot contain special symbols'),
				get: function (data) {
					return data.content.itemdescription;
				},
				set: function (value, data) {
					data.content.itemdescription = value;
				}
			},
			{
				id: 'itemamount',
				type: AamarpayItemAmount,
				helpText: __("Amount to be transferred") + ', ' + __('BDT'),
				get: function (data) {
					return data.content.itemamount;
				},
				validate: function (value) {
					if (/^[\d.,]+$/.test(value)) {
						return '';
					} else {
						return (__('Incorrect format'));
					}
				},
				set: function (value, data) {
					data.content.itemamount = value;
				}
			},
			{
				id: 'currency', type: AamarpayCurrency,
				get: function (data) {
					return data.content.currency;
				},
				set: function (value, data) {
					data.content.currency = value;
				}
			},
		], Globals.getLogosList(), pluginId),
		propertyDialog: {
			noScroll: true,
			tabs: [
				{
					children: [
						{
							type: 'VerticalLayout', spacing: 15, children: [
								{
									type: 'HorizontalLayout', children: [
										{
											type: 'VerticalLayout', children: [
												{
													type: 'Label',
													text: __('Store Id'),
													helpText: __("Your Merchant ID  Provided by AamarPay"),
													uiComponentOptions: function (data, opts) {
														opts.validateText = data.content.storeId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store Id')));
														return opts;
													}
												},
												{type: 'TextField', id: 'storeId'}
											]
										},
										{
											type: 'VerticalLayout', children: [
												{
													type: 'Label',
													text: __('Signature Key'),
													helpText: __("You will need to provide the Signature Key issued by AamarPay, which serves as a unique authentication key.")
												},
												{type: 'TextField', id: 'signatureKey'}
											]
										}
									]
								},
								{
									type: 'HorizontalLayout', children: [
										{
											type: 'VerticalLayout', children: [
												{
													type: 'Label',
													text: __('Sandbox'),
													helpText: __("For testing purpose without real payments")
												},
												{type: 'CheckBox', id: 'sandbox'}
											]
										}
									]
								},
								{
									type: 'VerticalLayout', children: [
										{
											type: 'Label',
											text: __('Product description'),
											helpText: __('The name of the goods. Cannot contain special symbols')
										},
										{type: 'TextField', id: 'itemdescription'}
									]
								},
								{
									type: 'HorizontalLayout', children: [
										{
											type: 'VerticalLayout', children: [
												{
													type: 'Label',
													text: __('Amount'),
													helpText: __("Amount to be transferred") + ', ' + __('BDT')
												},
												{type: 'TextField', id: 'itemamount'}
											]
										},
									]
								},
								{
									type: 'VerticalLayout', children: [
										{type: 'Label', text: __('Currency')},
										{
											type: 'DropdownBox', id: 'currency', options: [
												{id: '#USD', name: 'USD', value: 'USD'},
												{id: '#BDT', name: 'BDT', value: 'BDT'},
											]
										}
									]
								}
							]
						}
					]
				},
				PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), pluginId, true)
			]
		},
		openAction: function (fields, data, elem) {
			fields.storeId.setText(data.content.storeId);
			fields.signatureKey.setText(data.content.signatureKey);
			fields.sandbox.setText(data.content.sandbox);
			fields.itemdescription.setText(data.content.itemdescription);
			fields.itemamount.setText(data.content.itemamount);
			PluginWrapper.paymentGatewayOpenAction(fields, data);
		},
		applyAction: function (fields, data, elem) {
			data.content.storeId = fields.storeId.getText();
			data.content.signatureKey = fields.signatureKey.getText();
			data.content.sandbox = fields.sandbox.getValue();
			data.content.itemdescription = fields.itemdescription.getText();
			data.content.itemamount = fields.itemamount.getText();
			data.content.currency = fields.currency.getText();
			PluginWrapper.paymentGatewayApplyAction(fields, data);
		},
		loadAction: function (data) {
			data.content.__globalVars = ['storeId', 'signatureKey'];
			if (!data.content.storeId) data.content.storeId = '';
			if (!data.content.signatureKey) data.content.signatureKey = '';
			if (!data.content.sandbox) data.content.sandbox = false;
			if (!data.content.itemdescription) data.content.itemdescription = 'Donate';
			if (!data.content.itemamount) data.content.itemamount = '1';
			if (!data.content.currency) data.content.currency = 'BDT';
			PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
		},
		onDblClick: function () {
			var thisClass = this;
			setTimeout(function () {
				var component = thisClass.getPropertyComponent('storeId');
				if (component) component.focus();
			}, 50);
		}
	});
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"default_dark_ui","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/default_dark_ui","pluginUri":"plugins\/default_dark_ui","customConfiguration":{}};
PluginWrapper._config.id = 'default_dark_ui';
PluginWrapper._config.baseUri = "plugins\/default_dark_ui";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "<div id=\"builder_canvas\"><\/div>\n<div id=\"elements_toolbar\" class=\"spdrk-tb-elements spdrk-collapsed\"><\/div>\n<div id=\"builder_toolbar\" class=\"spdrk-tb-main\"><\/div>\n<div id=\"builder_notification\" class=\"spdrk-tb-notifications hidden\"><\/div>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper._config.fileInfo = {"main.min.css":{"time":1755156796}};
var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__spreadArray=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};define("default_dark_ui/SPDarkBuilderNotification",["require","exports","BuilderEvent","Service"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkBuilderNotification=void 0,o=__importDefault(o);var n=function(){function e(e,t){var o=this;this.builderBannerOriginalBottom=null,this.visible=!0,this.tempHidden=!1,this.empty=!0,this.builder=e,this.elem=t,this.content=$("<div/>"),this.closeButton=$('<button class="close">&times;</button>').on("click touchend",function(){return o.setVisible(!1)}),this.elem.append(this.content,this.closeButton),setTimeout(function(){var e=o.getBuilderImageBanner();e&&(o.builderBannerOriginalBottom=parseInt(e.css("bottom")),e.css("bottom",o.builderBannerOriginalBottom+t.outerHeight()+"px"))},500),i.GlobalEvents.on("notification.changed",function(e){o.setMessage(e.message,e.isHtml)}),i.GlobalEvents.on("help.show help.hide help.playershow help.playerhide preview.show preview.hide",function(e){o.tempHidden=e.visible,o.updateVisibility()})}return e.prototype.getBuilderImageBanner=function(){return o.default.RemoteLoginDialog.getImageBanner()},e.prototype.setMessage=function(e,t){return void 0===t&&(t=!1),this.empty=!e||(t||"string"!=typeof e?this.content.empty().append(e):this.content.text(e),!1),this.updateVisibility()},e.prototype.setVisible=function(e){return this.visible=e,this.updateVisibility()},e.prototype.updateVisibility=function(){var e=this.getBuilderImageBanner();return e&&e.css("bottom",this.builderBannerOriginalBottom+"px"),!this.visible||this.tempHidden||this.empty?this.elem.addClass("hidden"):this.elem.removeClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e}();t.SPDarkBuilderNotification=n}),define("default_dark_ui/SPDarkMenuNode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkMenuNode=void 0;var o=function(){function e(){this.visible=!0,this.enabled=!0,this.available=!0,this.locked=!1,this.iconVisible=!1,this.iconClass=null,this.textVisible=!1,this.isActive=!1,this.isChecked=!1,this.isPremium=!1,this.autoHideLabel=!1,this.elem=$('<div class="spdrk-menu-node"/>'),this.content=$('<span class="spdrk-mn-content"/>'),this.icon=$('<i class="ico-tb-i"/>'),this.text=$('<span class="spdrk-mn-text"/>'),this.elem.append(this.content)}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return(this.visible=e)?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this.elem.trigger(e?"toolbaritem.show":"toolbaritem.hide"),this},e.prototype.getVisible=function(){return this.visible},e.prototype.getIcon=function(){return this.iconClass},e.prototype.setIcon=function(e){return null===(this.iconClass=e)?this.iconVisible&&(this.iconVisible=!1,this.icon.detach()):(this.icon.attr("class","ico-tb-i "+e),this.iconVisible||(this.iconVisible=!0,this.content.prepend(this.icon))),this},e.prototype.setIconEnabled=function(e){return e?this.elem.addClass("enabled"):this.elem.removeClass("enabled"),this},e.prototype.setText=function(e){return null===e?this.textVisible&&(this.textVisible=!1,this.text.detach()):(this.text.empty().append(e),this.textVisible||(this.textVisible=!0,this.iconVisible?this.text.insertAfter(this.icon):this.content.prepend(this.text))),this},e.prototype.getTextElem=function(){return this.text},e.prototype.setTooltip=function(e){return this.elem.attr("title",e),this},e.prototype.setTooltipMark=function(e,t){void 0===t&&(t="");var o=$('<span class="badge wb_badge_help" >?</span>');return t&&""!=t&&o.attr("data-placement",t),this.content.after(o.attr("data-original-title",e)),this},e.prototype.setActive=function(e){return e?this.elem.addClass("active"):this.elem.removeClass("active"),this.isActive=e,this},e.prototype.getActive=function(){return this.isActive},e.prototype.setEnabled=function(e){return this.enabled=e,this.updateStateStyle(),this},e.prototype.setAvailable=function(e){return this.available=e,this.updateStateStyle(),this},e.prototype.setLocked=function(e){return this.locked=e,this.updateStateStyle(),this},e.prototype.getEnabled=function(){return this.enabled},e.prototype.getAvailable=function(){return this.available},e.prototype.getLocked=function(){return this.locked},e.prototype.updateStateStyle=function(){return this.enabled&&this.available&&!this.locked?this.elem.removeClass("disabled"):this.elem.addClass("disabled"),this},e.prototype.addSpacer=function(){return $('<span class="spacer"></span>').insertAfter(this.elem.find(".spdrk-mn-text")),this},e.prototype.setAutoHideLabel=function(e){return e==this.autoHideLabel||((this.autoHideLabel=e)?this.text.addClass("spdrk-mobile-hidden"):this.text.removeClass("spdrk-mobile-hidden")),this},e.prototype.addCssClass=function(e){return this.elem.addClass(e),this},e.prototype.removeCssClass=function(e){return this.elem.removeClass(e),this},e.prototype.toggleCssClass=function(e){return this.elem.toggleClass(e),this},e.prototype.getPremium=function(){return this.isPremium},e.prototype.setPremium=function(e,t){return void 0===t&&(t=""),this.isPremium===e||(this.isPremium=e,this.isPremium?this.elem.append($('<i class="premium-marker fa fa-star '+t+'"></i>')):this.elem.children(".premium-marker").remove()),this},e}();t.SPDarkMenuNode=o}),define("default_dark_ui/SPDarkMenuItem",["require","exports","default_dark_ui/SPDarkMenuNode","PluginApi/PluginTranslation","default_dark_ui/SPDarkMenu"],function(e,t,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkMenuItem=void 0;var i=function(s){function r(e,t,o,i){void 0===o&&(o=null),void 0===i&&(i=null);var n=s.call(this)||this;return n.switcherBlock=o,n.builder=i,n.clickCallback=null,n.switchCallback=null,n.data=null,n.switchVisible=!1,n.isDraggable=!1,n.dots=null,n.extraText=null,n.setIcon(e).setText(t),n.name=null!==t?n.text.text():"",n.name&&n.setTooltip(n.name),n.switch=$('<div class="spdrk-mn-switch"><input type="checkbox" class="spdrk-switch-input" id="spdrk-ims-'+r.nextSwitchId+'" /><label for="spdrk-ims-'+r.nextSwitchId+++'" class="spdrk-switch-label spdrk-no-text"></label></div>'),o&&i&&n.switch.prepend($("<span>"+t+(t==(0,a.__)("Auto Layout")?"":" "+(0,a.__)("version"))+"</span>")),n.switch.find("input").on("change",function(e){if(r.isClickPrevented()||!n.getEnabled()||n.getLocked())return e.stopImmediatePropagation(),void e.preventDefault();n.isActive=$(e.target).is(":checked"),n.isChecked=$(e.target).is(":checked"),n.switchCallback&&n.switchCallback(n)}).on("click",function(e){if(r.isClickPrevented()||!n.getEnabled()||n.getLocked())return e.stopImmediatePropagation(),void e.preventDefault()}),n.elem.on("touchstart",function(e){r.isClickPrevented()||$(e.target).closest(".spdrk-mn-switch").length||(r.lastTouchedItem=n)}),n.elem.on("touchmove touchcancel",function(e){r.isClickPrevented()||$(e.target).closest(".spdrk-mn-switch").length||(r.lastTouchedItem=null)}),n.elem.on("touchend",function(e){r.isClickPrevented()||$(e.target).closest(".spdrk-mn-switch").length||r.lastTouchedItem===n&&(r.lastTouchedItem=null,e.stopImmediatePropagation(),e.preventDefault(),n.elem.trigger("click"))}),n.elem.on("click",function(e){r.isClickPrevented()||$(e.target).closest(".spdrk-mn-switch").length||(e.stopImmediatePropagation(),e.preventDefault(),n.getEnabled()&&!n.getLocked()&&(n.clickCallback?(l.SPDarkMenu.closeAllDropDowns(),n.clickCallback(n)):n.switchVisible&&(n.setActive(!n.getActive()),n.switchCallback&&n.switchCallback(n))))}),n}return __extends(r,s),r.prototype.setDragable=function(e){if(this.isDraggable==e)return this;if(this.isDraggable=e){if(!this.dots){var t='<svg width="3" height="3"><circle cx="1.5" cy="1.5" r="1.5" fill="#919191"/></svg>';this.dots=$("<div>").addClass("spdrk-mn-dots").append($("<div>").append(t).append(t).append(t)).append($("<div>").append(t).append(t).append(t))}this.elem.addClass("spdrk-mn-draggable"),this.text.before(this.dots)}else this.dots&&this.dots.detach(),this.elem.removeClass("spdrk-mn-draggable");return this},r.isClickPrevented=function(){return r.preventClickUntil>(new Date).getTime()},r.preventClick=function(){r.preventClickUntil=(new Date).getTime()+250},r.prototype.onClick=function(e){return this.clickCallback=e,this},r.prototype.onSwitch=function(e){return this.switchCallback=e,this},r.prototype.setSwitchVisible=function(e){return this.switchVisible!=e&&((this.switchVisible=e)?(this.switcherBlock?this.switcherBlock.append(this.switch):this.content.append(this.switch),this.elem.addClass("spdrk-mn-has-switch")):(this.switch.detach(),this.elem.removeClass("spdrk-mn-has-switch"))),this},r.prototype.setActive=function(e){return this.isActive=e,s.prototype.setActive.call(this,e)},r.prototype.setChecked=function(e){return this.isChecked=e,this.switch.children("input").prop("checked",e),e?this.elem.addClass("checked"):this.elem.removeClass("checked"),this},r.prototype.getChecked=function(){return this.isChecked},r.prototype.setData=function(e){return this.data=e,this},r.prototype.getData=function(){return this.data},r.prototype.setExtraText=function(e){return null===e||""===e?this.extraText&&(this.removeCssClass("spdrk-mi-has-extra-text"),this.extraText.remove()):(this.extraText||(this.addCssClass("spdrk-mi-has-extra-text"),this.extraText=$('<div class="spdrk-mi-extra-text"></div>'),this.extraText.appendTo(this.text)),this.extraText.text(e)),this},r.lastTouchedItem=null,r.nextSwitchId=0,r.preventClickUntil=0,r}(o.SPDarkMenuNode);t.SPDarkMenuItem=i}),define("default_dark_ui/SPDarkMenu",["require","exports","default_dark_ui/SPDarkMenuNode","default_dark_ui/SPDarkMenuItem","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,o,s,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkMenu=void 0;var n=function(t){function n(e){void 0===e&&(e=!1);var i=t.call(this)||this;i.searchBlockVisible=!1,i.footerContainer=null,i.footerVisible=!0,i.massAddMode=!1,i.items=[],i.inline=!1,i.oneRow=!0,i.caretVisible=!1,i.clickCallback=null;var r=i;return i.dropdown=$('<div class="spdrk-dropdown" title=""/>'),e&&(i.searchBlockVisible=!0,i.searchBlock=$("<div>").addClass("spdrk-dd-search").appendTo(i.dropdown),i.searchInput=$("<input>").addClass("form-control").attr("type","text").attr("placeholder",(0,a.__)("Search")).on("change keyup",function(e){27===e.keyCode&&(this.value="");for(var t=this.value.toLowerCase(),o=0,i=r.items;o<i.length;o++){var n=i[o];if(n){var s=0<=n.getTextElem().text().toLowerCase().indexOf(t);n.setVisible(s)}}}).appendTo(i.searchBlock)),i.itemContainer=$('<div class="spdrk-dd-item-container"/>'),i.dropdown.append($('<div class="spdrk-dd-scroll"/>').append(i.itemContainer)),i.elem.addClass("spdrk-mn-has-dropdown spdrk-dd-right").on("mouseover",function(e){var t=$(e.target);if(!i.elem.is(".spdrk-over")&&!t.closest(".spdrk-et-vertical").length){var o=t.parents().addBack().filter(".spdrk-mn-has-dropdown");o.length<2&&(n.closeAllDropDowns(),o.each(function(){$(this).addClass("spdrk-over")}))}}).on("mouseout",function(e){$(e.target).closest(".spdrk-et-vertical").length||i.elem.parents(".spdrk-dropdown").length||i.elem[0].contains(e.relatedTarget)||(s.SPDarkMenuItem.preventClick(),i.elem.removeClass("spdrk-over ext-open"))}).on("touchstart",function(e){n.lastTouchedMenu=i}).on("touchmove touchcancel",function(e){n.lastTouchedMenu=null}).on("touchend",function(e){if(n.lastTouchedMenu===i){n.lastTouchedMenu=null,e.stopImmediatePropagation();try{e.preventDefault()}catch(e){}$(e.target).trigger("click")}}).on("click",function(e){var t=$(e.target);if(i.elem.is(".spdrk-over")){var o=t.closest(".spdrk-dropdown,.spdrk-menu-node");if(o.length&&o[0]===i.elem[0])return e.preventDefault(),void i.elem.removeClass("spdrk-over ext-open").find(".spdrk-over").removeClass("spdrk-over ext-open-submenu");i.elem.removeClass("spdrk-over ext-open ext-open-submenu").find(".spdrk-over").removeClass("spdrk-over ext-open ext-open-submenu")}n.closeAllDropDowns(),$(e.target).parents().addBack().filter(".spdrk-mn-has-dropdown").each(function(){$(this).addClass("spdrk-over")})}).append(i.dropdown),i.caret=$('<span class="caret"></span>'),i.content.on("click",function(e){i.clickCallback&&!$(e.target).is(".caret-box")&&i.clickCallback.call(i)}),i}return __extends(n,t),n.firstInit=function(){n.firstInitDone||(n.firstInitDone=!0,$(document.body).on("touchstart",function(e){$(e.target).closest(".spdrk-has-dropdown").length||n.closeAllDropDowns()}),i.GlobalEvents.on("modal.show contextmenu.show",function(){n.closeAllDropDowns()}))},n.closeAllDropDowns=function(){$(".spdrk-over").removeClass("spdrk-over ext-open ext-open-submenu")},n.prototype.beginMassAddItems=function(){this.massAddMode=!0},n.prototype.endMassAddItems=function(){this.massAddMode=!1,this.updateSearchBlockVisibility()},n.prototype.updateSearchBlockVisibility=function(){if(this.searchBlock&&this.searchInput){this.searchInput.val("");var e=this.items.length>=n.minOptionsNumberForSearchShowing;if(this.searchBlockVisible!==e&&(this.searchBlockVisible=e,this.searchBlock.css("display",e?"block":"none"),!e))for(var t=0,o=this.items;t<o.length;t++){var i=o[t];i&&i.setVisible(!0)}}},n.prototype.clearItems=function(){return this.items=[],this.itemContainer.empty(),this},n.prototype.addItem=function(e){return this.items.push(e),e?this.itemContainer.append(e.getElem()):this.itemContainer.append('<div class="spdrk-dropdown-separator"/>'),this.massAddMode||this.updateSearchBlockVisibility(),this},n.prototype.setSeparatorForItemVisible=function(e,t){var o=this.items.indexOf(t),i=this.items.length;if(!(o<0)){var n=null;0==o&&1<i&&!this.items[o+1]?n=t.getElem().next():0<o&&!this.items[o-1]&&(i<=o+1||!this.items[o+1])&&(n=t.getElem().prev()),n&&(e?n.show():n.hide())}},n.prototype.getItems=function(){return this.items},n.prototype.addFooterItem=function(e){return e&&(this.footerContainer||(this.footerContainer=$('<div class="spdrk-dd-footer"></div>'),this.footerVisible||this.footerContainer.addClass("hidden"),this.dropdown.append(this.footerContainer)),this.footerContainer.append(e.getElem())),this},n.prototype.setFooterVisibility=function(e){return this.footerVisible=e,this.footerContainer&&(e?this.footerContainer.removeClass("hidden"):this.footerContainer.addClass("hidden")),this},n.prototype.setInline=function(e){return(this.inline=e)?this.elem.addClass("spdrk-dd-inline"):this.elem.removeClass("spdrk-dd-inline"),this},n.prototype.setOneRow=function(e){return(this.oneRow=e)?this.elem.addClass("spdrk-dd-onerow"):this.elem.removeClass("spdrk-dd-onerow"),this},n.prototype.getInline=function(){return this.inline},n.prototype.getOneRow=function(){return this.oneRow},n.prototype.setDropdownDirection=function(e){return this.elem.removeClass("spdrk-dd-left spdrk-dd-right").addClass("spdrk-dd-"+e),this},n.prototype.setCaretVisible=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=!1),this.caretVisible!=e&&(this.caretVisible=e,t&&this.caret.addClass("closely"),e?o?this.content.append($('<span class="caret-box"></span>').append(this.caret)):this.content.append(this.caret):(this.caret.detach(),this.content.find(".caret-box").detach())),this},n.prototype.setOpen=function(e){return e?this.elem.addClass("spdrk-over"):this.elem.removeClass("spdrk-over"),this},n.prototype.onClick=function(e){return this.clickCallback=e,this},n.lastTouchedMenu=null,n.minOptionsNumberForSearchShowing=8,n.firstInitDone=!1,n}(o.SPDarkMenuNode);t.SPDarkMenu=n}),define("default_dark_ui/SPDarkPageSelector",["require","exports","default_dark_ui/SPDarkMenu","BuilderEvent","default_dark_ui/SPDarkMenuItem","PluginApi/PluginTranslation","default_dark_ui/SPDarkMenuNode"],function(e,t,o,n,d,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkPageSelector=void 0;var r=function(i){function e(e,t){void 0===t&&(t=!1);var o=i.call(this,!0)||this;return o.builder=e,o.mobile=t,o.inPreview=!1,o.queueUpdateTimeout=0,o.elem.addClass("spdrk-page-selector"),o.setCaretVisible(!0,!1,!0),o.addFooterItem(new a(o.builder)),n.GlobalEvents.on("preview.show",function(e){o.inPreview=e.visible,o.updateVisibility()}),n.GlobalEvents.on("preview.hide",function(e){o.inPreview=e.visible,o.updateVisibility()}),n.GlobalEvents.on("page.load pages.changed anchors.changed",function(){o.queueUpdate(),o.updateVisibility()}),o.queueUpdate(),o.updateVisibility(),o}return __extends(e,i),e.prototype.updateVisibility=function(){this.setVisible((!this.inPreview||this.mobile)&&0<this.getItems().length),this.setFooterVisibility(!this.inPreview)},e.prototype.queueUpdate=function(){var e=this;this.queueUpdateTimeout&&clearTimeout(this.queueUpdateTimeout),this.queueUpdateTimeout=window.setTimeout(function(){e.queueUpdateTimeout=0,e.update(),e.updateVisibility()},1e3)},e.prototype.update=function(){this.clearItems();var e=this.builder.getSiteTree();this.beginMassAddItems();var t=this.buildTree(e);this.endMassAddItems();var o=t?t.name:(0,s.__)("Home");return this.mobile||this.setText($("<span>").append($("<span>").addClass("spdrk-selected-page-name").html(o))),this},e.prototype.buildTree=function(e,t){void 0===t&&(t=0);for(var o,i=null,n=!1,s=0,r=e;s<r.length;s++){var a=r[s];a.isServicePage&&!n&&(this.addItem(null),n=!0);var l="";for(o=t;0<o;o--)l+=a.isAnchor?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";"icon"in a&&a.icon?l+='<i class="'+a.icon+'"></i>':l+="&nbsp;",l+=a.name,this.addItem(new d.SPDarkMenuItem(null,l).setTooltip(a.name).setData(a).setActive(a.isCurrent()).setAvailable(a.enabled).onClick(this.onPageSelect.bind(this)).addCssClass(a.isAnchor?"spdrk-anchor-link":"")),a.isCurrent()&&(i=a);var u=this.buildTree(a.children,t+1);u&&(i=u)}return i},e.prototype.onPageSelect=function(e){var t=e.getData();this.inPreview?t.preview():t.navigate()},e}(o.SPDarkMenu);t.SPDarkPageSelector=r;var a=function(i){function e(e){var t=i.call(this)||this;t.builder=e;var o=[];return t.elem.addClass("spdrk-ps-menu-buttons no-hover").on("click",function(){t.builder.showSitePagesDialog()}),t.setEnabled(!e.isEditingLocked()),n.GlobalEvents.on("builder.editing.changed",function(e){t.setEnabled(!e.editingLocked)}),o.push($('<span class="spdrk-inner-btn"><i class="fa fa-pencil"></i>'+(0,s.__)("Edit")+"</span>").attr("title",(0,s.__)("Edit"))),t.setText(o),t.setTooltip(""),t}return __extends(e,i),e}(i.SPDarkMenuNode)}),define("default_dark_ui/SPDarkToolbarGroup",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkToolbarGroup=void 0;var o=function(){function e(){var e=this;this.visible=!0,this.elem=$('<div class="spdrk-tb-group" />').on("toolbaritem.show toolbaritem.hide",function(){e.update()}),this.items=[]}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return this.visible=e,this.update(),this},e.prototype.update=function(){var e=this.visible;if(e){e=!1;for(var t=0,o=this.items;t<o.length;t++){if(o[t].getVisible()){e=!0;break}}}return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.addItem=function(e){return this.items.push(e),this.elem.append(e.getElem()),this.update(),this},e.prototype.removeItem=function(e){var t=this.items.indexOf(e);return 0<=t&&(this.items.splice(t,1),e.getElem().remove(),this.update()),this},e.prototype.getItems=function(){return this.items},e}();t.SPDarkToolbarGroup=o}),define("default_dark_ui/SPDarkPreviewModeSelector",["require","exports","default_dark_ui/SPDarkMenu","BuilderEvent","default_dark_ui/SPDarkMenuItem"],function(e,t,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkPreviewModeSelector=void 0;var i=function(s){function e(e){var n=s.call(this)||this;n.builder=e,n.modeButtons={},n.elem.addClass("spdrk-dd-inline");for(var t=0,o=__spreadArray([],e.getModes(),!0).sort(function(e,t){return t.width-e.width});t<o.length;t++){var i=o[t];n.addItem(n.modeButtons[i.id]=new a.SPDarkMenuItem("ico-tb-mode-"+i.id,i.name).setExtraText("tv"===i.id&&"function"==typeof e.getMaxPreviewWidth?"1200px+":i.width+"px").setTooltip(i.name).onClick(n.onSelectMode.bind(n)).setData(i)),"tv"==i.id&&n.modeButtons[i.id].getElem().addClass("spdrk-hide-lt-wide"),"desktop"==i.id&&n.modeButtons[i.id].getElem().addClass("spdrk-hide-lt-desktop")}return r.GlobalEvents.on("preview.size.changed",function(e){var t=null,o=null;for(var i in n.modeButtons)n.modeButtons[i].getVisible()&&(n.modeButtons[i].getData().width<=e.width&&!t&&(t=n.modeButtons[i]),o=n.modeButtons[i]);for(var i in t||(t=o),n.modeButtons)n.modeButtons[i].setActive(n.modeButtons[i]===t)}),r.GlobalEvents.on("preview.show",function(e){n.update()}),r.GlobalEvents.on("modes.enabled.change",function(e){n.modeButtons.hasOwnProperty(e.mode)&&n.modeButtons[e.mode].setChecked(e.value)}),n}return __extends(e,s),e.prototype.onSelectMode=function(e){var t=e.getData(),o="tv"===t.id&&"function"==typeof this.builder.getMaxPreviewWidth?this.builder.getMaxPreviewWidth():t.width;this.builder.setPreviewWidth(o)},e.prototype.update=function(){for(var e=this.builder.getModes(),t=this.builder.getMinMode(),o=this.builder.getMaxMode(),i=0,n=e;i<n.length;i++){var s=n[i],r=this.modeButtons[s.id],a=(!t||0<=this.builder.compareModes(s.id,t))&&(!o||this.builder.compareModes(s.id,o)<=0);r.setVisible(a)}return this},e}(o.SPDarkMenu);t.SPDarkPreviewModeSelector=i}),define("default_dark_ui/SPDarkTemplateMenu",["require","exports","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkMenu","PluginApi/PluginTranslation"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkTemplateMenu=void 0;var s=function(o){function e(e){var t=o.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setIcon("ico-tb-reset"),t.setText((0,n.__)("New")+"/"+(0,n.__)("Reset")),t.setCaretVisible(!0),t.addItem(t.functionButtonMap.new=new i.SPDarkMenuItem(null,(0,n.__)("Change template")).setIcon("ico-change-template").onClick(function(){t.builder.showTemplateChooser()}).setVisible(t.builder.isTemplateSelectorVisible())),t.addItem(t.functionButtonMap.reset=new i.SPDarkMenuItem(null,(0,n.__)("Reset")).setIcon("fa fa-refresh").onClick(function(){t.builder.resetSite(!0)}).setVisible(t.builder.isResetTemplateButtonVisible())),t.addItem(t.functionButtonMap.import=new i.SPDarkMenuItem(null,(0,n.__)("Import")).setIcon("fa fa-download").onClick(function(){t.builder.showImportDialog()}).setEnabled(t.builder.isImportAvailable()).setVisible(t.builder.isImportVisible())),t}return __extends(e,o),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPDarkMenu);t.SPDarkTemplateMenu=s}),define("default_dark_ui/SPDarkLanguagesMenu",["require","exports","default_dark_ui/SPDarkMenu","PluginApi/PluginTranslation","default_dark_ui/SPDarkMenuItem"],function(e,t,o,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkLanguagesMenu=void 0;var i=function(l){function u(e){var t=l.call(this)||this;t.builder=e,t.setTooltip((0,d.__)("Language")),t.setCaretVisible(!0,!0);var o,i=t.builder.getLanguage();t.setIcon(u.getLanguageIcon(i));for(var n=0,s=t.builder.getLanguages();n<s.length;n++){var r=s[n];t.addItem(o=new p.SPDarkMenuItem(u.getLanguageIcon(r),r.name).setData(r).setActive(!!i&&r.locale===i.locale).setVisible(!r.hidden).onClick(t.onLanguageSelect.bind(t))),o.getElem().addClass("spdrk-limit-text")}var a=t.getElem();return a.on("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();var t=a.parent(".spdrk-dd-item-container"),o=t.parents(".spdrk-mn-has-dropdown"),i=a.find(".spdrk-dd-item-container"),n=t.children(".spdrk-menu-node").length;if(0<n){t.css("minHeight",40*n),i.css("minHeight",40*(n-1))}return a.hasClass("ext-open-submenu")&&o.hasClass("ext-open")?(a.removeClass("ext-open-submenu"),o.removeClass("ext-open")):(a.addClass("ext-open-submenu"),o.addClass("ext-open")),!1}),a.on("mouseout",function(){t.setIcon(u.getLanguageIcon(i))}),t}return __extends(u,l),u.getLanguageIcon=function(e){var t,o=e?e.countryCode:"";switch(o){case"cs":t="rs";break;case"ct":t="es-ct";break;case"gb":t="gb-wls";break;case"gl":t="gal";break;case"us":t="uk";break;default:t=o}return"flag-icon-def flag-icon-"+t},u.prototype.onLanguageSelect=function(e){this.builder.setLanguage(e.getData())},u}(o.SPDarkMenu);t.SPDarkLanguagesMenu=i}),define("default_dark_ui/SPDarkSettingsMenu",["require","exports","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkMenu","PluginApi/PluginTranslation","default_dark_ui/SPDarkLanguagesMenu"],function(e,t,n,o,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkSettingsMenu=void 0;var i=function(i){function e(e){var t=i.call(this)||this;t.builder=e,t.functionButtonMap={},t.setText((0,s.__)("Settings")),t.setCaretVisible(!0,!0),t.setIcon("ico-settings spdrk-mobile-visible"),t.text.addClass("spdrk-mobile-hidden"),t.addItem(t.functionButtonMap.background=new n.SPDarkMenuItem("ico-tb-pages",(0,s.__)("Pages")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePagesDialog()})),t.addItem(new n.SPDarkMenuItem("ico-tb-styles",(0,s.__)("Styles")).onClick(function(){t.builder.showSiteStylesDialog()})),t.addItem(new n.SPDarkMenuItem("ico-tb-favicon",(0,s.__)("Favicon")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSiteFaviconDialog()})),t.addItem(new n.SPDarkMenuItem("ico-settings",(0,s.__)("Settings")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePropertiesDialog()})),t.builder.isFullScreenSupported()&&t.addItem(new n.SPDarkMenuItem("ico-tb-fullscreen",(0,s.__)("Full Screen")).onClick(function(){t.builder.toggleFullScreen()})),t.addItem(null);var o=new r.SPDarkLanguagesMenu(e);return o.setCaretVisible(!1).setText((0,s.__)("Language")),o.getElem().addClass("lang-btn"),t.addItem(o),t.addItem(null),t.addItem(new n.SPDarkMenuItem("ico-tb-logout",(0,s.__)("Log Out")).onClick(function(){t.builder.logout()})),t}return __extends(e,i),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPDarkMenu);t.SPDarkSettingsMenu=i}),define("default_dark_ui/SPDarkPublishMenu",["require","exports","PluginApi/PluginTranslation","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkMenu","jquery","core/BuilderConfig"],function(e,t,n,s,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkPublishMenu=void 0,r=__importDefault(r);var i=function(i){function e(e){var o=i.call(this)||this;if(o.builder=e,o.setCaretVisible(!0,!1,!0),o.setDropdownDirection("left"),o.setIcon("fa fa-floppy-o"),o.builder.isComposerMode())o.setText((0,n.__)("Save Composition")),o.onClick(function(){return o.builder.saveElementComposition()}),o.addItem(new s.SPDarkMenuItem(null,(0,n.__)("Save Composition")).setIcon("fa fa-floppy-o").setEnabled(o.builder.isElementCompositionSavingEnabled()).setTooltip(o.builder.isElementCompositionSavingEnabled()?"":"Please switch builder to English language").onClick(function(e){o.builder.saveElementComposition()}));else{if(o.setText((0,n.__)("Publish")),o.onClick(function(){window.matchMedia("(pointer: coarse)").matches||o.builder.publish()}),o.builder.isB2C()&&!o.builder.getWasPublished()){o.setTooltip((0,n.__)('Build website and click "Publish"'));var t=768<window.outerWidth?"desktop":"mobile";o.content.tooltip({template:'<div class="tooltip warn publish-tooltip '+t+'" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',placement:768<window.outerWidth?"bottom":"left",trigger:"manual",html:!0}),setTimeout(function(){function e(e){return e.preventDefault(),!1}o.content.tooltip("show"),o.content.hover(function(){return o.content.tooltip("hide")}),o.content.click(function(){return o.content.tooltip("hide")});var t=o.content.attr("aria-describedby");(0,r.default)("#"+t).click(function(e){return e.preventDefault(),o.content.tooltip("hide"),!1}).on("mouseover",e).on("hover",e)},3e3),setTimeout(function(){return o.content.tooltip("hide")},3e4)}o.addItem(new s.SPDarkMenuItem(null,(0,n.__)("Publish")).setIcon("fa fa-floppy-o").onClick(function(e){o.builder.publish()}).setTooltipMark((0,n.__)("Save site and Publish it to the internet"),"bottom").setEnabled(o.builder.isPublishAvailable())),o.addItem(new s.SPDarkMenuItem(null,(0,n.__)("Save")).setIcon("ico-save").onClick(function(e){o.builder.save(!0)}).setPremium(a.wbConfig.isFreeB2CB2B2C,"mid").setTooltipMark((0,n.__)("Save site without Publishing it"),"bottom")),o.addItem(new s.SPDarkMenuItem(null,(0,n.__)("Backup/Restore")).setIcon("ico-backup").onClick(function(e){o.builder.showBackupRestoreDialog()}).setPremium(a.wbConfig.isFreeB2CB2B2C,"mid")),o.builder.isTemplateSavingAvailable()&&o.addItem(null),o.addItem(new s.SPDarkMenuItem(null,(0,n.__)("Save As...")).setVisible(o.builder.isTemplateSavingAvailable()).setEnabled(o.builder.isTemplateSavingEnabled()).setTooltip(o.builder.isTemplateSavingEnabled()?"":"Please switch builder to English language").onClick(function(){o.builder.showSaveAsTemplateDialog()}))}return o}return __extends(e,i),e}(o.SPDarkMenu);t.SPDarkPublishMenu=i}),define("default_dark_ui/SPDarkMobileMainMenu",["require","exports","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkMenu","PluginApi/PluginTranslation","default_dark_ui/SPDarkLanguagesMenu","default_dark_ui/SPDarkSettingsMenu","default_dark_ui/SPDarkTemplateMenu"],function(e,t,i,o,n,s,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkMobileMainMenu=void 0;var l=function(o){function e(e){var t=o.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setText(null),t.setIcon("spdrk-icon-i-menu"),t.templateMenu=new a.SPDarkTemplateMenu(t.builder).addSpacer(),t.settingsMenu=new r.SPDarkSettingsMenu(t.builder).setText((0,n.__)("Settings")).setIcon("icon-cog-big").setCaretVisible(!0).addSpacer(),t.settingsMenu.getTextElem().removeClass("spdrk-mobile-hidden"),t.languageMenu=new s.SPDarkLanguagesMenu(t.builder).setText((0,n.__)("Languages")).setCaretVisible(!0).addSpacer(),t.helpButton=new i.SPDarkMenuItem("spdrk-icon-hint",null).setTooltip((0,n.__)("Help")).setText((0,n.__)("Help")).onClick(function(){t.builder.showHelp()}).addSpacer(),t.addItem(t.templateMenu),t.addItem(t.settingsMenu),t.addItem(t.languageMenu),t.addItem(t.helpButton),t}return __extends(e,o),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(o.SPDarkMenu);t.SPDarkMobileMainMenu=l}),define("default_dark_ui/SPDarkBuilderToolbar",["require","exports","default_dark_ui/SPDarkPageSelector","default_dark_ui/SPDarkToolbarGroup","default_dark_ui/SPDarkPreviewModeSelector","default_dark_ui/SPDarkTemplateMenu","default_dark_ui/SPDarkSettingsMenu","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkPublishMenu","BuilderEvent","PluginApi/PluginTranslation","default_dark_ui/SPDarkMenu","default_dark_ui/SPDarkLanguagesMenu","default_dark_ui/SPDarkMobileMainMenu","Dialog"],function(e,t,c,h,m,b,g,k,f,v,C,_,w,D,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkBuilderToolbar=void 0,P=__importDefault(P);var o=function(){function e(e,t){var o=this;if(this.functionButtonMap={},this.customButtonsGroup=null,this.firstUpdate=!0,this.rightSizesMap={},this.lastSpaceForRight=0,this.builder=e,this.elem=t,e.isAdminMode()?this.elem.append($('<div class="spdrk-logo"/>').append($('<span class="admin-mode-label"></span>').text(" ADMIN MODE "))):(this.elem.append($('<div class="spdrk-logo"/>').append($('<div class="spdrk-logo-pad"/>').append($('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoUrl()+")")))),this.builder.getLogoMobileUrl()&&this.elem.append($('<div class="spdrk-logo-mobile"/>').append($('<div class="spdrk-logo-pad"/>').append($('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoMobileUrl()+")"))))),this.elem.append(this.left=$('<div class="spdrk-tb-left spdrk-tb-part"/>')),this.elem.append(this.right=$('<div class="spdrk-tb-right spdrk-tb-part"/>')),this.mobileExtrasMenu=new _.SPDarkMenu(!1).setIcon("fa fa-rocket").setTooltip((0,C.__)("More actions")).setCaretVisible(!0),this.pageSelector=new c.SPDarkPageSelector(this.builder),this.pageSelectorMobile=new c.SPDarkPageSelector(this.builder,!0),this.previewModeSelector=new m.SPDarkPreviewModeSelector(this.builder),this.templateMenu=new b.SPDarkTemplateMenu(this.builder),this.templateMenuMobile=new b.SPDarkTemplateMenu(this.builder),this.templateMenuMobile.getElem().addClass("spdrk-template-menu"),this.templateMenuMobile.setAutoHideLabel(!0),this.settingsMenu=new g.SPDarkSettingsMenu(this.builder).setText((0,C.__)("Settings")).setTooltip((0,C.__)("Settings")).setIcon("ico-settings"),this.saveMenu=new f.SPDarkPublishMenu(this.builder),this.languagesMenu=new w.SPDarkLanguagesMenu(this.builder),this.helpButton=new k.SPDarkMenuItem("fa fa-question",null).setTooltip((0,C.__)("Help")).onClick(function(){o.builder.showHelp(),o.builder.forwardFlowStep(6,!0)}),e.canShowDesignerHelpDialog&&e.canShowDesignerHelpDialog()){var i=function(){return new k.SPDarkMenuItem("ico-designer",null).setText((0,C.__)("Need designer help?")).setTooltip((0,C.__)("Need designer help?")).setPremium(!o.builder.isDesignerHelpAvailable()).onClick(function(){return e.showDesignerHelpDialog()})};this.designerHelpButton=i(),this.designerHelpButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(i())}if(e.canShareAccess&&e.canShareAccess()){var n=function(){return new k.SPDarkMenuItem("ico-share",null).setText((0,C.__)("Share access")).setTooltip((0,C.__)("Share access")).onClick(function(){return e.openShareAccess()})};this.shareButton=n(),this.shareButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(n())}var s=function(){return new k.SPDarkMenuItem("ico-ai",null).setTooltip((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").setText((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").onClick(function(){o.builder.showHelpChatDialog()})};if(this.helpChatButton=s(),this.helpChatButton.setAutoHideLabel(!0),this.helpChatButtonMobile=s(),this.mobileExtrasMenu.addItem(this.helpChatButtonMobile),!e.isTestMode()&&e.isB2C()&&/\.site\.pro$/.test(e.getSiteDomain())){var r,a=function(){if(!r){(r=new P.default).setTitle((0,C.__)("Choose the professional name for your website")),r.addButton((0,C.__)("Close"));var t=$('<iframe src="'+e.getB2cDomainsUrl()+'&notitle=1" style="width: 100%; height: 130px; border: none;">');$(window).on("message",function(e){e.originalEvent.data&&"resize"===e.originalEvent.data.action&&e.originalEvent.data.value&&t.css("height",e.originalEvent.data.value+35+"px")}),r.setContent(t)}r.show()},l=function(){return new k.SPDarkMenuItem("ico-tb-domains",null).setText((0,C.__)("Domains")).setTooltip((0,C.__)("Domains")).onClick(a)};this.domainsButton=l(),this.mobileExtrasMenu.addItem(l())}this.functionButtonMap.undo=this.undoButton=new k.SPDarkMenuItem("ico-tb-undo",null).setTooltip((0,C.__)("Undo")).onClick(function(){o.builder.historyUndo()}),this.functionButtonMap.redo=this.redoButton=new k.SPDarkMenuItem("ico-tb-redo",null).setTooltip((0,C.__)("Redo")).onClick(function(){o.builder.historyRedo()}),this.functionButtonMap.preview=this.showPreviewButton=new k.SPDarkMenuItem(null,(0,C.__)("Preview")).setIcon("ico-tb-preview").setTooltip((0,C.__)("Preview")).onClick(function(){o.showPreviewButton.setEnabled(!1),o.showPreviewButton.setIcon("fa fa-spinner fa-pulse"),o.builder.preview().always(function(){o.showPreviewButton.setEnabled(!0),o.showPreviewButton.setIcon("ico-tb-preview")})}),this.showPreviewButton.setAutoHideLabel(!0),this.showPreviewButton.getTextElem(),this.hidePreviewButton=new k.SPDarkMenuItem(null,(0,C.__)("Close preview")).setIcon("fa fa-eye-slash").setTooltip((0,C.__)("Back to Editor")).onClick(function(){o.builder.hidePreview()}),this.mobileMenu=new D.SPDarkMobileMainMenu(this.builder);var u=e.getSignUpInfo();u&&(this.signUpButton=new k.SPDarkMenuItem("ico-tb-sign-in",null).setAutoHideLabel(!0).setText(u.title).onClick(function(){u&&window.open(u.url)}));var d=new h.SPDarkToolbarGroup;d.addItem(this.undoButton),d.addItem(this.redoButton),this.left.append((new h.SPDarkToolbarGroup).addItem(this.pageSelector).getElem().addClass("spdrk-mobile-hidden no-hover no-border"),(new h.SPDarkToolbarGroup).addItem(this.templateMenu).getElem().addClass("spdrk-hide-lt-tablet"),d.getElem().addClass("spdrk-hide-lt-tablet combined-group"),(new h.SPDarkToolbarGroup).addItem(this.previewModeSelector).getElem().addClass("no-hover preview-mode-selector spdrk-hide-lt-tablet"));var p=[];wb_builder.uiDef&&"object"==typeof wb_builder.uiDef&&wb_builder.uiDef.toolbars&&"object"==typeof wb_builder.uiDef.toolbars&&wb_builder.uiDef.toolbars["control-toolbar-cont"]&&"object"==typeof wb_builder.uiDef.toolbars["control-toolbar-cont"]&&wb_builder.uiDef.toolbars["control-toolbar-cont"].items&&(wb_builder.uiDef.toolbars["control-toolbar-cont"].items,1)&&(p=wb_builder.uiDef.toolbars["control-toolbar-cont"].items),this.buildUIItems(p,e),this.right.append((new h.SPDarkToolbarGroup).addItem(this.pageSelectorMobile.setIcon("ico-tb-landing").setText(null).setCaretVisible(!1)).getElem().addClass("spdrk-mobile-visible"),(new h.SPDarkToolbarGroup).addItem(this.templateMenuMobile).getElem().addClass("spdrk-visible-lt-tablet mobile-no-border")),this.right.append($('<div class="spacer"></div>'),this.designerHelpButton?(new h.SPDarkToolbarGroup).addItem(this.designerHelpButton).getElem().addClass("spdrk-mobile-hidden"):null,this.shareButton?(new h.SPDarkToolbarGroup).addItem(this.shareButton).getElem().addClass("spdrk-mobile-hidden"):null,(new h.SPDarkToolbarGroup).addItem(this.helpChatButton).getElem().addClass("spdrk-mobile-hidden"),(new h.SPDarkToolbarGroup).addItem(this.helpButton).getElem().addClass("spdrk-mobile-hidden"),this.domainsButton?(new h.SPDarkToolbarGroup).addItem(this.domainsButton).getElem().addClass("spdrk-mobile-hidden"):null,this.mobileExtrasMenu.getItems().length?(new h.SPDarkToolbarGroup).addItem(this.mobileExtrasMenu).getElem().addClass("spdrk-mobile-visible"):null,(new h.SPDarkToolbarGroup).addItem(this.settingsMenu).getElem().addClass("mobile-no-border"),this.signUpButton?(new h.SPDarkToolbarGroup).addItem(this.signUpButton).getElem():null,(new h.SPDarkToolbarGroup).addItem(this.showPreviewButton).getElem().addClass("mobile-no-border"),(new h.SPDarkToolbarGroup).addItem(this.hidePreviewButton).getElem(),(new h.SPDarkToolbarGroup).addItem(this.saveMenu).getElem().addClass("no-hover no-border")),this.saveMenu.getElem().addClass("spdrk-publish-menu"),v.GlobalEvents.on("preview.show",function(){o.onPreviewVisibilityChange(!0)}),v.GlobalEvents.on("preview.hide",function(){o.onPreviewVisibilityChange(!1)}),v.GlobalEvents.on("history.changed",function(){o.onHistoryChange()}),v.GlobalEvents.on("builder.editing.changed",function(){o.updateButtons(),o.onHistoryChange()}),this.elem.on("touchstart touchmove touchend touchcancel",function(e){e.stopImmediatePropagation(),o.builder.hideContextMenus()}).on("mousedown mouseover",function(){o.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||o.builder.unselectAll()}),this.updateButtons(),this.onHistoryChange(),this.onPreviewVisibilityChange(!1),$(window).on("resize orientationchange",function(){o.update()}),this.update()}return e.prototype.buildUIItems=function(e,t){var n=[],o=0;this.left.children().each(function(){o+=20,n.push({order:o,elem:$(this)})});for(var i=function(e){var t=new h.SPDarkToolbarGroup,o=new k.SPDarkMenuItem(e.img?e.img:null,e.name?e.name:null);if(e.url){var i="target"in e?e.target:"_blank";o.onClick(function(){window.open(e.url,i)})}t.addItem(o),n.push({order:e.order,elem:t.getElem()})},s=0,r=e;s<r.length;s++){i(r[s])}n.sort(function(e,t){return e.order===t.order?0:e.order>t.order?1:-1});for(var a=0,l=n;a<l.length;a++){var u=l[a];this.left.append(u.elem)}},e.prototype.calcRightWidth=function(){var o=0;return this.right.children().each(function(e,t){o+=$(t).outerWidth()}),o},e.prototype.update=function(){var i=this,n=this.right.children();this.firstUpdate&&(n.each(function(e,t){i.rightSizesMap[e]=$(t).outerWidth()}),this.firstUpdate=!1),requestAnimationFrame(function(){var o=i.elem.width();i.elem.children().each(function(e,t){t!==i.right.get(0)&&(o-=$(t).outerWidth())}),o-=10;var e=i.calcRightWidth();if(o<e&&(!i.lastSpaceForRight||i.lastSpaceForRight>o))for(var t=-1;o<e&&t<n.length;)n.eq(++t).addClass("hide-lbl"),e=i.calcRightWidth();else if(!i.lastSpaceForRight||i.lastSpaceForRight<o)for(t=n.length;e<o&&0<t;)n.eq(--t).removeClass("hide-lbl"),e=i.calcRightWidth();i.lastSpaceForRight=o})},e.prototype.updateButtons=function(){var e=!this.builder.isEditingLocked();this.settingsMenu.setEnabled(e),this.showPreviewButton.setEnabled(e),this.saveMenu&&this.saveMenu.setEnabled(e),this.templateMenu&&this.templateMenu.setEnabled(e),this.templateMenuMobile&&this.templateMenuMobile.setEnabled(e)},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e.prototype.onPreviewVisibilityChange=function(e){var t,o=this,i=this.builder.isComposerMode();this.previewModeSelector.setVisible(e),this.templateMenu.setVisible(!e&&!i),this.templateMenuMobile.setVisible(!e&&!i),this.settingsMenu.setVisible(!e),this.domainsButton&&this.domainsButton.setVisible(!e),this.designerHelpButton&&this.designerHelpButton.setVisible(!e),[this.helpChatButton,this.helpChatButtonMobile].forEach(function(e){return e.setVisible(!1)}),e||i||this.builder.isHelpChatVisible().then(function(e){(null==e?void 0:e.visible)&&(e.enabled?[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,C.__)("Ask a Question")+" ("+(0,C.__)("AI")+")").setEnabled(!0).onClick(function(){o.builder.showHelpChatDialog()})}):[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,C.__)("Ask administrator to enable this feature")).setEnabled(!1).onClick(function(){})}),[o.helpChatButton,o.helpChatButtonMobile].forEach(function(e){return e.setVisible(!0)}))}),this.mobileExtrasMenu.setVisible(!e),this.shareButton&&this.shareButton.setVisible(!e),this.helpButton.setVisible(!e&&this.builder.isHelpAvailable()&&!i),this.undoButton.setVisible(!e),this.redoButton.setVisible(!e),this.showPreviewButton.setVisible(!e&&!i),this.hidePreviewButton.setVisible(e),this.languagesMenu.setVisible(!e),this.saveMenu.setVisible(!e),null===(t=this.signUpButton)||void 0===t||t.setVisible(!e)},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e.prototype.getHidePreviewButton=function(){return this.hidePreviewButton},e.prototype.getButtonByFunction=function(e){var t=e.split("-");return"config"===t[0]?1<t.length?this.settingsMenu.getButtonByFunction(t[1]):this.settingsMenu:"change"===t[0]?1<t.length?this.templateMenu.getButtonByFunction(t[1]):this.templateMenu:this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e.prototype.addToolbarButton=function(){this.customButtonsGroup||(this.customButtonsGroup=new h.SPDarkToolbarGroup,this.right.append(this.customButtonsGroup.getElem().addClass("custom-buttons")));var e=new k.SPDarkMenuItem(null,null);return this.customButtonsGroup.addItem(e),e},e.prototype.removeToolbarButton=function(e){this.customButtonsGroup&&(this.customButtonsGroup.removeItem(e),this.customButtonsGroup.getItems().length||(this.customButtonsGroup.getElem().remove(),this.customButtonsGroup=null))},e}();t.SPDarkBuilderToolbar=o}),define("default_dark_ui/SPDarkElementsToolbar",["require","exports","default_dark_ui/SPDarkToolbarGroup","default_dark_ui/SPDarkMenuItem","default_dark_ui/SPDarkMenu","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,c,h,m,b,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDarkElementsToolbar=void 0;var o=function(){function e(e,t){var o=this;this.groupsSizes=[],this.UIButtonSize={width:80,height:80},this.totalCollapsedGroupsWidth=0,this.mobile=!1,this.allButtons=[],this.builder=e,this.elem=t;var i=$('<div class="spdrk-tb-full-width spdrk-tb-part"/>');this.elem.append(i),this.elem.append(this.bottom=$('<div class="spdrk-tb-bottom spdrk-tb-part spdrk-mobile-visible"/>')),this.collapseButton=new h.SPDarkMenuItem("fa fa-plus",null).onClick(function(e){o.builder.hideContextMenus(),m.SPDarkMenu.closeAllDropDowns(),o.setCollapsed(!o.getCollapsed())}),this.redoButton=new h.SPDarkMenuItem("ico-tb-redo",null).setTooltip((0,g.__)("Redo")).onClick(function(){o.builder.historyRedo()}),this.undoButton=new h.SPDarkMenuItem("ico-tb-undo",null).setTooltip((0,g.__)("Undo")).onClick(function(){o.builder.historyUndo()}),this.bottom.append((new c.SPDarkToolbarGroup).addItem(this.undoButton).getElem().addClass("no-border"),(new c.SPDarkToolbarGroup).addItem(this.collapseButton).getElem().addClass("button-bottom-collapse no-border"),(new c.SPDarkToolbarGroup).addItem(this.redoButton).getElem().addClass("no-border")),this.pluginButtons=new c.SPDarkToolbarGroup,this.pluginButtons.setVisible(!0);var n=this;this.pluginButtons.getElem().append($("<div class='button-top-collapse spdrk-mobile-visible'><i class='fa fa-chevron-down'></i></div>").click(function(){n.builder.hideContextMenus(),m.SPDarkMenu.closeAllDropDowns(),n.setCollapsed(!0)})),i.append(this.pluginButtons.getElem().addClass("spdrk-et-plugins no-border")),this.setCollapsed(!1);var s=new m.SPDarkMenu;s.setInline(!0);for(var r=0,a=this.builder.getCompositionCollections();r<a.length;r++){var l=a[r],u=void 0;u="-"===l.name?null:new h.SPDarkMenuItem(l.icon,l.name||l.id).setEnabled(!0).setPremium(l.inactive).setData(l.id).setDragable(!0),s.addItem(u),u&&(this.allButtons.push(u),u.getElem().attr("id","wb__"+l.id),u.getElem().addClass("ui-draggable"),e.bindCompositionButton({id:l.id,name:l.name,icon:l.icon,elem:u.getElem()},function(){o.mobile&&o.setCollapsed(!0),m.SPDarkMenu.closeAllDropDowns()},function(){o.mobile&&o.setCollapsed(!0)},function(){o.mobile&&o.setCollapsed(!0),m.SPDarkMenu.closeAllDropDowns()}))}var d=s.getElem().find(".spdrk-dd-item-container").detach(),p=$('<div class="cont-c"></div>').append($("<span class='preel-title'>"+(0,g.__)("Add item")+"</span>")).append(d);s.getElem().find(".spdrk-dd-scroll").append(p),this.pluginButtons.addItem(s),s.setInline(!0),s.getElem().offset(),this.setCollapsed(!0),$(window).on("resize orientationchange",function(){o.update()}),this.update(),this.elem.on("touchstart touchmove touchend touchcancel",function(e){o.builder.hideContextMenus()}).on("mousedown mouseover",function(e){o.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||o.builder.unselectAll()}),b.GlobalEvents.on("builder.editing.changed",function(){o.updateButtons(),o.onHistoryChange()}),this.onHistoryChange(),this.updateButtons()}return e.prototype.getElem=function(){return this.elem},e.prototype.updateButtons=function(){var e=this.builder.isEditingLocked();this.collapseButton.setEnabled(!e);for(var t=0,o=this.allButtons;t<o.length;t++){o[t].setLocked(e)}return this},e.prototype.update=function(){for(var e,t=$(window).width(),o=$(window).height(),i=($("#builder_toolbar").outerHeight(),this.pluginButtons.getItems()),n=this.pluginButtons.getElem().find(".spdrk-dropdown"),s=n?Math.floor(n.outerHeight(!0)/(this.UIButtonSize.height?this.UIButtonSize.height:80)):1,r=0,a=i.length;r<a;r++)(e=i[r]).setInline(!0),e.setOneRow(1==s);return this.mobile=t<1100?(this.pluginButtons.getElem().addClass("mobile"),!0):(this.pluginButtons.getElem().removeClass("mobile"),!1),this.pluginButtons.getElem().find(".spdrk-dropdown").outerHeight()>o?this.pluginButtons.getElem().addClass("scroll"):this.pluginButtons.getElem().removeClass("scroll"),this},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.setCollapsed=function(e){return e?(this.elem.addClass("spdrk-collapsed"),this.elem.parents("body").find(".spdrk-tb-bottom").addClass("spdrk-collapsed")):(this.elem.removeClass("spdrk-collapsed"),this.elem.parents("body").find(".spdrk-tb-bottom").removeClass("spdrk-collapsed")),e||this.update(),this},e.prototype.getCollapsed=function(){return this.elem.is(".spdrk-collapsed")},e.prototype.getPluginButtonAndGroup=function(e){for(var t=0,o=this.pluginButtons.getItems();t<o.length;t++){var i=o[t];if(i instanceof m.SPDarkMenu)for(var n=0,s=i.getItems();n<s.length;n++){var r=s[n];if(r instanceof h.SPDarkMenuItem)if(e===r.getData()||e===r.name||("Layout"===r.name||r.name===(0,g.__)("Layout"))&&"LayoutElement"===e||("Text"===r.name||r.name===(0,g.__)("Text"))&&"TextArea"===e||("Media"===r.name||r.name===(0,g.__)("Media"))&&"Youtube"===e||("Maps"===r.name||r.name===(0,g.__)("Maps"))&&"GoogleMaps"===e||r.name===(0,g.__)("Picture")&&"Picture"===e||r.name===(0,g.__)("Gallery")&&"Gallery"===e||r.name===(0,g.__)("Shape")&&"Shape"===e||r.name===(0,g.__)("Line")&&"Line"===e||r.name===(0,g.__)("Button")&&"Button"===e||r.name===(0,g.__)("Form")&&"Form"===e||r.name===(0,g.__)("Menu")&&"Menu"===e||r.name===(0,g.__)("Commerce")&&"StoreCart"===e||r.name===(0,g.__)("Commerce")&&"Store"===e||r.name===(0,g.__)("Languages")&&"Languages"===e)return{group:i,button:r}}}return null},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e}();t.SPDarkElementsToolbar=o}),define("default_dark_ui/SPDarkUI",["require","exports","PluginApi/UIManager","BuilderEvent","default_dark_ui/SPDarkBuilderToolbar","default_dark_ui/SPDarkElementsToolbar","PluginApi/PluginResourceLoader","PluginApi/PluginTranslation","default_dark_ui/SPDarkBuilderNotification","HelpSystem/Tooltip","default_dark_ui/SPDarkMenu"],function(e,t,o,i,p,c,n,h,m,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(d){function e(s){var r=d.call(this,s)||this;r.visible=!0,r.isPreviewOpen=!1,r.builder=s;var a=$(document.body),l=new n.PluginResourceLoader(pluginData),u="main.min.css?"+PluginWrapper._config.fileInfo["main.min.css"].time;return l.loadResources(["fonts.css",u,"main.html","translations.json"],function(e){var t=r.builder.getLanguage();if(t&&e["translations.json"].data&&"object"==typeof e["translations.json"].data&&e["translations.json"].data.hasOwnProperty(t.locale)&&(0,h.extendTranslations)(e["translations.json"].data[t.locale]),e["fonts.css"].data&&l.addRawStyleSheet(e["fonts.css"].data),e[u].data){var o=e[u].url.replace(/\/[^\/]+$/,""),i=e[u].data;i=i.replace('@import"fonts/Roboto/main.css";','@import"'.concat(o,'/fonts/Roboto/main.css";')),l.addRawStyleSheet(i)}if(pluginData.customConfiguration){var n=[];pluginData.customConfiguration.hasOwnProperty("controlToolbarBackgroundColor")&&(n.push("#builder_toolbar { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; }"),n.push(".preview-mode-selector .spdrk-menu-node .spdrk-menu-node { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),n.push(".preview-mode-selector .spdrk-menu-node .spdrk-menu-node.active { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),n.push(".preview-mode-selector .spdrk-menu-node .spdrk-menu-node.disabled { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),n.push(".modal-dialog.wb-tpl-dialog .modal-header { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarLineColor")&&(n.push(".spdrk-tb-part>.spdrk-tb-group:not(:last-child):not(.no-border):after { background-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }"),n.push(".preview-mode-selector .spdrk-menu-node .spdrk-menu-node:not(:last-of-type):after { background-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }"),n.push(".spdrk-page-selector { border-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }"),n.push(".spdrk-page-selector>.spdrk-mn-content .caret-box { border-left-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }")),pluginData.customConfiguration.hasOwnProperty("elementToolbarBackgroundColor")&&(n.push("#elements_toolbar .spdrk-et-plugins:not(.mobile) { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push("#elements_toolbar .spdrk-menu-node.spdrk-dd-inline>.spdrk-dropdown>.spdrk-dd-scroll>.cont-c { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push(".spdrk-menu-node.spdrk-dd-inline>.spdrk-dropdown>.spdrk-dd-scroll>.cont-c>.spdrk-dd-item-container { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push(".spdrk-menu-node:not(.spdrk-dd-inline).spdrk-over { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+" ! important; }"),n.push(".spdrk-menu-node:not(.spdrk-dd-inline)>.spdrk-dropdown>.spdrk-dd-scroll { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push(".spdrk-page-selector { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push(".spdrk-tb-part>.spdrk-tb-group:not(.no-hover):hover { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),n.push(".preview-mode-selector .spdrk-menu-node .spdrk-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("elementToolbarItemBackgroundColor")&&n.push("#elements_toolbar .spdrk-menu-node.ui-draggable { background-color: "+pluginData.customConfiguration.elementToolbarItemBackgroundColor+"; }"),pluginData.customConfiguration.hasOwnProperty("elementToolbarLineColor")&&(n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node.spdrk-dd-inline .spdrk-dropdown-separator { background-color: "+pluginData.customConfiguration.elementToolbarLineColor+"; }"),n.push("#elements_toolbar .spdrk-menu-node.ui-draggable { border-color: "+pluginData.customConfiguration.elementToolbarLineColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonTextColor")&&(n.push(".spdrk-menu-node.spdrk-publish-menu>.spdrk-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),n.push(".spdrk-menu-node.spdrk-publish-menu .spdrk-dropdown .spdrk-dd-scroll .spdrk-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),n.push("#builder_toolbar .spdrk-publish-menu .wb_badge_help { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; border-color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),n.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header, .modal-dialog:not(.wb-tpl-dialog) .modal-header .close { color: "+pluginData.customConfiguration.publishButtonTextColor+"; }"),n.push(".spdrk-menu-node.spdrk-publish-menu>.spdrk-mn-content .caret-box { border-left-color: "+pluginData.customConfiguration.publishButtonTextColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonBackgroundColor")&&(n.push(".spdrk-menu-node.spdrk-publish-menu>.spdrk-mn-content { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+" ! important; }"),n.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundColor")&&(n.push(".spdrk-menu-node.spdrk-publish-menu .spdrk-dropdown .spdrk-dd-scroll { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }"),n.push(".spdrk-menu-node.spdrk-publish-menu:hover .caret-box { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundHoverColor")&&n.push(".spdrk-menu-node.spdrk-publish-menu .spdrk-dropdown .spdrk-dd-scroll .spdrk-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundHoverColor+" ! important; }"),pluginData.customConfiguration.hasOwnProperty("normalItemColor")&&(n.push(".spdrk-selected-page-name { color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push(".spdrk-menu-node>.spdrk-mn-content { color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node.ui-draggable>.spdrk-mn-content { color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push("#elements_toolbar .spdrk-menu-node>.spdrk-mn-content>.spdrk-mn-text { color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push("#builder_toolbar .spdrk-menu-node .wb_badge_help { color: "+pluginData.customConfiguration.normalItemColor+"; border-color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push(".cont-c .preel-title { color: "+pluginData.customConfiguration.normalItemColor+"; }"),n.push(".modal-dialog.wb-tpl-dialog .modal-header, .modal-dialog.wb-tpl-dialog .modal-header .close { color: "+pluginData.customConfiguration.normalItemColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("activeItemColor")&&(n.push(".spdrk-menu-node.active>.spdrk-mn-content { color: "+pluginData.customConfiguration.activeItemColor+"; }"),n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node.active.ui-draggable>.spdrk-mn-content { color: "+pluginData.customConfiguration.activeItemColor+"; }"),n.push("#elements_toolbar .spdrk-menu-node.active>.spdrk-mn-content>.spdrk-mn-text { color: "+pluginData.customConfiguration.activeItemColor+"; }"),n.push(".spdrk-menu-node:not(.spdrk-dd-inline)>.spdrk-dropdown>.spdrk-dd-scroll>.spdrk-dd-item-container>.spdrk-menu-node.active .spdrk-mn-text, .spdrk-menu-node:not(.spdrk-dd-inline)>.spdrk-dropdown>.spdrk-dd-scroll>.spdrk-dd-item-container>.spdrk-menu-node.active .ico-tb-i { color: "+pluginData.customConfiguration.activeItemColor+"; }"),n.push("#builder_toolbar .spdrk-menu-node.active>.spdrk-mn-content .wb_badge_help { color: "+pluginData.customConfiguration.activeItemColor+"; border-color: "+pluginData.customConfiguration.activeItemColor+"; }"),n.push(".spdrk-switch-input:checked+.spdrk-switch-label:after { background-color: "+pluginData.customConfiguration.activeItemColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("disabledItemOpacity")&&n.push(".spdrk-menu-node.disabled>.spdrk-mn-content { opacity: "+(pluginData.customConfiguration.disabledItemOpacity/100).toFixed(3)+"; }"),pluginData.customConfiguration.hasOwnProperty("hideTextUnderIcons")&&"1"===pluginData.customConfiguration.hideTextUnderIcons&&(n.push("#elements_toolbar .spdrk-menu-node>.spdrk-mn-content>.spdrk-mn-text { display: none; }"),n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node.ui-draggable>.spdrk-mn-content>.ico-tb-i { margin-bottom: 0; }")),pluginData.customConfiguration.hasOwnProperty("hoverItemColor")&&(n.push(".spdrk-menu-node:not(.disabled):hover>.spdrk-mn-content { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node:not(.disabled):hover.ui-draggable>.spdrk-mn-content { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),n.push("#elements_toolbar .spdrk-menu-node:not(.disabled):hover>.spdrk-mn-content>.spdrk-mn-text { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),n.push("#builder_toolbar .spdrk-menu-node:not(.disabled):hover>.spdrk-mn-content .wb_badge_help { color: "+pluginData.customConfiguration.hoverItemColor+"; border-color: "+pluginData.customConfiguration.hoverItemColor+"; }")),pluginData.customConfiguration.hasOwnProperty("hoverItemBackgroundColor")&&(n.push("#elements_toolbar .spdrk-et-plugins .spdrk-menu-node.ui-draggable:not(.disabled):hover, #elements_toolbar .spdrk-et-plugins .spdrk-menu-node.ui-draggable:not(.disabled):focus, #elements_toolbar .spdrk-et-plugins .spdrk-menu-node.ui-draggable:not(.disabled):active { background-color: "+pluginData.customConfiguration.hoverItemBackgroundColor+"; }"),n.push(".spdrk-menu-node:not(.spdrk-dd-inline)>.spdrk-dropdown>.spdrk-dd-scroll>.spdrk-dd-item-container>.spdrk-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.hoverItemBackgroundColor+"; }")),l.addRawStyleSheet(n.join("\n"))}e["main.html"].data&&a.append(e["main.html"].data),r.builderToolbar=new p.SPDarkBuilderToolbar(s,$("#builder_toolbar")),r.elementsToolbar=new c.SPDarkElementsToolbar(s,$("#elements_toolbar")),r.builderNotification=new m.SPDarkBuilderNotification(s,$("#builder_notification")),r.setVisible(r.visible),r.builder.init($("#builder_canvas"))}),i.GlobalEvents.on("preview.show",function(){r.isPreviewOpen=!0,r.elementsToolbar&&r.elementsToolbar.setVisible(!1),a.addClass("preview-mode")}),i.GlobalEvents.on("preview.hide",function(){r.isPreviewOpen=!1,r.elementsToolbar&&r.elementsToolbar.setVisible(r.visible),a.removeClass("preview-mode")}),s.isAdminMode()&&$("body").addClass("admin-mode"),r}return __extends(e,d),e.prototype.lookupUIElement=function(e,t){var o=d.prototype.lookupUIElement.call(this,e,t);if(!o)switch(e){case"control":if(!this.builderToolbar)break;var i=this.builderToolbar.getButtonByFunction(t);i&&(o=new a.ScenarioStepSubject(i.getElem(),null,10));break;case"plugin":if(this.elementsToolbar){var n=this.elementsToolbar.getPluginButtonAndGroup(t);if(n){this.elementsToolbar.setCollapsed(!1);var s=n.group,r=n.button;s.setOpen(!0),o=new a.ScenarioStepSubject(r.getElem(),null,10)}else o=new a.ScenarioStepSubject(this.elementsToolbar.getElem(),null,10)}break;case"preview":if(!this.builderToolbar)break;"close"===t&&(o=new a.ScenarioStepSubject(this.builderToolbar.getHidePreviewButton().getElem(),null,10))}return o},e.prototype.getToolbarHeight=function(){return this.builderToolbar?this.builderToolbar.getElem().outerHeight():0},e.prototype.closeAll=function(){d.prototype.closeAll.call(this),s.SPDarkMenu.closeAllDropDowns(),this.elementsToolbar&&this.elementsToolbar.mobile&&this.elementsToolbar.setCollapsed(!0)},e.prototype.setVisible=function(e){var t,o,i;this.visible=e,null===(t=this.elementsToolbar)||void 0===t||t.setVisible(e&&!this.isPreviewOpen),null===(o=this.builderToolbar)||void 0===o||o.setVisible(e),null===(i=this.builderNotification)||void 0===i||i.setVisible(e&&!this.isPreviewOpen)},e.prototype.addToolbarButton=function(){var e;return null===(e=this.builderToolbar)||void 0===e?void 0:e.addToolbarButton()},e.prototype.removeToolbarButton=function(e){var t;null===(t=this.builderToolbar)||void 0===t||t.removeToolbarButton(e)},e}(o.UIManager);(0,o.registerUI)(pluginData.id,r)});require(["default_dark_ui\/SPDarkUI"], function(){});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"pinterest","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/pinterest","pluginUri":"plugins\/pinterest","customConfiguration":null};
PluginWrapper._config.id = 'pinterest';
PluginWrapper._config.baseUri = "plugins\/pinterest";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/pinterest\/main.png";
PluginWrapper._config.template = "{{#isPublished}}\n<script type=\"text\/javascript\">\n\t(function() {\n\t\tif (!window.wbPinterestLoaded) {\n\t\t\twindow.wbPinterestLoaded = true;\n\t\t\t$.getScript('https:\/\/assets.pinterest.com\/js\/pinit.js');\n\t\t}\n\t})();\n<\/script>\n{{\/isPublished}}\n<a {{{content.param_pindo}}}\n   {{{content.pin_size}}}\n   {{{content.pin_terse}}}\n   {{{content.pin_count}}}\n   {{{content.pin_hover}}}\n   {{{content.pin_save}}}\n   {{{content.pin_lang}}}\n   {{{content.param_large}}}\n   {{{content.param_custom_image}}}\n   {{{content.param_round}}}\n   {{{content.param_color}}}\n   {{{content.param_s_imagewidth}}}\n   {{{content.param_s_boardheight}}}\n   {{{content.param_s_boardwidth}}}\n   {{{content.pinterest_url}}}>\n    {{{content.param_follow_title}}}\n    <img {{{content.img_tag}}} src=\"{{{content.image}}}\" alt=\"\"\/>\n<\/a>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('pinterest', {
	name: 'Pinterest',
	icon: 'ico-pl-pinterest',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 50, height: 20},
		resizable: true,
		renderOnce: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Widget type')},
						{type: 'DropdownBox', id: 'typew',
							options: [
								{id: '#1', name: __('Save Button'), value: 1},
								{id: '#2', name: __('Follow'), value: 2},
								{id: '#3', name: __('Pin'), value: 3},
								{id: '#4', name: __('Board'), value: 4},
								{id: '#5', name: __('Profile'), value: 5}
							],
							change: function (fields) {
								var type = this.getSelectedItem().getOriginal().value;
								if (type === 1) {
									fields.language_block.setVisible(true);
									fields.follow_block.setVisible(false);
									fields.image_block.setVisible(true);
									fields.pinit_block.setVisible(true);
									fields.pin_widget_block.setVisible(false);
									fields.sizes.setVisible(false);
									fields.follow_url_input.setVisible(false);
									fields.pin_url_input.setVisible(false);
									fields.board_url_input.setVisible(false);
									fields.profile_url_input.setVisible(false);
								} else if (type === 2) {
									fields.language_block.setVisible(false);
									fields.follow_block.setVisible(true);
									fields.image_block.setVisible(false);
									fields.pinit_block.setVisible(false);
									fields.pin_widget_block.setVisible(false);
									fields.sizes.setVisible(false);
									fields.save_button_one_image.setVisible(false);
									fields.pin_count_field.setVisible(false);
									fields.follow_url_input.setVisible(true);
									fields.pin_url_input.setVisible(false);
									fields.board_url_input.setVisible(false);
									fields.profile_url_input.setVisible(false);
								} else if (type === 3) {
									fields.language_block.setVisible(false);
									fields.follow_block.setVisible(false);
									fields.pinit_block.setVisible(false);
									fields.image_block.setVisible(false);
									fields.pin_widget_block.setVisible(true);
									fields.sizes.setVisible(false);
									fields.save_button_one_image.setVisible(false);
									fields.pin_count_field.setVisible(false);
									fields.follow_url_input.setVisible(false);
									fields.pin_url_input.setVisible(true);
									fields.board_url_input.setVisible(false);
									fields.profile_url_input.setVisible(false);
								} else if (type === 4) {
									fields.language_block.setVisible(false);
									fields.follow_block.setVisible(false);
									fields.pinit_block.setVisible(false);
									fields.image_block.setVisible(false);
									fields.pin_widget_block.setVisible(false);
									fields.sizes.setVisible(true);
									fields.save_button_one_image.setVisible(false);
									fields.pin_count_field.setVisible(false);
									fields.follow_url_input.setVisible(false);
									fields.pin_url_input.setVisible(false);
									fields.board_url_input.setVisible(true);
									fields.profile_url_input.setVisible(false);
								} else if (type === 5) {
									fields.language_block.setVisible(false);
									fields.follow_block.setVisible(false);
									fields.pinit_block.setVisible(false);
									fields.image_block.setVisible(false);
									fields.pin_widget_block.setVisible(false);
									fields.sizes.setVisible(true);
									fields.save_button_one_image.setVisible(false);
									fields.pin_count_field.setVisible(false);
									fields.follow_url_input.setVisible(false);
									fields.pin_url_input.setVisible(false);
									fields.board_url_input.setVisible(false);
									fields.profile_url_input.setVisible(true);
								}
							}
						}
					]},
					{type: 'HorizontalLayout', id: 'pinit_block', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', id: 'button_type_block', children: [
							{type: 'Label', text: __('Button type')},
							{type: 'DropdownBox', id: 'type',
								options: [
									{id: 'one_image', name: __('One Image')},
									{id: 'any_image', name: __('Any Image')},
								],
								change: function (fields) {
									var type = this.getSelectedItem().getOriginal().id;
									if (type === 'one_image') {
										fields.save_button_one_image.setVisible(true);
										fields.pin_count_field.setVisible(true);
										fields.image_block.setVisible(false);
									} else if (type === 'any_image') {
										fields.save_button_one_image.setVisible(false);
										fields.pin_count_field.setVisible(false);
										fields.image_block.setVisible(true);
									} else if (type === 'image_hover') {
										fields.save_button_one_image.setVisible(false);
										fields.pin_count_field.setVisible(false);
										fields.image_block.setVisible(false);
									}
								}
							}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Large')},
							{type: 'RadioBox', id: 'large0', label: __('Yes'), group: 'large'},
							{type: 'RadioBox', id: 'large1', label: __('No'), group: 'large'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Round')},
							{type: 'RadioBox', id: 'round0', label: __('Yes'), group: 'round',
								change: function (fields) {
									fields.pin_count_field.setVisible(false);
									fields.lang_block.setVisible(false);
								}
							},
							{type: 'RadioBox', id: 'round1', label: __('No'), group: 'round',
								change: function (fields) {
									fields.pin_count_field.setVisible(true);
									fields.lang_block.setVisible(true);
								}
							}
						]}
					]},
					{type: 'HorizontalLayout', id: 'save_button_one_image', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', css: {marginTop: 15}, children: [
							{type: 'Label', text: __('Image source URL'), helpText: __('URL of the page containing image')},
							{type: 'TextField', id: 'one_image_url'}
						]},
						{type: 'VerticalLayout', css: {marginTop: 15}, children: [
							{type: 'Label', text: __('Image URL'), helpText: __('Enter image URL')},
							{type: 'TextField', id: 'one_image_image'}
						]},
						{type: 'VerticalLayout', css: {marginTop: 15}, children: [
							{type: 'Label', text: __('Description'), helpText: __('Enter image description')},
							{type: 'TextField', id: 'one_image_description'}
						]}
					]},
					{type: 'HorizontalLayout', id: 'lang_block', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', id: 'language_block', children: [
							{type: 'Label', text: __('Language')},
							{type: 'DropdownBox', id: 'language', options: [
								{id: 'default', name: __("User's Default Language")},
								{id: 'en', name: "English"},
								{id: 'cs', name: "Czech"},
								{id: 'da', name: "Danish"},
								{id: 'de', name: "German"},
								{id: 'el', name: "Greek"},
								{id: 'es', name: "Spanish"},
								{id: 'fi', name: "Finnish"},
								{id: 'fr', name: "French"},
								{id: 'hi', name: "Hindu"},
								{id: 'hu', name: "Hungarian"},
								{id: 'id', name: "Indonesian"},
								{id: 'it', name: "Italian"},
								{id: 'ja', name: "Japanese"},
								{id: 'ko', name: "Korean"},
								{id: 'ms', name: "Malaysian"},
								{id: 'nb', name: "Norwegian"},
								{id: 'nl', name: "Dutch"},
								{id: 'pl', name: "Polish"},
								{id: 'pt', name: "Portuguese"},
								{id: 'pt-br', name: "Portuguese (Brazil)"},
								{id: 'ro', name: "Romanian"},
								{id: 'ru', name: "Russian"},
								{id: 'sk', name: "Slovak"},
								{id: 'sv', name: "Swedish"},
								{id: 'tl', name: "Tagalog"},
								{id: 'th', name: "Thai"},
								{id: 'tr', name: "Turkish"},
								{id: 'uk', name: "Ukrainian"},
								{id: 'vi', name: "Vietnamese"}
							]}
						]}
					]},
					{type: 'HorizontalLayout', id: 'pin_count_field', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Show Pin Count')},
							{type: 'DropdownBox', id: 'pin_count', options: [
								{id: 'none', name: __('Not Shown')},
								{id: 'above', name: __('Above the Button')},
								{id: 'beside', name: __('Beside the Button')}
							]}
						]}
					]},
					{type: 'VerticalLayout', id: 'image_block', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Custom button image'), helpText: __('Enter image URL')},
						{type: 'TextField', id: 'custom_image'}
					]},
					{type: 'VerticalLayout', id: 'follow_url_input', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Pinterest user URL'), helpText: __('Enter URL of the profile you want to embed')},
						{type: 'TextField', id: 'follow_url'}
					]},
					{type: 'VerticalLayout', id: 'pin_url_input', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Pin URL'), helpText: __('Enter URL of the pin you want to embed')},
						{type: 'TextField', id: 'pin_url'}
					]},
					{type: 'VerticalLayout', id: 'board_url_input', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Pinterest board URL'), helpText: __('Enter URL of the board you want to embed')},
						{type: 'TextField', id: 'board_url'}
					]},
					{type: 'VerticalLayout', id: 'profile_url_input', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Pinterest user profile URL'), helpText: __('Enter URL of the profile you want to embed')},
						{type: 'TextField', id: 'profile_url'}
					]},
					{type: 'HorizontalLayout', id: 'pin_widget_block', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Pin size')},
							{type: 'DropdownBox', id: 'pin_size', options: [
								{id: 'small', name: __('Small')},
								{id: 'medium', name: __('Medium')},
								{id: 'large', name: __('Large')}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Hide description'), helpText: __('Select option to show photo description on Pinterest Pin widget')},
							{type: 'RadioBox', id: 'descriptionv0', label: __('Yes'), group: 'description_visibility'},
							{type: 'RadioBox', id: 'descriptionv1', label: __('No'), group: 'description_visibility'}
						]}
					]},
					{type: 'VerticalLayout', id: 'follow_block', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Full name'), id: 'follow_titlel', helpText: __('Enter name of the profile you want to embed')},
						{type: 'TextField', id: 'follow_title'}
					]},
					{type: 'HorizontalLayout', id: 'sizes', css: {marginTop: 15}, columnWeights: [3, 3, 3], children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Width of images')},
							{type: 'SizeSelector', id: 's_imagewidth'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Board height')},
							{type: 'SizeSelector', id: 's_boardheight'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Board width')},
							{type: 'SizeSelector', id: 's_boardwidth'}
						]}
					]}
				]}
			]}
		]
	},
	properties: [
		{id: 'widgetType', type: 'PinterestWidgetType',
			get: function(data) {return data.content.typew; },
			set: function(value, data) {
				data.content.typew = value;
				if (data.content.previousType !== value) this.setWidgetSize(data);
				data.content.previousType = value;


				if(value === 1) this.buttonOneImage(data);
				if(value === 2) this.followWidget(data);
				if(value === 3) this.pinWidget(data);
				if(value === 4) this.boardWidget(data);
				if(value === 5) this.profileWidget(data);
			}
		},
		// Save Button widget
		{id: 'pinLang', type: 'PinterestPinLanguage',
			dependencies: ['widgetType', 'buttonRound'],
			visible: function(data) {
				return (data.content.typew == 1 && !data.content.param_round_checkbox);
			},
			get: function(data) { return data.content.language; },
			set: function(value, data) {
				var lang = value;
				if(data.content.type === 'one_image') {
					if (lang === 'default' || lang === 'en') {
						lang = 'www';
					}
					if (lang === 'cs') {
						lang = 'cz';
					}
					if (lang === 'da') {
						lang = 'dk';
					}
					if (lang === 'el') {
						lang = 'gr';
					}
					if (lang === 'hi') {
						lang = 'in';
					}
					if (lang === 'ja') {
						lang = 'jp';
					}
					if (lang === 'ko') {
						lang = 'kr';
					}
					if (lang === 'nb') {
						lang = 'no';
					}
					if (lang === 'pt-br') {
						lang = 'pt';
					}
					if (lang === 'sv') {
						lang = 'se';
					}
					data.content.language = lang;
					data.content.pin_lang = 'data-pin-lang="' + value + '"';
					this.buttonOneImage(data);
				}
				if(data.content.type === 'any_image') {
					data.content.pin_lang = 'data-pin-lang="' + value + '"';
					this.buttonAnyImage(data);
				}

			}
		},
		{id: 'buttonLarge', type: 'PinterestButtonLarge',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 1;
			},
			get: function(data) { return data.content.param_large_checkbox; },
			set: function(value, data) {
				data.content.param_large_checkbox = value;
				if (data.content.type === 'one_image') this.buttonOneImage(data); this.setWidgetSize(data);
				if (data.content.type === 'any_image') this.buttonAnyImage(data); this.setWidgetSize(data);
			}
		},
		{id: 'buttonRound', type: 'PinterestButtonRound',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 1;
			},
			get: function(data) { return data.content.param_round_checkbox; },
			set: function(value, data) {
				data.content.param_round_checkbox = value;
				if (data.content.type === 'one_image') this.buttonOneImage(data); this.setWidgetSize(data);
				if (data.content.type === 'any_image') this.buttonAnyImage(data); this.setWidgetSize(data);
			}
		},
		{id: 'buttonType', type: 'PinterestButtonType',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 1;
			},
			get: function(data) { return data.content.type; },
			set: function(value, data) {
				data.content.type = value;
				if (data.content.type === 'one_image') this.buttonOneImage(data);
				if (data.content.type === 'any_image') this.buttonAnyImage(data);
			}
		},
		{id: 'customButtonImage', type: 'PinterestCustomButtonImage', helpText: __('Enter image URL'),
			dependencies: ['widgetType', 'buttonType'],
			visible: function(data) {
				return data.content.typew == 1 && data.content.type == 'any_image';
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.custom_image; },
			set: function(value, data) {
				data.content.custom_image = value;
				if (data.content.type === 'any_image') this.buttonAnyImage(data);
			}
		},
		{id: 'showPin', type: 'PinterestShowPinCount',
			dependencies: ['widgetType', 'buttonRound'],
			visible: function(data) {
				return (data.content.typew == 1 && !data.content.param_round_checkbox);
			},
			get: function(data) { return data.content.pin_count_value; },
			set: function(value, data) {
				data.content.pin_count_value = value;
				if (value === "above") {
					data.content.pin_count = 'data-pin-count="above"';
				}
				if (value === "beside") {
					data.content.pin_count = 'data-pin-count="beside"';
				}
				this.buttonOneImage(data);
			}
		},
		{id: 'oneImageUrl', type: 'PinterestOneImageUrl', helpText: __('URL of the page containing image'),
			dependencies: ['widgetType', 'buttonType'],
			visible: function(data) {
				return data.content.typew == 1 && data.content.type == 'one_image';
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.one_image_url; },
			set: function(value, data) {
				data.content.one_image_url = value;
				this.buttonOneImage(data);
			}
		},
		{id: 'oneImageImage', type: 'PinterestOneImageImage', helpText: __('Enter image URL'),
			dependencies: ['widgetType', 'buttonType'],
			visible: function(data) {
				return data.content.typew == 1 && data.content.type == 'one_image';
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.one_image_image; },
			set: function(value, data) {
				data.content.one_image_image = value;
				this.buttonOneImage(data);
			}
		},
		{id: 'oneImageDesc', type: 'PinterestOneImageDesc', helpText: __('Enter image description'),
			dependencies: ['widgetType', 'buttonType'],
			visible: function(data) {
				return data.content.typew == 1 && data.content.type == 'one_image';
			},
			get: function(data) { return data.content.one_image_description; },
			set: function(value, data) {
				data.content.one_image_description = value;
				this.buttonOneImage(data);
			}
		},


		//Widget type - Follow
		{id: 'followUrl', type: 'PinterestFollowUrl', helpText: __('Enter URL of the profile you want to embed'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 2;
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.follow_url; },
			set: function(value, data) {
				data.content.follow_url = value;
				this.followWidget(data);
			}
		},
		{id: 'followTitle', type: 'PinterestFollowTitle', helpText: __('Enter name of the profile you want to embed'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 2;
			},
			get: function(data) { return data.content.follow_title; },
			set: function(value, data) {
				data.content.follow_title = value;
				this.followWidget(data);
			}
		},


		//Widget type - Pin
		{id: 'pinUrl', type: 'PinterestPinUrl', helpText: __('Enter URL of the pin you want to embed'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 3;
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.pin_url; },
			set: function(value, data) {
				data.content.pin_url = value;
				this.pinWidget(data);
			}
		},
		{id: 'pinSize', type: 'PinterestPinSize',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 3;
			},
			get: function(data) { return data.content.pin_size_param; },
			set: function(value, data) {
				data.content.pin_size_param = value;
				this.setWidgetSize(data);
				this.pinWidget(data);
			}
		},
		{id: 'hideDescription', type: 'PinterestHideDescription', helpText: __('Select option to show photo description on Pinterest Pin widget'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 3;
			},
			get: function(data) { return data.content.description_visibility_checkbox; },
			set: function(value, data) {
				data.content.description_visibility_checkbox = value;
				// data.content.description_visibility = value ? 1 : 0;
				this.pinWidget(data);
			}
		},


		//Widget type - board
		{id: 'boardUrl', type: 'PinterestBoardUrl', helpText: __('Enter URL of the board you want to embed'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 4;
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.board_url; },
			set: function(value, data) {
				data.content.board_url = value;
				this.boardWidget(data);
			}
		},
		{id: 'boardHeight', type: 'PinterestBoardHeight',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 4;
			},
			get: function(data) { return data.content.s_boardheight; },
			set: function(value, data) {
				data.content.s_boardheight = value;
				this.boardWidget(data);
			}
		},
		{id: 'boardWidth', type: 'PinterestBoardWidth',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 4;
			},
			get: function(data) { return data.content.s_boardwidth; },
			set: function(value, data) {
				data.content.s_boardwidth = value;
				this.boardWidget(data);
			}
		},
		{id: 'boardImageWidth', type: 'PinterestBoardImageWidth',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 4;
			},
			get: function(data) { return data.content.s_imagewidth; },
			set: function(value, data) {
				data.content.s_imagewidth = value;
				this.boardWidget(data);
			}
		},
		//Widget type - profile
		{id: 'profileUrl', type: 'PinterestProfileUrl', helpText: __('Enter URL of the profile you want to embed'),
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 5;
			},
			validate: function(value, data, api) {
				this.checkUrl(value, api, data);
			},
			get: function(data) { return data.content.profile_url; },
			set: function(value, data) {
				data.content.profile_url = value;
				this.profileWidget(data);
			}
		},
		{id: 'profileHeight', type: 'PinterestProfileHeight',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 5;
			},
			get: function(data) { return data.content.s_boardheight; },
			set: function(value, data) {
				data.content.s_boardheight = value;
				this.profileWidget(data);
			}
		},
		{id: 'profileWidth', type: 'PinterestProfileWidth',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 5;
			},
			get: function(data) { return data.content.s_boardwidth; },
			set: function(value, data) {
				data.content.s_boardwidth = value;
				this.profileWidget(data);
			}
		},
		{id: 'profileImageWidth', type: 'PinterestProfileImageWidth',
			dependencies: ['widgetType'],
			visible: function(data) {
				return data.content.typew == 5;
			},
			get: function(data) { return data.content.s_imagewidth; },
			set: function(value, data) {
				data.content.s_imagewidth = value;
				this.profileWidget(data);
			}
		}


	],

	checkUrl: function(value, api, data) {
		if(value === '') {
			this.setWidgetSize(data, false);
			this.displayErrorMessage(false);
			api.setError('');
		}
		else if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)/.test(value)) {
			this.setWidgetSize(data, false);
			this.displayErrorMessage(false);
			api.setError(__(''));
		}
		else  {
			this.setWidgetSize(data, true);
			this.setErrorMessage(__('Invalid URL'));
			api.setError(__('Invalid URL'));
		}
	},

	cleanPreview: function(data) {

		data.content.pinterest_url = '';
		data.content.param_follow_title = '';
		data.content.param_s_imagewidth = '';
		data.content.param_s_boardheight = '';
		data.content.param_s_boardwidth = '';
		data.content.img_tag = '';
	},

	setWidgetSize: function(data, isError) {
			var w = null, h = null;
			if (data.content.typew === 1 && !data.content.param_large_checkbox && !data.content.param_round_checkbox) {
				if (isError) {
					w = 230;
					h = 270;
				} else {
					w = 50;
					h = 20;
				}
			} else if (data.content.typew === 1 && data.content.param_large_checkbox && !data.content.param_round_checkbox) {
				if (isError) {
					w = 230;
					h = 270;
				} else {
					w = 70;
					h = 30;
				}
			} else if (data.content.typew === 1 && data.content.param_large_checkbox && data.content.param_round_checkbox) {
				if (isError) {
					w = 230;
					h = 270;
				} else {
					w = 30;
					h = 30;
				}
			} else if (data.content.typew === 1 && !data.content.param_large_checkbox && data.content.param_round_checkbox) {
				if (isError) {
					w = 230;
					h = 270;
				} else {
					w = 15;
					h = 15;
				}
			}
			else if (data.content.typew === 2) {
				if (isError) {
					w = 230;
					h = 270;
				} else {
					w = 75;
					h = 20;
				}
			} else if (data.content.typew === 3 && data.content.pin_size_param === 'small') {
				w = 230;
				h = 270;
			} else if (data.content.typew === 3 && !data.content.pin_size_param) {
				w = 230;
				h = 270;
			} else if (data.content.typew === 3 && data.content.pin_size_param === 'medium') {
				w = 350;
				h = 350;
			} else if (data.content.typew === 3 && data.content.pin_size_param === 'large') {
				w = 600;
				h = 540;
			}
			else if (data.content.typew === 4) {
				w = 730;
				h = 350;
			} else if (data.content.typew === 5) {
				w = 730;
				h = 350;
			}
			this.setSize(w, h);
	},

	profileWidget: function(data) {
		this.cleanPreview(data);
		data.content.pinterest_url = data.content.profile_url ? ('href="' + this.escapeHTML(data.content.profile_url) + '"') : 'href="https://www.pinterest.com/pinterest/"';
		data.content.param_s_imagewidth = 'data-pin-scale-width="' + data.content.s_imagewidth + '"';
		data.content.param_s_boardheight = 'data-pin-scale-height="' + data.content.s_boardheight + '"';
		data.content.param_s_boardwidth = 'data-pin-board-width="' + data.content.s_boardwidth + '"';
		data.content.param_pindo = 'data-pin-do="embedUser"';
		data.content.img_tag = 'style="display: none;"';
		this.pluginScoped.addListener(this, function () {
		});
	},

	boardWidget: function(data) {
		this.cleanPreview(data);
		data.content.pinterest_url = data.content.board_url ? ('href="' + this.escapeHTML(data.content.board_url) + '"') : 'href="https://www.pinterest.com/pinterest/official-news/"';
		data.content.param_s_imagewidth = 'data-pin-scale-width="' + data.content.s_imagewidth + '"';
		data.content.param_s_boardheight = 'data-pin-scale-height="' + data.content.s_boardheight + '"';
		data.content.param_s_boardwidth = 'data-pin-board-width="' + data.content.s_boardwidth + '"';
		data.content.param_pindo = 'data-pin-do="embedBoard"';
		data.content.img_tag = 'style="display: none;"';
		this.pluginScoped.addListener(this, function () {
		});
	},

	pinWidget: function(data) {
		this.cleanPreview(data);
		data.content.param_customimage = '';
		data.content.param_follow_title = '';
		data.content.pin_size = '';
		data.content.pin_terse = '';
		data.content.pin_save = '';
		data.content.pin_lang = '';
		data.content.pin_count = '';
		data.content.pin_hover = '';
		data.content.param_round = '';
		data.content.param_one_image_url = '';
		data.content.param_one_image_image = '';
		data.content.param_one_image_description = '';
		data.content.param_custom_image = '';
		data.content.custom_image = '';
		data.content.pinterest_url = '';
		data.content.s_imagewidth = '';
		data.content.s_boardheight = '';
		data.content.s_boardwidth = '';
		data.content.profile_url = '';
		data.content.board_url = '';
		data.content.follow_url = '';
		data.content.param_pindo = 'data-pin-do="embedPin"';
		data.content.img_tag = 'style="display: none;"';
		data.content.pin_size = 'data-pin-width="' + data.content.pin_size_param + '"';
		data.content.pinterest_url = data.content.pin_url ? ('href="' + this.escapeHTML(data.content.pin_url) + '"') : 'href="https://www.pinterest.com/pin/99360735500167749/"';
		if (data.content.description_visibility_checkbox) {
			data.content.pin_terse = 'data-pin-terse="true"';
			data.content.description_visibility = 1;
		} else {
			data.content.pin_terse = '';
			data.content.description_visibility = 0;
		}
		this.pluginScoped.addListener(this, function () {
		});
	},

	followWidget: function(data) {
		this.cleanPreview(data);
		data.content.param_pindo = 'data-pin-do="buttonFollow"';
		data.content.img_tag = 'style="display: none;"';
		data.content.param_large = '';
		data.content.param_round = '';
		data.content.pinterest_url = data.content.follow_url ? ('href="' + this.escapeHTML(data.content.follow_url) + '"') : 'href="https://www.pinterest.com/pinterest/"';
		data.content.param_follow_title = data.content.follow_title;
		this.pluginScoped.addListener(this, function () {
		});
	},
	buttonOneImage: function(data) {
		this.cleanPreview(data);
		data.content.param_round = data.content.param_round_checkbox ? 'data-pin-round="true"' : '';
		data.content.param_large = data.content.param_large_checkbox ? 'data-pin-tall="true"' : '';
		data.content.param_pindo = 'data-pin-do="buttonPin"';
		data.content.pin_lang = data.content.language ? data.content.pin_lang : 'data-pin-lang="www"';
		data.content.language = data.content.language ? data.content.language : 'www';
		data.content.pin_save = data.content.param_round_checkbox ?  'data-pin-save="false"' : 'data-pin-save="true"';
		data.content.pinterest_url = "https://" + data.content.language + ".pinterest.com/pin/create/button/?url=" + (data.content.one_image_url ? this.escapeHTML(data.content.one_image_url) : 'https://www.flickr.com/photos/kentbrew/6851755809/') + "&media=" + (data.content.one_image_image ? this.escapeHTML(data.content.one_image_image) : 'https://farm8.staticflickr.com/7027/6851755809_df5b2051c9_z.jpg') + "&description=" + this.escapeHTML(data.content.one_image_description);
		data.content.pinterest_url = 'href="' + data.content.pinterest_url + '"';
		this.pluginScoped.addListener(this, function () {
		});
	},

	buttonAnyImage: function(data) {
		this.cleanPreview(data);
		data.content.param_round = data.content.param_round_checkbox ? 'data-pin-round="true"' : '';
		data.content.param_large = data.content.param_large_checkbox ? 'data-pin-tall="true"' : '';
		data.content.param_pindo = 'data-pin-do="buttonBookmark"';
		data.content.pin_lang = data.content.pin_lang ? data.content.pin_lang : 'data-pin-lang="www"';
		data.content.pinterest_url = 'href="https://www.pinterest.com/pin/create/button/"';
		data.content.pin_save = data.content.param_round_checkbox ?  'data-pin-save="false"' : 'data-pin-save="true"';
		data.content.image = data.content.custom_image ? this.escapeHTML(data.content.custom_image) : '';
		data.content.param_custom_image = data.content.custom_image ? 'data-pin-custom="true"' : '';
		this.pluginScoped.addListener(this, function () {
		});
	},

	escapeHTML: function(value) {
		var map = {
			'&': '&amp;',
			'<': '&lt;',
			'>': '&gt;',
			'"': '&quot;',
			"'": '&#039;'
		};

		return value.replace(/[&<>"']/g, function(m) {return map[m];});
	},

	resizeTimeout: null,
	resizeStopAction: function(data, elem) {
		this.pluginScoped.addListener(this, function () {
		});
	},

	pluginScoped: {
		scriptLoaded: false,
		timer: null,
		scriptReady: false,
		listeners: [],
		addListener: function (inst, func) {
			if (typeof func === 'function') {
				if (this.scriptReady) {
					func.call(inst);
				} else {
					this.listeners.push({inst: inst, func: func});
				}
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://assets.pinterest.com/js/pinit.js', function () {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
			clearTimeout(this.timer);
			this.timer = setTimeout(function () {
				inst.updateElement(true);
				if (window.PinUtils) {
					try {
						window.PinUtils.build();
					} catch (e) {
						setTimeout(window.PinUtils.build, 100);
						console.error(e);
					}
				}
			}, 100);
		}
	},
	openAction: function (fields, data, elem) {
		var itm;
		data.content.pinterest_url = '';
		fields.custom_image.setText(data.content.custom_image);
		fields.follow_title.setText(data.content.follow_title ? data.content.follow_title : 'Pinterest');
		fields.large0.setValue(data.content.large === 1);
		fields.large1.setValue(data.content.large === 0);

		itm = fields.type.getItemById(data.content.type);
		fields.type.selectItem(itm);

		fields.follow_url.setValue(data.content.follow_url);
		fields.pin_url.setValue(data.content.pin_url);
		fields.board_url.setValue(data.content.board_url);
		fields.profile_url.setValue(data.content.profile_url);

		fields.one_image_url.setValue(data.content.one_image_url);
		fields.one_image_image.setValue(data.content.one_image_image);
		fields.one_image_description.setValue(data.content.one_image_description);

		fields.s_imagewidth.setValue(data.content.s_imagewidth);
		fields.s_boardheight.setValue(data.content.s_boardheight);
		fields.s_boardwidth.setValue(data.content.s_boardwidth);
		fields.round0.setValue(data.content.round === 1);
		fields.round1.setValue(data.content.round === 0);
		fields.round0.trigger('change');
		if (data.content.round === 1) {
			fields.pin_count_field.setVisible(false);
			fields.lang_block.setVisible(false);
		} else {
			fields.pin_count_field.setVisible(true);
			fields.lang_block.setVisible(true);
		}
		itm = fields.typew.getItemById('#' + data.content.typew);
		if (itm) {
			fields.typew.selectItem(itm);
		} else {
			fields.typew.selectItem(fields.typew.getItem(0));
		}
		fields.typew.trigger('change');

		fields.descriptionv0.setValue(data.content.description_visibility === 1);
		fields.descriptionv1.setValue(data.content.description_visibility === 0);

		if (data.content.type === 'one_image') {
			fields.image_block.setVisible(false);
		}
		if (data.content.type === 'any_image') {
			fields.save_button_one_image.setVisible(false);
			fields.pin_count_field.setVisible(false);
			fields.image_block.setVisible(true);
		}
	},
	applyAction: function (fields, data, elem) {
		var itm;
		if (fields.large0.getValue())
			data.content.large = 1;
		if (fields.large1.getValue())
			data.content.large = 0;
		if (fields.round0.getValue())
			data.content.round = 1;
		if (fields.round1.getValue())
			data.content.round = 0;
		itm = fields.typew.getSelectedItem();
		data.content.typew = itm.getOriginal().value;
		itm = fields.type.getSelectedItem();
		data.content.type = itm.getOriginal().id;
		data.content.param_customimage = '';
		data.content.follow_title = '';
		data.content.param_follow_title = '';
		data.content.pin_size = '';
		data.content.pin_terse = '';
		data.content.pin_save = '';
		data.content.pin_lang = '';
		data.content.pin_count = '';
		data.content.pin_hover = '';
		data.content.param_round = '';
		data.content.param_one_image_url = '';
		data.content.param_one_image_image = '';
		data.content.param_one_image_description = '';
		data.content.param_custom_image = '';
		data.content.custom_image = fields.custom_image.getText();
		data.content.pinterest_url = '';
		data.content.s_imagewidth = fields.s_imagewidth.getValue();
		data.content.s_boardheight = fields.s_boardheight.getValue();
		data.content.s_boardwidth = fields.s_boardwidth.getValue();
		data.content.profile_url = fields.profile_url.getValue();
		data.content.board_url = fields.board_url.getValue();
		data.content.pin_url = fields.pin_url.getValue();
		data.content.follow_url = fields.follow_url.getValue();
		if (data.content.typew === 1) { //Pin it type
			var itm = fields.type.getSelectedItem();
			var current_pin_type = itm.getOriginal().id;
			if (current_pin_type === 'one_image') {
				data.content.param_pindo = 'data-pin-do="buttonPin"';
				data.content.param_one_image_url = fields.one_image_url.getText();
				data.content.param_one_image_image = fields.one_image_image.getText();
				data.content.param_one_image_description = fields.one_image_description.getText();
				var itm = fields.language.getSelectedItem();
				data.content.pin_lang = 'data-pin-lang="' + itm.getOriginal().id + '"';
				lang = itm.getOriginal().id;
				if (lang == 'default' || lang == 'en') {
					lang = 'www';
				}
				if (lang == 'cs') {
					lang = 'cz';
				}
				if (lang == 'da') {
					lang = 'dk';
				}
				if (lang == 'el') {
					lang = 'gr';
				}
				if (lang == 'hi') {
					lang = 'in';
				}
				if (lang == 'ja') {
					lang = 'jp';
				}
				if (lang == 'ko') {
					lang = 'kr';
				}
				if (lang == 'nb') {
					lang = 'no';
				}
				if (lang == 'pt-br') {
					lang = 'pt';
				}
				if (lang == 'sv') {
					lang = 'se';
				}
				data.content.pinterest_url = "https://" + lang + ".pinterest.com/pin/create/button/?url=" + this.escapeHTML(data.content.param_one_image_url) + "&media=" + this.escapeHTML(data.content.param_one_image_image) + "&description=" + this.escapeHTML(data.content.param_one_image_description);
				data.content.pinterest_url = 'href="' + data.content.pinterest_url + '"';
				var itm = fields.pin_count.getSelectedItem();
				var pin_count = itm.getOriginal().id;
				if (pin_count === "above") {
					data.content.pin_count = 'data-pin-count="above"';
				}
				if (pin_count === "beside") {
					data.content.pin_count = 'data-pin-count="beside"';
				}
				if (data.content.round === 1) {
					data.content.param_round = 'data-pin-round="true"';
					data.content.pin_save = 'data-pin-save="false"';
				} else {
					data.content.pin_save = 'data-pin-save="true"';
				}
				if (data.content.large === 1) {
					data.content.param_large = 'data-pin-tall="true"';
				} else {
					data.content.param_large = '';
				}
			}
			if (current_pin_type === 'any_image') {
				data.content.param_pindo = 'data-pin-do="buttonBookmark"';
				var itm = fields.language.getSelectedItem();
				data.content.pin_lang = 'data-pin-lang="' + itm.getOriginal().id + '"';
				data.content.pinterest_url = 'href="https://www.pinterest.com/pin/create/button/"';
				data.content.pin_save = 'data-pin-save="true"';
				if (data.content.round === 1) {
					data.content.param_round = 'data-pin-round="true"';
					data.content.pin_save = 'data-pin-save="false"';
				} else {
					data.content.param_round = '';
				}
				if (data.content.large === 1) {
					data.content.param_large = 'data-pin-tall="true"';
				} else {
					data.content.param_large = '';
				}

				if (data.content.custom_image != '') {
					data.content.image = this.escapeHTML(data.content.custom_image);
					data.content.param_custom_image = 'data-pin-custom="true"';
				}
			}
			if (current_pin_type === 'image_hover') {
				data.content.param_pindo = '';
				data.content.pin_save = 'data-pin-save="true"';
				data.content.pin_hover = 'data-pin-hover="true"';
				data.content.pinterest_url = '';
				data.content.image = '';
			}
			data.content.param_s_imagewidth = '';
			data.content.param_s_boardheight = '';
			data.content.param_s_boardwidth = '';
		}
		if (data.content.typew === 2) { //Follow type
			data.content.param_s_imagewidth = '';
			data.content.param_s_boardheight = '';
			data.content.param_s_boardwidth = '';
			data.content.param_pindo = 'data-pin-do="buttonFollow"';
			data.content.img_tag = 'style="display: none;"';
			data.content.param_large = '';
			data.content.param_round = '';
			data.content.follow_title = fields.follow_title.getText();
			data.content.param_follow_title = fields.follow_title.getText();
			data.content.pinterest_url = 'href="' + this.escapeHTML(data.content.follow_url) + '"';
		}
		else if (data.content.typew === 3) { //Pin type
			data.content.param_s_imagewidth = '';
			data.content.param_s_boardheight = '';
			data.content.param_s_boardwidth = '';
			data.content.param_pindo = 'data-pin-do="embedPin"';
			data.content.img_tag = 'style="display: none;"';
			var itm = fields.pin_size.getSelectedItem();
			data.content.pin_size = 'data-pin-width="' + itm.getOriginal().id + '"';
			data.content.follow_title = '';
			data.content.param_large = '';
			data.content.param_round = '';
			data.content.pinterest_url = 'href="' + this.escapeHTML(data.content.pin_url) + '"';
			if (fields.descriptionv0.getValue()) {
				data.content.pin_terse = 'data-pin-terse="true"';
				data.content.description_visibility = 1;
			}
			if (fields.descriptionv1.getValue()) {
				data.content.pin_terse = '';
				data.content.description_visibility = 0;
			}
		}
		else if (data.content.typew === 4) { //Board type
			data.content.pinterest_url = 'href="' + this.escapeHTML(data.content.board_url) + '"';
			data.content.param_s_imagewidth = 'data-pin-scale-width="' + data.content.s_imagewidth + '"';
			data.content.param_s_boardheight = 'data-pin-scale-height="' + data.content.s_boardheight + '"';
			data.content.param_s_boardwidth = 'data-pin-board-width="' + data.content.s_boardwidth + '"';
			data.content.param_pindo = 'data-pin-do="embedBoard"';
			data.content.img_tag = 'style="display: none;"';
			data.content.follow_title = '';
			data.content.param_large = '';
			data.content.param_round = '';
		}
		else if (data.content.typew === 5) {
			data.content.pinterest_url = 'href="' + this.escapeHTML(data.content.profile_url) + '"';
			data.content.param_s_imagewidth = 'data-pin-scale-width="' + data.content.s_imagewidth + '"';
			data.content.param_s_boardheight = 'data-pin-scale-height="' + data.content.s_boardheight + '"';
			data.content.param_s_boardwidth = 'data-pin-board-width="' + data.content.s_boardwidth + '"';
			data.content.param_pindo = 'data-pin-do="embedUser"';
			data.content.img_tag = 'style="display: none;"';
			data.content.follow_title = '';
			data.content.param_large = '';
			data.content.param_round = '';
		}
		this.pluginScoped.addListener(this, function () {
		});
	},
	loadAction: function (data) {
		if (!data.content.previousType)
			data.content.previousType = 1;
		if (!data.content.language)
			data.content.language = '';
		if (!data.content.pin_lang)
			data.content.pin_lang = '';
		if (data.content.param_large_checkbox == null)
			data.content.param_large_checkbox = false;
		if (data.content.param_round_checkbox == null)
			data.content.param_round_checkbox = false;
		if (data.content.description_visibility_checkbox == null)
			data.content.description_visibility_checkbox = false;
		if (!data.content.pin_count_value) data.content.pin_count_value = '';



		if (!data.content.typew)
			data.content.typew = 1;
		if (!data.content.pin_save)
			data.content.pin_save = 'data-pin-save="true"';
		if (!data.content.image)
			data.content.image = '';
		if (!data.content.param_large)
			data.content.param_large = '';
		if (!data.content.param_round)
			data.content.param_round = '';
		if (!data.content.pin_size)
			data.content.pin_size = '';
		if (!data.content.pin_terse)
			data.content.pin_terse = '';
		if (!data.content.type)
			data.content.type = 'any_image';
		if (!data.content.param_pindo)
			data.content.param_pindo = 'data-pin-do="buttonBookmark"';
		if (!data.content.one_image_url)
			data.content.one_image_url = '';
		if (!data.content.one_image_image)
			data.content.one_image_image = '';
		if (!data.content.one_image_description)
			data.content.one_image_description = 'Next stop: Pinterest';
		if (!data.content.img_tag)
			data.content.img_tag = '';
		if (!data.content.param_customimage)
			data.content.param_customimage = '';
		if (!data.content.large)
			data.content.large = 0;
		if (!data.content.description_visibility)
			data.content.description_visibility = 0;
		if (!data.content.round)
			data.content.round = 0;
		if (!data.content.custom_image)
			data.content.custom_image = '';
		if (!data.content.pinterest_url)
			data.content.pinterest_url = 'href="https://pinterest.com/pin/create/button/"';
		if (!data.content.follow_title)
			data.content.follow_title = 'Pinterest';
		if (!data.content.s_imagewidth)
			data.content.s_imagewidth = 400;
		if (!data.content.s_boardheight)
			data.content.s_boardheight = 240;
		if (!data.content.s_boardwidth)
			data.content.s_boardwidth = 80;
		if (!data.content.follow_url)
			data.content.follow_url = '';
		if (!data.content.pin_url)
			data.content.pin_url = '';
		if (!data.content.board_url)
			data.content.board_url = '';
		if (!data.content.profile_url)
			data.content.profile_url = '';

		this.pluginScoped.addListener(this, function () {
		});
	},
	loadedAction: function (data, elem) {
		this.pluginScoped.addListener(this, function () {
		});
	}

});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"easypay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/easypay","pluginUri":"plugins\/easypay","customConfiguration":null};
PluginWrapper._config.id = 'easypay';
PluginWrapper._config.baseUri = "plugins\/easypay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/easypay\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Easypay\" method=\"post\" action=\"https:\/\/ssl.easypay.by\/weborder\/\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"EP_Sum\" value=\"{{content.sum}}\" \/>\n\t<input type=\"hidden\" name=\"EP_MerNo\" value=\"{{content.merno}}\" \/>\n\t<input type=\"hidden\" name=\"EP_Expires\" value=\"30\" \/>\n\t<input type=\"hidden\" name=\"EP_Comment\" value=\"{{content.ordername}}\" \/>\n\t<input type=\"hidden\" name=\"EP_OrderInfo\" value=\"{{content.orderdescription}}\" \/>\n\t{{#content.demo}}\n\t<input type=\"hidden\" name=\"EP_Debug\" value=\"1\" \/>\n\t{{\/content.demo}}\n\t<input type=\"hidden\" name=\"EP_Encoding\" value=\"utf-8\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"EP_OrderNo\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"EP_Success_URL\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"EP_Cancel_URL\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/easypay/main.php';
PluginWrapper._config.active = false;

var Globals = {
	_settingsContent: null,
	_settingsDialog: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			var base_url = 'http://' + wb_builder.siteDomain + '/';
			var content = $('<div>').append('<p><strong>Page URL:</strong> <a href="https://ssl.easypay.by/" target="_blank">https://ssl.easypay.by/</a></p>'
					+ '<p><strong>Notifications URL (IPN)</strong>:<br />'
					+ '<pre>' + base_url + '0/store-callback/Easypay' + '</pre></p>');
			Globals._settingsContent = content.html();
		}
		return Globals._settingsContent;
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'easypay_color_line.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'easypay_color.svg', name: 'coloured'},
			{id: 'easypay_black_line.svg', name: 'black line'},
			{id: 'easypay_white_line.svg', name: 'white line', backgroundColor: '#000000'},
			{id: 'easypay_color_line.svg', name: 'coloured line'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'EasyPay',
	id: 'easypay',
	pageUrl: 'https://ssl.easypay.by/',
	keyFieldId: 'merno',
	keyField2Id: 'webkey',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Web key')},
			{type: 'TextField', placeholder: __('Web key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'ordername,orderdescription',
	priceFieldId: 'sum',
	globalVars: ['merno', 'webkey'],
	useStylesInStoreCart: true,
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'easypay', true),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('easypay', {
	name: 'EasyPay',
	element: {
		minSize: {width: 60, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merno', type: 'EasypayMerno', helpText:__("Merchant account number in EasyPay"),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merno ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merno; },
			set: function(value, data) {
				data.content.merno = value;
			}
		},
		{id: 'webkey', type: 'EasypayWebKey', helpText:__("Personal key from EasyPay"),
			get: function(data) { return data.content.webkey; },
			set: function(value, data) {
				data.content.webkey = value;
			}
		},
		{id: 'ordername', type: 'EasypayOrderName', helpText:__("The name of the goods. Cannot contain special symbols"),
			get: function(data) { return data.content.ordername; },
			set: function(value, data) {
				data.content.ordername = value;
			}
		},
		{id: 'orderdescription', type: 'EasypayOrderDescription',
			get: function(data) { return data.content.orderdescription; },
			set: function(value, data) {
				data.content.orderdescription = value;
			}
		},
		{id: 'sum', type: 'EasypaySum',
			get: function(data) { return data.content.sum; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.sum = value;
			}
		},
		{id: 'demo', type: 'EasypayDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'easypay'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), helpText:__("Merchant account number in EasyPay"), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merno ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merno'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Web key'), helpText:__("Personal key from EasyPay")},
						{type: 'TextField', id: 'webkey'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name'), helpText:__("The name of the goods. Cannot contain special symbols")},
						{type: 'TextField', id: 'ordername'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred") + ', ' + __('BYN')},
						{type: 'TextField', id: 'sum'}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'Label', text: __('Description')},
					{type: 'TextField', id: 'orderdescription'}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'bottom'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'easypay')
		]
	},
	openAction: function(fields, data, elem) {
		fields.merno.setText(data.content.merno);
		fields.webkey.setText(data.content.webkey);
		fields.ordername.setText(data.content.ordername);
		fields.orderdescription.setText(data.content.orderdescription);
		fields.sum.setText(data.content.sum);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.merno = fields.merno.getText();
		data.content.webkey = fields.webkey.getText();
		data.content.ordername = fields.ordername.getText();
		data.content.orderdescription = fields.orderdescription.getText();
		data.content.sum = fields.sum.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.merno) data.content.merno = '';
		if (!data.content.webkey) data.content.webkey = '';
		if (!data.content.ordername) data.content.ordername = ''; // Donate
		if (!data.content.orderdescription) data.content.orderdescription = ''; // Donate 1 RUB
		if (!data.content.sum) data.content.sum = '1';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['easypay.gif'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'easypay_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merno');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"olark","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/olark","pluginUri":"plugins\/olark","customConfiguration":null};
PluginWrapper._config.id = 'olark';
PluginWrapper._config.baseUri = "plugins\/olark";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/olark\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n\t<div class=\"wb_caption smaller wb-prevent-layout-click\">\n\t\t<div>\n\t\t\t<i class=\"ico-pl-olark\"><\/i> Olark\n\t\t<\/div>\n\t<\/div>\n{{\/isPublished}}\n{{#isPublished}}\n<style>#{{id}} {width: 0; height: 0; min-height: 0; min-width: 0}<\/style>\n{{\/isPublished}}\n{{#firstOnPage}}\n<script data-cfasync=\"false\" type='text\/javascript'>\/*<![CDATA[*\/window.olark||(function(c){var f=window,d=document,l=f.location.protocol==\"https:\"?\"https:\":\"http:\",z=c.name,r=\"load\";var nt=function(){\nf[z]=function(){\n(a.s=a.s||[]).push(arguments)};var a=f[z]._={\n},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){\nf[z](\"call\",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={\n0:+new Date};a.P=function(u){\na.p[u]=new Date-a.p[0]};function s(){\na.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent(\"on\"+r,s);var ld=function(){function p(hd){\nhd=\"head\";return[\"<\",hd,\"><\/\",hd,\"><\",i,' onl' + 'oad=\"var d=',g,\";d.getElementsByTagName('head')[0].\",j,\"(d.\",h,\"('script')).\",k,\"='\",l,\"\/\/\",a.l,\"'\",'\"',\"><\/\",i,\">\"].join(\"\")}var i=\"body\",m=d[i];if(!m){\nreturn setTimeout(ld,100)}a.P(1);var j=\"appendChild\",h=\"createElement\",k=\"src\",n=d[h](\"div\"),v=n[j](d[h](z)),b=d[h](\"iframe\"),g=\"document\",e=\"domain\",o;n.style.display=\"none\";m.insertBefore(n,m.firstChild).id=z;b.frameBorder=\"0\";b.id=z+\"-loader\";if(\/MSIE[ ]+6\/.test(navigator.userAgent)){\nb.src=\"javascript:false\"}b.allowTransparency=\"true\";v[j](b);try{\nb.contentWindow[g].open()}catch(w){\nc[e]=d[e];o=\"javascript:var d=\"+g+\".open();d.domain='\"+d.domain+\"';\";b[k]=o+\"void(0);\"}try{\nvar t=b.contentWindow[g];t.write(p());t.close()}catch(x){\nb[k]=o+'d.write(\"'+p().replace(\/\"\/g,String.fromCharCode(92)+'\"')+'\");d.close();'}a.P(2)};ld()};nt()})({\nloader: \"static.olark.com\/jsclient\/loader0.js\",name:\"olark\",methods:[\"configure\",\"extend\",\"declare\",\"identify\"]});\n\/* custom configuration goes here (www.olark.com\/documentation) *\/\nolark.identify('{{content.groupId}}');\/*]]>*\/<\/script><noscript><a href=\"https:\/\/www.olark.com\/site\/{{content.groupId}}\/contact\" title=\"Contact us\" target=\"_blank\">Questions? Feedback?<\/a> powered by <a href=\"http:\/\/www.olark.com?welcome\" title=\"Olark live chat software\">Olark live chat software<\/a><\/noscript>\n{{\/firstOnPage}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
PluginWrapper.registerPlugin('olark', {
    name: 'Olark',
    icon: 'ico-pl-olark',
    element: {
        minSize: {
            width: 190,
            height: 70
        },
        defaultSize: {
            width: 190,
            height: 70
        },
        resizable: false,
		supportsFullWidth: false
    },
    properties: [
        {id: 'groupId', type: 'OlarkGroupId', helpText: __('You can find your Site ID in Olark Admin Panel, Settings => Installation => "Get embed code". Enter the ID you will find at the bottom of the code inside olark.identify parentheses, i.e. "1111-222-33-4444"'),
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Site ID')));
                return opts;
            },
            get: function(data) { return data.content.groupId; },
            validate: function(value) {
                if (/^([\d]*-?)*\d$/.test(value) || value == '') return '';
                else return __('This ID is incorrect');
            },
            set: function(value, data) {
                data.content.groupId = (/^([\d]*-?)*\d$/.test(value) ? value : '');
            }
        },
    ],
    propertyDialog: {
        noScroll: true,
        tabs: [{
            name: 'General',
            children: [{
                type: 'VerticalLayout',
                children: [{
                    type: 'Label',
                    text: __('Site ID'),
                    uiComponentOptions: function(data, opts) {
                        opts.validateText = data.content.groupId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Site ID')));
                        return opts;
                    },
                }, {
                    type: 'TextField',
                    id: 'groupId'
                }]
            }]
        }]
    },
    resizeTimeout: null,

    resizeAction: function(data, elem) {
        if (!this.resizeTimeout) {
            var self = this;
            this.resizeTimeout = setTimeout(function() {
                self.resizeTimeout = null;
                self.updateElement();
            }, 1000);
        }
    },
    openAction: function(fields, data, elem) {
        fields.groupId.setText(data.content.groupId);
    },
    applyAction: function(fields, data, elem) {
        data.content.groupId = (/^([\d]*-?)*\d$/.test(fields.groupId.getText()) ? fields.groupId.getText() : '');
    },
    loadAction: function(data) {
        if (!data.content.groupId) data.content.groupId = '';
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('groupId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"7_connect","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/7_connect","pluginUri":"plugins\/7_connect","customConfiguration":null};
PluginWrapper._config.id = '7_connect';
PluginWrapper._config.baseUri = "plugins\/7_connect";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/7_connect\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n<img height=\"38\" src=\"plugins\/7_connect\/site\/gallery_gen\/7_connect\/7_connect.png\" \/>\n{{\/isPublished}}\n\n{{#content.store}}\n<form data-gateway-id=\"7Connect\" class=\"{{id}}\" method=\"get\" action=\"https:\/\/pay.7-eleven.com.ph\/transact\">\n\t<input type=\"hidden\" name=\"merchantID\" value=\"{{content.merchantID}}\">\n\t<input type=\"hidden\" name=\"merchantRef\" value=\"{{content.merchantRef}}\">\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\">\n\t<input type=\"hidden\" name=\"transactionDescription\" value=\"{{content.transactionDescription}}\">\n\t<input type=\"hidden\" name=\"token\" value=\"{{content.token}}\">\n\t<input type=\"hidden\" name=\"successURL\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"failURL\" value=\"{cancelUrl}\" \/>\n\t<button style=\"background:url('gallery_gen\/7_connect\/7_connect.png') no-repeat; background-size:contain; border: none; width:38px; height:38px\" type=\"submit\" value=\"submit\"><\/button>\n<\/form>\n{{\/content.store}}\n\n{{^content.store}}\n{{{requireService}}}\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
ElementRegister.registerPaymentGateway({
	name: __('7-Connect'),
	id: '7_connect',
	pageUrl: 'https://7-connect.philseven.com/',
	keyField: __('Merchant ID'),
	keyFieldId: 'merchantID',
	keyField2: __('Transaction Key'),
	keyField2Id: 'transactionKey',
	titleFieldId: null,
	nameFieldId: 'transactionDescription',
	priceFieldId: 'amount',
	currencyFieldId: null
});
PluginWrapper.registerPlugin('7_connect', {
	name: __('7-Connect'),
	element: {
		minSize: {width: 38, height: 38},
		defaultSize: {width: 38, height: 38},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
			tabs: [
				{children: [
					{type: 'VerticalLayout', spacing: 15, children: [
						{type: 'VerticalLayout', children: [
							{
								type: 'Label', text: __('Merchant ID'),
								helpText: __("Merchant's ID as provided by 7-CONNECT")
							},
							{type: 'TextField', id: 'merchantID'}
						]},
						{type: 'VerticalLayout', children: [
							{
								type: 'Label', text: __('Transaction Key'),
								helpText: __("TransactionKey as provided by 7-CONNECT")
							},
							{type: 'TextField', id: 'transactionKey', password: true}
						]},
						{type: 'VerticalLayout', children: [
							{
								type: 'Label', text: __('Merchant Ref'),
								helpText: __("Merchant's Reference Number")
							},
							{type: 'TextField', id: 'merchantRef'}
						]},
						{type: 'VerticalLayout', children: [
							{
								type: 'Label', text: __('Transaction Description'),
								helpText: __("Will be shown in the customer LCD screen and payment instruction page (max of 3000 characters)")
							},
							{type: 'TextField', id: 'transactionDescription'}
						]},
						{type: 'VerticalLayout', children: [
							{
								type: 'Label', text: __('Amount'),
								helpText: __("Amount to be transferred") + ', PHP'
							},
							{type: 'TextField', id: 'amount'}
						]},
					]}
				]}
			]
	},
	openAction: function(fields, data, elem) {
		fields.merchantID.setText(data.content.merchantID);
		fields.merchantRef.setText(data.content.merchantRef);
		fields.amount.setText(data.content.amount);
		fields.transactionKey.setText(data.content.transactionKey);
		fields.transactionDescription.setText(data.content.transactionDescription);
	},
	applyAction: function(fields, data, elem) {
		data.content.transactionKey = fields.transactionKey.getText();
		data.content.merchantID = fields.merchantID.getText();
		data.content.merchantRef = fields.merchantRef.getText();
		data.content.amount = parseFloat(fields.amount.getText()).toFixed(2);
		data.content.transactionDescription = fields.transactionDescription.getText();
	},
	loadAction: function (data) {
		if (!data.content.merchantID) data.content.merchantID = ''; // 7-Eleven
		if (!data.content.merchantRef) data.content.merchantRef = ''; // 51644
		if (!data.content.amount) data.content.amount = '1'; // 49.99
		// if (!data.content.token) data.content.token = '996700bdd155a5d0e6b1398655e51c0c9cc3d90c';
		if (!data.content.transactionKey) data.content.transactionKey = ''; // 628e936f45884030ac1f34bcde9c28efa6ae9c839623b45b8942bd4490e1f05d
		if (!data.content.transactionDescription) data.content.transactionDescription = ''; // Product description
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"dragonpay","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/dragonpay","pluginUri":"plugins\/dragonpay","customConfiguration":null};
PluginWrapper._config.id = 'dragonpay';
PluginWrapper._config.baseUri = "plugins\/dragonpay";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/dragonpay\/main.png";
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n{{{requireService}}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/dragonpay/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://www.dragonpay.ph" target="_blank">https://www.dragonpay.ph</a></p>'
				+ '<p><strong>Postback URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Dragonpay' + '</pre></p>'
				+ '<p><strong>Return URL:</strong><br />'
				+ '<pre>' + base_url + 'store-return/Dragonpay' + '</pre></p>';
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#fafafa',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'dragonpay_color_3.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 109,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'dragonpay_color_1.svg', name: 'coloured'},
			{id: 'dragonpay_color_2.svg', name: 'coloured 2'},
			{id: 'dragonpay_color_3.svg', name: 'coloured 3'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Dragonpay',
	id: 'dragonpay',
	keyFieldId: 'merchant_id',
	keyField2Id: 'secret_key',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['merchant_id', 'secret_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'dragonpay', true),
	settingsTabDef: Globals.getSettingsContent(),
	logos: Globals.getLogosList()
});
PluginWrapper.registerPlugin('dragonpay', {
	name: 'Dragonpay',
	element: {
		minSize: {width: 60, height: 20},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchant_id', type: 'DragonpayMerchantId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchant_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchant_id; },
			set: function(value, data) {
				data.content.merchant_id = value;
			}
		},
		{id: 'secret_key', type: 'DragonpaySecretKey',
			get: function(data) { return data.content.secret_key; },
			set: function(value, data) {
				data.content.secret_key = value;
			}
		},
		{id: 'description', type: 'DragonpayDescription',
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'DragonpayAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'DragonpayCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'DragonpayDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'dragonpay'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID')},
						{type: 'TextField', id: 'merchant_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'secret_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount')},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#PHP', name: 'PHP', value: 'PHP'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#CAD', name: 'CAD', value: 'CAD'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'dragonpay')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.merchant_id.setText(data.content.merchant_id);
		fields.secret_key.setText(data.content.secret_key);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.merchant_id = fields.merchant_id.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.currency) data.content.currency = 'PHP';
		if (!data.content.merchant_id) data.content.merchant_id = '';
		if (!data.content.secret_key) data.content.secret_key = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.description) data.content.description = '';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['dragonpay.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'dragonpay_color_1.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchant_id');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"ecwid","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/ecwid","pluginUri":"plugins\/ecwid","customConfiguration":null};
PluginWrapper._config.id = 'ecwid';
PluginWrapper._config.baseUri = "plugins\/ecwid";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/ecwid\/main2.png";
PluginWrapper._config.template = "{{^isPublished}}\n<div id=\"{{id}}_widget_cont\" class=\"wb-prevent-layout-click\" style=\"width: 100%; height: 100%;\">\n\t<iframe id=\"{{id}}_widget_frame\" width=\"100%\" height=\"100%\" style=\"border: none\"><\/iframe>\n\t<div id=\"{{id}}_widget2\"><\/div>\n\n<\/div>\n{{\/isPublished}}\n\n{{#isPublished}}\n<div id=\"{{id}}_widget_cont\" class=\"wb-prevent-layout-click\" style=\"width: 100%; height: 100%; overflow: auto;\">\n\t<div id=\"{{id}}_widget\"><\/div>\n\t<script type=\"text\/javascript\" src=\"https:\/\/app.ecwid.com\/script.js?{{#content.storeId}}{{content.storeId}}{{\/content.storeId}}{{^content.storeId}}{{content.demoStoreId}}{{\/content.storeId}}&data_platform=code\" charset=\"utf-8\"><\/script>\n\t<script type=\"text\/javascript\"> {{{content.initCall.out}}} <\/script>\n<\/div>\n{{\/isPublished}}\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
require([
	'element/PropertyType',
	'DropdownBox',
	'SizeSelector',
	'ui/EcwidWidgetControl',
], function(
	PropertyTypeModule,
	DropdownBox,
	SizeSelector,
	EcwidWidgetControl,
) {

var ecwidConfig = wb_builder.ecwidConfig && (typeof wb_builder.ecwidConfig === 'object') && wb_builder.ecwidConfig ? wb_builder.ecwidConfig : {};
var wlData = (wb_builder.whiteLabel && (typeof wb_builder.whiteLabel === 'object') && wb_builder.whiteLabel) ? wb_builder.whiteLabel : {};
var isWl = !!wlData.ecwid;
var wlLogo = (isWl && wlData.logo) ? wlData.logo : null;
var pluginName = (isWl && ecwidConfig.name) ? ecwidConfig.name : 'Ecwid';
var groupName = isWl ? 'store' : 'ecwid';

if (PropertyTypeModule) {
	var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
	var PropertyType = PropertyTypeModule.PropertyType;

	var EcwidControl = new PropertyType(groupName + "/EcwidControl", PropertyTypeAccess.User, true, __(""), EcwidWidgetControl.EcwidWidgetControl, null);
	var EcwidType = new PropertyType(groupName + "/EcwidType", PropertyTypeAccess.User, true, __('Widget type'), DropdownBox.DropdownBox, null, {
		options: [
			{id: 'product-browser', name: __('Product Browser')},
			{id: 'horizontal-categories', name: __('Horizontal categories')},
			{id: 'vertical-categories', name: __('Vertical categories')},
			{id: 'mini-cart', name: __('Mini cart')},
			{id: 'search-box', name: __('Search box')}
		],
	});
	var EcwidCategoryView = new PropertyType("options/EcwidCategoryView", PropertyTypeAccess.User, true, __('Default category view'), DropdownBox.DropdownBox, null, {
		options: [
			{id: 'grid', name: __('Grid view')},
			{id: 'list', name: __('List view')},
			{id: 'table', name: __('Table view')}
		],
	});
	var EcwidSearchView = new PropertyType("options/EcwidSearchView", PropertyTypeAccess.User, true, __('Default search view'), DropdownBox.DropdownBox, null, {
		options: [
			{id: 'grid', name: __('Grid view')},
			{id: 'list', name: __('List view')},
			{id: 'table', name: __('Table view')}
		],
	});
	var EcwidGridViewRows = new PropertyType("options/grid View Settings/EcwidGridViewRows", PropertyTypeAccess.User, true, __("Rows"), SizeSelector.SizeSelector, null, {min: 0, max: 999}).inline(6);
	var EcwidGridViewCols = new PropertyType("options/grid View Settings/EcwidGridViewCols", PropertyTypeAccess.User, true, __("Columns"), SizeSelector.SizeSelector, null, {min: 0, max: 999}).inline(6);
	var EcwidListViewRows = new PropertyType("options/grid List Settings/EcwidListViewRows", PropertyTypeAccess.User, true, __("Columns"), SizeSelector.SizeSelector, null, {min: 0, max: 999});
	var EcwidTableViewRows = new PropertyType("options/grid Table Settings/EcwidTableViewRows", PropertyTypeAccess.User, true, __("Columns"), SizeSelector.SizeSelector, null, {min: 0, max: 999});

	PropertyType.setSortOrder(groupName, 1);
}

/* global Ecwid, PluginWrapper */

PluginWrapper.registerPlugin('ecwid', {
	name: pluginName,
	element: {
		minSize: {width: 100, height: 24},
		defaultSize: {width: 750, height: 285},
		renderOnce: true,
		resizable: true
	},
	batchUpdates: true,
	properties: [
		{id: 'control', type: EcwidControl,
			get: function(data) {
				var thisSelf = this;
				return {
					loginUrl: this.pluginScoped.loginUrl,
					storeId: data.content.storeId,
					openCP: function(storeId, loginUrl, onClose) { thisSelf.openCP(storeId, loginUrl, onClose); },
				};
			},
			set: function(value, data, elem) {
				data.content.storeId = value.storeId;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'type', type: EcwidType,
			get: function(data) { return data.content.type; },
			set: function(value, data, elem) {
				data.content.type = value;


				if(data.content.previousType !== data.content.type) {
					var w = null, h = null;
					if (data.content.type === 'product-browser') {
						w = 1400;
						h = 1400;
					} else if (data.content.type === 'horizontal-categories') {
						w = 750;
						h = 120;
					} else if (data.content.type === 'vertical-categories') {
						w = 120;
						h = 600;
					} else if (data.content.type === 'mini-cart') {
						w = 200;
						h = 200;
					} else if (data.content.type === 'search-box') {
						w = 300;
						h = 50;
					}
					this.setSize(w, h);
				}
				data.content.previousType = data.content.type;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'categoryView', type: EcwidCategoryView,
			get: function(data) { return data.content.categoryView; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.categoryView = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'searchView', type: EcwidSearchView,
			get: function(data) { return data.content.searchView; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.searchView = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'gridViewRows', type: EcwidGridViewRows,
			get: function(data) { return data.content.gridViewRows; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.gridViewRows = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'gridViewCols', type: EcwidGridViewCols,
			get: function(data) { return data.content.gridViewCols; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.gridViewCols = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'listViewRows', type: EcwidListViewRows,
			get: function(data) { return data.content.listViewRows; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.listViewRows = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
		{id: 'tableViewRows', type: EcwidTableViewRows,
			get: function(data) { return data.content.tableViewRows; },
			dependencies: ['type'],
			visible: function(data) {
				return (data.content.type === 'product-browser');
			},
			set: function(value, data, elem) {
				data.content.tableViewRows = value;
				data.content.initCall = this.pluginScoped.initCallCreate(data);
				var self = this;
				this.pluginScoped.addListener(
					this,
					function() {
						self.builderUpdateElement(data, elem);
					},
					(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
					data.id
				);
			}
		},
	],
	propertyDialog: {
		noScroll: true,
		tabs: [
			{name: __('Store Info'), children: [
				{type: 'Image', src: wb_builder.pluginRepoPath + '/ecwid/logo.png', id: 'storeLogo', css: {width: 73, display: 'block', margin: '0 auto'}},
				{type: 'VerticalLayout', id: 'storeIdBlock', css: {textAlign: 'left', marginTop: 15}, children: [
					{type: 'Label', text: __('Store ID'), helpText: __('Login to your Account and at the bottom right of the page you will find your "Store ID".')},
					{type: 'TextField', id: 'storeId'}
				]},
				{type: 'Button', text: __('Manage Store'), id: 'loginBtn', css: {margin: '0 5px'}},
				{type: 'Button', text: __('Create New Store'), id: 'registerBtn', css: {margin: '0 5px'}},
				{type: 'CustomContainer', id: 'liteBlock', init: function(def, fields) {
					this._elem.css({margin: '20px auto 0 auto', width: '75%'})
							.append(fields.loginBtn._elem)
							.append(fields.registerBtn._elem)
							.append(fields.storeIdBlock._elem);
				}},
				
				{type: 'Button', text: __('Manage Store'), id: 'cpOpen'},
				{type: 'Button', text: __('Connect existing account'), id: 'regConnect', buttonStyle: 'link'},
				{type: 'CustomContainer', id: 'storeInfo', init: function() {
					this._label = $('<label>');
					this._disconnect = $('<a href="javascript:void(0)">').text(__('logout'));
					this._storeId = null;
					this.setStoreId = function(storeId) {
						this._storeId = storeId;
						this._label.text((this._storeId ? this._storeId : ''));
						return this;
					};
					this.getStoreId = function() {
						return this._storeId;
					};
					this._elem.append(__('Store') + ': ');
					this._elem.append(this._label);
					this._elem.append('&nbsp;('); this._elem.append(this._disconnect); this._elem.append(')');
				}},
				{type: 'CustomContainer', id: 'buttons', init: function(def, fields) {
					this._elem.css({marginTop: 20})
							.append(fields.storeInfo._elem)
							.append(fields.cpOpen._elem)
							.append($('<div>').css({marginTop: 10}).html('<strong>' + __('OR') + '</strong>'))
							.append(fields.regConnect._elem);
				}},
				{type: 'VerticalLayout', id: 'connectForm', css: {textAlign: 'left', width: '75%', margin: '20px auto 0 auto'}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Store ID'), helpText: __('Login to your Account and at the bottom right of the page you will find your "Store ID".')},
						{type: 'TextField', id: 'conStoreId'}
					]},
					{type: 'HorizontalLayout', css: {marginTop: 10}, children: [
						{type: 'Button', text: '< ' + __('Back'), id: 'regRegister', buttonStyle: 'link'},
						{type: 'VerticalLayout', css: {textAlign: 'right'}, children: [
							{type: 'Button', text: __('Connect Ecwid account'), id: 'conSubmit'}
						]}
					]}
				]},
				{type: 'CustomContainer', init: function(def, fields) {
					var liteMode = ecwidConfig.loginUrl && ecwidConfig.registerUrl;
					var container = $('<div>').css({height: 260, textAlign: 'center'})
						.append($('<div>').css({width: '100%', paddingTop: 35}));
					container.append(fields.storeLogo._elem);
					if (liteMode) {
						fields.buttons._elem.hide();
						fields.connectForm._elem.hide();
						container
								.append(fields.liteBlock._elem);
					} else {
						fields.liteBlock._elem.hide();
						container
								.append(fields.buttons._elem)
								.append(fields.connectForm._elem);
					}
					this._elem.append(container);
				}}
			]},
			{name: __('General'), children: [
				{type: 'VerticalLayout', children: [
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Widget type')},
							{type: 'DropdownBox', id: 'type', options: [
								{id: 'product-browser', name: __('Product Browser')},
								{id: 'horizontal-categories', name: __('Horizontal categories')},
								{id: 'vertical-categories', name: __('Vertical categories')},
								{id: 'mini-cart', name: __('Mini cart')},
								{id: 'search-box', name: __('Search box')}
							]}
						]}
					]}
				]},
				{type: 'VerticalLayout', id: 'settings', css: {marginTop: 15}, children: [
					{type: 'HorizontalLayout', children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Grid View settings')},
							{type: 'HorizontalLayout', children: [
								{type: 'Label', text: __('Rows'), css: {paddingTop: '5px'}},
								{type: 'SizeSelector', id: 'gridViewRows'}
							]},
							{type: 'HorizontalLayout', css: {marginTop: 4}, children: [
								{type: 'Label', text: __('Columns'), css: {paddingTop: '5px'}},
								{type: 'SizeSelector', id: 'gridViewCols'}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('List View settings')},
							{type: 'HorizontalLayout', children: [
								{type: 'Label', text: __('Rows'), css: {paddingTop: '5px'}},
								{type: 'SizeSelector', id: 'listViewRows'}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Table View settings')},
							{type: 'HorizontalLayout', children: [
								{type: 'Label', text: __('Rows'), css: {paddingTop: '5px'}},
								{type: 'SizeSelector', id: 'tableViewRows'}
							]}
						]}
					]},
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Default category view')},
							{type: 'DropdownBox', id: 'categoryView', options: [
								{id: 'grid', name: __('Grid view')},
								{id: 'list', name: __('List view')},
								{id: 'table', name: __('Table view')}
							]}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Default search view')},
							{type: 'DropdownBox', id: 'searchView', options: [
								{id: 'grid', name: __('Grid view')},
								{id: 'list', name: __('List view')},
								{id: 'table', name: __('Table view')}
							]}
						]}
					]}
				]}
			]}
		]
	},
	
	pluginScoped: {
		originalJqueryVersion: $.fn.jquery,
		demoStoreId: ecwidConfig.demoStoreId ? ecwidConfig.demoStoreId : '11549878',
		demoStoreIdRU: ecwidConfig.demoStoreIdRU ? ecwidConfig.demoStoreIdRU : '16997727',
		loginUrl: ecwidConfig.loginUrl ? ecwidConfig.loginUrl : null,
		registerUrl: ecwidConfig.registerUrl ? ecwidConfig.registerUrl : null,
		isLiteMode: function() { return this.loginUrl && this.registerUrl; },
		cpLastStoreId: null,
		scriptLoaded: false,
		scriptAPILoaded: false,
		scriptReady: false,
		listeners: [],
		widgetLoadingTimeout: null,
		widgetLoadingText: (__('loading...').replace('...', '') + ' ' + (isWl ? __('Store') : 'Ecwid') + '...'),
		fixJquery: function() {
			var self = this;
			var hackJquery = function() {
				if (self.originalJqueryVersion != $.fn.jquery) {
					$.noConflict(true);
				}
			};
			hackJquery();
			setTimeout(hackJquery, 500);
			setTimeout(hackJquery, 1000);
		},
		getDemoStoreId: function() {
			return (wb_builder.locale === 'ru_RU' ? this.demoStoreIdRU : this.demoStoreId);
		},
		addListener: function(inst, func, storeId) {
			func.call(inst);
		},
		initCallCreate: function(data) {
			var initCall;
			if (data.content.type === 'horizontal-categories') {
				initCall = {func: 'xCategories', args: ['id=' + data.id + '_widget']};
			} else if (data.content.type === 'vertical-categories') {
				initCall = {func: 'xVCategories', args: ['id=' + data.id + '_widget']};
			} else if (data.content.type === 'mini-cart') {
				initCall = {func: 'xMinicart', args: ['layout=attachToCategories', 'id=' + data.id + '_widget']};
			} else if (data.content.type === 'search-box') {
				initCall = {func: 'xSearchPanel', args: ['id=' + data.id + '_widget']};
			} else { // product-browser
				initCall = {func: 'xProductBrowser', args: [
					'categoriesPerRow=' + data.content.gridViewRows,
					'views=grid(' + data.content.gridViewCols + ',' + data.content.gridViewRows + ') list(' + data.content.listViewRows + ') table(' + data.content.tableViewRows + ')',
					'categoryView=' + data.content.categoryView,
					'searchView=' + data.content.searchView,
					'id=' + data.id + '_widget'
				]};
			}
			initCall.out = this.initCallToString(initCall);
			return initCall;
		},
		initCallToString: function(initCall) {
			if (!initCall) return '';
			var i, args = '';
			for (i = 0; i < initCall.args.length; i++) {
				if (i > 0) args += ", ";
				args += "'" + initCall.args[i] + "'";
			}
			return "if (typeof window." + initCall.func + " === 'function') window." + initCall.func + "(" + args + ");";
		},
		cpDialog: null,
		cpDialogTitle: __('Ecwid control panel')
	},
	openAction: function(fields, data, elem) {
		var itm, thisSelf = this;
		itm = fields.type.getItemById(data.content.type);
		fields.type.selectItem(itm);
		fields.gridViewRows.setValue(data.content.gridViewRows);
		fields.gridViewCols.setValue(data.content.gridViewCols);
		fields.listViewRows.setValue(data.content.listViewRows);
		fields.tableViewRows.setValue(data.content.tableViewRows);
		itm = fields.categoryView.getItemById(data.content.categoryView);
		fields.categoryView.selectItem(itm);
		itm = fields.searchView.getItemById(data.content.searchView);
		fields.searchView.selectItem(itm);
		
		if (!fields.eventsIsSet) {
			fields.eventsIsSet = true;
			fields.loginBtn.on('click', function() {
				var wnd = window.open(thisSelf.pluginScoped.loginUrl, 'ecwid_window');
				wnd.focus();
			});
			fields.registerBtn.on('click', function() {
				var wnd = window.open(thisSelf.pluginScoped.registerUrl, 'ecwid_window');
				wnd.focus();
			});
			fields.type.on('change', function() {
				var itm = fields.type.getSelectedItem();
				if (itm.getOriginal().id === 'product-browser') {
					fields.settings.setVisible(true);
				} else {
					fields.settings.setVisible(false);
				}
			});
			fields.cpOpen.on('click', function() {
				if (thisSelf.pluginScoped.loginUrl) {
					thisSelf.openCP(null, thisSelf.pluginScoped.loginUrl);
				} else {
					var storeId = fields.storeInfo.getStoreId();
					if (!storeId) {
						fields.cpOpen.setLoading(true);
						$.get(wb_builder.baseUrl + 'ecwid/create').done(function(resp) {
							if (resp.storeId) {
								fields.storeInfo.setStoreId(resp.storeId).setVisible(true);
								thisSelf.openCP(resp.storeId);
							} else {
								alert((resp.error ? resp.error : 'Server error (3)'));
							}
							fields.cpOpen.setLoading(false);
						});
					} else {
						thisSelf.openCP(storeId);
					}
				}
			});
			fields.regConnect.on('click', function() {
				fields.buttons.setVisible(false);
				fields.connectForm.setVisible(true);
			});
			fields.regRegister.on('click', function() {
				fields.connectForm.setVisible(false);
				fields.buttons.setVisible(true);
			});
			fields.conSubmit.on('click', function() {
				var storeId = fields.conStoreId.getValue();
				fields.conSubmit.setLoading(true);
				$.post(wb_builder.baseUrl + 'ecwid/connect', {storeId: storeId}, function(resp) {
					fields.conSubmit.setLoading(false);
					if (resp.ok) {
						fields.storeInfo.setStoreId(storeId);
						fields.conStoreId.setValue('');
						fields.connectForm.setVisible(false);
						fields.buttons.setVisible(true);
						fields.storeInfo.setVisible(true);
					} else {
						alert((resp.error ? resp.error : 'Server error (2)'));
					}
				});
			});
			fields.storeInfo._disconnect.on('click', function() {
				$.get(wb_builder.baseUrl + 'ecwid/disconnect', function(resp) {
					if (resp.ok) {
						fields.storeInfo.setStoreId(null).setVisible(false);
					} else {
						alert((resp.error ? resp.error : 'Error: Disconnect unsuccessful. Please try again.'));
					}
				});
			});
			this._fixWhiteLabel(fields);
			fields.connectForm.setVisible(false);
			fields.storeInfo.setVisible(false);
		}
		
		fields.storeId.setValue(data.content.storeId);
		if (data.content.storeId) {
			fields.storeInfo.setStoreId(data.content.storeId).setVisible(true);
		} else {
			fields.storeInfo.setStoreId('').setVisible(false);
		}
		fields.type.trigger('change');
	},
	_fixWhiteLabel: function(fields) {
		if (isWl) {
			if (fields !== undefined) {
				if (wlLogo) {
					fields.storeLogo.setValue(wlLogo);
				} else {
					fields.storeLogo.setVisible(false);
				}
			}
			this.pluginScoped.cpDialogTitle = __("Store's control panel");
		}
	},
	openCP: function(storeId, loginUrl, onClose) {
		if (!this.pluginScoped.cpDialog) {
			this.pluginScoped.cpDialog = new WB_Dialog(this.pluginScoped.cpDialogTitle);
			this.pluginScoped.cpDialog.setFooterVisible(false);
			this.pluginScoped.cpDialog.setNoScroll(true);
			this.pluginScoped.cpDialog.setContentSource = function(src) {
				if (!this.contentSourceIframe) {
					this.contentSourceIframe = $('<iframe>').css({
						display: 'block',
						border: 'none',
						background: 'white',
						padding: '0',
						margin: '0',
						width: '100%',
						height: '100%'
					});
					this.setContent(this.contentSourceIframe);
				}
				this.contentSourceIframe.attr({src: src});
			};
		}
		var w = $(window).width(), h = $(window).height();
		this.pluginScoped.cpDialog.setSize(w - 60, h - 60);
		this.pluginScoped.cpDialog.dialog.css({top: '30px'});
		this.pluginScoped.cpDialog.setMaxBodyHeight(h - 139);
		this.pluginScoped.cpDialog.setMinBodyHeight(h - 139);
		
		if (storeId) {
			storeId = storeId ? parseInt(storeId) : null;
			if (!storeId) return;
			if (this.pluginScoped.cpLastStoreId !== storeId) {
				this.pluginScoped.cpDialog.setContentSource(wb_builder.baseUrl + 'ecwid/cp/?storeId=' + storeId);
			}
			this.pluginScoped.cpLastStoreId = storeId;
		} else if (loginUrl) {
			this.pluginScoped.cpLastStoreId = null;
			this.pluginScoped.cpDialog.setContentSource(loginUrl);
		}
		this.pluginScoped.cpDialog.contentSourceIframe.css({height: (h - 139 - 30)});
		this.pluginScoped.cpDialog.onClose = (typeof onClose === 'function') ? onClose : null;
		this.pluginScoped.cpDialog.setVisible(true);
	},
	applyAction: function(fields, data, elem) {
		var itm;
		if (this.pluginScoped.isLiteMode()) {
			data.content.storeId = fields.storeId.getValue();
			if (!/^\d+$/.test(data.content.storeId)) data.content.storeId = null;
		} else {
			var storeId = fields.storeInfo.getStoreId();
			if (storeId) data.content.storeId = storeId;
		}
		itm = fields.type.getSelectedItem();
		data.content.type = itm.getOriginal().id;
		data.content.gridViewRows = fields.gridViewRows.getValue();
		data.content.gridViewCols = fields.gridViewCols.getValue();
		data.content.listViewRows = fields.listViewRows.getValue();
		data.content.tableViewRows = fields.tableViewRows.getValue();
		itm = fields.categoryView.getSelectedItem();
		data.content.categoryView = itm.getOriginal().id;
		itm = fields.searchView.getSelectedItem();
		data.content.searchView = itm.getOriginal().id;
		data.content.initCall = this.pluginScoped.initCallCreate(data);
		if(data.content.previousType !== data.content.type) {
			var w = null, h = null;
			if (data.content.type === 'product-browser') {
				w = 1400;
				h = 1400;
			} else if (data.content.type === 'horizontal-categories') {
				w = 750;
				h = 120;
			} else if (data.content.type === 'vertical-categories') {
				w = 120;
				h = 600;
			} else if (data.content.type === 'mini-cart') {
				w = 200;
				h = 200;
			} else if (data.content.type === 'search-box') {
				w = 300;
				h = 50;
			}
			this.setSize(w, h);
		}
		data.content.previousType = data.content.type;
		
		var self = this;
		this.pluginScoped.addListener(
			this,
			function() { self.builderUpdateElement(data, elem); },
			(data.content.storeId ? data.content.storeId : this.pluginScoped.getDemoStoreId()),
			data.id
		);
	},
	loadAction: function(data) {
		data.content.demoStoreId = this.pluginScoped.getDemoStoreId();
		if (!data.content.status) data.content.status = 'loggedOut';
		if (!data.content.storeId) data.content.storeId = '';
		if (!data.content.type) data.content.type = this.canAddProductBrowserWidget(data) ? 'product-browser' : 'mini-cart';
		if (!data.content.previousType) data.content.previousType = data.content.type ? data.content.type : '';
		if (!data.content.gridViewRows) data.content.gridViewRows = 3;
		if (!data.content.gridViewCols) data.content.gridViewCols = 3;
		if (!data.content.listViewRows) data.content.listViewRows = 10;
		if (!data.content.tableViewRows) data.content.tableViewRows = 20;
		if (!data.content.categoryView) data.content.categoryView = 'grid';
		if (!data.content.searchView) data.content.searchView = 'list';
		if (!data.content.initCall || !(typeof data.content.initCall === 'object')) {
			data.content.initCall = {out: ''};
		}
	},
	canAddProductBrowserWidget: function(data) {
		var elems = wb_builder.bodyInstance.getContentElements();
		for (var i in elems) {
			if (elems[i].className === 'ecwid' && elems[i].id !== data.id && (typeof elems[i]._data === 'object')
					&& (typeof elems[i]._data.content === 'object') && elems[i]._data.content.type === 'product-browser') {
				return false;
			}
		}
		return true;
	},
	loadedAction: function(data, elem) {
		var self = this, isNew = (!data.content.storeId);
		data.content.initCall = this.pluginScoped.initCallCreate(data);
		this.loadStoreId(data, function(storeId) {
			var initStoreId = storeId ? storeId : data.content.demoStoreId;
				self.builderUpdateElement(data, elem, initStoreId);
		});
		elem.find('#' + data.id + '_widget2').text(this.pluginScoped.widgetLoadingText);
		this._fixWhiteLabel();
	},
	showInfoBox: function(data, elem, text) {
		const iframe = document.querySelector('#' + data.id + '_widget_frame');
		iframe.style.display = 'none';
		iframe.contentDocument.open();
		iframe.contentDocument.write('');
		iframe.contentDocument.close();

		elem.find('.alert-ecwid-info').remove();
		var info = $('<div class="alert alert-info">').text((text ? text : __('You can insert only one store on each page.'))).css({
			padding: '10px 15px',
			position: 'absolute',
			top: 0, left: 0,
			width: '100%', height: '100%'
		});
		elem.find('#' + data.id + '_widget2').empty().append(info);
	},
	
	loadStoreId: function(data, callback) {
		var thisCallback = (typeof callback === 'function') ? callback : function() {};
		if (data.content.storeId) {
			thisCallback.call(this, data.content.storeId);
		} else {
			var self = this;
			$.get(wb_builder.baseUrl + 'ecwid/info').done(function(resp) {
				thisCallback.call(self, resp.storeId);
			});
		}
	},
	builderUpdateElement: function(data, elem, initStoreId) {
		if (data.content.type === 'product-browser') {
			if (this.canAddProductBrowserWidget(data)) {
				this.renderIframe(data, elem, initStoreId);
			} else {
				this.showInfoBox(data, elem);
				this.setSize(200, 100);
			}
		} else {
			this.showInfoBox(data, elem, __('There will be widget of type "%s"').replace('%s', data.content.type));
		}
	},
	renderIframe(data, elem, storeId) {
		elem.find('#' + data.id + '_widget2').empty()

		const oldIFrame = document.querySelector('#' + data.id + '_widget_frame');
		var iframe = oldIFrame.cloneNode();
		iframe.style.display = '';
		oldIFrame.parentNode.append(iframe);
		oldIFrame.remove();

		const scriptSrc = 'https://app.ecwid.com/script.js?' + (storeId || data.content.storeId || data.content.demoStoreId) + '&data_platform=code';
		const content = $('<div>').append($('<div id="' + data.id + '_widget"  style="width: 100%; height: 100%; overflow: auto;">'))
			.append(
				$('<script>')
					.attr('type', 'text/javascript')
					.attr('src', scriptSrc)
					.attr('charset', 'utf-8')
			)
			.append(
				$('<script>')
					.attr('type', 'text/javascript')
					.html(data.content.initCall.out)
			);


		iframe.contentDocument.open();
		iframe.contentDocument.write(content.html());
		iframe.contentDocument.close();
	},
});

});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"iyzico","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/iyzico","pluginUri":"plugins\/iyzico","customConfiguration":null};
PluginWrapper._config.id = 'iyzico';
PluginWrapper._config.baseUri = "plugins\/iyzico";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/iyzico\/main.png";
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\r\n{{#isPublished}}\r\n<div class=\"modal fade\" id=\"iyzicoModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\r\n                <h4 class=\"modal-title\" id=\"myModalLabel\">iyzico<\/h4>\r\n            <\/div>\r\n            <div class=\"modal-body\">\r\n                <form id=\"iyzicoForm_{{id}}\" method=\"post\" action=\"\" data-gateway-id=\"Iyzico\">\r\n                    <input type=\"hidden\" name=\"iyzico_form_id\" value=\"{{id}}\"\/>\r\n                    <input type=\"hidden\" name=\"action\" value=\"pay\"\/>\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-sm-6\">\r\n                            <label>{{\"First Name\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                            <input class=\"form-control input-sm\" type=\"text\" name=\"first_name\" required=\"required\" \/>\r\n                        <\/div>\r\n                        <div class=\"form-group col-sm-6\">\r\n                            <label>{{\"Last Name\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                            <input class=\"form-control input-sm\" type=\"text\" name=\"last_name\" required=\"required\" \/>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div class=\"form-group\">\r\n                        <label>{{\"E-mail\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                        <input class=\"form-control input-sm\" type=\"email\" name=\"email\" required=\"required\" \/>\r\n                    <\/div>\r\n                    <div class=\"form-group\">\r\n                        <label>{{\"Identity number\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                        <input class=\"form-control input-sm\" type=\"text\" name=\"identity_number\" minlength=\"6\" required=\"required\" \/>\r\n                        <p class=\"help-block\">{{\"Identity number of buyer. TCKN for Turkish merchants, passport number for foreign merchants\" | tr}}<\/p>\r\n                    <\/div>\r\n                    <hr>\r\n                    <div class=\"form-group\">\r\n                        <label>{{\"Address\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                        <input class=\"form-control input-sm\" type=\"text\" name=\"address\" required=\"required\" \/>\r\n                    <\/div>\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-sm-6\">\r\n                            <label>{{\"Country\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                            <input class=\"form-control input-sm\" type=\"text\" name=\"country\" required=\"required\" \/>\r\n                        <\/div>\r\n                        <div class=\"form-group col-sm-6\">\r\n                            <label>{{\"City\" | tr}} <span style=\"color: #c00;\">*<\/span><\/label>\r\n                            <input class=\"form-control input-sm\" type=\"text\" name=\"city\" required=\"required\" \/>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <input class=\"hidden\" type=\"submit\"\/>\r\n                    {{#content.store}}\r\n                    <input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\r\n                    <input type=\"hidden\" name=\"name\" value=\"{{content.name}}\" \/>\r\n                    <input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\r\n                    <input type=\"hidden\" name=\"callbackurl\" value=\"{callbackUrl}\" \/>\r\n\t\t\t\t\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\r\n                    {{\/content.store}}\r\n                <\/form>\r\n            <\/div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\r\n                <button type=\"button\" class=\"btn btn-primary\" onclick=\"nextIyzicoStep_{{id}}()\">{{\"Next\" | tr}}<\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<script>\r\n\tfunction showIyzico_{{id}}(){\r\n\t\t$('#iyzicoModal_{{id}}').appendTo(\"body\");\r\n\t\t$('#iyzicoModal_{{id}}').modal('show');\r\n\t}\r\n\tfunction nextIyzicoStep_{{id}}() {\r\n\t\tvar izycoForm = $('#iyzicoForm_{{id}}');\r\n\t\tizycoForm.find(':submit').click();\r\n\t}\r\n\t{{#content.store}}\r\n\t$('#iyzicoModal_{{id}}').on('show.bs.modal', function() {\r\n\t\tvar url = $('base').attr('href') + 'requestGetBillingInfo\/Iyzico';\r\n\t\t$.get(url, function(resp) {\r\n\t\t\tvar elems = $('#iyzicoForm_{{id}}').get(0).elements;\r\n\t\t\tif (resp.firstName) elems['first_name'].value = resp.firstName;\r\n\t\t\tif (resp.lastName) elems['last_name'].value = resp.lastName;\r\n\t\t\tif (resp.email) elems['email'].value = resp.email;\r\n\t\t\tif (resp.address1) elems['address'].value = resp.address1;\r\n\t\t\tif (resp.country) elems['country'].value = resp.country;\r\n\t\t\tif (resp.city) elems['city'].value = resp.city;\r\n\t\t});\r\n\t});\r\n\t{{\/content.store}}\r\n\t$('#{{id}}_payment_gateway_button').on('click', showIyzico_{{id}});\r\n<\/script>\r\n{{\/isPublished}}\r\n{{^content.store}}\r\n{{{requireService}}}\r\n{{\/content.store}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/iyzico/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#337ab7',
			button_border: {
				color: "#2e6da4",
				style: 'solid',
				weight: 1,
				differ: false,
				css: { border: "1px solid #2e6da4" },
				cssRaw: 'border: none; border-bottom: 1px solid #2e6da4;'
			},
			logo: 'iyzico_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#b0ddff'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: 'imdi de',
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'iyzico_color.svg', name: 'color'},
			{id: 'iyzico_dark.svg', name: 'dark'},
			{id: 'iyzico_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'iyzicopayu_color.svg', name: 'payu_color'},
			{id: 'iyzicopayu_dark.svg', name: 'payu_dark'},
			{id: 'iyzicopayu_white.svg', name: 'payu_white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'iyzico',
	id: 'iyzico',
	pageUrl: 'https://www.iyzico.com/',
	keyFieldId: 'api_key',
	keyField2Id: 'secret_key',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('API Key')},
			{type: 'TextField', placeholder: __('API Key'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'price',
	currencyFieldId: 'currency',
	globalVars: ['api_key', 'secret_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'iyzico', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('iyzico', {
	name: 'iyzico',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'api_key', type: 'IyzicoApiKey',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.api_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
				return opts;
			},
			get: function(data) { return data.content.api_key; },
			set: function(value, data) {
				data.content.api_key = value;
			}
		},
		{id: 'secret_key', type: 'IyzicoSecretKey',
			get: function(data) { return data.content.secret_key; },
			set: function(value, data) {
				data.content.secret_key = value;
			}
		},
		{id: 'name', type: 'IyzicoName',
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'price', type: 'IyzicoPrice',
			get: function(data) { return data.content.price; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.price = value;
			}
		},
		{id: 'currency', type: 'IyzicoCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'IyzicoDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'iyzico'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', columnWeights: [6, 6], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('API Key'), helpText: __('This key you can get in account settings page'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.api_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
								return opts;
							}},
							{type: 'TextField', id: 'api_key'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Secret Key'), helpText: __('This key you can get in account settings page')},
							{type: 'TextField', id: 'secret_key'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'name'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount')},
							{type: 'TextField', id: 'price'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: '#TRY', name: 'TRY', value: 'TRY'},
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#GBP', name: 'GBP', value: 'GBP'},
								{id: '#IRR', name: 'IRR', value: 'IRR'}
							]}
						]}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
							this.getElem().attr('title', __('For testing purpose without real payments'));
							this.getElem().tooltip({placement: 'right'});
						}}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'iyzico')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.name.setText(data.content.name);
		fields.price.setText(data.content.price);
		fields.api_key.setText(data.content.api_key);
		fields.secret_key.setText(data.content.secret_key);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.name = fields.name.getText();
		data.content.price = fields.price.getText();
		data.content.api_key = fields.api_key.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.name) data.content.name = '';
		if (!data.content.price) data.content.price = '1';
		if (!data.content.currency) data.content.currency = 'TRY';
		if (!data.content.api_key) data.content.api_key = '';
		if (!data.content.secret_key) data.content.secret_key = '';
		if (data.content.demo === undefined) data.content.demo = true;
		if (['iyzico.svg'].indexOf(data.content.logo) > -1)
			data.content.logo = 'iyzico_color.svg';
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('api_key');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"facebook_video","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/facebook_video","pluginUri":"plugins\/facebook_video","customConfiguration":null};
PluginWrapper._config.id = 'facebook_video';
PluginWrapper._config.baseUri = "plugins\/facebook_video";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/facebook_video\/main.png";
PluginWrapper._config.template = "<iframe id=\"{{id}}_facebook_video\"\n        src=\"https:\/\/www.facebook.com\/plugins\/video.php?href=https%3A%2F%2F{{^content.v2}}facebook.com\/{{\/content.v2}}{{content.finalVideoId}}&show_text=false&t={{content.finalStartTime}}\"\n        width=\"100%\"\n        height=\"100%\"\n        style=\"border:none;overflow:hidden\"\n        scrolling=\"no\"\n        frameborder=\"0\"\n        allowfullscreen=\"true\"\n        allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"><\/iframe>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = true;
// https://facebook.com/170515954946/videos/435802976468824
// https://fb.watch/cQUKiz7RY2
// https://www.facebook.com/watch/?v=337041847461700&ref=sharing

var defaultVideoId = 'fb.watch/cQUKiz7RY2';

PluginWrapper.registerPlugin('facebook_video', {
	name: __('Facebook video'),
	icon: 'ico-tb-facebook-fans',
	supportsAutoHeight: true,
	element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 400, height: 220},
		resizable: true,
		supportsFullWidth: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', children: [
					{type: 'Label', text: __('Facebook ID or URL'),
						helpText: '<span style="white-space: pre-wrap; word-break: break-word;">' + __('Facebook video ID or URL with format %s').replace('%s', 'https://www.facebook.com/{page}/videos/{video_id}') + '</span>',
						uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.videoId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Facebook ID or URL')));
							return opts;
						}
					},
					{type: 'TextField', id: 'videoId', placeholder: defaultVideoId}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Start at')},
						{type: 'TextField', id: 'startTime', placeholder: '00:00'}
					]}
				]}
			]}
		]
	},
	pluginScoped: {
		parseTime: function(time) {
			var h = 0, m = 0, s = 0, parts = time.split(':');
			if (parts.length >= 3) {
				h = parseInt(parts.shift(), 10);
				if (isNaN(h)) h = 0;
			}
			if (parts.length >= 2) {
				m = parseInt(parts.shift(), 10);
				if (isNaN(m)) m = 0;
			}
			s = parseInt(parts.shift(), 10);
			if (isNaN(s)) s = 0;

			return (h * 60 * 60) + (m * 60) + s;
		}
	},
	batchUpdates: true,
	properties: [
		{id: 'videoId', type: 'FacebookVideoId', helpText: '<span style="white-space: pre-wrap; word-break: break-word;">' + __('Facebook video ID or URL with format %s').replace('%s', 'https://www.facebook.com/{page}/videos/{video_id}') + '</span>',
			uiComponentOptions: function(data, opts) {
				opts.placeholder = defaultVideoId;
				opts.validateText = data.content.videoId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Facebook ID or URL')));
				return opts;
			},
			get: function(data) { return data.content.videoId; },
			validate: function (value, data, api) {
				this.getVideoId(value, api);
			},
			set: function(value, data) {
				var url = this.getVideoId(value);
				data.content.videoId = url ? url : value;
				data.content.finalVideoId = data.content.videoId ? data.content.videoId : defaultVideoId;
				data.content.v2 = true;
			}
		},
		{id: 'startTime', type: 'FacebookVideoStartTime',
			get: function(data) { return data.content.startTime; },
			set: function(value, data) {
				data.content.startTime = value;
			}
		}
	],
	getVideoId: function(value, api) {
		var url = '';
		if (value === '') return '';

		if (/^(\d+\/videos\/\d+)$/.test(value)) {
			url = 'facebook.com/' + value;
			return url;
		}

		if (/^(fb.watch\/[a-zA-Z\d\-_]+)$/.test(value) || /^(facebook.com\/\d+\/videos\/\d+)$/.test(value) || /^(facebook.com\/watch\/\?v=\d+)$/.test(value)
			|| /https?:\/\/(?:www\.)?(fb.watch\/[a-zA-Z\d\-_]+)(?:$|\/)/.test(value)
			|| /https?:\/\/(?:www\.)?(facebook.com\/.+\/videos\/\d+)(?:$|\/)/.test(value)
			|| /https?:\/\/(?:www\.)?(facebook.com\/watch\/\?v=\d+)/.test(value)) {
			url = RegExp.$1;
			if (api) {
				this.displayErrorMessage(false);
				api.setError('');
			}
		} else if (api) {
			this.setErrorMessage(__('Invalid URL or ID'));
			api.setError(__('Invalid URL or ID'));
		}
		return url;
	},
	mHeightAuto: false,
	onRender: function(data, elem) {
		var heightAuto = ((this.getSize ? this.getSize().height : data.height) == 'auto');
		if (this.mHeightAuto === heightAuto) return;
		this.mHeightAuto = heightAuto;
		if (heightAuto) {
			data.pluginElementClass = 'wb-iframe-video-auto';
			elem.addClass('wb-iframe-video-auto');
		} else {
			data.pluginElementClass = '';
			elem.removeClass('wb-iframe-video-auto');
		}
	},
	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
		var self = this;
		fields.videoId.setText(data.content.videoId);
		fields.startTime.setValue(data.content.startTime);

		fields.videoId.on('change', function(e) {
			fields.videoId.setText(self.getVideoId(e.target.value));
		});
	},
	applyAction: function(fields, data, elem) {
		data.content.startTime = fields.startTime.getValue();
		data.content.videoId = fields.videoId.getText();
		data.content.finalVideoId = data.content.videoId ? data.content.videoId : defaultVideoId;
		if ( typeof data.content.finalVideoId === 'string') {
			data.content.finalVideoId = (data.content.finalVideoId).replace(/\//g, '%2F');
		}
		data.content.finalStartTime = data.content.startTime ? this.pluginScoped.parseTime(data.content.startTime) : 0;
	},
	loadAction: function (data) {
		if (!data.content.videoId) data.content.videoId = '';
		if (!data.content.startTime) data.content.startTime = '';
		data.content.finalVideoId = data.content.videoId ? data.content.videoId : defaultVideoId;
		if ( typeof data.content.finalVideoId === 'string') {
			data.content.finalVideoId = (data.content.finalVideoId).replace(/\//g, '%2F');
		}
		data.content.finalStartTime = data.content.startTime ? this.pluginScoped.parseTime(data.content.startTime) : 0;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('videoId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"wp","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/wp","pluginUri":"plugins\/wp","customConfiguration":null};
PluginWrapper._config.id = 'wp';
PluginWrapper._config.baseUri = "plugins\/wp";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/wp\/main.png";
PluginWrapper._config.template = "\n\n<form data-gateway-id=\"Wp\" action=\"https:\/\/{{#content.demo}}securesandbox{{\/content.demo}}{{^content.demo}}payment{{\/content.demo}}.webpay.by\" method=\"post\" {{^content.store}} target=\"_blank\"{{\/content.store}}  class=\"webpay\" style=\"width: 100%; height: 100%;\">\n    {{^content.store}}\n        {{{requireService}}}\n    {{\/content.store}}\n\n    {{#content.store}}\n    <input type=\"hidden\" name=\"total\" value=\"{{content.wsb_invoice_item_price}}\" \/>\n    <input type=\"hidden\" name=\"currency_id\" value=\"{{content.wsb_currency_id}}\" \/>\n    <input type=\"hidden\" name=\"order_num\" value=\"{transactionId}\" \/>\n    <input type=\"hidden\" name=\"return_url\" value=\"{returnUrl}\" \/>\n    <input type=\"hidden\" name=\"cancel_return_url\" value=\"{cancelUrl}\" \/>\n    <input type=\"hidden\" name=\"notify_url\" value=\"{callbackUrl}\" \/>\n    <input type=\"hidden\" name=\"store\" value=\"Store\" \/>\n    {{\/content.store}}\n\n    {{{content.paymentGatewayButton}}}\n\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/wp/main.php';
PluginWrapper._config.active = false;
var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#fafafa',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'webpay_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'webpay_color.svg', name: 'coloured'},
			{id: 'webpay_black.svg', name: 'black'},
			{id: 'webpay_white.svg', name: 'white'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Webpay',
	id: 'wp',
	pageUrl: 'https://webpay.by/',
	keyField: __('Store ID'),
	keyFieldId: 'wsb_storeid',
	keyField2: __('Secret key'),
	keyField2Id: 'secret_key',
	keyField3: __('Demo'),
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Store identifier')},
			{type: 'TextField', placeholder: __('Store identifier'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'wsb_invoice_item_name',
	priceFieldId: 'wsb_invoice_item_price',
	currencyFieldId: 'wsb_currency_id',
	globalVars: ['wsb_storeid', 'secret_key', 'demo'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'wp', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('wp', {
	name: 'Webpay',
	element: {
		minSize: {width: 120, height: 70},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'wsb_storeid', type: 'WPwsbStoreid', helpText: __('This identifier is created during registration in WEBPAY and is sent via email'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.wsb_storeid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store identifier')));
				return opts;
			},
			get: function(data) { return data.content.wsb_storeid; },
			set: function(value, data) {
				data.content.wsb_storeid = value;
			}
		},
		{id: 'secret_key', type: 'WPSecretKey', helpText: __('The value of the Secret Key field in your billing account settings'),
			get: function(data) { return data.content.secret_key; },
			set: function(value, data) {
				data.content.secret_key = value;
			}
		},
		{id: 'wsb_invoice_item_name', type: 'WPItemName', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.wsb_invoice_item_name; },
			set: function(value, data) {
				data.content.wsb_invoice_item_name = value;
			}
		},
		{id: 'wsb_invoice_item_price', type: 'WPItemPrice', helpText: __('Amount to be transferred'),
			get: function(data) { return data.content.wsb_invoice_item_price; },
			set: function(value, data) {
				data.content.wsb_invoice_item_price = value;
			}
		},
		{id: 'wsb_currency_id', type: 'WPCurrency',
			get: function(data) { return data.content.wsb_currency_id; },
			set: function(value, data) {
				data.content.wsb_currency_id = value;
			}
		},
		{id: 'demo', type: 'WPDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'wp'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, columnWeights: [6, 6], children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Store identifier'), helpText: __('This identifier is created during registration in WEBPAY and is sent via email'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.wsb_storeid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Store identifier')));
							return opts;
						}},
						{type: 'TextField', id: 'wsb_storeid'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key'), helpText: __('The value of the Secret Key field in your billing account settings')},
						{type: 'TextField', id: 'secret_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'wsb_invoice_item_name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'wsb_invoice_item_price'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'wsb_currency_id', options: [
							{id: '#BYN', name: 'BYN', value: 'BYN'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'},
							{id: '#RUB', name: 'RUB', value: 'RUB'},
							{id: '#GBP', name: 'GBP', value: 'GBP'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'wp')
		]
	},

	openAction: function (fields, data, elem) {
		fields.secret_key.setValue(data.content.secret_key);
		fields.wsb_storeid.setValue(data.content.wsb_storeid);
		fields.wsb_invoice_item_name.setValue(data.content.wsb_invoice_item_name);
		fields.wsb_invoice_item_price.setValue(data.content.wsb_invoice_item_price);
		var itm = fields.wsb_currency_id.getItemById('#' + data.content.wsb_currency_id);
		fields.wsb_currency_id.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},

	applyAction: function (fields, data, elem) {
		data.content.secret_key = fields.secret_key.getValue();
		data.content.wsb_storeid = fields.wsb_storeid.getValue();
		data.content.wsb_invoice_item_name = fields.wsb_invoice_item_name.getValue();
		data.content.wsb_invoice_item_price = parseFloat(fields.wsb_invoice_item_price.getValue());
		var itm = fields.wsb_currency_id.getSelectedItem();
		data.content.wsb_currency_id = itm.getOriginal().value;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},

	loadAction: function (data) {
		data.content.__globalVars = ['wsb_storeid', 'secret_key', 'demo'];
		if (!data.content.secret_key) data.content.secret_key = '';
		if (!data.content.wsb_storeid) data.content.wsb_storeid = '';
		if (!data.content.wsb_store) data.content.wsb_store = '';
		if (!data.content.wsb_currency_id) data.content.wsb_currency_id = 'BYN';
		if (!data.content.wsb_invoice_item_name) data.content.wsb_invoice_item_name = '';
		if (!data.content.wsb_invoice_item_price) data.content.wsb_invoice_item_price = '10';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['webpay_blue.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'webpay_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('wsb_storeid');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"qiwi","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/qiwi","pluginUri":"plugins\/qiwi","customConfiguration":null};
PluginWrapper._config.id = 'qiwi';
PluginWrapper._config.baseUri = "plugins\/qiwi";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/qiwi\/main.png";
PluginWrapper._config.template = "<form id=\"{{id}}_form\" data-gateway-id=\"Qiwi\" method=\"post\" style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"successUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"comment\" value=\"{{content.name}}\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;

var Globals = {
	getDefaultStyles: function(isStore) {
		return {
			button_label: __('Pay with %s').replace('%s', ''),
			button_color: '#fff',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#757575',
			button_border: {
				color: '#757575',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #757575' },
				cssRaw: 'border: 1px solid #757575'
			},
			logo: 'qiwi.svg',
			showlogo: true,
			logo_width: 90,
			button_padding: 1
		};
	},
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://qiwi.com/" target="_blank">https://qiwi.com/</a></p>'
				+ '<p><strong>Callback URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Qiwi' + '</pre></p>';
	}
};

ElementRegister.registerPaymentGateway({
	name: 'QIWI',
	id: 'qiwi',
	pageUrl: 'https://qiwi.com/',
	keyFieldId: 'public_key',
	keyField2Id: 'secret_key',
//	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Public Key')},
			{type: 'TextField', placeholder: __('Public Key'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true}
		]},/* ,
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}} */
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'amount',
	globalVars: ['public_key', 'secret_key'/* , 'demo' */],
	useStylesInStoreCart: true,
	defaultStyles: {
		logo: 'qiwi.svg'
	},
	settingsTabDef: Globals.getSettingsContent()
});

PluginWrapper.registerPlugin('qiwi', {
	name: 'QIWI',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 120, height: 70}
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Public Key')},
							{type: 'TextField', id: 'public_key'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Secret Key')},
							{type: 'TextField', id: 'secret_key', password: true}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'name'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount')},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: 'USD', name: 'USD'},
								{id: 'EUR', name: 'EUR'},
								{id: 'AED', name: 'AED'},
								{id: 'AFN', name: 'AFN'},
								{id: 'ALL', name: 'ALL'},
								{id: 'ARS', name: 'ARS'},
								{id: 'AUD', name: 'AUD'},
								{id: 'AZN', name: 'AZN'},
								{id: 'BBD', name: 'BBD'},
								{id: 'BDT', name: 'BDT'},
								{id: 'BGN', name: 'BGN'},
								{id: 'BMD', name: 'BMD'},
								{id: 'BND', name: 'BND'},
								{id: 'BOB', name: 'BOB'},
								{id: 'BRL', name: 'BRL'},
								{id: 'BSD', name: 'BSD'},
								{id: 'BWP', name: 'BWP'},
								{id: 'BZD', name: 'BZD'},
								{id: 'CAD', name: 'CAD'},
								{id: 'CHF', name: 'CHF'},
								{id: 'CLP', name: 'CLP'},
								{id: 'CNY', name: 'CNY'},
								{id: 'COP', name: 'COP'},
								{id: 'CRC', name: 'CRC'},
								{id: 'CZK', name: 'CZK'},
								{id: 'DKK', name: 'DKK'},
								{id: 'DOP', name: 'DOP'},
								{id: 'DZD', name: 'DZD'},
								{id: 'EGP', name: 'EGP'},
								{id: 'FJD', name: 'FJD'},
								{id: 'GBP', name: 'GBP'},
								{id: 'GTQ', name: 'GTQ'},
								{id: 'HKD', name: 'HKD'},
								{id: 'HNL', name: 'HNL'},
								{id: 'HRK', name: 'HRK'},
								{id: 'HUF', name: 'HUF'},
								{id: 'IDR', name: 'IDR'},
								{id: 'ILS', name: 'ILS'},
								{id: 'INR', name: 'INR'},
								{id: 'JMD', name: 'JMD'},
								{id: 'JPY', name: 'JPY'},
								{id: 'KES', name: 'KES'},
								{id: 'KRW', name: 'KRW'},
								{id: 'KZT', name: 'KZT'},
								{id: 'LAK', name: 'LAK'},
								{id: 'LBP', name: 'LBP'},
								{id: 'LKR', name: 'LKR'},
								{id: 'LRD', name: 'LRD'},
								{id: 'MAD', name: 'MAD'},
								{id: 'MMK', name: 'MMK'},
								{id: 'MOP', name: 'MOP'},
								{id: 'MRO', name: 'MRO'},
								{id: 'MUR', name: 'MUR'},
								{id: 'MVR', name: 'MVR'},
								{id: 'MXN', name: 'MXN'},
								{id: 'MYR', name: 'MYR'},
								{id: 'NIO', name: 'NIO'},
								{id: 'NOK', name: 'NOK'},
								{id: 'NPR', name: 'NPR'},
								{id: 'NZD', name: 'NZD'},
								{id: 'PEN', name: 'PEN'},
								{id: 'PGK', name: 'PGK'},
								{id: 'PHP', name: 'PHP'},
								{id: 'PKR', name: 'PKR'},
								{id: 'PLN', name: 'PLN'},
								{id: 'QAR', name: 'QAR'},
								{id: 'RON', name: 'RON'},
								{id: 'RUB', name: 'RUB'},
								{id: 'SAR', name: 'SAR'},
								{id: 'SBD', name: 'SBD'},
								{id: 'SCR', name: 'SCR'},
								{id: 'SEK', name: 'SEK'},
								{id: 'SGD', name: 'SGD'},
								{id: 'SYP', name: 'SYP'},
								{id: 'THB', name: 'THB'},
								{id: 'TOP', name: 'TOP'},
								{id: 'TRY', name: 'TRY'},
								{id: 'TTD', name: 'TTD'},
								{id: 'TWD', name: 'TWD'},
								{id: 'UAH', name: 'UAH'},
								{id: 'VND', name: 'VND'},
								{id: 'VUV', name: 'VUV'},
								{id: 'WST', name: 'WST'},
								{id: 'XCD', name: 'XCD'},
								{id: 'XOF', name: 'XOF'},
								{id: 'YER', name: 'YER'},
								{id: 'ZAR', name: 'ZAR'}
							]}
						]}
					]}
				]}/* ,
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'right'});
					}}
				]} */
			]},
			PluginWrapper.paymentGatewayStyleTabDef()
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.public_key.setText(data.content.public_key);
		fields.secret_key.setText(data.content.secret_key);
		fields.amount.setText(data.content.amount);
		fields.name.setText(data.content.name);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.public_key = fields.public_key.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.name = fields.name.getText();
		data.content.amount = fields.amount.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['public_key', 'secret_key'/* , 'demo' */];
		if (!data.content.public_key) data.content.public_key = '';
		if (!data.content.secret_key) data.content.secret_key = '';
		if (!data.content.name) data.content.name = '';
		if (!data.content.amount) data.content.summ = '1';
		if (!data.content.currency) data.content.currency = 'USD';
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"default_light_ui","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/default_light_ui","pluginUri":"plugins\/default_light_ui","customConfiguration":{"controlToolbarBackgroundColor":"#FFFFFF","controlToolbarLineColor":"#0e9ce8","elementToolbarBackgroundColor":"#f7f8fa","elementToolbarLineColor":"#0e9ce8","publishButtonTextColor":"#FFFFFF","publishButtonBackgroundColor":"#4FAF54","publishButtonDropdownBackgroundColor":"#449648","publishButtonDropdownBackgroundHoverColor":"#3B883F","normalItemColor":"#798087","activeItemColor":"#4FAF54","disabledItemOpacity":30,"hideTextUnderIcons":"0","hoverItemColor":"#333333","hoverItemBackgroundColor":"#F1F1F1"}};
PluginWrapper._config.id = 'default_light_ui';
PluginWrapper._config.baseUri = "plugins\/default_light_ui";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "<div id=\"builder_canvas\"><\/div>\n<div id=\"elements_toolbar\" class=\"spd-collapsed\"><\/div>\n<div id=\"builder_toolbar\"><\/div>\n<div id=\"builder_notification\" class=\"hidden\"><\/div>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper._config.fileInfo = {"main.min.css":{"time":1755156796}};
var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__spreadArray=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var o,n=0,s=t.length;n<s;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};define("default_light_ui/SPDefBuilderNotification",["require","exports","BuilderEvent","Service"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefBuilderNotification=void 0,i=__importDefault(i);var n=function(){function e(e,t){var i=this;this.builderBannerOriginalBottom=null,this.visible=!0,this.tempHidden=!1,this.empty=!0,this.builder=e,this.elem=t,this.content=$("<div/>"),this.closeButton=$('<button class="close">&times;</button>').on("click touchend",function(){return i.setVisible(!1)}),this.elem.append(this.content,this.closeButton),setTimeout(function(){var e=i.getBuilderImageBanner();e&&(i.builderBannerOriginalBottom=parseInt(e.css("bottom")),e.css("bottom",i.builderBannerOriginalBottom+t.outerHeight()+"px"))},500),o.GlobalEvents.on("notification.changed",function(e){i.setMessage(e.message,e.isHtml)}),o.GlobalEvents.on("help.show help.hide help.playershow help.playerhide preview.show preview.hide",function(e){i.tempHidden=e.visible,i.updateVisibility()})}return e.prototype.getBuilderImageBanner=function(){return i.default.RemoteLoginDialog.getImageBanner()},e.prototype.setMessage=function(e,t){return void 0===t&&(t=!1),this.empty=!e||(t||"string"!=typeof e?this.content.empty().append(e):this.content.text(e),!1),this.updateVisibility()},e.prototype.setVisible=function(e){return this.visible=e,this.updateVisibility()},e.prototype.updateVisibility=function(){var e=this.getBuilderImageBanner();return e&&e.css("bottom",this.builderBannerOriginalBottom+"px"),!this.visible||this.tempHidden||this.empty?this.elem.addClass("hidden"):this.elem.removeClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e}();t.SPDefBuilderNotification=n}),define("default_light_ui/SPDefMenuNode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefMenuNode=void 0;var i=function(){function e(){this.visible=!0,this.enabled=!0,this.available=!0,this.locked=!1,this.iconVisible=!1,this.iconClass=null,this.backIconClass=null,this.textVisible=!1,this.isActive=!1,this.isChecked=!1,this.isPremium=!1,this.autoHideLabel=!1,this.elem=$('<div class="spd-menu-node"/>'),this.content=$('<span class="spd-mn-content"/>'),this.icon=$('<i class="ico-tb-i"/>'),this.backIcon=$('<i class="ico-tb-i"/>'),this.text=$('<span class="spd-mn-text"/>'),this.elem.append(this.content)}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return(this.visible=e)?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this.elem.trigger(e?"toolbaritem.show":"toolbaritem.hide"),this},e.prototype.getVisible=function(){return this.visible},e.prototype.getIcon=function(){return this.iconClass},e.prototype.setIcon=function(e){return null===(this.iconClass=e)?this.iconVisible&&(this.iconVisible=!1,this.icon.detach()):(this.icon.attr("class","ico-tb-i "+e),this.iconVisible||(this.iconVisible=!0,this.content.prepend(this.icon))),this},e.prototype.setStarIcon=function(){return this.iconClass="fa fa-star",null===this.iconClass?this.iconVisible&&(this.iconVisible=!1,this.icon.detach()):(this.icon.attr("class","ico-tb-i "+this.iconClass),this.iconVisible||(this.iconVisible=!0,this.content.after(this.icon.css({left:"10px",position:"relative",color:"#FE7A0E"})))),this},e.prototype.setBackIcon=function(e){return null!==(this.backIconClass=e)&&(this.backIcon.attr("class","ico-tb-i "+e),this.content.prepend(this.backIcon)),this},e.prototype.setIconEnabled=function(e){return e?this.elem.addClass("enabled"):this.elem.removeClass("enabled"),this},e.prototype.setText=function(e){return null===e?this.textVisible&&(this.textVisible=!1,this.text.detach()):(this.text.empty().append(e),this.textVisible||(this.textVisible=!0,this.iconVisible?this.text.insertAfter(this.icon):this.content.prepend(this.text))),this},e.prototype.getTextElem=function(){return this.text},e.prototype.setTooltip=function(e){return this.elem.attr("title",e),this},e.prototype.setTooltipMark=function(e,t){void 0===t&&(t="");var i=$('<span class="badge wb_badge_help" >?</span>');return t&&""!=t&&i.attr("data-placement",t),this.content.after(i.attr("data-original-title",e)),this},e.prototype.setActive=function(e){return e?this.elem.addClass("active"):this.elem.removeClass("active"),this.isActive=e,this},e.prototype.getActive=function(){return this.isActive},e.prototype.setEnabled=function(e){return this.enabled=e,this.updateStateStyle(),this},e.prototype.setAvailable=function(e){return this.available=e,this.updateStateStyle(),this},e.prototype.setLocked=function(e){return this.locked=e,this.updateStateStyle(),this},e.prototype.getEnabled=function(){return this.enabled},e.prototype.getAvailable=function(){return this.available},e.prototype.getLocked=function(){return this.locked},e.prototype.updateStateStyle=function(){return this.enabled&&this.available&&!this.locked?this.elem.removeClass("disabled"):this.elem.addClass("disabled"),this},e.prototype.addSpacer=function(){return $('<span class="spacer"></span>').insertAfter(this.elem.find(".spd-mn-text")),this},e.prototype.setAutoHideLabel=function(e){return e==this.autoHideLabel||((this.autoHideLabel=e)?this.text.addClass("spd-mobile-hidden"):this.text.removeClass("spd-mobile-hidden")),this},e.prototype.addCssClass=function(e){return this.elem.addClass(e),this},e.prototype.removeCssClass=function(e){return this.elem.removeClass(e),this},e.prototype.toggleCssClass=function(e){return this.elem.toggleClass(e),this},e.prototype.getPremium=function(){return this.isPremium},e.prototype.setPremium=function(e,t){return void 0===t&&(t=""),this.isPremium===e||(this.isPremium=e,this.isPremium?this.elem.append($('<i class="premium-marker fa fa-star '+t+'"></i>')):this.elem.children(".premium-marker").remove()),this},e}();t.SPDefMenuNode=i}),define("default_light_ui/SPDefMenuItem",["require","exports","default_light_ui/SPDefMenuNode","PluginApi/PluginTranslation","default_light_ui/SPDefMenu"],function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefMenuItem=void 0;var o=function(s){function l(e,t,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var n=s.call(this)||this;return n.switcherBlock=i,n.builder=o,n.clickCallback=null,n.switchCallback=null,n.data=null,n.switchVisible=!1,n.isDraggable=!1,n.dots=null,n.extraText=null,n.setIcon(e).setText(t),n.name=null!==t?n.text.text():"",n.name&&n.setTooltip(n.name),n.switch=$('<div class="spd-mn-switch"><input type="checkbox" class="spd-switch-input" id="spd-ims-'+l.nextSwitchId+'" /><label for="spd-ims-'+l.nextSwitchId+++'" class="spd-switch-label spd-no-text"></label></div>'),i&&o&&n.switch.prepend($("<span>"+t+(t==(0,a.__)("Auto Layout")?"":" "+(0,a.__)("version"))+"</span>")),n.switch.find("input").on("change",function(e){if(l.isClickPrevented()||!n.getEnabled()||n.getLocked())return e.stopImmediatePropagation(),void e.preventDefault();n.isActive=$(e.target).is(":checked"),n.isChecked=$(e.target).is(":checked"),n.switchCallback&&n.switchCallback(n)}).on("click",function(e){if(l.isClickPrevented()||!n.getEnabled()||n.getLocked())return e.stopImmediatePropagation(),void e.preventDefault()}),n.elem.on("touchstart",function(e){l.isClickPrevented()||$(e.target).closest(".spd-mn-switch").length||(l.lastTouchedItem=n)}),n.elem.on("touchmove touchcancel",function(e){l.isClickPrevented()||$(e.target).closest(".spd-mn-switch").length||(l.lastTouchedItem=null)}),n.elem.on("touchend",function(e){l.isClickPrevented()||$(e.target).closest(".spd-mn-switch").length||l.lastTouchedItem===n&&(l.lastTouchedItem=null,e.stopImmediatePropagation(),e.preventDefault(),n.elem.trigger("click"))}),n.elem.on("click",function(e){l.isClickPrevented()||$(e.target).closest(".spd-mn-switch").length||(e.stopImmediatePropagation(),e.preventDefault(),n.getEnabled()&&!n.getLocked()&&(n.clickCallback?(r.SPDefMenu.closeAllDropDowns(),n.clickCallback(n)):n.switchVisible&&(n.setActive(!n.getActive()),n.switchCallback&&n.switchCallback(n))))}),n}return __extends(l,s),l.prototype.setDragable=function(e){if(this.isDraggable==e)return this;if(this.isDraggable=e){if(!this.dots){var t='<svg width="3" height="3"><circle cx="1.5" cy="1.5" r="1.5" fill="#919191"/></svg>';this.dots=$("<div>").addClass("spd-mn-dots").append($("<div>").append(t).append(t).append(t)).append($("<div>").append(t).append(t).append(t))}this.elem.addClass("spd-mn-draggable"),this.text.before(this.dots)}else this.dots&&this.dots.detach(),this.elem.removeClass("spd-mn-draggable");return this},l.isClickPrevented=function(){return l.preventClickUntil>(new Date).getTime()},l.preventClick=function(){l.preventClickUntil=(new Date).getTime()+250},l.prototype.onClick=function(e){return this.clickCallback=e,this},l.prototype.onSwitch=function(e){return this.switchCallback=e,this},l.prototype.setSwitchVisible=function(e){return this.switchVisible!=e&&((this.switchVisible=e)?(this.switcherBlock?this.switcherBlock.append(this.switch):this.content.append(this.switch),this.elem.addClass("spd-mn-has-switch")):(this.switch.detach(),this.elem.removeClass("spd-mn-has-switch"))),this},l.prototype.setActive=function(e){return this.isActive=e,s.prototype.setActive.call(this,e)},l.prototype.setChecked=function(e){return this.isChecked=e,this.switch.children("input").prop("checked",e),e?this.elem.addClass("checked"):this.elem.removeClass("checked"),this},l.prototype.getChecked=function(){return this.isChecked},l.prototype.setData=function(e){return this.data=e,this},l.prototype.getData=function(){return this.data},l.prototype.setExtraText=function(e){return null===e||""===e?this.extraText&&(this.removeCssClass("spd-mi-has-extra-text"),this.extraText.remove()):(this.extraText||(this.addCssClass("spd-mi-has-extra-text"),this.extraText=$('<div class="spd-mi-extra-text"></div>'),this.extraText.appendTo(this.text)),this.extraText.text(e)),this},l.lastTouchedItem=null,l.nextSwitchId=0,l.preventClickUntil=0,l}(i.SPDefMenuNode);t.SPDefMenuItem=o}),define("default_light_ui/SPDefMenu",["require","exports","default_light_ui/SPDefMenuNode","default_light_ui/SPDefMenuItem","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,i,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefMenu=void 0;var n=function(t){function n(e){void 0===e&&(e=!1);var o=t.call(this)||this;o.searchBlockVisible=!1,o.footerContainer=null,o.footerVisible=!0,o.massAddMode=!1,o.items=[],o.inline=!1,o.oneRow=!0,o.caretVisible=!1,o.clickCallback=null;var l=o;return o.dropdown=$('<div class="spd-dropdown" title=""/>'),e&&(o.searchBlockVisible=!0,o.searchBlock=$("<div>").addClass("spd-dd-search").appendTo(o.dropdown),o.searchInput=$("<input>").addClass("form-control").attr("type","text").attr("placeholder",(0,a.__)("Search")).on("change keyup",function(e){27===e.keyCode&&(this.value="");for(var t=this.value.toLowerCase(),i=0,o=l.items;i<o.length;i++){var n=o[i];if(n){var s=0<=n.getTextElem().text().toLowerCase().indexOf(t);n.setVisible(s)}}}).appendTo(o.searchBlock)),o.itemContainer=$('<div class="spd-dd-item-container"/>'),o.dropdown.append($('<div class="spd-dd-scroll"/>').append(o.itemContainer)),o.elem.addClass("spd-mn-has-dropdown spd-dd-right").on("mouseover",function(e){var t=$(e.target);if(!o.elem.is(".spd-over")&&!t.closest(".spd-et-vertical").length){var i=t.parents().addBack().filter(".spd-mn-has-dropdown");i.length<2&&(n.closeAllDropDowns(),i.each(function(){$(this).addClass("spd-over")}))}}).on("mouseout",function(e){$(e.target).closest(".spd-et-vertical").length||o.elem.parents(".spd-dropdown").length||o.elem[0].contains(e.relatedTarget)||(s.SPDefMenuItem.preventClick(),o.elem.removeClass("spd-over ext-open"))}).on("touchstart",function(e){n.lastTouchedMenu=o}).on("touchmove touchcancel",function(e){n.lastTouchedMenu=null}).on("touchend",function(e){if(n.lastTouchedMenu===o){n.lastTouchedMenu=null,e.stopImmediatePropagation();try{e.preventDefault()}catch(e){}$(e.target).trigger("click")}}).on("click",function(e){var t=$(e.target);if(o.elem.is(".spd-over")){var i=t.closest(".spd-dropdown,.spd-menu-node");if(i.length&&i[0]===o.elem[0])return e.preventDefault(),void o.elem.removeClass("spd-over ext-open").find(".spd-over").removeClass("spd-over ext-open-submenu");o.elem.removeClass("spd-over ext-open ext-open-submenu").find(".spd-over").removeClass("spd-over ext-open ext-open-submenu")}n.closeAllDropDowns(),$(e.target).parents().addBack().filter(".spd-mn-has-dropdown").each(function(){$(this).addClass("spd-over")})}).append(o.dropdown),o.caret=$('<span class="caret"></span>'),o.content.on("click",function(e){o.clickCallback&&!$(e.target).is(".caret-box")&&o.clickCallback.call(o)}),o}return __extends(n,t),n.firstInit=function(){n.firstInitDone||(n.firstInitDone=!0,$(document.body).on("touchstart",function(e){$(e.target).closest(".spd-has-dropdown").length||n.closeAllDropDowns()}),o.GlobalEvents.on("modal.show contextmenu.show",function(){n.closeAllDropDowns()}))},n.closeAllDropDowns=function(){$(".spd-over").removeClass("spd-over ext-open ext-open-submenu")},n.prototype.beginMassAddItems=function(){this.massAddMode=!0},n.prototype.endMassAddItems=function(){this.massAddMode=!1,this.updateSearchBlockVisibility()},n.prototype.updateSearchBlockVisibility=function(){if(this.searchBlock&&this.searchInput){this.searchInput.val("");var e=this.items.length>=n.minOptionsNumberForSearchShowing;if(this.searchBlockVisible!==e&&(this.searchBlockVisible=e,this.searchBlock.css("display",e?"block":"none"),!e))for(var t=0,i=this.items;t<i.length;t++){var o=i[t];o&&o.setVisible(!0)}}},n.prototype.clearItems=function(){return this.items=[],this.itemContainer.empty(),this},n.prototype.addItem=function(e,t){return void 0===t&&(t=""),this.items.push(e),e?this.itemContainer.append(e.getElem().addClass(t)):this.itemContainer.append($('<div class="spd-dropdown-separator"/>').addClass(t)),this.massAddMode||this.updateSearchBlockVisibility(),this},n.prototype.setSeparatorForItemVisible=function(e,t){var i=this.items.indexOf(t),o=this.items.length;if(!(i<0)){var n=null;0==i&&1<o&&!this.items[i+1]?n=t.getElem().next():0<i&&!this.items[i-1]&&(o<=i+1||!this.items[i+1])&&(n=t.getElem().prev()),n&&(e?n.show():n.hide())}},n.prototype.getItems=function(){return this.items},n.prototype.addFooterItem=function(e){return e&&(this.footerContainer||(this.footerContainer=$('<div class="spd-dd-footer"></div>'),this.footerVisible||this.footerContainer.addClass("hidden"),this.dropdown.append(this.footerContainer)),this.footerContainer.append(e.getElem())),this},n.prototype.setFooterVisibility=function(e){return this.footerVisible=e,this.footerContainer&&(e?this.footerContainer.removeClass("hidden"):this.footerContainer.addClass("hidden")),this},n.prototype.setInline=function(e){return(this.inline=e)?this.elem.addClass("spd-dd-inline"):this.elem.removeClass("spd-dd-inline"),this},n.prototype.setOneRow=function(e){return(this.oneRow=e)?this.elem.addClass("spd-dd-onerow"):this.elem.removeClass("spd-dd-onerow"),this},n.prototype.getInline=function(){return this.inline},n.prototype.getOneRow=function(){return this.oneRow},n.prototype.setDropdownDirection=function(e){return this.elem.removeClass("spd-dd-left spd-dd-right").addClass("spd-dd-"+e),this},n.prototype.setCaretVisible=function(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.caretVisible!=e&&(this.caretVisible=e,t&&this.caret.addClass("closely"),e?i?this.content.append($('<span class="caret-box"></span>').append(this.caret)):this.content.append(this.caret):this.caret.detach()),this},n.prototype.setOpen=function(e){return e?this.elem.addClass("spd-over"):this.elem.removeClass("spd-over"),this},n.prototype.onClick=function(e){return this.clickCallback=e,this},n.lastTouchedMenu=null,n.minOptionsNumberForSearchShowing=8,n.firstInitDone=!1,n}(i.SPDefMenuNode);t.SPDefMenu=n}),define("default_light_ui/SPDefPageSelector",["require","exports","default_light_ui/SPDefMenu","BuilderEvent","default_light_ui/SPDefMenuItem","PluginApi/PluginTranslation","default_light_ui/SPDefMenuNode"],function(e,t,i,n,d,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefPageSelector=void 0;var l=function(o){function e(e,t){void 0===t&&(t=!1);var i=o.call(this,!0)||this;return i.builder=e,i.mobile=t,i.inPreview=!1,i.queueUpdateTimeout=0,i.elem.addClass("spd-page-selector"),i.setCaretVisible(!0),i.addFooterItem(new a(i.builder)),n.GlobalEvents.on("preview.show",function(e){i.inPreview=e.visible,i.updateVisibility()}),n.GlobalEvents.on("preview.hide",function(e){i.inPreview=e.visible,i.updateVisibility()}),n.GlobalEvents.on("page.load pages.changed anchors.changed",function(){i.queueUpdate(),i.updateVisibility()}),i.queueUpdate(),i.updateVisibility(),i}return __extends(e,o),e.prototype.updateVisibility=function(){this.setVisible((!this.inPreview||this.mobile)&&0<this.getItems().length),this.setFooterVisibility(!this.inPreview)},e.prototype.queueUpdate=function(){var e=this;this.queueUpdateTimeout&&clearTimeout(this.queueUpdateTimeout),this.queueUpdateTimeout=window.setTimeout(function(){e.queueUpdateTimeout=0,e.update(),e.updateVisibility()},1e3)},e.prototype.update=function(){this.clearItems();var e=this.builder.getSiteTree();this.beginMassAddItems();var t=this.buildTree(e);this.endMassAddItems();var i=t?t.name:(0,s.__)("Home");return this.mobile||this.setText($("<span>").append($("<span>").addClass("spd-selected-page-name").html(i))),this},e.prototype.buildTree=function(e,t){void 0===t&&(t=0);for(var i,o=null,n=!1,s=0,l=e;s<l.length;s++){var a=l[s];a.isServicePage&&!n&&(this.addItem(null),n=!0);var r="";for(i=t;0<i;i--)r+=a.isAnchor?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";"icon"in a&&a.icon?r+='<i class="'+a.icon+'"></i>':r+="&nbsp;",r+=a.name,this.addItem(new d.SPDefMenuItem(null,r).setTooltip(a.name).setData(a).setActive(a.isCurrent()).setAvailable(a.enabled).onClick(this.onPageSelect.bind(this)).addCssClass(a.isAnchor?"spd-anchor-link":"")),a.isCurrent()&&(o=a);var u=this.buildTree(a.children,t+1);u&&(o=u)}return o},e.prototype.onPageSelect=function(e){var t=e.getData();this.inPreview?t.preview():t.navigate()},e}(i.SPDefMenu);t.SPDefPageSelector=l;var a=function(o){function e(e){var t=o.call(this)||this;t.builder=e;var i=[];return t.elem.addClass("spd-ps-menu-buttons no-hover").on("click",function(){t.builder.showSitePagesDialog()}),t.setEnabled(!e.isEditingLocked()),n.GlobalEvents.on("builder.editing.changed",function(e){t.setEnabled(!e.editingLocked)}),i.push($('<span class="spd-inner-btn"><i class="fa fa-pencil"></i>'+(0,s.__)("Edit")+"</span>").attr("title",(0,s.__)("Edit"))),t.setText(i),t.setTooltip(""),t}return __extends(e,o),e}(o.SPDefMenuNode)}),define("default_light_ui/SPDefToolbarGroup",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefToolbarGroup=void 0;var i=function(){function e(){var e=this;this.visible=!0,this.elem=$('<div class="spd-tb-group" />').on("toolbaritem.show toolbaritem.hide",function(){e.update()}),this.items=[]}return e.prototype.getElem=function(){return this.elem},e.prototype.setVisible=function(e){return this.visible=e,this.update(),this},e.prototype.update=function(){var e=this.visible;if(e){e=!1;for(var t=0,i=this.items;t<i.length;t++){if(i[t].getVisible()){e=!0;break}}}return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.addItem=function(e){return this.items.push(e),this.elem.append(e.getElem()),this.update(),this},e.prototype.removeItem=function(e){var t=this.items.indexOf(e);return 0<=t&&(this.items.splice(t,1),e.getElem().remove(),this.update()),this},e.prototype.getItems=function(){return this.items},e}();t.SPDefToolbarGroup=i}),define("default_light_ui/SPDefPreviewModeSelector",["require","exports","default_light_ui/SPDefMenu","BuilderEvent","default_light_ui/SPDefMenuItem"],function(e,t,i,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefPreviewModeSelector=void 0;var o=function(s){function e(e){var n=s.call(this)||this;n.builder=e,n.modeButtons={},n.elem.addClass("spd-dd-inline");for(var t=0,i=__spreadArray([],e.getModes(),!0).sort(function(e,t){return t.width-e.width});t<i.length;t++){var o=i[t];n.addItem(n.modeButtons[o.id]=new a.SPDefMenuItem("ico-tb-mode-"+o.id,o.name).setExtraText("tv"===o.id&&"function"==typeof e.getMaxPreviewWidth?"1200px+":o.width+"px").setTooltip(o.name).onClick(n.onSelectMode.bind(n)).setData(o)),"tv"==o.id&&n.modeButtons[o.id].getElem().addClass("spd-hide-lt-wide"),"desktop"==o.id&&n.modeButtons[o.id].getElem().addClass("spd-hide-lt-desktop")}return l.GlobalEvents.on("preview.size.changed",function(e){var t=null,i=null;for(var o in n.modeButtons)n.modeButtons[o].getVisible()&&(n.modeButtons[o].getData().width<=e.width&&!t&&(t=n.modeButtons[o]),i=n.modeButtons[o]);for(var o in t||(t=i),n.modeButtons)n.modeButtons[o].setActive(n.modeButtons[o]===t)}),l.GlobalEvents.on("preview.show",function(e){n.update()}),l.GlobalEvents.on("modes.enabled.change",function(e){n.modeButtons.hasOwnProperty(e.mode)&&n.modeButtons[e.mode].setChecked(e.value)}),n}return __extends(e,s),e.prototype.onSelectMode=function(e){var t=e.getData(),i="tv"===t.id&&"function"==typeof this.builder.getMaxPreviewWidth?this.builder.getMaxPreviewWidth():t.width;this.builder.setPreviewWidth(i)},e.prototype.update=function(){for(var e=this.builder.getModes(),t=this.builder.getMinMode(),i=this.builder.getMaxMode(),o=0,n=e;o<n.length;o++){var s=n[o],l=this.modeButtons[s.id],a=(!t||0<=this.builder.compareModes(s.id,t))&&(!i||this.builder.compareModes(s.id,i)<=0);l.setVisible(a)}return this},e}(i.SPDefMenu);t.SPDefPreviewModeSelector=o}),define("default_light_ui/SPDefTemplateMenu",["require","exports","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenu","PluginApi/PluginTranslation"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefTemplateMenu=void 0;var s=function(i){function e(e){var t=i.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setIcon("ico-tb-reset"),t.setText((0,n.__)("New")+"/"+(0,n.__)("Reset")),t.setCaretVisible(!0),t.addItem(t.functionButtonMap.new=new o.SPDefMenuItem(null,(0,n.__)("Change template")).setIcon("ico-change-template").onClick(function(){t.builder.showTemplateChooser()}).setVisible(t.builder.isTemplateSelectorVisible())),t.addItem(t.functionButtonMap.reset=new o.SPDefMenuItem(null,(0,n.__)("Reset")).setIcon("fa fa-refresh").onClick(function(){t.builder.resetSite(!0)}).setVisible(t.builder.isResetTemplateButtonVisible())),t.addItem(t.functionButtonMap.import=new o.SPDefMenuItem(null,(0,n.__)("Import")).setIcon("fa fa-download").onClick(function(){t.builder.showImportDialog()}).setEnabled(t.builder.isImportAvailable()).setVisible(t.builder.isImportVisible())),t}return __extends(e,i),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(i.SPDefMenu);t.SPDefTemplateMenu=s}),define("default_light_ui/SPDefLanguagesMenu",["require","exports","default_light_ui/SPDefMenu","PluginApi/PluginTranslation","default_light_ui/SPDefMenuItem"],function(e,t,i,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefLanguagesMenu=void 0;var o=function(r){function u(e){var t=r.call(this)||this;t.builder=e,t.setTooltip((0,d.__)("Language")),t.setCaretVisible(!0,!0);var i,o=t.builder.getLanguage();t.setIcon(u.getLanguageIcon(o)),t.setBackIcon("ico-tb-back-icon fa fa-long-arrow-left");for(var n=0,s=t.builder.getLanguages();n<s.length;n++){var l=s[n];t.addItem(i=new p.SPDefMenuItem(u.getLanguageIcon(l),l.name).setData(l).setActive(!!o&&l.locale===o.locale).setVisible(!l.hidden).onClick(t.onLanguageSelect.bind(t))),i.getElem().addClass("spd-limit-text")}var a=t.getElem();return a.on("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();var t=a.parent(".spd-dd-item-container"),i=t.parents(".spd-mn-has-dropdown"),o=a.find(".spd-dd-item-container"),n=t.children(".spd-menu-node").length;if(0<n){var s=a.outerHeight(!0);t.css("minHeight",s*n),o.css("minHeight",s*(n-1))}return a.hasClass("ext-open-submenu")&&i.hasClass("ext-open")?(a.removeClass("ext-open-submenu"),i.removeClass("ext-open")):(a.addClass("ext-open-submenu"),i.addClass("ext-open")),!1}),a.on("mouseout",function(){t.setIcon(u.getLanguageIcon(o))}),t}return __extends(u,r),u.getLanguageIcon=function(e){var t,i=e?e.countryCode:"";switch(i){case"cs":t="rs";break;case"ct":t="es-ct";break;case"gb":t="gb-wls";break;case"gl":t="gal";break;case"us":t="uk";break;default:t=i}return"flag-icon-"+t},u.prototype.onLanguageSelect=function(e){this.builder.setLanguage(e.getData())},u}(i.SPDefMenu);t.SPDefLanguagesMenu=o}),define("default_light_ui/SPDefSettingsMenu",["require","exports","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenu","PluginApi/PluginTranslation","default_light_ui/SPDefLanguagesMenu"],function(e,t,n,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefSettingsMenu=void 0;var o=function(o){function e(e){var t=o.call(this)||this;t.builder=e,t.functionButtonMap={},t.setText((0,s.__)("Settings")),t.setCaretVisible(!0,!0),t.setIcon("ico-settings spd-mobile-visible"),t.text.addClass("spd-mobile-hidden"),e.isB2C()&&t.addItem(new n.SPDefMenuItem("fa fa-question-circle",(0,s.__)("Help")).onClick(function(){return e.openB2CHelp()}),"ext-hide"),t.addItem(t.functionButtonMap.background=new n.SPDefMenuItem("ico-tb-pages",(0,s.__)("Pages")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePagesDialog()}),"ext-hide"),t.addItem(new n.SPDefMenuItem("ico-tb-styles",(0,s.__)("Styles")).onClick(function(){t.builder.showSiteStylesDialog()}),"ext-hide"),t.addItem(new n.SPDefMenuItem("ico-tb-favicon",(0,s.__)("Favicon")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSiteFaviconDialog()}),"ext-hide"),t.addItem(new n.SPDefMenuItem("ico-settings",(0,s.__)("Settings")).setVisible(!t.builder.isComposerMode()).onClick(function(){t.builder.showSitePropertiesDialog()}),"ext-hide"),t.builder.isFullScreenSupported()&&t.addItem(new n.SPDefMenuItem("ico-tb-fullscreen",(0,s.__)("Full Screen")).onClick(function(){t.builder.toggleFullScreen()}),"ext-hide"),t.addItem(null,"ext-hide");var i=new l.SPDefLanguagesMenu(e);return i.setCaretVisible(!1).setText((0,s.__)("Language")),i.getElem().addClass("lang-btn"),t.addItem(i),t.addItem(null),t.addItem(new n.SPDefMenuItem("ico-tb-logout",(0,s.__)("Log Out")).onClick(function(){t.builder.logout()}),"ext-hide"),t}return __extends(e,o),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(i.SPDefMenu);t.SPDefSettingsMenu=o}),define("default_light_ui/SPDefPublishMenu",["require","exports","PluginApi/PluginTranslation","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenu","core/BuilderConfig"],function(e,t,o,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefPublishMenu=void 0;var l=function(i){function e(e){var t=i.call(this)||this;return t.builder=e,t.setCaretVisible(!0,!1,!0),t.setDropdownDirection("left"),t.setIcon("fa fa-floppy-o"),t.builder.isComposerMode()?(t.setText((0,o.__)("Save Composition")),t.onClick(function(){return t.builder.saveElementComposition()}),t.addItem(new n.SPDefMenuItem(null,(0,o.__)("Save Composition")).setIcon("fa fa-floppy-o").setEnabled(t.builder.isElementCompositionSavingEnabled()).setTooltip(t.builder.isElementCompositionSavingEnabled()?"":"Please switch builder to English language").onClick(function(e){t.builder.saveElementComposition()}))):(t.setText((0,o.__)("Publish")),t.onClick(function(){window.matchMedia("(pointer: coarse)").matches||t.builder.publish()}),t.addItem(new n.SPDefMenuItem(null,(0,o.__)("Publish")).setIcon("fa fa-floppy-o").onClick(function(e){t.builder.publish()}).setEnabled(t.builder.isPublishAvailable()).setTooltipMark((0,o.__)("Save site and Publish it to the internet"),"bottom")),t.addItem(new n.SPDefMenuItem(null,(0,o.__)("Save")).setIcon("ico-save").onClick(function(e){t.builder.save(!0)}).setPremium(s.wbConfig.isFreeB2CB2B2C,"mid").setTooltipMark((0,o.__)("Save site without Publishing it"),"bottom")),t.addItem(new n.SPDefMenuItem(null,(0,o.__)("Backup/Restore")).setIcon("ico-backup").onClick(function(e){t.builder.showBackupRestoreDialog()}).setPremium(s.wbConfig.isFreeB2CB2B2C,"mid")),t.builder.isTemplateSavingAvailable()&&t.addItem(null),t.addItem(new n.SPDefMenuItem(null,(0,o.__)("Save As...")).setVisible(t.builder.isTemplateSavingAvailable()).setEnabled(t.builder.isTemplateSavingEnabled()).setTooltip(t.builder.isTemplateSavingEnabled()?"":"Please switch builder to English language").onClick(function(){t.builder.showSaveAsTemplateDialog()}))),t}return __extends(e,i),e}(i.SPDefMenu);t.SPDefPublishMenu=l}),define("default_light_ui/SPDefMobileMainMenu",["require","exports","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenu","PluginApi/PluginTranslation","default_light_ui/SPDefLanguagesMenu","default_light_ui/SPDefSettingsMenu","default_light_ui/SPDefTemplateMenu"],function(e,t,o,i,n,s,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefMobileMainMenu=void 0;var r=function(i){function e(e){var t=i.call(this)||this;return t.builder=e,t.functionButtonMap={},t.setText(null),t.setIcon("spd-icon-i-menu"),t.templateMenu=new a.SPDefTemplateMenu(t.builder).addSpacer(),t.settingsMenu=new l.SPDefSettingsMenu(t.builder).setText((0,n.__)("Settings")).setIcon("icon-cog-big").setCaretVisible(!0).addSpacer(),t.settingsMenu.getTextElem().removeClass("spd-mobile-hidden"),t.languageMenu=new s.SPDefLanguagesMenu(t.builder).setText((0,n.__)("Languages")).setCaretVisible(!0).addSpacer(),t.helpButton=new o.SPDefMenuItem("spd-icon-hint",null).setTooltip((0,n.__)("Help")).setText((0,n.__)("Help")).onClick(function(){t.builder.showHelp()}).addSpacer(),t.addItem(t.templateMenu),t.addItem(t.settingsMenu),t.addItem(t.languageMenu),t.addItem(t.helpButton),t}return __extends(e,i),e.prototype.getButtonByFunction=function(e){return this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e}(i.SPDefMenu);t.SPDefMobileMainMenu=r}),define("default_light_ui/SPDefBuilderToolbar",["require","exports","default_light_ui/SPDefPageSelector","default_light_ui/SPDefToolbarGroup","default_light_ui/SPDefPreviewModeSelector","default_light_ui/SPDefTemplateMenu","default_light_ui/SPDefSettingsMenu","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenuNode","default_light_ui/SPDefPublishMenu","BuilderEvent","PluginApi/PluginTranslation","default_light_ui/SPDefMenu","default_light_ui/SPDefLanguagesMenu","default_light_ui/SPDefMobileMainMenu","Dialog","jquery-builder"],function(e,t,h,m,b,f,g,v,C,_,w,D,P,S,M,B,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefBuilderToolbar=void 0,B=__importDefault(B),y=__importDefault(y);var i=function(){function e(e,t){var i=this;if(this.functionButtonMap={},this.customButtonsGroup=null,this.firstUpdate=!0,this.rightSizesMap={},this.lastSpaceForRight=0,this.builder=e,this.elem=t,e.isAdminMode()?this.elem.append((0,y.default)('<div class="spd-logo"/>').append((0,y.default)('<span class="admin-mode-label"></span>').text(" ADMIN MODE "))):(this.elem.append((0,y.default)('<div class="spd-logo"/>').append((0,y.default)('<div class="spd-logo-pad"/>').append((0,y.default)('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoUrl()+")")))),this.builder.getLogoMobileUrl()&&this.elem.append((0,y.default)('<div class="spd-logo-mobile"/>').append((0,y.default)('<div class="spd-logo-pad"/>').append((0,y.default)('<span class="logo-img"></span>').css("backgroundImage","url("+this.builder.getLogoMobileUrl()+")"))))),this.elem.append(this.left=(0,y.default)('<div class="spd-tb-left spd-tb-part"/>')),this.elem.append(this.right=(0,y.default)('<div class="spd-tb-right spd-tb-part"/>')),this.mobileExtrasMenu=new P.SPDefMenu(!1).setIcon("fa fa-rocket").setTooltip((0,D.__)("More actions")).setCaretVisible(!0),this.pageSelector=new h.SPDefPageSelector(this.builder),this.pageSelectorMobile=new h.SPDefPageSelector(this.builder,!0),this.previewModeSelector=new b.SPDefPreviewModeSelector(this.builder),this.templateMenu=new f.SPDefTemplateMenu(this.builder),this.templateMenuMobile=new f.SPDefTemplateMenu(this.builder),this.templateMenuMobile.getElem().addClass("spd-template-menu"),this.templateMenuMobile.setAutoHideLabel(!0),this.settingsMenu=new g.SPDefSettingsMenu(this.builder).setText((0,D.__)("Settings")).setTooltip((0,D.__)("Settings")).setIcon("ico-settings"),this.languagesMenu=new S.SPDefLanguagesMenu(this.builder),this.helpButton=new v.SPDefMenuItem("fa fa-question-circle-o",null).setTooltip((0,D.__)("Help")).onClick(function(){i.builder.showHelp(),i.builder.forwardFlowStep(6,!0)}),this.helpButtonMobile=new v.SPDefMenuItem("fa fa-question-circle-o",null).setTooltip((0,D.__)("Help")).onClick(function(){i.builder.showHelp(),i.builder.forwardFlowStep(6,!0)}),this.helpButton.getElem().addClass("help-button"),this.helpButtonMobile.getElem().addClass("help-button"),this.helpButton.setText((0,D.__)("Help")),this.helpButtonMobile.setText(null),e.canShowDesignerHelpDialog&&e.canShowDesignerHelpDialog()){var o=function(){return new v.SPDefMenuItem("ico-designer",null).setText((0,D.__)("Need designer help?")).setTooltip((0,D.__)("Need designer help?")).setPremium(!i.builder.isDesignerHelpAvailable()).onClick(function(){return e.showDesignerHelpDialog()})};this.designerHelpButton=o(),this.designerHelpButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(o())}if(e.canShareAccess&&e.canShareAccess()){var n=function(){return new v.SPDefMenuItem("ico-share",null).setText((0,D.__)("Share access")).setTooltip((0,D.__)("Share access")).onClick(function(){return e.openShareAccess()})};this.shareButton=n(),this.shareButton.setAutoHideLabel(!0),this.mobileExtrasMenu.addItem(n())}var s=function(){return new v.SPDefMenuItem("ico-ai",null).setTooltip((0,D.__)("Ask a Question")+" ("+(0,D.__)("AI")+")").setText((0,D.__)("Ask a Question")+" ("+(0,D.__)("AI")+")").onClick(function(){return e.showHelpChatDialog()})};if(this.helpChatButton=s(),this.helpChatButton.setAutoHideLabel(!0),this.helpChatButtonMobile=s(),this.mobileExtrasMenu.addItem(this.helpChatButtonMobile),!e.isTestMode()&&e.isB2C()&&/(\.site\.pro|\.sitepro)$/.test(e.getSiteDomain())){var l,a=function(){if(!l){(l=new B.default).setTitle((0,D.__)("Choose the professional name for your website")),l.addButton((0,D.__)("Close"));var t=(0,y.default)('<iframe src="'+e.getB2cDomainsUrl()+'&notitle=1" style="width: 100%; height: 130px; border: none;">');(0,y.default)(window).on("message",function(e){e.originalEvent.data&&"resize"===e.originalEvent.data.action&&e.originalEvent.data.value&&t.css("height",e.originalEvent.data.value+35+"px")}),l.setContent(t)}l.show()},r=function(){return new v.SPDefMenuItem("ico-tb-domains",null).setText((0,D.__)("Domains")).setTooltip((0,D.__)("Domains")).onClick(a)};this.domainsButton=r(),this.mobileExtrasMenu.addItem(r())}this.functionButtonMap.undo=this.undoButton=new v.SPDefMenuItem("ico-tb-undo",null).setTooltip((0,D.__)("Undo")).onClick(function(){i.builder.historyUndo()}),this.functionButtonMap.redo=this.redoButton=new v.SPDefMenuItem("ico-tb-redo",null).setTooltip((0,D.__)("Redo")).onClick(function(){i.builder.historyRedo()}),this.functionButtonMap.preview=this.showPreviewButton=new v.SPDefMenuItem(null,(0,D.__)("Preview")).setIcon("ico-tb-preview").setTooltip((0,D.__)("Preview")).onClick(function(){i.showPreviewButton.setEnabled(!1),i.showPreviewButton.setIcon("fa fa-spinner fa-pulse"),i.builder.preview().always(function(){i.showPreviewButton.setEnabled(!0),i.showPreviewButton.setIcon("ico-tb-preview")})}),this.showPreviewButton.setAutoHideLabel(!0),this.showPreviewButton.getTextElem(),this.hidePreviewButton=new v.SPDefMenuItem(null,(0,D.__)("Close preview")).setIcon("fa fa-eye-slash").setTooltip((0,D.__)("Back to Editor")).onClick(function(){i.builder.hidePreview()}),this.hidePreviewButton.getElem().addClass("spd-close-preview-btn"),this.mobileMenu=new M.SPDefMobileMainMenu(this.builder);var u=e.getSignUpInfo();u&&(this.signUpButton=new v.SPDefMenuItem("ico-tb-sign-in",null).setAutoHideLabel(!0).setText(u.title).onClick(function(){u&&window.open(u.url)}));var d=wb_builder.isAnyoneEditingNow&&wb_builder.builderUserName;if(this.left.append((new m.SPDefToolbarGroup).addItem(this.pageSelector).getElem().addClass("spd-mobile-hidden no-hover")),!d){var p=new m.SPDefToolbarGroup;p.addItem(this.undoButton),p.addItem(this.redoButton),this.left.append((new m.SPDefToolbarGroup).addItem(this.templateMenu).getElem().addClass("spd-hide-lt-tablet"),p.getElem().addClass("spd-hide-lt-tablet combined-group")),this.left.append((new m.SPDefToolbarGroup).addItem(this.previewModeSelector).getElem().addClass("no-hover preview-mode-selector spd-hide-lt-tablet"))}var c=[];wb_builder.uiDef&&"object"==typeof wb_builder.uiDef&&wb_builder.uiDef.toolbars&&"object"==typeof wb_builder.uiDef.toolbars&&wb_builder.uiDef.toolbars["control-toolbar-cont"]&&"object"==typeof wb_builder.uiDef.toolbars["control-toolbar-cont"]&&wb_builder.uiDef.toolbars["control-toolbar-cont"].items&&(wb_builder.uiDef.toolbars["control-toolbar-cont"].items,1)&&(c=wb_builder.uiDef.toolbars["control-toolbar-cont"].items),this.buildUIItems(c,e),this.right.append((new m.SPDefToolbarGroup).addItem(this.pageSelectorMobile.setIcon("ico-tb-landing").setText(null).setCaretVisible(!1)).getElem().addClass("spd-mobile-visible"),(new m.SPDefToolbarGroup).addItem(this.templateMenuMobile).getElem().addClass("spd-visible-lt-tablet mobile-no-border")),this.right.append((0,y.default)('<div class="spacer"></div>'),this.designerHelpButton?(new m.SPDefToolbarGroup).addItem(this.designerHelpButton).getElem().addClass("spd-mobile-hidden"):null,this.shareButton?(new m.SPDefToolbarGroup).addItem(this.shareButton).getElem().addClass("spd-mobile-hidden"):null,(new m.SPDefToolbarGroup).addItem(this.helpChatButton).getElem().addClass("spd-mobile-hidden"),(new m.SPDefToolbarGroup).addItem(this.helpButton).getElem().addClass("spd-mobile-hidden"),this.domainsButton?(new m.SPDefToolbarGroup).addItem(this.domainsButton).getElem().addClass("spd-mobile-hidden"):null,this.mobileExtrasMenu.getItems().length?(new m.SPDefToolbarGroup).addItem(this.mobileExtrasMenu).getElem().addClass("spd-mobile-visible"):null,(new m.SPDefToolbarGroup).addItem(this.settingsMenu).getElem(),this.signUpButton?(new m.SPDefToolbarGroup).addItem(this.signUpButton).getElem():null,(new m.SPDefToolbarGroup).addItem(this.showPreviewButton).getElem().addClass("no-border mobile-no-border"),(new m.SPDefToolbarGroup).addItem(this.hidePreviewButton).getElem()),d?(this.builderDisabledLabel=(new C.SPDefMenuNode).setIcon("fa fa-lock").setText((0,D.__)("Builder Locked.")+" "+(0,D.__)("Please try again later.")+"<br><small>("+(0,D.__)("%s is editing website now").replace("%s","<strong>"+wb_builder.builderUserName+"</strong>")+")</small>"),this.builderDisabledLabel.getElem().addClass("spb-builder-disabled-label"),this.right.append((new m.SPDefToolbarGroup).addItem(this.builderDisabledLabel).getElem())):(this.saveMenu=new _.SPDefPublishMenu(this.builder),this.saveMenu.getElem().addClass("spd-publish-menu"),this.right.append((new m.SPDefToolbarGroup).addItem(this.saveMenu).getElem().addClass("no-hover mobile-no-border"))),w.GlobalEvents.on("preview.show",function(){i.onPreviewVisibilityChange(!0)}),w.GlobalEvents.on("preview.hide",function(){i.onPreviewVisibilityChange(!1)}),w.GlobalEvents.on("history.changed",function(){i.onHistoryChange()}),w.GlobalEvents.on("builder.editing.changed",function(){i.updateButtons(),i.onHistoryChange()}),this.elem.on("touchstart touchmove touchend touchcancel",function(e){e.stopImmediatePropagation(),i.builder.hideContextMenus()}).on("mousedown mouseover",function(){i.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||i.builder.unselectAll()}),this.updateButtons(),this.onHistoryChange(),this.onPreviewVisibilityChange(!1),(0,y.default)(window).on("resize orientationchange",function(){i.update()}),this.update()}return e.prototype.buildUIItems=function(e,t){var n=[],i=0;this.left.children().each(function(){i+=20,n.push({order:i,elem:(0,y.default)(this)})});for(var o=function(e){var t=new m.SPDefToolbarGroup,i=new v.SPDefMenuItem(e.img?e.img:null,e.name?e.name:null);if(e.url){var o="target"in e?e.target:"_blank";i.onClick(function(){window.open(e.url,o)})}t.addItem(i),n.push({order:e.order,elem:t.getElem()})},s=0,l=e;s<l.length;s++){o(l[s])}n.sort(function(e,t){return e.order===t.order?0:e.order>t.order?1:-1});for(var a=0,r=n;a<r.length;a++){var u=r[a];this.left.append(u.elem)}},e.prototype.calcRightWidth=function(){var i=0;return this.right.children().each(function(e,t){i+=(0,y.default)(t).outerWidth()}),i},e.prototype.update=function(){var o=this,n=this.right.children();this.firstUpdate&&(n.each(function(e,t){o.rightSizesMap[e]=(0,y.default)(t).outerWidth()}),this.firstUpdate=!1),requestAnimationFrame(function(){var i=o.elem.width();o.elem.children().each(function(e,t){t!==o.right.get(0)&&(i-=(0,y.default)(t).outerWidth())}),i-=10;var e=o.calcRightWidth();if(i<e&&(!o.lastSpaceForRight||o.lastSpaceForRight>i))for(var t=-1;i<e&&t<n.length;)n.eq(++t).addClass("hide-lbl"),e=o.calcRightWidth();else if(!o.lastSpaceForRight||o.lastSpaceForRight<i)for(t=n.length;e<i&&0<t;)n.eq(--t).removeClass("hide-lbl"),e=o.calcRightWidth();o.lastSpaceForRight=i})},e.prototype.updateButtons=function(){var e=!this.builder.isEditingLocked();this.settingsMenu.setEnabled(e),this.showPreviewButton.setEnabled(e),this.saveMenu&&this.saveMenu.setEnabled(e),this.templateMenu&&this.templateMenu.setEnabled(e),this.templateMenuMobile&&this.templateMenuMobile.setEnabled(e)},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e.prototype.onPreviewVisibilityChange=function(e){var t,i=this,o=this.builder.isComposerMode();this.previewModeSelector.setVisible(e),this.templateMenu.setVisible(!e&&!o),this.templateMenuMobile.setVisible(!e&&!o),this.settingsMenu.setVisible(!e),this.domainsButton&&this.domainsButton.setVisible(!e),this.designerHelpButton&&this.designerHelpButton.setVisible(!e),[this.helpChatButton,this.helpChatButtonMobile].forEach(function(e){return e.setVisible(!1)}),e||o||this.builder.isHelpChatVisible().then(function(e){(null==e?void 0:e.visible)&&(e.enabled?[i.helpChatButton,i.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,D.__)("Ask a Question")+" ("+(0,D.__)("AI")+")").setEnabled(!0).onClick(function(){i.builder.showHelpChatDialog()})}):[i.helpChatButton,i.helpChatButtonMobile].forEach(function(e){return e.setTooltip((0,D.__)("Ask administrator to enable this feature")).setEnabled(!1).onClick(function(){})}),[i.helpChatButton,i.helpChatButtonMobile].forEach(function(e){return e.setVisible(!0)}))}),this.mobileExtrasMenu.setVisible(!e),this.shareButton&&this.shareButton.setVisible(!e),this.helpButton.setVisible(!e&&this.builder.isHelpAvailable()&&!o),this.helpButtonMobile.setVisible(!e&&this.builder.isHelpAvailable()&&!o),this.undoButton.setVisible(!e),this.redoButton.setVisible(!e),this.showPreviewButton.setVisible(!e&&!o),this.hidePreviewButton.setVisible(e),this.languagesMenu.setVisible(!e),this.saveMenu&&this.saveMenu.setVisible(!e),null===(t=this.signUpButton)||void 0===t||t.setVisible(!e)},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.getElem=function(){return this.elem},e.prototype.getHidePreviewButton=function(){return this.hidePreviewButton},e.prototype.getButtonByFunction=function(e){var t=e.split("-");return"config"===t[0]?1<t.length?this.settingsMenu.getButtonByFunction(t[1]):this.settingsMenu:"change"===t[0]?1<t.length?this.templateMenu.getButtonByFunction(t[1]):this.templateMenu:this.functionButtonMap.hasOwnProperty(e)?this.functionButtonMap[e]:null},e.prototype.addToolbarButton=function(){this.customButtonsGroup||(this.customButtonsGroup=new m.SPDefToolbarGroup,this.right.append(this.customButtonsGroup.getElem().addClass("custom-buttons")));var e=new v.SPDefMenuItem(null,null);return this.customButtonsGroup.addItem(e),e},e.prototype.removeToolbarButton=function(e){this.customButtonsGroup&&(this.customButtonsGroup.removeItem(e),this.customButtonsGroup.getItems().length||(this.customButtonsGroup.getElem().remove(),this.customButtonsGroup=null))},e}();t.SPDefBuilderToolbar=i}),define("default_light_ui/SPDefElementsToolbar",["require","exports","default_light_ui/SPDefToolbarGroup","default_light_ui/SPDefMenuItem","default_light_ui/SPDefMenu","BuilderEvent","PluginApi/PluginTranslation"],function(e,t,c,h,m,b,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPDefElementsToolbar=void 0;var i=function(){function e(e,t){var i=this;this.groupsSizes=[],this.UIButtonSize={width:80,height:80},this.totalCollapsedGroupsWidth=0,this.mobile=!1,this.allButtons=[],this.prevUpdateRes=0,this.reUpdateTimeout=0,this.builder=e,this.elem=t;var o=$('<div class="spd-tb-full-width spd-tb-part"/>');this.elem.append(o),this.elem.append(this.bottom=$('<div class="spd-tb-bottom spd-tb-part spd-mobile-visible"/>')),this.collapseButton=new h.SPDefMenuItem("fa fa-plus",null).onClick(function(e){i.builder.hideContextMenus(),m.SPDefMenu.closeAllDropDowns(),i.setCollapsed(!i.getCollapsed())}),this.redoButton=new h.SPDefMenuItem("ico-tb-redo",null).setTooltip((0,f.__)("Redo")).onClick(function(){i.builder.historyRedo()}),this.undoButton=new h.SPDefMenuItem("ico-tb-undo",null).setTooltip((0,f.__)("Undo")).onClick(function(){i.builder.historyUndo()}),this.bottom.append((new c.SPDefToolbarGroup).addItem(this.undoButton).getElem(),(new c.SPDefToolbarGroup).addItem(this.collapseButton).getElem().addClass("button-bottom-collapse"),(new c.SPDefToolbarGroup).addItem(this.redoButton).getElem()),this.pluginButtons=new c.SPDefToolbarGroup,this.pluginButtons.setVisible(!0);var n=this;this.pluginButtons.getElem().append($("<div class='button-top-collapse spd-mobile-visible'><i class='fa fa-chevron-down'></i></div>").click(function(){n.builder.hideContextMenus(),m.SPDefMenu.closeAllDropDowns(),n.setCollapsed(!0)})),o.append(this.pluginButtons.getElem().addClass("spd-et-plugins")),this.setCollapsed(!1);var s=new m.SPDefMenu;s.setCaretVisible(!0).setInline(!0);for(var l=0,a=this.builder.getCompositionCollections();l<a.length;l++){var r=a[l];if("-"!==r.name){var u=void 0;u=new h.SPDefMenuItem(r.icon,r.name||r.id).setEnabled(!0).setPremium(r.inactive).setData(r.id).setDragable(!0),s.addItem(u),u&&(this.allButtons.push(u),u.getElem().attr("id","wb__"+r.id),u.getElem().addClass("ui-draggable"),e.bindCompositionButton({id:r.id,name:r.name,icon:r.icon,elem:u.getElem()},function(){i.mobile&&i.setCollapsed(!0),m.SPDefMenu.closeAllDropDowns()},function(){i.mobile&&i.setCollapsed(!0)},function(){i.mobile&&i.setCollapsed(!0),m.SPDefMenu.closeAllDropDowns()}))}}var d=s.getElem().find(".spd-dd-item-container").detach(),p=$('<div class="cont-c"></div>').append(d);s.getElem().find(".spd-dd-scroll").append(p),this.pluginButtons.addItem(s),s.setInline(!0),s.getElem().offset(),this.setCollapsed(!0),s.setEnabled(!e.isEditingLocked()),$(window).on("resize orientationchange",function(){i.update()}),this.update(),this.elem.on("touchstart touchmove touchend touchcancel",function(e){i.builder.hideContextMenus()}).on("mousedown mouseover",function(e){i.builder.hideContextMenus()}).on("click",function(e){e.ctrlKey||i.builder.unselectAll()}),b.GlobalEvents.on("history.changed",function(){i.onHistoryChange()}),b.GlobalEvents.on("builder.editing.changed",function(){i.updateButtons(),i.onHistoryChange()}),this.onHistoryChange(),this.updateButtons()}return e.prototype.getElem=function(){return this.elem},e.prototype.updateButtons=function(){var e=this.builder.isEditingLocked();this.collapseButton.setEnabled(!e);for(var t=0,i=this.allButtons;t<i.length;t++){i[t].setLocked(e)}return this},e.prototype.update=function(){var e,t=this,i=!1,o=$(window).width();o!==this.prevUpdateRes&&(i=!0),this.prevUpdateRes=o;for(var n=this.pluginButtons.getItems(),s=this.pluginButtons.getElem().find(".spd-dropdown"),l=s?Math.floor(s.outerHeight(!0)/(this.UIButtonSize.height?this.UIButtonSize.height:80)):1,a=0,r=n.length;a<r;a++){var u=1==l;(e=n[a]).getInline()&&e.getOneRow()===u||(i=!0,e.setInline(!0),e.setOneRow(u))}return 3<l||o<1100?this.mobile||(i=!0,this.pluginButtons.getElem().addClass("mobile"),this.mobile=!0):this.mobile&&(i=!0,this.pluginButtons.getElem().removeClass("mobile"),this.mobile=!1),i&&(this.reUpdateTimeout&&clearTimeout(this.reUpdateTimeout),this.reUpdateTimeout=setTimeout(function(){t.reUpdateTimeout=0,t.update()},16)),this},e.prototype.setVisible=function(e){return e?this.elem.removeClass("hidden"):this.elem.addClass("hidden"),this},e.prototype.setCollapsed=function(e){return e?(this.elem.addClass("spd-collapsed"),this.elem.parents("body").find(".spd-tb-bottom").addClass("spd-collapsed")):(this.elem.removeClass("spd-collapsed"),this.elem.parents("body").find(".spd-tb-bottom").removeClass("spd-collapsed")),e||this.update(),this},e.prototype.getCollapsed=function(){return this.elem.is(".spd-collapsed")},e.prototype.getPluginButtonAndGroup=function(e){for(var t=0,i=this.pluginButtons.getItems();t<i.length;t++){var o=i[t];if(o instanceof m.SPDefMenu)for(var n=0,s=o.getItems();n<s.length;n++){var l=s[n];if(l instanceof h.SPDefMenuItem)if(e===l.getData()||e===l.name||("Layout"===l.name||l.name===(0,f.__)("Layout"))&&"LayoutElement"===e||("Text"===l.name||l.name===(0,f.__)("Text"))&&"TextArea"===e||("Media"===l.name||l.name===(0,f.__)("Media"))&&"Youtube"===e||("Maps"===l.name||l.name===(0,f.__)("Maps"))&&"GoogleMaps"===e||l.name===(0,f.__)("Picture")&&"Picture"===e||l.name===(0,f.__)("Gallery")&&"Gallery"===e||l.name===(0,f.__)("Shape")&&"Shape"===e||l.name===(0,f.__)("Line")&&"Line"===e||l.name===(0,f.__)("Button")&&"Button"===e||l.name===(0,f.__)("Form")&&"Form"===e||l.name===(0,f.__)("Menu")&&"Menu"===e||l.name===(0,f.__)("Commerce")&&"StoreCart"===e||l.name===(0,f.__)("Commerce")&&"Store"===e||l.name===(0,f.__)("Languages")&&"Languages"===e)return{group:o,button:l}}}return null},e.prototype.onHistoryChange=function(){this.undoButton.setEnabled(this.builder.isHistoryUndoAvailable()),this.redoButton.setEnabled(this.builder.isHistoryRedoAvailable())},e.prototype.getHeight=function(){return this.pluginButtons.getElem().outerHeight()},e}();t.SPDefElementsToolbar=i}),define("default_light_ui/SPDefUI",["require","exports","PluginApi/UIManager","BuilderEvent","default_light_ui/SPDefBuilderToolbar","default_light_ui/SPDefElementsToolbar","PluginApi/PluginResourceLoader","PluginApi/PluginTranslation","default_light_ui/SPDefBuilderNotification","HelpSystem/Tooltip","default_light_ui/SPDefMenu"],function(e,t,i,u,d,p,c,h,m,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(r){function e(o){var n=r.call(this,o)||this;n.visible=!0,n.isPreviewOpen=!1,n.builder=o;var s=$(document.body),l=new c.PluginResourceLoader(pluginData),a="main.min.css?"+PluginWrapper._config.fileInfo["main.min.css"].time;return l.loadResources(["fonts.css",a,"main.html","translations.json"],function(e){var t=n.builder.getLanguage();if(t&&e["translations.json"].data&&"object"==typeof e["translations.json"].data&&e["translations.json"].data.hasOwnProperty(t.locale)&&(0,h.extendTranslations)(e["translations.json"].data[t.locale]),e["fonts.css"].data&&l.addRawStyleSheet(e["fonts.css"].data),e[a].data&&l.addRawStyleSheet(e[a].data),pluginData.customConfiguration){var i=[];pluginData.customConfiguration.hasOwnProperty("controlToolbarBackgroundColor")&&(i.push("#builder_toolbar { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; }"),i.push(".preview-mode-selector .spd-menu-node .spd-menu-node { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),i.push(".preview-mode-selector .spd-menu-node .spd-menu-node.active { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),i.push(".preview-mode-selector .spd-menu-node .spd-menu-node.disabled { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+" ! important; }"),i.push(".modal-dialog.wb-tpl-dialog .modal-header { background-color: "+pluginData.customConfiguration.controlToolbarBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("controlToolbarLineColor")&&(i.push(".spd-tb-part>.spd-tb-group:not(:last-child):not(.no-border):after { background-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }"),i.push(".preview-mode-selector .spd-menu-node .spd-menu-node:not(:last-of-type):after { background-color: "+pluginData.customConfiguration.controlToolbarLineColor+"; }")),pluginData.customConfiguration.hasOwnProperty("elementToolbarBackgroundColor")&&(i.push(".spd-menu-node.spd-dd-inline>.spd-dropdown>.spd-dd-scroll>.cont-c>.spd-dd-item-container { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),i.push(".spd-menu-node:not(.spd-dd-inline).spd-over { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+" ! important; }"),i.push(".spd-menu-node:not(.spd-dd-inline)>.spd-dropdown>.spd-dd-scroll { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),i.push(".spd-page-selector { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),i.push(".spd-tb-part>.spd-tb-group:not(.no-hover):hover { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+"; }"),i.push(".preview-mode-selector .spd-menu-node .spd-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.elementToolbarBackgroundColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("elementToolbarLineColor")&&(i.push("#elements_toolbar .spd-et-plugins { border-bottom-color: "+pluginData.customConfiguration.elementToolbarLineColor+"; }"),i.push("#elements_toolbar .spd-et-plugins .spd-menu-node.spd-dd-inline .spd-dropdown-separator { background-color: "+pluginData.customConfiguration.elementToolbarLineColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonTextColor")&&(i.push(".spd-menu-node.spd-publish-menu>.spd-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push(".spd-menu-node.spd-publish-menu .spd-dropdown .spd-dd-scroll .spd-mn-content { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push("#builder_toolbar .spd-publish-menu .wb_badge_help { color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; border-color: "+pluginData.customConfiguration.publishButtonTextColor+" ! important; }"),i.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header, .modal-dialog:not(.wb-tpl-dialog) .modal-header .close { color: "+pluginData.customConfiguration.publishButtonTextColor+"; }"),i.push(".spd-menu-node.spd-publish-menu>.spd-mn-content .caret-box { border-left-color: "+pluginData.customConfiguration.publishButtonTextColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonBackgroundColor")&&(i.push(".spd-menu-node.spd-publish-menu>.spd-mn-content { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+" ! important; }"),i.push(".modal-dialog:not(.wb-tpl-dialog) .modal-header { background-color: "+pluginData.customConfiguration.publishButtonBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundColor")&&(i.push(".spd-menu-node.spd-publish-menu .spd-dropdown .spd-dd-scroll { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }"),i.push(".spd-menu-node.spd-publish-menu:hover .caret-box { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundColor+"; }")),pluginData.customConfiguration.hasOwnProperty("publishButtonDropdownBackgroundHoverColor")&&i.push(".spd-menu-node.spd-publish-menu .spd-dropdown .spd-dd-scroll .spd-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.publishButtonDropdownBackgroundHoverColor+" ! important; }"),pluginData.customConfiguration.hasOwnProperty("normalItemColor")&&(i.push(".spdrk-selected-page-name { color: "+pluginData.customConfiguration.normalItemColor+"; }"),i.push(".spd-menu-node>.spd-mn-content { color: "+pluginData.customConfiguration.normalItemColor+"; }"),i.push("#elements_toolbar .spd-et-plugins .spd-menu-node.ui-draggable>.spd-mn-content { color: "+pluginData.customConfiguration.normalItemColor+"; }"),i.push("#elements_toolbar .spd-menu-node>.spd-mn-content>.spd-mn-text { color: "+pluginData.customConfiguration.normalItemColor+"; }"),i.push("#builder_toolbar .spd-menu-node .wb_badge_help { color: "+pluginData.customConfiguration.normalItemColor+"; border-color: "+pluginData.customConfiguration.normalItemColor+"; }"),i.push(".modal-dialog.wb-tpl-dialog .modal-header, .modal-dialog.wb-tpl-dialog .modal-header .close { color: "+pluginData.customConfiguration.normalItemColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("activeItemColor")&&(i.push(".spd-menu-node.active>.spd-mn-content { color: "+pluginData.customConfiguration.activeItemColor+"; }"),i.push("#elements_toolbar .spd-et-plugins .spd-menu-node.active.ui-draggable>.spd-mn-content { color: "+pluginData.customConfiguration.activeItemColor+"; }"),i.push("#elements_toolbar .spd-menu-node.active>.spd-mn-content>.spd-mn-text { color: "+pluginData.customConfiguration.activeItemColor+"; }"),i.push(".spd-menu-node:not(.spd-dd-inline)>.spd-dropdown>.spd-dd-scroll>.spd-dd-item-container>.spd-menu-node.active .spd-mn-text, .spd-menu-node:not(.spd-dd-inline)>.spd-dropdown>.spd-dd-scroll>.spd-dd-item-container>.spd-menu-node.active .ico-tb-i { color: "+pluginData.customConfiguration.activeItemColor+"; }"),i.push("#builder_toolbar .spd-menu-node.active>.spd-mn-content .wb_badge_help { color: "+pluginData.customConfiguration.activeItemColor+"; border-color: "+pluginData.customConfiguration.activeItemColor+"; }"),i.push(".spd-switch-input:checked+.spd-switch-label:after { background-color: "+pluginData.customConfiguration.activeItemColor+" ! important; }")),pluginData.customConfiguration.hasOwnProperty("disabledItemOpacity")&&i.push(".spd-menu-node.disabled>.spd-mn-content { opacity: "+(pluginData.customConfiguration.disabledItemOpacity/100).toFixed(3)+"; }"),pluginData.customConfiguration.hasOwnProperty("hideTextUnderIcons")&&"1"===pluginData.customConfiguration.hideTextUnderIcons&&(i.push("#elements_toolbar .spd-menu-node>.spd-mn-content>.spd-mn-text { display: none; }"),i.push("#elements_toolbar .spd-et-plugins .spd-menu-node.ui-draggable>.spd-mn-content>.ico-tb-i { margin-bottom: 0; }")),pluginData.customConfiguration.hasOwnProperty("hoverItemColor")&&(i.push(".spd-menu-node:not(.disabled):hover>.spd-mn-content { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),i.push("#elements_toolbar .spd-et-plugins .spd-menu-node:not(.disabled):hover.ui-draggable>.spd-mn-content { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),i.push("#elements_toolbar .spd-menu-node:not(.disabled):hover>.spd-mn-content>.spd-mn-text { color: "+pluginData.customConfiguration.hoverItemColor+"; }"),i.push("#builder_toolbar .spd-menu-node:not(.disabled):hover>.spd-mn-content .wb_badge_help { color: "+pluginData.customConfiguration.hoverItemColor+"; border-color: "+pluginData.customConfiguration.hoverItemColor+"; }")),pluginData.customConfiguration.hasOwnProperty("hoverItemBackgroundColor")&&(i.push("#elements_toolbar .spd-et-plugins .spd-menu-node.ui-draggable:not(.disabled):hover, #elements_toolbar .spd-et-plugins .spd-menu-node.ui-draggable:not(.disabled):focus, #elements_toolbar .spd-et-plugins .spd-menu-node.ui-draggable:not(.disabled):active { background-color: "+pluginData.customConfiguration.hoverItemBackgroundColor+"; }"),i.push(".spd-menu-node:not(.spd-dd-inline)>.spd-dropdown>.spd-dd-scroll>.spd-dd-item-container>.spd-menu-node:not(.disabled):hover { background-color: "+pluginData.customConfiguration.hoverItemBackgroundColor+"; }")),l.addRawStyleSheet(i.join("\n"))}e["main.html"].data&&s.append(e["main.html"].data),n.builderToolbar=new d.SPDefBuilderToolbar(o,$("#builder_toolbar")),n.elementsToolbar=new p.SPDefElementsToolbar(o,$("#elements_toolbar")),n.builderNotification=new m.SPDefBuilderNotification(o,$("#builder_notification")),n.setVisible(n.visible),n.builder.init($("#builder_canvas")),setTimeout(function(){n.builderToolbar&&n.builderToolbar.update(),n.elementsToolbar&&n.elementsToolbar.update()},600)}),u.GlobalEvents.on("preview.show",function(){n.isPreviewOpen=!0,n.elementsToolbar&&n.elementsToolbar.setVisible(!1),s.addClass("preview-mode")}),u.GlobalEvents.on("preview.hide",function(){n.isPreviewOpen=!1,n.elementsToolbar&&n.elementsToolbar.setVisible(n.visible),s.removeClass("preview-mode")}),o.isAdminMode()&&$("body").addClass("admin-mode"),n}return __extends(e,r),e.prototype.lookupUIElement=function(e,t){var i=r.prototype.lookupUIElement.call(this,e,t);if(!i)switch(e){case"control":if(!this.builderToolbar)break;var o=this.builderToolbar.getButtonByFunction(t);o&&(i=new a.ScenarioStepSubject(o.getElem(),null,10));break;case"plugin":if(this.elementsToolbar){var n=this.elementsToolbar.getPluginButtonAndGroup(t);if(n){this.elementsToolbar.setCollapsed(!1);var s=n.group,l=n.button;s.setOpen(!0),i=new a.ScenarioStepSubject(l.getElem(),null,10)}else i=new a.ScenarioStepSubject(this.elementsToolbar.getElem(),null,10)}break;case"preview":if(!this.builderToolbar)break;"close"===t&&(i=new a.ScenarioStepSubject(this.builderToolbar.getHidePreviewButton().getElem(),null,10))}return i},e.prototype.getToolbarHeight=function(){return(this.builderToolbar?this.builderToolbar.getElem().outerHeight():0)+(this.elementsToolbar?this.elementsToolbar.getHeight():0)},e.prototype.closeAll=function(){r.prototype.closeAll.call(this),o.SPDefMenu.closeAllDropDowns(),this.elementsToolbar&&this.elementsToolbar.mobile&&this.elementsToolbar.setCollapsed(!0)},e.prototype.setVisible=function(e){var t,i,o;this.visible=e,null===(t=this.elementsToolbar)||void 0===t||t.setVisible(e&&!this.isPreviewOpen),null===(i=this.builderToolbar)||void 0===i||i.setVisible(e),null===(o=this.builderNotification)||void 0===o||o.setVisible(e&&!this.isPreviewOpen)},e.prototype.addToolbarButton=function(){var e;return null===(e=this.builderToolbar)||void 0===e?void 0:e.addToolbarButton()},e.prototype.removeToolbarButton=function(e){var t;null===(t=this.builderToolbar)||void 0===t||t.removeToolbarButton(e)},e}(i.UIManager);(0,i.registerUI)(pluginData.id,n)});require(["default_light_ui\/SPDefUI"], function(){});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"gplus_like","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/gplus_like","pluginUri":"plugins\/gplus_like","customConfiguration":null};
PluginWrapper._config.id = 'gplus_like';
PluginWrapper._config.baseUri = "plugins\/gplus_like";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/gplus_like\/main.png";
PluginWrapper._config.template = "<div id=\"{{id}}_gp_plus_one\"><\/div>\n{{#isPublished}}\n<script type=\"text\/javascript\">\n\twindow.___gcfg = {parsetags: 'explicit'};\n<\/script>\n<script src=\"https:\/\/apis.google.com\/js\/platform.js\" type=\"text\/javascript\"><\/script>\n{{\/isPublished}}\n<script type=\"text\/javascript\">\n\tif (window.gapi) {\n\t\twindow.gapi.plusone.render('{{id}}_gp_plus_one', {\n\t\t\tsize: '{{content.size}}',\n\t\t\tannotation: '{{content.annotation}}',\n\t\t\twidth: '{{width}}'\n\t\t});\n\t}\n<\/script>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('gplus_like', {
	name: 'G+',
	noButton: true,
	element: {
		minSize: {width: 24, height: 20},
		defaultSize: {width: 300, height: 24},
		resizable: true
	},
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Size')},								
						{type: 'RadioBox', id: 'sizeSmall', label: __('Small'), group: 'size'},
						{type: 'RadioBox', id: 'sizeMedium', label: __('Medium'), group: 'size'},
						{type: 'RadioBox', id: 'sizeStandard', label: __('Standard'), group: 'size'},
						{type: 'RadioBox', id: 'sizeTall', label: __('Tall'), group: 'size'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Annotation')},								
						{type: 'RadioBox', id: 'annInline', label: __('Inline'), group: 'ann'},
						{type: 'RadioBox', id: 'annBubble', label: __('Buble'), group: 'ann'},
						{type: 'RadioBox', id: 'annNone', label: __('None'), group: 'ann'}
					]}
				]}
			]}
		]
	},
	
	pluginScoped: {
		scriptLoaded: false,
		scriptReady: false,
		listeners: [],
		addListener: function(inst, func) {
			if (this.scriptReady) {
				func.call(inst);
			} else {
				this.listeners.push({inst: inst, func: func});
			}
			if (!this.scriptLoaded) {
				this.scriptLoaded = true;
				var self = this;
				$.getScript('https://apis.google.com/js/platform.js', function() {
					self.scriptReady = true;
					for (var i = 0; i < self.listeners.length; i++) {
						self.listeners[i].func.call(self.listeners[i].inst);
					}
				});
			}
		}
	},
	resizeTimeout: null,

	resizeAction: function(data, elem) {
		if (data.content.annotation !== 'inline') return;
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function() {
				self.resizeTimeout = null;
				self.updateElement();
			}, 2000);
		}
	},
	openAction: function(fields, data, elem) {
		fields.sizeSmall.setValue(data.content.size === 'small');
		fields.sizeMedium.setValue(data.content.size === 'medium');
		fields.sizeStandard.setValue(data.content.size === 'standard');
		fields.sizeTall.setValue(data.content.size === 'tall');
		
		fields.annInline.setValue(data.content.annotation === 'inline');
		fields.annBubble.setValue(data.content.annotation === 'bubble');
		fields.annNone.setValue(data.content.annotation === 'none');
	},
	applyAction: function(fields, data, elem) {
		if (fields.sizeSmall.getValue()) data.content.size = 'small';
		if (fields.sizeMedium.getValue()) data.content.size = 'medium';
		if (fields.sizeStandard.getValue()) data.content.size = 'standard';
		if (fields.sizeTall.getValue()) data.content.size = 'tall';
		
		if (fields.annInline.getValue()) data.content.annotation = 'inline';
		if (fields.annBubble.getValue()) data.content.annotation = 'bubble';
		if (fields.annNone.getValue()) data.content.annotation = 'none';
		var w = null, h = 24;
		if (data.content.size === 'small') {
			if (data.content.annotation === 'none') w = 24;
			if (data.content.annotation === 'bubble') w = 70;
			h = 15;
		} else if (data.content.size === 'medium') {
			if (data.content.annotation === 'none') w = 32;
			if (data.content.annotation === 'bubble') w = 90;
			h = 20;
		} else if (data.content.size === 'standard') {
			if (data.content.annotation === 'none') w = 38;
			if (data.content.annotation === 'bubble') w = 106;
			h = 24;
		} else if (data.content.size === 'tall') {	
			if (data.content.annotation === 'inline') {
				w = null; h = 20;
			} else {
				w = 50;
			}
			if (data.content.annotation === 'none') h = 20;
			if (data.content.annotation === 'bubble') h = 60;
		}
		this.setSize(w, h);
	},
	loadAction: function(data) {
		if (!data.content.size) data.content.size = 'standard';
		if (!data.content.annotation) data.content.annotation = 'inline';
	},
	loadedAction: function(data, elem) {
		window.___gcfg = {parsetags: 'explicit'};
		this.pluginScoped.addListener(this, function() {
			window.gapi.plusone.render(data.id + '_gp_plus_one', {
				size: data.content.size,
				annotation: data.content.annotation,
				width: data.width
			});
		});		
	}
	
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"stripe","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/stripe","pluginUri":"plugins\/stripe","customConfiguration":null};
PluginWrapper._config.id = 'stripe';
PluginWrapper._config.baseUri = "plugins\/stripe";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/stripe\/main.png";
PluginWrapper._config.template = "{{^isPublished}}\n{{{content.paymentGatewayButton}}}\n{{\/isPublished}}\n{{#isPublished}}\n<form action=\"\" method=\"post\" data-gateway-id=\"Stripe\" id=\"{{id}}_form\" style=\"width: 100%; height: 100%;\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"successUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\n\t<input type=\"hidden\" name=\"description2\" value=\"{{content.description2}}\" \/>\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n{{{requireService}}}\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/stripe/main.php';
PluginWrapper._config.active = true;
var Globals = {
	_settingsContent: null,
	_settingsDialog: null,
	getSettingsContent: function() {
		if (!Globals._settingsContent) {
			var base_url = 'http://' + wb_builder.siteDomain + '/';
			var content = $('<div>').append('<p><strong>Page URL:</strong> <a href="https://stripe.com/" target="_blank">https://stripe.com/</a></p>'
					+ '<p><strong>Webhook endpoint URL:</strong><br />'
					+ '<pre>' + base_url + '0/store-callback/Stripe' + '</pre></p>'
					+ '<p>Add event types "checkout.session.completed", "checkout.session.expired", "payment_intent.succeeded", "payment_intent.payment_failed", "payment_intent.canceled", "charge.refunded" for webhook endpoint.</p>');
			Globals._settingsContent = content.html();
		}
		return Globals._settingsContent;
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#32325d',
			button_border: {
				color: '#337fbd',
				style: 'none',
				weight: 1,
				css: { border: '1px none #337fbd' },
				cssRaw: 'border: 1px none #337fbd'
			},
			logo: 'stripe_white.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#9d9dbd'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'stripe_color.svg', name: 'coloured'},
			{id: 'stripe_black.svg', name: 'black'},
			{id: 'stripe_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Stripe',
	id: 'stripe',
	pageUrl: 'https://stripe.com/',
	keyField: __('Publishable Key'),
	keyFieldId: 'publishable_key',
	keyField2: __('Secret Key'),
	keyField2Id: 'secret_key',
	keyField3: __('Webhook Secret'),
	keyField3Id: 'webhook_secret',
	titleFieldId: 'label',
	nameFieldId: 'description,description2',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['publishable_key', 'secret_key', 'webhook_secret'],
	useStylesInStoreCart: true,
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'stripe', true),
	settingsTabDef: Globals.getSettingsContent(),
	defaultStyles: Globals.getDefaultStyles(true),
	logos: Globals.getLogosList(),
	defaultLogo: 'stripe_black.svg',
});
PluginWrapper.registerPlugin('stripe', {
	name: 'Stripe',
	element: {
		minSize: {width: 68, height: 34},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'publishable_key', type: 'StripePublishableKey', helpText: __('Your publishable key'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.publishable_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
				return opts;
			},
			get: function(data) { return data.content.publishable_key; },
			set: function(value, data) {
				data.content.publishable_key = value;
			}
		},
		{id: 'secret_key', type: 'StripeSecretKey', helpText: __('Your secret key'),
			get: function(data) { return data.content.secret_key; },
			set: function(value, data) {
				data.content.secret_key = value;
			}
		},
		{id: 'description', type: 'StripeDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'StripeAmount',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'StripeCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'description2', type: 'StripeDescription2',
			get: function(data) { return data.content.description2; },
			set: function(value, data) {
				data.content.description2 = value;
			}
		},
	],Globals.getLogosList(), 'stripe'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'VerticalLayout', spacing: 15, children: [
					{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Publishable Key'), helpText: __('Your publishable key'), uiComponentOptions: function(data, opts) {
								opts.validateText = data.content.publishable_key ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('API Key')));
								return opts;
							}},
							{type: 'TextField', id: 'publishable_key'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Secret Key'), helpText: __('Your secret key')},
							{type: 'TextField', id: 'secret_key'}
						]}
					]},
					{type: 'HorizontalLayout', columnWeights: [6, 3, 3], css: {marginTop: 15}, children: [
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Item Name')},
							{type: 'TextField', id: 'description'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Amount')},
							{type: 'TextField', id: 'amount'}
						]},
						{type: 'VerticalLayout', children: [
							{type: 'Label', text: __('Currency')},
							{type: 'DropdownBox', id: 'currency', options: [
								{id: '#USD', name: 'USD', value: 'USD'},
								{id: '#EUR', name: 'EUR', value: 'EUR'},
								{id: '#AED', name: 'AED', value: 'AED'},
								{id: '#AFN', name: 'AFN', value: 'AFN'},
								{id: '#ALL', name: 'ALL', value: 'ALL'},
								{id: '#AMD', name: 'AMD', value: 'AMD'},
								{id: '#ANG', name: 'ANG', value: 'ANG'},
								{id: '#AOA', name: 'AOA', value: 'AOA'},
								{id: '#AUD', name: 'AUD', value: 'AUD'},
								{id: '#AWG', name: 'AWG', value: 'AWG'},
								{id: '#AZN', name: 'AZN', value: 'AZN'},
								{id: '#BAM', name: 'BAM', value: 'BAM'},
								{id: '#BBD', name: 'BBD', value: 'BBD'},
								{id: '#BDT', name: 'BDT', value: 'BDT'},
								{id: '#BGN', name: 'BGN', value: 'BGN'},
								{id: '#BIF', name: 'BIF', value: 'BIF'},
								{id: '#BMD', name: 'BMD', value: 'BMD'},
								{id: '#BND', name: 'BND', value: 'BND'},
								{id: '#BOB', name: 'BOB', value: 'BOB'},
								{id: '#BRL', name: 'BRL', value: 'BRL'},
								{id: '#BSD', name: 'BSD', value: 'BSD'},
								{id: '#BWP', name: 'BWP', value: 'BWP'},
								{id: '#BZD', name: 'BZD', value: 'BZD'},
								{id: '#CAD', name: 'CAD', value: 'CAD'},
								{id: '#CDF', name: 'CDF', value: 'CDF'},
								{id: '#CHF', name: 'CHF', value: 'CHF'},
								{id: '#CLP', name: 'CLP', value: 'CLP'},
								{id: '#CNY', name: 'CNY', value: 'CNY'},
								{id: '#COP', name: 'COP', value: 'COP'},
								{id: '#CRC', name: 'CRC', value: 'CRC'},
								{id: '#CVE', name: 'CVE', value: 'CVE'},
								{id: '#CZK', name: 'CZK', value: 'CZK'},
								{id: '#DJF', name: 'DJF', value: 'DJF'},
								{id: '#DKK', name: 'DKK', value: 'DKK'},
								{id: '#DOP', name: 'DOP', value: 'DOP'},
								{id: '#DZD', name: 'DZD', value: 'DZD'},
								{id: '#EGP', name: 'EGP', value: 'EGP'},
								{id: '#ETB', name: 'ETB', value: 'ETB'},
								{id: '#FJD', name: 'FJD', value: 'FJD'},
								{id: '#FKP', name: 'FKP', value: 'FKP'},
								{id: '#GBP', name: 'GBP', value: 'GBP'},
								{id: '#GEL', name: 'GEL', value: 'GEL'},
								{id: '#GIP', name: 'GIP', value: 'GIP'},
								{id: '#GMD', name: 'GMD', value: 'GMD'},
								{id: '#GNF', name: 'GNF', value: 'GNF'},
								{id: '#GTQ', name: 'GTQ', value: 'GTQ'},
								{id: '#GYD', name: 'GYD', value: 'GYD'},
								{id: '#HKD', name: 'HKD', value: 'HKD'},
								{id: '#HNL', name: 'HNL', value: 'HNL'},
								{id: '#HRK', name: 'HRK', value: 'HRK'},
								{id: '#HTG', name: 'HTG', value: 'HTG'},
								{id: '#HUF', name: 'HUF', value: 'HUF'},
								{id: '#IDR', name: 'IDR', value: 'IDR'},
								{id: '#ILS', name: 'ILS', value: 'ILS'},
								{id: '#INR', name: 'INR', value: 'INR'},
								{id: '#ISK', name: 'ISK', value: 'ISK'},
								{id: '#JMD', name: 'JMD', value: 'JMD'},
								{id: '#JPY', name: 'JPY', value: 'JPY'},
								{id: '#KES', name: 'KES', value: 'KES'},
								{id: '#KGS', name: 'KGS', value: 'KGS'},
								{id: '#KHR', name: 'KHR', value: 'KHR'},
								{id: '#KMF', name: 'KMF', value: 'KMF'},
								{id: '#KRW', name: 'KRW', value: 'KRW'},
								{id: '#KYD', name: 'KYD', value: 'KYD'},
								{id: '#KZT', name: 'KZT', value: 'KZT'},
								{id: '#LAK', name: 'LAK', value: 'LAK'},
								{id: '#LBP', name: 'LBP', value: 'LBP'},
								{id: '#LKR', name: 'LKR', value: 'LKR'},
								{id: '#LRD', name: 'LRD', value: 'LRD'},
								{id: '#LSL', name: 'LSL', value: 'LSL'},
								{id: '#MAD', name: 'MAD', value: 'MAD'},
								{id: '#MDL', name: 'MDL', value: 'MDL'},
								{id: '#MGA', name: 'MGA', value: 'MGA'},
								{id: '#MKD', name: 'MKD', value: 'MKD'},
								{id: '#MMK', name: 'MMK', value: 'MMK'},
								{id: '#MNT', name: 'MNT', value: 'MNT'},
								{id: '#MOP', name: 'MOP', value: 'MOP'},
								{id: '#MRO', name: 'MRO', value: 'MRO'},
								{id: '#MUR', name: 'MUR', value: 'MUR'},
								{id: '#MVR', name: 'MVR', value: 'MVR'},
								{id: '#MWK', name: 'MWK', value: 'MWK'},
								{id: '#MXN', name: 'MXN', value: 'MXN'},
								{id: '#MYR', name: 'MYR', value: 'MYR'},
								{id: '#MZN', name: 'MZN', value: 'MZN'},
								{id: '#NAD', name: 'NAD', value: 'NAD'},
								{id: '#NGN', name: 'NGN', value: 'NGN'},
								{id: '#NIO', name: 'NIO', value: 'NIO'},
								{id: '#NOK', name: 'NOK', value: 'NOK'},
								{id: '#NPR', name: 'NPR', value: 'NPR'},
								{id: '#NZD', name: 'NZD', value: 'NZD'},
								{id: '#PAB', name: 'PAB', value: 'PAB'},
								{id: '#PEN', name: 'PEN', value: 'PEN'},
								{id: '#PGK', name: 'PGK', value: 'PGK'},
								{id: '#PHP', name: 'PHP', value: 'PHP'},
								{id: '#PKR', name: 'PKR', value: 'PKR'},
								{id: '#PLN', name: 'PLN', value: 'PLN'},
								{id: '#PYG', name: 'PYG', value: 'PYG'},
								{id: '#QAR', name: 'QAR', value: 'QAR'},
								{id: '#RON', name: 'RON', value: 'RON'},
								{id: '#RSD', name: 'RSD', value: 'RSD'},
								{id: '#RUB', name: 'RUB', value: 'RUB'},
								{id: '#RWF', name: 'RWF', value: 'RWF'},
								{id: '#SAR', name: 'SAR', value: 'SAR'},
								{id: '#SBD', name: 'SBD', value: 'SBD'},
								{id: '#SCR', name: 'SCR', value: 'SCR'},
								{id: '#SEK', name: 'SEK', value: 'SEK'},
								{id: '#SGD', name: 'SGD', value: 'SGD'},
								{id: '#SHP', name: 'SHP', value: 'SHP'},
								{id: '#SLL', name: 'SLL', value: 'SLL'},
								{id: '#SOS', name: 'SOS', value: 'SOS'},
								{id: '#SRD', name: 'SRD', value: 'SRD'},
								{id: '#STD', name: 'STD', value: 'STD'},
								{id: '#SVC', name: 'SVC', value: 'SVC'},
								{id: '#SZL', name: 'SZL', value: 'SZL'},
								{id: '#THB', name: 'THB', value: 'THB'},
								{id: '#TJS', name: 'TJS', value: 'TJS'},
								{id: '#TOP', name: 'TOP', value: 'TOP'},
								{id: '#TRY', name: 'TRY', value: 'TRY'},
								{id: '#TTD', name: 'TTD', value: 'TTD'},
								{id: '#TWD', name: 'TWD', value: 'TWD'},
								{id: '#TZS', name: 'TZS', value: 'TZS'},
								{id: '#UAH', name: 'UAH', value: 'UAH'},
								{id: '#UGX', name: 'UGX', value: 'UGX'},
								{id: '#UYU', name: 'UYU', value: 'UYU'},
								{id: '#UZS', name: 'UZS', value: 'UZS'},
								{id: '#VND', name: 'VND', value: 'VND'},
								{id: '#VUV', name: 'VUV', value: 'VUV'},
								{id: '#WST', name: 'WST', value: 'WST'},
								{id: '#XAF', name: 'XAF', value: 'XAF'},
								{id: '#XCD', name: 'XCD', value: 'XCD'},
								{id: '#XOF', name: 'XOF', value: 'XOF'},
								{id: '#XPF', name: 'XPF', value: 'XPF'},
								{id: '#YER', name: 'YER', value: 'YER'},
								{id: '#ZAR', name: 'ZAR', value: 'ZAR'},
								{id: '#ZMW', name: 'ZMW', value: 'ZMW'}
							]}
						]}
					]},
					{type: 'VerticalLayout', css: {marginTop: 15}, children: [
						{type: 'Label', text: __('Description')},
						{type: 'TextField', id: 'description2'}
					]}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'stripe'),
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		fields.description.setText(data.content.description);
		fields.description2.setText(data.content.description2);
		fields.amount.setText(data.content.amount);
		fields.publishable_key.setText(data.content.publishable_key);
		fields.secret_key.setText(data.content.secret_key);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		data.content.description = fields.description.getText();
		data.content.description2 = fields.description2.getText();
		data.content.amount = fields.amount.getText();
		data.content.publishable_key = fields.publishable_key.getText();
		data.content.secret_key = fields.secret_key.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['publishable_key', 'secret_key', 'webhook_secret'];
		PluginWrapper.paymentGatewayMigrateNewVars(data, {
			label: 'button_label'
		});
		if (!data.content.description)
			data.content.description = ''; // Items description
		if (!data.content.description2)
			data.content.description2 = '';
		if (!data.content.amount)
			data.content.amount = '1'; // 999
		if (!data.content.currency)
			data.content.currency = 'EUR';
		if (!data.content.publishable_key)
			data.content.publishable_key = '';
		if (!data.content.secret_key)
			data.content.secret_key = ''; // pk_test_6pRNASCoBOKtIshFeQd4XMUh
		if (['logo_black.svg', 'logo_white.svg'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'stripe_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('publishable_key');
			if (component) component.focus();
		}, 50);
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"bepaid","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/bepaid","pluginUri":"plugins\/bepaid","customConfiguration":null};
PluginWrapper._config.id = 'bepaid';
PluginWrapper._config.baseUri = "plugins\/bepaid";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/bepaid\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Bepaid\" method=\"POST\" accept-charset=\"utf-8\" {{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"redirectUrl\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n\t<input type=\"hidden\" name=\"webhookUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"orderId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"description\" value=\"{{content.description}}\" \/>\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"{{id}}_submit\" value=\"1\" \/>\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>\n";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/bepaid/main.php';
PluginWrapper._config.active = true;

var Globals = {
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ebebeb',
			button_border: {
				color: '#cccccc',
				style: 'none',
				weight: 1,
				css: { border: '0px none #cccccc' },
				cssRaw: 'border: 0px none #cccccc'
			},
			logo: 'bepaid_color2.svg',
			font_family: "Arial",
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'bepaid_color.svg', name: 'coloured'},
			{id: 'bepaid_color2.svg', name: 'coloured2'},
			{id: 'bepaid_black.svg', name: 'black'},
			{id: 'bepaid_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'bePaid',
	id: 'bepaid',
	pageUrl: 'https://bepaid.by/',
	keyFieldId: 'shop_id',
	keyField2Id: 'shop_key',
	keyField3Id: 'demo',
	keyField4Id: 'host',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,12], children: [
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Shop ID')},
			{type: 'TextField', placeholder: __('Shop ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Host')},
			{type: 'DropdownBox', id: 'key4', options: [
				{id: 'bepaid.by', name: 'bepaid.by'},
				{id: 'bepaid.tech', name: 'bepaid.tech'}
			]}
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	currencyFieldId: 'currency',
	globalVars: ['shop_id', 'shop_key', 'demo', 'host'],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'bepaid', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('bepaid', {
	name: 'bePaid',
	element: {
		minSize: {width: 162, height: 56},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'shop_id', type: 'BepaidShopId',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.shop_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop ID')));
				return opts;
			},
			get: function(data) { return data.content.shop_id; },
			set: function(value, data) {
				data.content.shop_id = value;
			}
		},
		{id: 'shop_key', type: 'BepaidShopKey',
			get: function(data) { return data.content.shop_key; },
			set: function(value, data) {
				data.content.shop_key = value;
			}
		},
		{id: 'host', type: 'BepaidHost',
			get: function(data) { return data.content.host; },
			set: function(value, data) {
				data.content.host = value;
			}
		},
		{id: 'orderdescription', type: 'BepaidOrderDescription', helpText:__('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.orderdescription; },
			set: function(value, data) {
				data.content.orderdescription = value;
			}
		},
		{id: 'amount', type: 'BepaidAmount', helpText: __("Amount to be transferred"),
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
		{id: 'currency', type: 'BepaidCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'BepaidDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'bepaid'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Shop ID'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.shop_id ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop ID')));
							return opts;
						}},
						{type: 'TextField', id: 'shop_id'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'shop_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6, 3, 3], columnWeightsSmall: [6, 3, 3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name'), helpText:__('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'orderdescription'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __("Amount to be transferred")},
						{type: 'TextField', id: 'amount'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: '#RUB', name: 'RUB', value: 'RUB'},
							{id: '#USD', name: 'USD', value: 'USD'},
							{id: '#EUR', name: 'EUR', value: 'EUR'},
							{id: '#BYN', name: 'BYN', value: 'BYN'},
							{id: '#AMD', name: 'AMD', value: 'AMD'},
							{id: '#AUD', name: 'AUD', value: 'AUD'},
							{id: '#AZN', name: 'AZN', value: 'AZN'},
							{id: '#BGN', name: 'BGN', value: 'BGN'},
							{id: '#BRL', name: 'BRL', value: 'BRL'},
							{id: '#CAD', name: 'CAD', value: 'CAD'},
							{id: '#CHF', name: 'CHF', value: 'CHF'},
							{id: '#CNY', name: 'CNY', value: 'CNY'},
							{id: '#CZK', name: 'CZK', value: 'CZK'},
							{id: '#DKK', name: 'DKK', value: 'DKK'},
							{id: '#GBP', name: 'GBP', value: 'GBP'},
							{id: '#HUF', name: 'HUF', value: 'HUF'},
							{id: '#INR', name: 'INR', value: 'INR'},
							{id: '#JPY', name: 'JPY', value: 'JPY'},
							{id: '#KGS', name: 'KGS', value: 'KGS'},
							{id: '#KRW', name: 'KRW', value: 'KRW'},
							{id: '#KZT', name: 'KZT', value: 'KZT'},
							{id: '#MDL', name: 'MDL', value: 'MDL'},
							{id: '#NOK', name: 'NOK', value: 'NOK'},
							{id: '#PLN', name: 'PLN', value: 'PLN'},
							{id: '#RON', name: 'RON', value: 'RON'},
							{id: '#SEK', name: 'SEK', value: 'SEK'},
							{id: '#SGD', name: 'SGD', value: 'SGD'},
							{id: '#TJS', name: 'TJS', value: 'TJS'},
							{id: '#TMT', name: 'TMT', value: 'TMT'},
							{id: '#TRY', name: 'TRY', value: 'TRY'},
							{id: '#UAH', name: 'UAH', value: 'UAH'},
							{id: '#UZS', name: 'UZS', value: 'UZS'},
							{id: '#ZAR', name: 'ZAR', value: 'ZAR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'bottom'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'bepaid')
		]
	},
	openAction: function(fields, data, elem) {
		fields.shop_id.setText(data.content.shop_id);
		fields.shop_key.setText(data.content.shop_key);
		fields.orderdescription.setText(data.content.orderdescription);
		fields.amount.setText(data.content.amount);
		var itm;
		itm = fields.currency.getItemById('#' + data.content.currency);
		fields.currency.selectItem(itm);
		itm = fields.host.getItemById(data.content.host);
		fields.host.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.shop_id = fields.shop_id.getText();
		data.content.shop_key = fields.shop_key.getText();
		data.content.orderdescription = fields.orderdescription.getText();
		data.content.amount = fields.amount.getText();
		var itm;
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().value;
		itm = fields.host.getSelectedItem();
		data.content.host = itm.getOriginal().value;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.shop_id) data.content.shop_id = ''; // 4225
		if (!data.content.shop_key) data.content.shop_key = ''; // 3834fbef1fe6ea024ef77f5c79ec7ff1ba710ea6241c08c2f341afda8af4c1c4
		if (!data.content.orderdescription) data.content.orderdescription = '';
		if (!data.content.amount) data.content.amount = '1';
		if (!data.content.currency) data.content.currency = 'BYN';
		if (!data.content.host) data.content.host = 'bepaid.by';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['bepaid.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'bepaid_color2.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('shop_id');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"cmi","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/cmi","pluginUri":"plugins\/cmi","customConfiguration":null};
PluginWrapper._config.id = 'cmi';
PluginWrapper._config.baseUri = "plugins\/cmi";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "<form data-gateway-id=\"Cmi\" action=\"https:\/\/testpayment.cmi.co.ma\/fim\/est3Dgate\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\n\t<input type=\"hidden\" name=\"clientid\" value=\"{{content.clientId}}\"> \n\t<input type=\"hidden\" name=\"amount\" value=\"{{content.price}}\">\n\t<input name=\"description\" value=\"{{content.itemName}}\" type=\"hidden\" \/>\n\t{{^content.store}}\n\t<input type=\"hidden\" name=\"okUrl\" value=\"\">\n\t<input type=\"hidden\" name=\"failUrl\" value=\"\">\n\t<input type=\"hidden\" name=\"oid\" value=\"{{content.itemName}}\" \/>\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"TranType\" value=\"PreAuth\">\n\t<input type=\"hidden\" name=\"currency\" value=\"504\">\n\t<input type=\"hidden\" name=\"rnd\" value=\"\">\n\t<input type=\"hidden\" name=\"storetype\" value=\"3D_PAY_HOSTING\">\n\t<input type=\"hidden\" name=\"hashAlgorithm\" value=\"ver3\">\n\t<input type=\"hidden\" name=\"lang\" value=\"en\">\n\t<input type=\"hidden\" name=\"encoding\" value=\"UTF-8\">\n\t<input type=\"hidden\" name=\"HASH\" value=\"\">\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"okUrl\" value=\"{returnUrl}\">\n\t<input type=\"hidden\" name=\"failUrl\" value=\"{cancelUrl}\">\n    <input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/cmi/main.php';
PluginWrapper._config.active = false;
require(['element/PropertyType', 'TextField' ], function (PropertyTypeModule, TextField) {

var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
var PropertyType = PropertyTypeModule.PropertyType;
var TextField = TextField.TextField;

var CmiClientId = new PropertyType("CMI/CmiClientId", PropertyTypeAccess.User, true, __('Client ID'), TextField);
var CmiShopKey = new PropertyType("CMI/CmiShopKey", PropertyTypeAccess.User, true, __('Shop Key'), TextField, null, {
    password: true
});
var CmiItemName = new PropertyType("CMI/CmiItemName", PropertyTypeAccess.User, true, __('Item Name'), TextField);
var CmiPrice = new PropertyType("CMI/CmiPrice", PropertyTypeAccess.User, true, __('Price'), TextField);


PropertyType.setSortOrder('CMI', 1);

var Globals = {
    getDefaultStyles: function(isStore) {
		var styles = {
            button_color: '#fafafa',
            button_border: {
                color: '#fff',
                style: 'solid',
                weight: 1,
                css: { border: '1px solid #fff' },
                cssRaw: 'border: 1px solid #fff'
            },
            logo: 'logo_color.svg',
            font_family: 'Arial',
            font_size: 12,
            label_color: '#949494'
		};
        return isStore ? styles : $.extend(true, styles, {
            button_label: __('Pay with %s').replace('%s', ''),
            showlogo: true,
            logo_width: 110,
            button_padding: 4
        });
    },
	getLogosList: function() {
		return [
			{id: 'logo_color.svg', name: 'coloured'},
            {id: 'logo_black.svg', name: 'black'},
		];
	}
};


ElementRegister.registerPaymentGateway({
    name: 'CMI',
    id: 'cmi',
    pageUrl: 'https://www.cmi.co.ma/',
    keyField: __('Client ID'),
    keyFieldId: 'clientId',
    keyField2: __('Shop Key'),
    keyField2Id: 'shopKey',
    keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,6], children: [
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Client ID')},
		    {type: 'TextField', placeholder: __(''), id: 'key'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Shop Key')},
		    {type: 'TextField', placeholder: __(''), id: 'key2', password: true},
        ]},
	]},
    priceFieldId: 'price',
    nameFieldId: 'itemName',
    defaultStyles: Globals.getDefaultStyles(true),
    styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'cmi', true),
    globalVars: ['clientId', 'shopKey'],
    useStylesInStoreCart: true,
    logos: Globals.getLogosList(),
    forceActive: true
});

PluginWrapper.registerPlugin('cmi', {
    name: 'CMI',
    element: {
        minSize: {width: 100, height: 50},
        defaultSize: {width: 160, height: 81},
        resizable: true
    },
    properties: PluginWrapper.paymentGatewayStylePropertiesDef([
        {id: 'clientId', type: CmiClientId,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.clientId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client ID')));
                return opts;
            },
            get: function(data) { return data.content.clientId; },
            set: function(value, data) {
                data.content.clientId = value;
            }
        },
        {id: 'shopKey', type: CmiShopKey,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.shopKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop Key')));
                return opts;
            },
            get: function(data) { return data.content.shopKey; },
            set: function(value, data) {
                data.content.shopKey = value;
            }
        },
        {id: 'itemName', type: CmiItemName,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Item Name')));
                return opts;
            },
            get: function(data) { return data.content.itemName; },
            set: function(value, data) {
                data.content.itemName = value;
            }
        },
        {id: 'price', type: CmiPrice,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                return opts;
            },
            get: function(data) { return data.content.price; },
            validate: function(value) {
                if (/^[\d.,]+$/.test(value)) {
                    return '';
                } else {
                    return (__('Incorrect format'));
                }
            },
            set: function(value, data) {
                data.content.price = value;
            }
        },
    ], Globals.getLogosList(), 'cmi'),

    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('clientId'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.clientId ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Client ID')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'clientId'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('shopKey'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.shopKey ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Shop Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'shopKey', password: true}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('itemName'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Item Name')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'itemName'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Price'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'price'}
                                ]
                            },
                        ]
                    },
                ]
            },
            PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'cmi'),
        ]
    },

    openAction: function (fields, data, elem) {
        fields.clientId.setValue(data.content.clientId);
        fields.shopKey.setValue(data.content.shopKey);
        fields.itemName.setText(data.content.itemName);
        fields.price.setValue(data.content.price);
        
        PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.clientId = fields.clientId.getValue();
        data.content.shopKey = fields.shopKey.getValue();
        data.content.itemName = fields.itemName.getText();
        data.content.price = fields.price.getValue();
        PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
    },
    loadAction: function (data) {
        data.content.__globalVars = ['clientId', 'shopKey'];
        if (!data.content.clientId)
            data.content.clientId = '';
        if (!data.content.shopKey)
            data.content.shopKey = '';
        if(!data.content.itemName)
            data.content.itemName = '';
        if(!data.content.price)
            data.content.price = '';
        if (['logo.svg'].indexOf(data.content.logo) > -1) {
            data.content.logo = 'logo_color.svg';
        }
        PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('clientId');
			if (component) component.focus();
		}, 50);
	}
});

});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"click","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/click","pluginUri":"plugins\/click","customConfiguration":null};
PluginWrapper._config.id = 'click';
PluginWrapper._config.baseUri = "plugins\/click";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/click\/main.png";
PluginWrapper._config.template = "<form data-gateway-id=\"Click\" action=\"https:\/\/my.click.uz\/pay\/\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\">\n\t<input type=\"hidden\" name=\"MERCHANT_ID\" value=\"{{content.merchantId}}\" \/>\n\t<input type=\"hidden\" name=\"MERCHANT_SERVICE_ID\" value=\"{{content.merchantServiceId}}\" \/>\n\t<input type=\"hidden\" name=\"MERCHANT_TRANS_AMOUNT\" value=\"{{content.amount}}\" \/>\n\t<input type=\"hidden\" name=\"MERCHANT_TRANS_NOTE\" value=\"{{content.description}}\" \/>\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t<input type=\"hidden\" name=\"MERCHANT_TRANS_ID\" value=\"{transactionId}\" \/>\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/click/main.php';
PluginWrapper._config.active = false;

var Globals = {
	_settingsDialog: null,
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="http://click.uz/" target="_blank">http://click.uz/</a></p>'
				+ '<p><strong>Prepare URL:</strong><br />'
				+ '<pre>' + base_url + 'store-verify/Click' + '</pre></p>'
				+ '<p><strong>Complete URL:</strong><br />'
				+ '<pre>' + base_url + 'store-callback/Click' + '</pre></p>';
	},
	getSettingsDialog: function() {
		if (!Globals._settingsDialog) {
			var dlg = new WB_Dialog(__('Settings'));
			dlg.setContent(Globals.getSettingsContent());
			dlg.removeAllButtons();
			dlg.addButton(__('Close'), function() {
				dlg.setVisible(false);
			}, false, 'btn-default');
			Globals._settingsDialog = dlg;
		}
		return Globals._settingsDialog;
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#5c5c5c',
			button_border: {
				color: '#424242',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #424242' },
				cssRaw: 'border: 1px solid #424242'
			},
			logo: 'click_color2.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#cfcfcf'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 106,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'click_color.svg', name: 'coloured-white'},
			{id: 'click_color2.svg', name: 'coloured-black'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Click',
	id: 'click',
	keyFieldId: 'merchantId',
	keyField2Id: 'merchantServiceId',
	keyField3Id: 'secretKey',
//	keyField4Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12/* ,12 */], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant ID')},
			{type: 'TextField', placeholder: __('Merchant ID'), id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Merchant Service ID')},
			{type: 'TextField', placeholder: __('Merchant Service ID'), id: 'key2'},
		]},
		{type: 'VerticalLayout', css: {marginTop: 15}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key3', password: true, css: {marginTop: 5}}
		]},/* ,
		{type: 'CheckBox', label: __('Test mode'), id: 'key4', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}} */
	]},
	titleFieldId: 'label',
	nameFieldId: 'description',
	priceFieldId: 'amount',
	globalVars: ['merchantId', 'merchantServiceId', 'secretKey'/* , 'demo' */],
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'click', true),
	settingsTabDef: Globals.getSettingsContent(),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('click', {
	name: 'Click',
	element: {
		minSize: {width: 50, height: 20},
		defaultSize: {width: 160, height: 81}
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'merchantId', type: 'ClickEvolutionMerchantId', moreInfo: function() {
				Globals.getSettingsDialog().setVisible(true);
			},
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.merchantid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
				return opts;
			},
			get: function(data) { return data.content.merchantId; },
			set: function(value, data) {
				data.content.merchantId = value;
			}
		},
		{id: 'merchantServiceId', type: 'ClickEvolutionMerchantServiceId',
			get: function(data) { return data.content.merchantServiceId; },
			set: function(value, data) {
				data.content.merchantServiceId = value;
			}
		},
		{id: 'secretKey', type: 'ClickEvolutionSecretKey',
			get: function(data) { return data.content.secretKey; },
			set: function(value, data) {
				data.content.secretKey = value;
			}
		},
		{id: 'description', type: 'ClickEvolutionDescription', helpText: __('The name of the goods. Cannot contain special symbols'),
			get: function(data) { return data.content.description; },
			set: function(value, data) {
				data.content.description = value;
			}
		},
		{id: 'amount', type: 'ClickEvolutionAmount', helpText: __('Amount to be transferred') + ', UZS',
			get: function(data) { return data.content.amount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.amount = value;
			}
		},
	], Globals.getLogosList(), 'click'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', spacing: 15, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant ID'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.merchantid ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Merchant ID')));
							return opts;
						}},
						{type: 'TextField', id: 'merchantId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Merchant Service ID')},
						{type: 'TextField', id: 'merchantServiceId'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'secretKey'}
					]}
				]},
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Product description'), helpText: __('The name of the goods. Cannot contain special symbols')},
						{type: 'TextField', id: 'description'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred') + ', UZS'},
						{type: 'TextField', id: 'amount'}
					]}
				]},
				{type: 'CustomContainer', css: {marginTop: 15}, init: function() {
					this.getElem().append('(')
							.append($('<a>').text(__('Settings'))
								.attr('href', 'javascript:void(0)')
								.on('click', function() { Globals.getSettingsDialog().setVisible(true); }))
							.append(')');
				}}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'click')
		]
	},
	openAction: function(fields, data, elem) {
		fields.merchantId.setText(data.content.merchantId);
		fields.merchantServiceId.setText(data.content.merchantServiceId);
		fields.secretKey.setText(data.content.secretKey);
		fields.description.setText(data.content.description);
		fields.amount.setText(data.content.amount);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function(fields, data, elem) {
		data.content.merchantId = fields.merchantId.getText();
		data.content.merchantServiceId = fields.merchantServiceId.getText();
		data.content.secretKey = fields.secretKey.getText();
		data.content.description = fields.description.getText();
		data.content.amount = fields.amount.getText();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.merchantId) data.content.merchantId = '';
		if (!data.content.merchantServiceId) data.content.merchantServiceId = '';
		if (!data.content.secretKey) data.content.secretKey = '';
		if (!data.content.description) data.content.description = '';
		if (!data.content.amount) data.content.amount = '1';
		if (['click.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'click_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('merchantId');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"paymentez","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/paymentez","pluginUri":"plugins\/paymentez","customConfiguration":null};
PluginWrapper._config.id = 'paymentez';
PluginWrapper._config.baseUri = "plugins\/paymentez";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "{{{content.paymentGatewayButton}}}\n{{#isPublished}}\n{{^content.store}}\n<div class=\"modal fade\" id=\"paymentezModal_{{id}}\" tabindex=\"-1\" role=\"dialog\">\n\t<div class=\"modal-dialog\" role=\"document\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\n\t\t\t\t<h4 class=\"modal-title\" id=\"myModalLabel\">Paymentez<\/h4>\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-body\">\n\t\t\t\t<form method=\"post\" action=\"\" data-gateway-id=\"Paymentez\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label style=\"display: block;\">{{\"E-mail\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n\t\t\t\t\t\t<input class=\"form-control input-sm\" type=\"email\" name=\"email\" id=\"paymentezEmail\"\/>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label style=\"display: block;\">{{\"First Name\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n\t\t\t\t\t\t<input class=\"form-control input-sm\" type=\"text\" name=\"name\" id=\"paymentezFirstName\"\/>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label style=\"display: block;\">{{\"Last Name\" | tr}}: <span style=\"color: #c00;\">*<\/span><\/label>\n\t\t\t\t\t\t<input class=\"form-control input-sm\" type=\"text\" name=\"last_name\" id=\"paymentezLastName\"\/>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/form>\n\t\t\t\t<div id=\"paymentezError_{{id}}\" style=\"color: red\"><\/div>\n\t\t\t<\/div>\n\t\t\t<div class=\"modal-footer\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{{\"Close\" | tr}}<\/button>\n\t\t\t\t<button id=\"paymentezNextBtn_{{id}}\" type=\"button\" class=\"btn btn-primary\" onclick=\"startPaymentFlow_{{id}}()\">{{\"Next\" | tr}}<\/button>\n\t\t\t<\/div>\n\n\t\t<\/div>\n\t<\/div>\n<\/div>\n{{\/content.store}}\n{{#content.store}}\n<form data-gateway-id=\"Paymentez\" id=\"paymentezForm_{{id}}\" action=\"\" method=\"post\" style=\"width: 100%; height: 100%;\">\n<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n<input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n<input type=\"hidden\" name=\"currencyCode\" value=\"{{content.currencyCode}}\" \/>\n<input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n<input type=\"hidden\" name=\"cancelUrl\" value=\"{cancelUrl}\" \/>\n<input class=\"hidden\" type=\"submit\"\/>\n<\/form>\n{{\/content.store}}\n{{{requireService}}}\n\n{{\/isPublished}}";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/paymentez/main.php';
PluginWrapper._config.active = false;
var Globals = {
	getDefaultStyles: function (isStore) {
		var styles = {
			button_color: '#fafafa',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: {border: '1px solid #cccccc'},
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'paymentez_black.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#000000'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function () {
		return [
			{id: 'paymentez_black.svg', name: 'black'},
			{id: 'paymentez_white.svg', name: 'white', backgroundColor: '#000000'},
			{id: 'paymentez_color.svg', name: 'color'}
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'Paymentez',
	id: 'paymentez',
	pageUrl: 'https://paymentez.com/',
	keyField: __('Application Code'),
	keyFieldId: 'appCode',
	keyField2: __('Application Key'),
	keyField2Id: 'appKey',
	keyField3: __('Test API'),
	keyField3Id: 'isTest',
	keyFieldDef: {
		type: 'HorizontalLayout', columnWeights: [6, 6, 12], children: [
			{type: 'VerticalLayout', css: {}, children: [
				{type: 'Label', text: __('Application Code')},
				{type: 'TextField', placeholder: __('Application Code'), id: 'key'},
			]},
			{type: 'VerticalLayout', css: {}, children: [
				{type: 'Label', text: __('Application Key')},
				{type: 'TextField', placeholder: __('Application Key'), id: 'key2', password: true},
			]},
			{
				type: 'CheckBox',
				label: __('Test mode'),
				id: 'key3',
				css: {padding: 7, marginTop: 5, display: 'inline-block'},
				init: function () {
					this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
				}
			}
		]
	},
	priceFieldId: 'price',
	currencyFieldId: 'currencyCode',
	useStylesInStoreCart: true,
	globalVars: ['appKey', 'appCode', 'isTest'],
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paymentez', true),
	logos: Globals.getLogosList(),
});

PluginWrapper.registerPlugin('paymentez', {
	name: 'Paymentez',
	element: {
		minSize: {width: 50, height: 50},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'appCode', type: 'PaymentezAppCode',
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.appCode ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Application Code')));
				return opts;
			},
			get: function(data) { return data.content.appCode; },
			set: function(value, data) {
				data.content.appCode = value;
				this.updateElement();
			}
		},
		{id: 'appKey', type: 'PaymentezAppKey',
			get: function(data) { return data.content.appKey; },
			set: function(value, data) {
				data.content.appKey = value;
				this.updateElement();
			}
		},
		{id: 'orderDesc', type: 'PaymentezOrderDesc',
			get: function(data) { return data.content.orderDesc; },
			set: function(value, data) {
				data.content.orderDesc = value;
				this.updateElement();
			}
		},
		{id: 'orderAmount', type: 'PaymentezOrderAmount',
			get: function(data) { return data.content.orderAmount; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.orderAmount = value;
				this.updateElement();
			}
		},
		{id: 'currencyCode', type: 'PaymentezCurrencyCode',
			get: function(data) { return data.content.currencyCode; },
			set: function(value, data) {
				data.content.currencyCode = value;
				this.updateElement();
			}
		},
		{id: 'isTest', type: 'PaymentezIsTest', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.isTest; },
			set: function(value, data) {
				data.content.isTest = value;
				this.updateElement();
			}
		},
	], Globals.getLogosList(), 'paymentez'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{
				children: [

					{
						type: 'HorizontalLayout', css: {marginTop: 15}, children: [
							{
								type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Application Code'), uiComponentOptions: function(data, opts) {
										opts.validateText = data.content.appCode ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Application Code')));
										return opts;
									}},
									{type: 'TextField', id: 'appCode'}
								]
							},
							{
								type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Application Key')},
									{type: 'TextField', id: 'appKey'}
								]
							},
						]
					},
					{
						type: 'HorizontalLayout', css: {marginTop: 15}, children: [
							{
								type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Order Description')},
									{type: 'TextField', id: 'orderDesc'}
								]
							},
						]
					},
					{
						type: 'HorizontalLayout', css: {marginTop: 15}, children: [
							{
								type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Order Amount')},
									{type: 'TextField', id: 'orderAmount'}
								]
							},
							{
								type: 'VerticalLayout', children: [
									{type: 'Label', text: __('Currency')},
									{
										type: 'DropdownBox', id: 'currencyCode', options: [
											{id: 'COP', name: 'COP', value: 'COP'},
											{id: 'USD', name: 'USD', value: 'USD'},
											{id: 'BRL', name: 'BRL', value: 'BRL'},
											{id: 'MXN', name: 'MXN', value: 'MXN'},
											{id: 'ARS', name: 'ARS', value: 'ARS'},
											{id: 'CLP', name: 'CLP', value: 'CLP'},
											{id: 'PEN', name: 'PEN', value: 'PEN'}
										]
									}
								]
							},
						]
					},
					{
						type: 'HorizontalLayout', css: {marginTop: 15}, children: [
							{
								type: 'VerticalLayout', children: [
									{
										type: 'VerticalLayout', css: {marginTop: 15}, children: [
											{
												type: 'CheckBox',
												id: 'isTest',
												css: {display: 'inline-block'},
												label: __('Test mode'),
												init: function () {
													this.getElem().attr('title', __('For testing purpose without real payments'));
													this.getElem().tooltip({placement: 'right'});
												}
											}
										]
									},
								]
							},
						]
					},

				]
			},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'paymentez'),
		]
	},

	openAction: function (fields, data, elem) {
		fields.appCode.setValue(data.content.appCode);
		fields.appKey.setValue(data.content.appKey);
		fields.orderDesc.setValue(data.content.orderDesc);
		fields.orderAmount.setValue(data.content.orderAmount);
		fields.currencyCode.setValue(data.content.currencyCode);
		fields.isTest.setValue(data.content.isTest);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		data.content.appCode = fields.appCode.getValue();
		data.content.appKey = fields.appKey.getValue();
		data.content.orderDesc = fields.orderDesc.getValue();
		data.content.orderAmount = fields.orderAmount.getValue();
		data.content.currencyCode = fields.currencyCode.getValue();
		data.content.isTest = fields.isTest.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
	},
	loadAction: function (data) {
		data.content.__globalVars = ['appKey', 'appCode', 'isTest'];
		if (!data.content.appCode)
			data.content.appCode = '';
		if (!data.content.appKey)
			data.content.appKey = '';
		if (!data.content.orderDesc)
			data.content.orderDesc = '';
		if (!data.content.orderAmount)
			data.content.orderAmount = '';
		if (!data.content.currencyCode)
			data.content.currencyCode = '';
		if (!data.content.isTest)
			data.content.isTest = true;
		if (['logo.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'paymentez_black.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('appCode');
			if (component) component.focus();
		}, 50);
	}
});
},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"image_slider","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/image_slider","pluginUri":"plugins\/image_slider","customConfiguration":null};
PluginWrapper._config.id = 'image_slider';
PluginWrapper._config.baseUri = "plugins\/image_slider";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/image_slider\/main.png";
PluginWrapper._config.template = "<!DOCTYPE html>\n<html>\n    <head>\n  <link rel=\"stylesheet\"  type=\"text\/css\" href=\"https:\/\/cdn.jsdelivr.net\/npm\/nivo-slider@3.2.0\/nivo-slider.min.css\">\n  <link rel=\"stylesheet\"  type=\"text\/css\" href=\"https:\/\/cdn.jsdelivr.net\/npm\/nivo-slider@3.2.0\/themes\/default\/default.min.css\">\n  <link rel=\"stylesheet\"  type=\"text\/css\" href=\"https:\/\/cdn.jsdelivr.net\/npm\/nivo-slider@3.2.0\/themes\/default\/arrows.png\">\n  <script type=\"text\/javascript\" src=\"https:\/\/cdn.jsdelivr.net\/npm\/nivo-slider@3.2.0\/jquery.nivo.slider.min.js\"><\/script>\n  <style>\n\t.theme-default .nivoSlider{\n\t\tbackground:none !important;\n\t\tbox-shadow: none !important;\n\t}\n\t\n\t.nivo-caption {\n\t\tbackground: rgba(0, 0, 0, 0.5) !important;\n\t\tbottom: 30px !important;\n\t\twidth : 80%  !important;\n\t\topacity: .6;\n\t\theight: 50px;\n\t\tfont-size: 22px;\n\t\tpadding-top: 10px;\n\t}\n\t@media (min-width: 320px) and (max-width:480px){ \n\t\n\t\t.nivo-caption[style] {\n\t\t   display:none !important;\n\t\t}\n\t}\n\t@media (min-width: 768px) and (max-width:991px){\n\t\t.nivo-caption[style] {\n\t\t   display:none !important;\n\t\t}\n\t}\n\t\n  <\/style>\n    <\/head>\n<body>\n<div class=\"slider-wrapper theme-default\">        \n\t<div class=\"slider nivoSlider\">\n\t\t{{#content.listNotEmpty}}\n            {{#content.list}}\n                <div class=\"slide-info\">\n                    <img class=\"slider-image\" src=\"{{imgSlider}}\"  title=\"{{overlayTxt}}\"\/>\n                <\/div>\n                    \n            {{\/content.list}}\n                \n        {{\/content.listNotEmpty}}\n        \n        {{^content.listNotEmpty}}\n            <h2>No content found.<\/h2>\n        {{\/content.listNotEmpty}}\n\n\t<\/div>\n<\/div>\t\n<script type=\"text\/javascript\">\n\n\t$(window).load(function() {\n\t\n\t\t\tvar sliderAutoplay = {{content.autoplay}};\n            var sliderNavDots  = {{content.navdots}};\n            var sliderNavArrow = {{content.navArrows}};\n                \n            var slideChangeFrequency = {{content.slideFrequency}};\n           \t\t   \n\t\t\tif(sliderAutoplay == 1) {\n                sliderAutoplay = false;\n            } \n            else{\n                sliderAutoplay = true;\n            } \n\t\t\t\n            if(sliderNavDots == 1) {\n                sliderNavDots = true;\n            } \n            else{\n                sliderNavDots = false;\n            } \n                \n            if(sliderNavArrow == 1) {\n                sliderNavArrow = true;\n            }\n            else{\n                sliderNavArrow = false;\n            } \n\t\n\t\n\t\t$('.slider').nivoSlider({\n\t\t\n\t\t\teffect       : 'slideInLeft',\n\t\t\tmanualAdvance: sliderAutoplay,\n\t\t\tpauseOnHover : true,\n\t\t\tstartSlide   : 0,\n\t\t\tpauseOnHover : true,\n\t\t\tanimSpeed\t : slideChangeFrequency,\n\t\t\tdirectionNav : sliderNavArrow,\n\t\t\tcontrolNav\t : sliderNavDots,\n\n\t\t});\n\t\t\n\t\tif ($('.slider-link').attr('href') == '') { \n           $('.slider-link').removeAttr('href');\n                \n        }\n\t});\n\t<\/script>\n<\/body>\n <\/html>\n ";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = null;
PluginWrapper._config.active = false;
PluginWrapper.registerPlugin('image_slider', {
	name: 'Image Slider',
		element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true
	},
		element: {
		minSize: {width: 100, height: 100},
		defaultSize: {width: 480, height: 300},
		resizable: true,
	},
	
	propertyDialog: {
		noScroll: true,
		size: {width: 1280, height: 940},
		tabs: [
		    
			{name:'Create Slider',
		     
		        children: [
		            {type: 'VerticalLayout', children: [
		                
    				{type: 'Label', text: 'Create slider by selecting your favourite image and adding text to it below:'},
    				
				    ]},
		            {type: 'HorizontalLayout', columnWeights: [4, 4, 4 ], children: [
    			    
        			    { type: 'ImageSelector', id: 'imgSlider',  mode:'image', multiselect: false, thumbSize:150, mediatabs:true},
    					
    					{type: 'TextField', id: 'overlayTxt', textArea: true, resizable: true, placeholder:'Add caption content(optional)', css: {marginBottom: 5,height:150, marginLeft:0}},
    					{type: 'TextField', id: 'link',       textArea: true, resizable: true, placeholder:'Slider Link (optional)', css: {marginBottom: 5,height:150, marginLeft:0}},
			    	]},
			    	
			    		
			      {type: 'HorizontalLayout', columnWeights: [2, 2, 8], children: [
		              
    			     	{ type: 'Button', text: 'Add Slider', id: 'btnAdd', buttonStyle:'info', css: {marginTop: 5, width:'100%'}},
    				
				    ]},
			    
			    	{type: 'Label', text: 'Sliders added:', css: {fontSize: 18, marginTop: 15}},
		            {type: 'CustomContainer', id: 'list', css: {marginTop: 15}, init: function(def, fields) {
    				    var thisSelf = this;
    				    this._elem.sortable({
    				        stop: function(e, ui) {
    				            fields.reloadListObj();
    				        }
    				    });
				    }}
		        ]
		    },
		    {name: 'Settings', children: [
			    {type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					
					{type: 'VerticalLayout', columnWeights: [10,2], children: [
						{type: 'Label', text: 'Set Slide text Frequency (in seconds)', css: {marginTop: 5}},
    					{type: 'TextField', id:'slideFrequency', css: {marginTop: 5}},
					
			    	]},
			    	{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Enable arrows on content'), helpText: __('Enable next/previous arrows from content.')},
						{type: 'RadioBox', id: 'navArrows0', label: __('Yes'), group: 'navArrows' },
						{type: 'RadioBox', id: 'navArrows1', label: __('No'), group: 'navArrows'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Enable dots on content'), helpText: __('Enable dots on content.')},
						{type: 'RadioBox', id: 'navdots0', label: __('Yes'), group: 'navdots' },
						{type: 'RadioBox', id: 'navdots1', label: __('No'), group: 'navdots'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Autoplay the content'), helpText: __('Play the content automatically on load.')},
						{type: 'RadioBox', id: 'autoplay0', label: __('Yes'), group: 'autoplay'},
						{type: 'RadioBox', id: 'autoplay1', label: __('No'), group: 'autoplay'}
					]},
					
				]},
				
			]}
			
			
		],
		
	},

	resizeTimeout: null,
	resizeAction: function(data, elem) {
		if (!this.resizeTimeout) {
			var self = this;
			this.resizeTimeout = setTimeout(function () {
				self.resizeTimeout = null;
				self.updateElement();
			}, 1000);
		}
	},
	openAction: function(fields, data, elem) {
	    $('.tab-content').css('height', 'auto');
		var thisSelf = this;
		if (!fields.eventsSet) {
			fields.eventsSet = true;
			
			fields.dialog = $('<div>');
			fields.list._elem.parent().prepend('<style>.ui-dialog { z-index: 9010!important; } .ui-widget-overlay { z-index: 9000!important; } .ui-widget-header{border: 1px solid #1c94c4;background: #1c94c4; } .ui-widget-content .ui-state-hover {color: #1c94c4 !important;} </style>'); // make dialog staff appear above
			fields.list._elem.parent().append(fields.dialog);
			
			fields.list.updateBlockData = function(block, imgSlider, overlayTxt, link) {
			   
			    overlayTxt = (typeof(overlayTxt) != 'undefined') ? overlayTxt : '';
			    link = (typeof(link) != 'undefined') ? link : '';
			    
			    block.attr('data-imgSlider', imgSlider);
			    block.attr('data-overlayTxt', overlayTxt);
			    block.attr('data-link', link);
			    block.children('.data').html('<div style="width:250px; display:inline-block;margin-bottom:10px;margin-top: 8px;"><img class="img-thumbnail" src=' + wb_builder.makeLocalUrl(imgSlider) + ' /></div><div style="width: 700px; display:inline-block; margin-top: 10px;margin-left:10px;"><span class="undefined" style="font-size:16px;padding-top:10px">' + overlayTxt + '</span></div>');
			  
			};
			fields.list.createBlockElem = function() {
			    return $('<div style="border-top:1px solid lightgrey;">').append('<div style="display:inline-block;" class="data">');
			};
			
			fields.listObj = [];
			fields.btnAdd.on('click', function() {
				var imageValue       = fields.imgSlider.getValue();
				var	captionValue     = fields.overlayTxt.getValue();
				var	captionLinkValue = fields.link.getValue();
			     
			     captionLinkValue.trim();
			     captionValue.trim();
			     
				if (!imageValue) return;
			
			    if(typeof(captionValue) === 'undefined' || captionValue === '') {
			         if(typeof(captionLinkValue) === 'undefined' || captionLinkValue === ''){
			             fields.listObj.push({ imgSlider: imageValue });
			         }
			      
			     }
			    else{
			        fields.listObj.push({ imgSlider: imageValue, overlayTxt: captionValue, link: captionLinkValue });
			    }

				fields.imgSlider.setValue('');
				fields.overlayTxt.setValue('');
				fields.link.setValue('');
				thisSelf.reloadList(fields);
			});
			fields.reloadListObj = function() {
			    fields.listObj = [];
			    fields.list._elem.children().each(function() {
			        var imgSlider  = $(this).attr('data-imgSlider');
			        var overlayTxt = $(this).attr('data-overlayTxt');
			        var link = $(this).attr('data-link');
			
			        fields.listObj.push({ imgSlider: imgSlider, overlayTxt: overlayTxt, link:link });
			        	
			    });
			};
			
		}
		fields.listObj = [];
		for (var i=0; i < data.content.list.length; i++) {
			fields.listObj.push(data.content.list[i]);
		}
		this.reloadList(fields);
		
		
		//Settings tab values
		fields.navArrows0.setValue(data.content.navArrows === '1');
		fields.navArrows1.setValue(data.content.navArrows === '0');
		
		fields.navdots0.setValue(data.content.navdots === '1');
		fields.navdots1.setValue(data.content.navdots === '0');
		
		fields.autoplay0.setValue(data.content.autoplay === '1');
		fields.autoplay1.setValue(data.content.autoplay === '0');
		
		fields.slideFrequency.setValue(data.content.slideFrequency);
		
	},
		reloadList: function(fields) {
		var thisSelf = this;
		fields.list._elem.empty();
		for (var i in fields.listObj) {
		    var imgSlider = fields.listObj[i].imgSlider;
		    var overlayTxt = fields.listObj[i].overlayTxt;
		    var link = fields.listObj[i].link;
		    var block = fields.list.createBlockElem();
		    fields.list.updateBlockData(block, imgSlider, overlayTxt, link);
			(function(block) {
			    block.append($('<div style="width:30px; display: inline-block;cursor:pointer"><i style="cursor:pointer; font-size:18px; top: -12px;" class="glyphicon glyphicon-move">').css('margin-left', '25px'));
			    block.append($('<div style="width:30px; display: inline-block;cursor:pointer"><i style="cursor:pointer; font-size:18px; top: -12px;"  class="glyphicon glyphicon-pencil">')
			            .css('margin-left', '5px')
			            .on('click', function() {
			                var thisSelf = this;
    					    fields.dialog.dialog({
    					        title: 'Edit slider',
    					        resizable: false,
    					        height: '400',
    					        width: 800,
    					        open: function() {
    					            
    					            $(this).html('<div class="alert alert-info alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>To update the image in this slider, delete this entry and re-create a slider.</strong></div><br>'
    					                     + '<table><tr><td><input id="slider-photo" type="hidden" value="' + block.attr('data-imgSlider') + '" /></td></tr><tr><td width="100"><strong>Slider Caption</strong></td></tr><tr><td><input style="width:760px !important; height:35px;" type="text" value="' + block.attr('data-overlayTxt') + '" /></td></tr><tr><td width="100"><strong>Link Caption</strong></td></tr><tr><td><input style="width:760px !important; height:35px;" type="text" value="' + block.attr('data-link') + '" /></td></tr></table>');
    					        },
    					        modal: true,
    					        buttons: {
    					            'Apply': function() {
    					               
    					               var imgSlider    = $(this).find('input').eq(0).val();
    					               var overlayTxt   = $(this).find('input').eq(1).val();
    					               var link         = $(this).find('input').eq(2).val();
                                    
    					               fields.list.updateBlockData(block, imgSlider, overlayTxt, link );
            					       fields.reloadListObj();
    					               $(this).dialog('close');
            					    
    					            },
    					            'Cancel': function() {
    					                $(this).dialog('close');
    					            }
    					        }
    					    });
			            }));
    			block.append($('<div style="width:30px; display: inline-block;cursor:pointer"><i style="cursor:pointer; font-size:18px; top:-12px;" class="glyphicon glyphicon-trash">')
    					.css('padding-left', '5px')
    					.on('click', function() {
    					    fields.dialog.dialog({
    					        title: 'Delete Slider',
    					        resizable: false,
    					        height: 'auto',
    					        width: 700,
    					        open: function() {
    					            $(this).html('Are you sure you want to delete this slider ?');
    					        },
    					        modal: true,
    					        buttons: {
    					            'Yes': function() {
    					                block.remove();
    					                fields.reloadListObj(); 
    					                $(this).dialog('close');
    					            },
    					            'No': function() {
    					                $(this).dialog('close');
    					            }
    					        }
    					    });
    					}));
			})(block);
			fields.list._elem.append(block);
		}
	},

	applyAction: function(fields, data, elem) {
		var list = [];
		for (var idx in fields.listObj) {
			list.push(fields.listObj[idx]);
		}
		data.content.list = list;
		data.content.listNotEmpty = (data.content.list.length > 0);
		
		if (fields.autoplay0.getValue()) data.content.autoplay = '1';
		if (fields.autoplay1.getValue()) data.content.autoplay = '0'; 
		
		if (fields.navdots0.getValue()) data.content.navdots = '1';
		if (fields.navdots1.getValue()) data.content.navdots = '0'; 
		
		if (fields.navArrows0.getValue()) data.content.navArrows = '1';
		if (fields.navArrows1.getValue()) data.content.navArrows = '0'; 
		
		data.content.slideFrequency = fields.slideFrequency.getValue();
		
	},

	loadAction: function(data) {
		if (!data.content.list) data.content.list = [];
		   data.content.listNotEmpty = (data.content.list.length > 0);
		   
		if (!data.content.autoplay) data.content.autoplay = '1';
	    if (!data.content.navdots) data.content.navdots = '1';
	    if (!data.content.navArrows) data.content.navArrows = '1';  
	    
	    if (!data.content.slideFrequency) data.content.slideFrequency = '3000';
	    
	}
});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"pagopar","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/pagopar","pluginUri":"plugins\/pagopar","customConfiguration":null};
PluginWrapper._config.id = 'pagopar';
PluginWrapper._config.baseUri = "plugins\/pagopar";
PluginWrapper._config.icon = null;
PluginWrapper._config.template = "<form data-gateway-id=\"Pagopar\" method=\"post\"{{^content.store}} target=\"_blank\"{{\/content.store}} style=\"width: 100%; height: 100%;\" id=\"{{id}}_form\">\n\t<input name=\"amount\" value=\"{{content.price}}\" type=\"hidden\" \/>\n\t<input name=\"description\" value=\"{{content.itemName}}\" type=\"hidden\" \/>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"returnUrl\" value=\"{returnUrl}\" \/>\n    <input type=\"hidden\" name=\"callbackUrl\" value=\"{callbackUrl}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/pagopar/main.php';
PluginWrapper._config.active = true;
require(['element/PropertyType', 'TextField' ], function (PropertyTypeModule, TextField) {

var PropertyTypeAccess = PropertyTypeModule.PropertyTypeAccess;
var PropertyType = PropertyTypeModule.PropertyType;
var TextField = TextField.TextField;

var PagoparPublicToken = new PropertyType("Pagopar/PagoparPublicToken", PropertyTypeAccess.User, true, __('Public Token'), TextField);
var PagoparPrivateToken = new PropertyType("Pagopar/PagoparPrivateToken", PropertyTypeAccess.User, true, __('Private Token'), TextField, null, {
    password: true
});
var PagoparItemName = new PropertyType("Pagopar/PagoparItemName", PropertyTypeAccess.User, true, __('Item Name'), TextField);
var PagoparPrice = new PropertyType("Pagopar/PagoparPrice", PropertyTypeAccess.User, true, __('Price'), TextField);


PropertyType.setSortOrder('Pagopar', 1);

var Globals = {
    getDefaultStyles: function(isStore) {
		var styles = {
            button_color: '#fafafa',
            button_border: {
                color: '#fff',
                style: 'solid',
                weight: 1,
                css: { border: '1px solid #fff' },
                cssRaw: 'border: 1px solid #fff'
            },
            logo: 'logo_color.svg',
            font_family: 'Arial',
            font_size: 12,
            label_color: '#949494'
		};
        return isStore ? styles : $.extend(true, styles, {
            button_label: __('Pay with %s').replace('%s', ''),
            showlogo: true,
            logo_width: 110,
            button_padding: 4
        });
    },
	getLogosList: function() {
		return [
			{id: 'logo_color.svg', name: 'coloured'},
            {id: 'logo_black.svg', name: 'black'},
            {id: 'logo_white.svg', name: 'white', backgroundColor: '#000000'}
		];
	}
};


ElementRegister.registerPaymentGateway({
    name: 'Pagopar',
    id: 'pagopar',
    pageUrl: 'https://www.pagopar.com/',
    keyField: __('Public Token'),
    keyFieldId: 'publicToken',
    keyField2: __('Private Token'),
    keyField2Id: 'privateToken',
    keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,6,6], children: [
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Public Token')},
		    {type: 'TextField', placeholder: __(''), id: 'key'},
        ]},
        {type: 'VerticalLayout', css: {}, children: [
            {type: 'Label', text: __('Private Token')},
		    {type: 'TextField', placeholder: __(''), id: 'key2', password: true},
        ]},
	]},
    priceFieldId: 'price',
    nameFieldId: 'itemName',
    defaultStyles: Globals.getDefaultStyles(true),
    styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'pagopar', true),
    globalVars: ['publicToken', 'privateToken'],
    useStylesInStoreCart: true,
    logos: Globals.getLogosList(),
    forceActive: true
});

PluginWrapper.registerPlugin('pagopar', {
    name: 'Pagopar',
    element: {
        minSize: {width: 100, height: 50},
        defaultSize: {width: 160, height: 81},
        resizable: true
    },
    properties: PluginWrapper.paymentGatewayStylePropertiesDef([
        {id: 'publicToken', type: PagoparPublicToken,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.publicToken ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Token')));
                return opts;
            },
            get: function(data) { return data.content.publicToken; },
            set: function(value, data) {
                data.content.publicToken = value;
            }
        },
        {id: 'privateToken', type: PagoparPrivateToken,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.privateToken ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Private Token')));
                return opts;
            },
            get: function(data) { return data.content.privateToken; },
            set: function(value, data) {
                data.content.privateToken = value;
            }
        },
        {id: 'itemName', type: PagoparItemName,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Item Name')));
                return opts;
            },
            get: function(data) { return data.content.itemName; },
            set: function(value, data) {
                data.content.itemName = value;
            }
        },
        {id: 'price', type: PagoparPrice,
            uiComponentOptions: function(data, opts) {
                opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                return opts;
            },
            get: function(data) { return data.content.price; },
            validate: function(value) {
                if (/^[\d.,]+$/.test(value)) {
                    return '';
                } else {
                    return (__('Incorrect format'));
                }
            },
            set: function(value, data) {
                data.content.price = value;
            }
        },
    ], Globals.getLogosList(), 'pagopar'),

    propertyDialog: {
        noScroll: true,
        tabs: [
            {
                children: [
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('publicToken'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.publicToken ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Public Token')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'publicToken'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('privateToken'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.privateToken ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Private Token')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'privateToken', password: true}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('itemName'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.itemName ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Api Key')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'itemName'}
                                ]
                            }
                        ]
                    },
                    {
                        type: 'HorizontalLayout', css: {marginTop: 15}, children: [
                            {
                                type: 'VerticalLayout', children: [
                                    {type: 'Label', text: __('Price'), uiComponentOptions: function(data, opts) {
                                        opts.validateText = data.content.price ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('Price')));
                                        return opts;
                                    }},
                                    {type: 'TextField', id: 'price'}
                                ]
                            },
                        ]
                    },
                ]
            },
            PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'pagopar'),
        ]
    },

    openAction: function (fields, data, elem) {
        fields.publicToken.setValue(data.content.publicToken);
        fields.privateToken.setValue(data.content.privateToken);
        fields.itemName.setText(data.content.itemName);
        fields.price.setValue(data.content.price);
        
        PluginWrapper.paymentGatewayOpenAction(fields, data);
    },
    applyAction: function (fields, data, elem) {
        data.content.publicToken = fields.publicToken.getValue();
        data.content.privateToken = fields.privateToken.getValue();
        data.content.itemName = fields.itemName.getText();
        data.content.price = fields.price.getValue();
        PluginWrapper.paymentGatewayApplyAction(fields, data, elem);
    },
    loadAction: function (data) {
        data.content.__globalVars = ['publicToken', 'privateToken'];
        if (!data.content.publicToken)
            data.content.publicToken = '';
        if (!data.content.privateToken)
            data.content.privateToken = '';
        if(!data.content.itemName)
            data.content.itemName = '';
        if(!data.content.price)
            data.content.price = '';
        if (['logo.svg'].indexOf(data.content.logo) > -1) {
            data.content.logo = 'logo_color.svg';
        }
        PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
    },
    onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('publicToken');
			if (component) component.focus();
		}, 50);
	}
});

});},
function(ElementRegister, PluginWrapper, $) {
    var pluginData = {"id":"epaybg","extReferenceId":null,"baseUrl":"https:\/\/builder.domains.co.za:443\/plugins\/epaybg","pluginUri":"plugins\/epaybg","customConfiguration":null};
PluginWrapper._config.id = 'epaybg';
PluginWrapper._config.baseUri = "plugins\/epaybg";
PluginWrapper._config.icon = "https:\/\/builder.domains.co.za:443\/plugins\/epaybg\/main.png";
PluginWrapper._config.template = "<form action=\"{{#content.demo}}https:\/\/devep2.datamax.bg\/ep2\/epay2_demo\/{{\/content.demo}}{{^content.demo}}https:\/\/www.epay.bg\/{{\/content.demo}}\" method=\"post\" data-gateway-id=\"Epaybg\" style=\"width: 100%; height: 100%;\"{{^content.store}} target=\"_blank\"{{\/content.store}}>\n\t{{#content.store}}\n\t<input type=\"hidden\" name=\"name\" value=\"{{content.name}}\" \/>\n\t<input type=\"hidden\" name=\"price\" value=\"{{content.price}}\" \/>\n\t<input type=\"hidden\" name=\"currency\" value=\"{{content.currency}}\" \/>\n\t<input type=\"hidden\" name=\"transactionId\" value=\"{transactionId}\" \/>\n\t<input type=\"hidden\" name=\"URL_OK\" value=\"{returnUrl}\" \/>\n\t<input type=\"hidden\" name=\"URL_CANCEL\" value=\"{cancelUrl}\" \/>\n\t{{\/content.store}}\n\t{{^content.store}}\n\t{{{requireService}}}\n\t{{\/content.store}}\n\t{{{content.paymentGatewayButton}}}\n<\/form>";
PluginWrapper._config.altTemplates = [];
PluginWrapper._config.serviceUrl = 'https://builder.domains.co.za/plugins/epaybg/main.php';
PluginWrapper._config.active = false;

var Globals = {
	getSettingsContent: function() {
		var base_url = 'http://' + wb_builder.siteDomain + '/';
		return '<p><strong>Page URL:</strong> <a href="https://www.epay.bg/" target="_blank">https://www.epay.bg/</a></p>'
					+ '<p>Notifications URL (BG: <em>"URL  "</em>)<strong>:</strong><br />'
					+ '<pre>' + base_url + 'store-callback/Epaybg' + '</pre></p>';
	},
	getDefaultStyles: function(isStore) {
		var styles = {
			button_color: '#ffffff',
			button_border: {
				color: '#cccccc',
				style: 'solid',
				weight: 1,
				css: { border: '1px solid #cccccc' },
				cssRaw: 'border: 1px solid #cccccc'
			},
			logo: 'epaybg_color.svg',
			font_family: 'Arial',
			font_size: 12,
			label_color: '#949494'
		};
		return isStore ? styles : $.extend(true, styles, {
			button_label: __('Pay with %s').replace('%s', ''),
			showlogo: true,
			logo_width: 110,
			button_padding: 4
		});
	},
	getLogosList: function() {
		return [
			{id: 'epaybg_color.svg', name: 'coloured'},
			{id: 'epaybg_black.svg', name: 'black'},
			{id: 'epaybg_white.svg', name: 'white', backgroundColor: '#000000'},
		];
	}
};

ElementRegister.registerPaymentGateway({
	name: 'ePay.bg',
	id: 'epaybg',
	keyFieldId: 'min_number',
	keyField2Id: 'secret_key',
	keyField3Id: 'demo',
	keyFieldDef: {type: 'HorizontalLayout', columnWeights: [6,6,12], children: [
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('MIN')},
			{type: 'TextField', placeholder: 'MIN', id: 'key'},
		]},
		{type: 'VerticalLayout', css: {}, children: [
			{type: 'Label', text: __('Secret Key')},
			{type: 'TextField', placeholder: __('Secret Key'), id: 'key2', password: true},
		]},
		{type: 'CheckBox', label: __('Test mode'), id: 'key3', css: {padding: 7, marginTop: 5, display: 'inline-block'}, init: function() {
			this.getElem().attr('title', __('For testing purpose without real payments')).tooltip({placement: 'right'});
		}}
	]},
	titleFieldId: 'label',
	nameFieldId: 'name',
	priceFieldId: 'price',
	currencyFieldId: 'currency',
	globalVars: ['min_number', 'secret_key', 'demo'],
	settingsTabDef: Globals.getSettingsContent(),
	useStylesInStoreCart: true,
	defaultStyles: Globals.getDefaultStyles(true),
	styleTabDef: PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epaybg', true),
	logos: Globals.getLogosList()
});

PluginWrapper.registerPlugin('epaybg', {
	name: 'ePay.bg',
	element: {
		minSize: {width: 70, height: 35},
		defaultSize: {width: 160, height: 81},
		resizable: true
	},
	properties: PluginWrapper.paymentGatewayStylePropertiesDef([
		{id: 'min_number', type: 'EpaybgMinNumber', helpText: __('Customer number'),
			uiComponentOptions: function(data, opts) {
				opts.validateText = data.content.min_number ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('MIN')));
				return opts;
			},
			get: function(data) { return data.content.min_number; },
			set: function(value, data) {
				data.content.min_number = value;
			}
		},
		{id: 'secret_key', type: 'EpaybgSecretKey',
			get: function(data) { return data.content.secret_key; },
			set: function(value, data) {
				data.content.secret_key = value;
			}
		},
		{id: 'name', type: 'EpaybgName',
			get: function(data) { return data.content.name; },
			set: function(value, data) {
				data.content.name = value;
			}
		},
		{id: 'price', type: 'EpaybgPrice', helpText: __('Amount to be transferred'),
			get: function(data) { return data.content.price; },
			validate: function(value) {
				if (/^[\d.,]+$/.test(value)) {
					return '';
				} else {
					return (__('Incorrect format'));
				}
			},
			set: function(value, data) {
				data.content.price = value;
			}
		},
		{id: 'currency', type: 'EpaybgCurrency',
			get: function(data) { return data.content.currency; },
			set: function(value, data) {
				data.content.currency = value;
			}
		},
		{id: 'demo', type: 'EpaybgDemo', helpText: __('For testing purpose without real payments'),
			get: function(data) { return data.content.demo; },
			set: function(value, data) {
				data.content.demo = value;
			}
		},
	], Globals.getLogosList(), 'epaybg'),
	propertyDialog: {
		noScroll: true,
		tabs: [
			{children: [
				{type: 'HorizontalLayout', css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: 'MIN', helpText: __('Customer number'), uiComponentOptions: function(data, opts) {
							opts.validateText = data.content.min_number ? '' : ('open:' + __('Field "%s" is required').replace('%s', __('MIN')));
							return opts;
						}},
						{type: 'TextField', id: 'min_number'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Secret Key')},
						{type: 'TextField', id: 'secret_key'}
					]}
				]},
				{type: 'HorizontalLayout', columnWeights: [6,3,3], css: {marginTop: 15}, children: [
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Item Name')},
						{type: 'TextField', id: 'name'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Amount'), helpText: __('Amount to be transferred')},
						{type: 'TextField', id: 'price'}
					]},
					{type: 'VerticalLayout', children: [
						{type: 'Label', text: __('Currency')},
						{type: 'DropdownBox', id: 'currency', options: [
							{id: 'BGN', name: 'BGN'},
							{id: 'USD', name: 'USD'},
							{id: 'EUR', name: 'EUR'}
						]}
					]}
				]},
				{type: 'VerticalLayout', css: {marginTop: 15}, children: [
					{type: 'CheckBox', id: 'demo', css: {display: 'inline-block'}, label: __('Test mode'), init: function() {
						this.getElem().attr('title', __('For testing purpose without real payments'));
						this.getElem().tooltip({placement: 'bottom'});
					}}
				]}
			]},
			PluginWrapper.paymentGatewayStyleTabDef(Globals.getLogosList(), 'epaybg')
		]
	},
	openAction: function (fields, data, elem) {
		var itm;
		fields.min_number.setText(data.content.min_number);
		fields.secret_key.setText(data.content.secret_key);
		fields.name.setText(data.content.name);
		fields.price.setText(data.content.price);
		itm = fields.currency.getItemById(data.content.currency);
		fields.currency.selectItem(itm);
		fields.demo.setValue(data.content.demo);
		PluginWrapper.paymentGatewayOpenAction(fields, data);
	},
	applyAction: function (fields, data, elem) {
		var itm;
		data.content.min_number = fields.min_number.getText();
		data.content.secret_key = fields.secret_key.getText();
		data.content.name = fields.name.getText();
		data.content.price = fields.price.getText();
		itm = fields.currency.getSelectedItem();
		data.content.currency = itm.getOriginal().id;
		data.content.demo = fields.demo.getValue();
		PluginWrapper.paymentGatewayApplyAction(fields, data);
	},
	loadAction: function (data) {
		if (!data.content.min_number) data.content.min_number = '';
		if (!data.content.secret_key) data.content.secret_key = '';
		if (!data.content.name) data.content.name = '';
		if (!data.content.price) data.content.price = '1';
		if (!data.content.currency) data.content.currency = 'BGN';
		if (data.content.demo === undefined) data.content.demo = false;
		if (['epay.png'].indexOf(data.content.logo) > -1) {
			data.content.logo = 'epaybg_color.svg';
		}
		PluginWrapper.paymentGatewayLoadAction(data, Globals.getDefaultStyles());
	},
	getUsedFonts: function(data) {
		var items = [];
		if( data.content.font_family ) items.push(data.content.font_family);
		return items;
	},
	onDblClick: function() {
		var thisClass = this;
		setTimeout(function() {
			var component = thisClass.getPropertyComponent('min_number');
			if (component) component.focus();
		}, 50);
	}
});}	]);
window.wb_builder_vars = {
whiteLabel: {"defaultLogo":"modules\/builder\/img\/sitepro-logo-black.svg"},
initUiPluginId: "default_light_ui",
uiColorScheme: "light",
pluginData: {"extReferenceId":null},
pluginToolbar: [{"id":"17","name":"Layout","icon":"ico-pl-mix-layout","enabled":true,"inactive":false,"groups":[{"name":"Layout","width":12,"enabled":true,"items":[{"id":"default\/312","name":"S1","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/317","name":"S4","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/314","name":"S2","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/316","name":"S6","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/318","name":"S5","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/315","name":"S3","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/319","name":"S7","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/320","name":"S8","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/310","name":"D1","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/309","name":"D2","type":"render","icon":"fa fa-film","width":3,"height":2,"enabled":true},{"id":"default\/101","name":"D3","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/103","name":"D4","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/313","name":"T1","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/311","name":"T2","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/105","name":"T3","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/106","name":"T4","type":"render","icon":"","width":3,"height":2,"enabled":true}]}]},{"id":"1","name":"Text","icon":"fa fa-font","enabled":true,"inactive":false,"groups":[{"name":"Paragraphs","width":12,"enabled":true,"items":[{"id":"default\/209","name":"Normal WorkSans","type":"render","icon":"","width":6,"height":2,"enabled":true},{"id":"default\/250","name":"Normal Giorgia","type":"render","icon":"","width":6,"height":2,"enabled":true},{"id":"default\/251","name":"Normal PlexMono","type":"render","icon":"","width":6,"height":2,"enabled":true},{"id":"default\/252","name":"Normal Exo2","type":"render","icon":"","width":6,"height":2,"enabled":true}]},{"name":"Page title","width":12,"enabled":true,"items":[{"id":"default\/202","name":"Page title Vidaloka","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/254","name":"Page title Fugaz","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/255","name":"Page title Poppins","type":"render","icon":"","width":4,"height":2,"enabled":true}]},{"name":"Sub Title","width":12,"enabled":true,"items":[{"id":"default\/256","name":"Sub Title Advent pro","type":"render","icon":"","width":6,"height":2,"enabled":true},{"id":"default\/257","name":"Sub Title","type":"render","icon":"","width":6,"height":2,"enabled":true}]},{"name":"Heading 1","width":12,"enabled":true,"items":[{"id":"default\/203","name":"Heading 1 Averia serif","type":"render","icon":"","width":4,"height":2,"enabled":true}]},{"name":"Heading 2","width":12,"enabled":true,"items":[{"id":"default\/263","name":"Heading 2 Averia serif","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/264","name":"Heading 2 open sans","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/265","name":"Heading 2 cormoran Garamond","type":"render","icon":"","width":4,"height":2,"enabled":true}]},{"name":"Heading 3","width":12,"enabled":true,"items":[{"id":"default\/211","name":"Heading 3 Arial","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/266","name":"Heading 3 open sans condens","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/267","name":"Heading 3 cor garamo","type":"render","icon":"","width":4,"height":2,"enabled":true}]},{"name":"Highlight","width":12,"enabled":true,"items":[{"id":"default\/204","name":"Highlight vidalo","type":"render","icon":"","width":6,"height":2,"enabled":true},{"id":"default\/210","name":"Highlight Helvetica italic","type":"render","icon":"","width":6,"height":2,"enabled":true}]},{"name":"Special","width":12,"enabled":true,"items":[{"id":"default\/268","name":"Special","type":"render","icon":"","width":6,"height":2,"enabled":true}]},{"name":"Footer","width":12,"enabled":true,"items":[{"id":"default\/269","name":"Footer addres","type":"render","icon":"","width":3,"height":3,"enabled":true}]}]},{"id":"9","name":"Picture","icon":"fa fa-picture-o","enabled":true,"inactive":false,"groups":[{"name":"Picture","width":12,"enabled":true,"items":[{"id":"default\/323","name":"Default","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/184","name":"Rounded","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/324","name":"Circle","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/192","name":"Default stroke","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/240","name":"Rounded stroke","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/253","name":"Circle stroke","type":"render","icon":"","width":4,"height":3,"enabled":true}]},{"name":"Icons","width":12,"enabled":true,"items":[{"id":"default\/59","name":"Facebook","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/61","name":"Twitter","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/330","name":"Instagram","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/333","name":"Youtube","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/245","name":"Vimeo","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/82","name":"Linkedin","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/273","name":"Tumblr","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/307","name":"Pinterest","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/331","name":"Twitch","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/332","name":"Reddit","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/109","name":"Home","type":"render","icon":"fa fa-home","width":1,"height":1,"enabled":true},{"id":"default\/154","name":"Star outline","type":"render","icon":"fa fa-star-o","width":1,"height":1,"enabled":true},{"id":"default\/187","name":"Heart outline","type":"render","icon":"fa fa-heart-o","width":1,"height":1,"enabled":true},{"id":"default\/302","name":"Heart filled","type":"render","icon":"fa fa-heart","width":1,"height":1,"enabled":true},{"id":"default\/181","name":"Star filled","type":"render","icon":"fa fa-star","width":1,"height":1,"enabled":true},{"id":"default\/157","name":"Check","type":"render","icon":"fa fa-check","width":1,"height":1,"enabled":true},{"id":"default\/166","name":"Remove","type":"render","icon":"fa fa-times","width":1,"height":1,"enabled":true},{"id":"default\/174","name":"Info circle","type":"render","icon":"fa fa-info-circle","width":1,"height":1,"enabled":true},{"id":"default\/107","name":"Question circle","type":"render","icon":"fa fa-question-circle","width":1,"height":1,"enabled":true},{"id":"default\/108","name":"Exclamation circle","type":"render","icon":"fa fa-exclamation-circle","width":1,"height":1,"enabled":true},{"id":"default\/180","name":"Flag","type":"render","icon":"fa fa-flag","width":1,"height":1,"enabled":true},{"id":"default\/185","name":"Camera","type":"icon","icon":"fa fa-camera","width":1,"height":1,"enabled":true},{"id":"default\/183","name":"Plane","type":"icon","icon":"fa fa-plane","width":1,"height":1,"enabled":true},{"id":"default\/162","name":"Camera retro","type":"icon","icon":"fa fa-camera-retro","width":1,"height":1,"enabled":true},{"id":"default\/152","name":"Phone","type":"render","icon":"fa fa-phone","width":1,"height":1,"enabled":true},{"id":"default\/176","name":"Comments","type":"render","icon":"fa fa-comments","width":1,"height":1,"enabled":true},{"id":"default\/322","name":"Search","type":"render","icon":"fa fa-search","width":1,"height":1,"enabled":true},{"id":"default\/160","name":"Thumbs up","type":"icon","icon":"fa fa-thumbs-o-up","width":1,"height":1,"enabled":true},{"id":"default\/172","name":"Thumbs down","type":"icon","icon":"fa fa-thumbs-o-down","width":1,"height":1,"enabled":true},{"id":"default\/159","name":"Puzzle","type":"render","icon":"fa fa-puzzle-piece","width":1,"height":1,"enabled":true},{"id":"default\/161","name":"Bell","type":"render","icon":"fa fa-bell","width":1,"height":1,"enabled":true},{"id":"default\/153","name":"Globe","type":"icon","icon":"fa fa-globe","width":1,"height":1,"enabled":true},{"id":"default\/182","name":"Quote left","type":"render","icon":"fa fa-quote-right","width":1,"height":1,"enabled":true},{"id":"default\/189","name":"Quote right","type":"render","icon":"fa fa-quote-left","width":1,"height":1,"enabled":true},{"id":"default\/194","name":"Music","type":"render","icon":"fa fa-music","width":1,"height":1,"enabled":true},{"id":"default\/191","name":"Envelope","type":"render","icon":"fa fa-envelope-o","width":1,"height":1,"enabled":true},{"id":"default\/301","name":"Photo","type":"render","icon":"fa fa-picture-o","width":1,"height":1,"enabled":true},{"id":"default\/167","name":"A left","type":"icon","icon":"fa fa-arrow-left","width":1,"height":1,"enabled":true},{"id":"default\/168","name":"A right","type":"icon","icon":"fa fa-arrow-right","width":1,"height":1,"enabled":true},{"id":"default\/169","name":"A up","type":"icon","icon":"fa fa-arrow-up","width":1,"height":1,"enabled":true},{"id":"default\/170","name":"A down","type":"icon","icon":"fa fa-arrow-down","width":1,"height":1,"enabled":true},{"id":"default\/158","name":"Chevron left","type":"icon","icon":"fa fa-chevron-left","width":1,"height":1,"enabled":true},{"id":"default\/163","name":"Chevron right","type":"icon","icon":"fa fa-chevron-right","width":1,"height":1,"enabled":true},{"id":"default\/164","name":"Chevron up","type":"icon","icon":"fa fa-chevron-up","width":1,"height":1,"enabled":true},{"id":"default\/165","name":"Chevron down","type":"icon","icon":"fa fa-chevron-down","width":1,"height":1,"enabled":true},{"id":"default\/155","name":"Angle double left","type":"icon","icon":"fa fa-angle-double-left","width":1,"height":1,"enabled":true},{"id":"default\/173","name":"Angle double right","type":"icon","icon":"fa fa-angle-double-right","width":1,"height":1,"enabled":true},{"id":"default\/175","name":"Angle double up","type":"icon","icon":"fa fa-angle-double-up","width":1,"height":1,"enabled":true},{"id":"default\/177","name":"Angle double down","type":"icon","icon":"fa fa-angle-double-down","width":1,"height":1,"enabled":true},{"id":"default\/178","name":"Angle left","type":"icon","icon":"fa fa-angle-left","width":1,"height":1,"enabled":true},{"id":"default\/186","name":"Angle right","type":"icon","icon":"fa fa-angle-right","width":1,"height":1,"enabled":true},{"id":"default\/188","name":"Angle up","type":"icon","icon":"fa fa-angle-up","width":1,"height":1,"enabled":true},{"id":"default\/190","name":"Angle down","type":"icon","icon":"fa fa-angle-down","width":1,"height":1,"enabled":true},{"id":"default\/303","name":"Long arrow left","type":"icon","icon":"fa fa-long-arrow-left","width":1,"height":1,"enabled":true},{"id":"default\/304","name":"Long arrow right","type":"icon","icon":"fa fa-long-arrow-right","width":1,"height":1,"enabled":true},{"id":"default\/305","name":"Long arrow up","type":"icon","icon":"fa fa-long-arrow-up","width":1,"height":1,"enabled":true},{"id":"default\/306","name":"Long arrow down","type":"icon","icon":"fa fa-long-arrow-down","width":1,"height":1,"enabled":true},{"id":"default\/171","name":"A forward","type":"icon","icon":"fa fa-share","width":1,"height":1,"enabled":true}]}]},{"id":"2","name":"Gallery","icon":"ico-gallery","enabled":true,"inactive":false,"groups":[{"name":"Galleries","width":12,"enabled":true,"items":[{"id":"default\/226","name":"Slideshow with captions","type":"render","icon":"","width":12,"height":5,"enabled":true},{"id":"default\/143","name":"Background","type":"render","icon":"","width":12,"height":4,"enabled":true},{"id":"default\/81","name":"Thumbnails","type":"render","icon":"","width":6,"height":3,"enabled":true},{"id":"default\/78","name":"Slideshow","type":"render","icon":"","width":6,"height":3,"enabled":true},{"id":"default\/80","name":"List","type":"render","icon":"","width":12,"height":5,"enabled":true},{"id":"default\/79","name":"Masonry","type":"render","icon":"","width":6,"height":6,"enabled":true}]}]},{"id":"3","name":"Media","icon":"ico-media","enabled":true,"inactive":false,"groups":[{"name":"Video players","width":12,"enabled":true,"items":[{"id":"default\/221","name":"Youtube","type":"render_and_text","icon":"","width":6,"height":5,"enabled":true},{"id":"default\/346","name":"Video","type":"render_and_text","icon":"fa fa-play-circle-o","width":6,"height":5,"enabled":true},{"id":"default\/349","name":"Instagram video","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/347","name":"Facebook video","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/212","name":"Vimeo","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/74","name":"Aparat","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true}]},{"name":"Audio players","width":12,"enabled":true,"items":[{"id":"default\/291","name":"Spotify player","type":"render_and_text","icon":"","width":6,"height":5,"enabled":true},{"id":"default\/130","name":"Music Player","type":"render_and_text","icon":"","width":6,"height":2,"enabled":true}]}]},{"id":"7","name":"Maps","icon":"fa fa-map-o","enabled":true,"inactive":false,"groups":[{"name":"Google Maps","width":12,"enabled":true,"items":[{"id":"default\/85","name":"GoogleMaps dark","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/84","name":"GoogleMaps original","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/87","name":"GoogleMaps light","type":"render","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/86","name":"GoogleMaps monochrome","type":"render","icon":"","width":4,"height":3,"enabled":true}]},{"name":"Maps","width":12,"enabled":true,"items":[{"id":"default\/8","name":"Bing","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/456","name":"OpenStreetMap","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true}]}]},{"name":"-"},{"id":"4","name":"Shape","icon":"fa fa-square-o","enabled":true,"inactive":false,"groups":[{"name":"Shapes","width":12,"enabled":true,"items":[{"id":"default\/193","name":"Square","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/156","name":"Rounded","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/110","name":"S1","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/140","name":"S2","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/141","name":"S3","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/142","name":"F1","type":"render","icon":"","width":12,"height":3,"enabled":true}]},{"name":"Horizontal lines","width":6,"enabled":true,"items":[{"id":"default\/99","name":"Solid blue","type":"render","icon":"","width":6,"height":1,"enabled":true},{"id":"default\/102","name":"Double blue","type":"render","icon":"","width":6,"height":1,"enabled":true},{"id":"default\/100","name":"Dashed blue","type":"render","icon":"","width":6,"height":1,"enabled":true},{"id":"default\/104","name":"Dotted black","type":"render","icon":"","width":6,"height":1,"enabled":true},{"id":"default\/179","name":"Star line","type":"render","icon":"fa fa-bell","width":6,"height":1,"enabled":true}]},{"name":"Vertical lines","width":6,"enabled":true,"items":[{"id":"default\/96","name":"Solid pink","type":"render","icon":"","width":1,"height":5,"enabled":true},{"id":"default\/247","name":"Double light blue","type":"render","icon":"","width":1,"height":5,"enabled":true},{"id":"default\/97","name":"Dashed pink","type":"render","icon":"","width":1,"height":5,"enabled":true},{"id":"default\/98","name":"Dotted pink","type":"render","icon":"","width":1,"height":5,"enabled":true},{"id":"default\/95","name":"Star line","type":"render","icon":"","width":1,"height":5,"enabled":true}]}]},{"id":"6","name":"Button","icon":"fa fa-share-square-o","enabled":true,"inactive":false,"groups":[{"name":"Standard buttons","width":12,"enabled":true,"items":[{"id":"default\/144","name":"S1","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/147","name":"S2","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/260","name":"S3","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/272","name":"S4","type":"render","icon":"","width":3,"height":2,"enabled":true}]},{"name":"Text buttons","width":12,"enabled":true,"items":[{"id":"default\/15","name":"Money back guarantee","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/19","name":"Get premium (green)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/28","name":"Just do it (custom shape)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/16","name":"Start now (pink)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/11","name":"Just do it (blue)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/18","name":"Get free (grey)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/62","name":"Start now (image background)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/21","name":"Just try (orange)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/14","name":"Online technical support","type":"render","icon":"","width":8,"height":2,"enabled":true},{"id":"default\/13","name":"Let's travel (orange)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/49","name":"Shop now (custom shape)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/17","name":"Buy now (green)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/20","name":"Latest news (white)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/12","name":"Just do it (violet)","type":"render","icon":"","width":4,"height":2,"enabled":true},{"id":"default\/321","name":"G1","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/325","name":"G2","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/326","name":"G3","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/327","name":"G4","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/328","name":"G5","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/329","name":"G6","type":"render","icon":"","width":2,"height":2,"enabled":true}]},{"name":"Icon buttons","width":12,"enabled":true,"items":[{"id":"default\/52","name":"Rounded mobile","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/56","name":"Rounded bookmark","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/48","name":"Rounded button star","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/35","name":"Camera icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/40","name":"World icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/31","name":"CreditCard icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/43","name":"Movie icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/26","name":"Envelope icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/50","name":"Rounded button location","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/29","name":"Mic icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/42","name":"House icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/37","name":"Down Icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/38","name":"Label icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/27","name":"CC icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/46","name":"Rounded button check","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/41","name":"Secure icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/57","name":"Rounded button time","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/25","name":"Thumbs down icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/36","name":"Location pin icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/24","name":"Cancel icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/51","name":"Rounded button lunch","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/53","name":"Rounded button desktop","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/55","name":"Rounded button share","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/45","name":"Rounded button love","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/30","name":"Mute icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/34","name":"Local phone icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/39","name":"Thumbs up icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/44","name":"Images icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/32","name":"Print icon","type":"render","icon":"","width":1,"height":1,"enabled":true},{"id":"default\/58","name":"Rounded button user","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/54","name":"Rounded button edit","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/33","name":"Time icon","type":"render","icon":"","width":1,"height":1,"enabled":true}]}]},{"id":"8","name":"Form","icon":"fa fa-list-alt","enabled":true,"inactive":false,"groups":[{"name":"Contacts","width":12,"enabled":true,"items":[{"id":"default\/75","name":"Form 1","type":"render","icon":"","width":12,"height":7,"enabled":true},{"id":"default\/77","name":"Form 2","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/76","name":"Form 3","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/286","name":"Form 4","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/287","name":"Form 5","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/432","name":"Form 6","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/436","name":"Form 7","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/451","name":"Form 8","type":"render","icon":"","width":6,"height":4,"enabled":true}]}]},{"id":"10","name":"Menu","icon":"fa fa-sitemap","enabled":true,"inactive":false,"groups":[{"name":"Horizontal","width":12,"enabled":true,"items":[{"id":"default\/113","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/119","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/120","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/117","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/124","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/121","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/116","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/123","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/126","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/122","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/127","name":"Menu","type":"render","icon":"","width":12,"height":2,"enabled":true}]},{"name":"Vertical","width":12,"enabled":true,"items":[{"id":"default\/115","name":"Menu","type":"render","icon":"","width":3,"height":6,"enabled":true},{"id":"default\/125","name":"Menu","type":"render","icon":"","width":3,"height":6,"enabled":true},{"id":"default\/114","name":"Menu","type":"render","icon":"","width":3,"height":6,"enabled":true},{"id":"default\/118","name":"Menu","type":"render","icon":"","width":3,"height":6,"enabled":true}]}]},{"id":"11","name":"Languages","icon":"fa fa-language","enabled":true,"inactive":false,"groups":[{"name":"Languages","width":12,"enabled":true,"items":[{"id":"default\/93","name":"Languages rectangle","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/94","name":"Languages rounded","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/92","name":"Languages dropdown","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/248","name":"Languages square","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/249","name":"Languages vertical","type":"render","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/429","name":"Languages codes horizontal","type":"render","icon":"","width":3,"height":2,"enabled":true},{"id":"default\/428","name":"Languages names horizontal","type":"render","icon":"","width":3,"height":2,"enabled":true}]},{"name":"Other widgets","width":12,"enabled":true,"items":[{"id":"default\/246","name":"All languages","type":"render","icon":"","width":12,"height":2,"enabled":true}]}]},{"name":"-"},{"id":"12","name":"Blocks","icon":"fa fa-object-group","enabled":true,"inactive":false,"groups":[{"name":"About us","width":12,"enabled":true,"items":[{"id":"default\/232","name":"About us 1","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/223","name":"About us 2","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/224","name":"About us 3","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/225","name":"About us 4","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/145","name":"About us 5","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Contacts","width":12,"enabled":true,"items":[{"id":"default\/233","name":"Contacts 1","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/234","name":"Contacts 2","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/230","name":"Contacts 4","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/229","name":"Contacts 6","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/284","name":"Contacts 8","type":"render","icon":"","width":12,"height":4,"enabled":true}]},{"name":"Media","width":12,"enabled":true,"items":[{"id":"default\/236","name":"Media 1","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/235","name":"Media 2","type":"render","icon":"","width":6,"height":6,"enabled":true}]},{"name":"Products","width":12,"enabled":true,"items":[{"id":"default\/239","name":"Products 1","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/238","name":"Products 2","type":"render","icon":"","width":6,"height":6,"enabled":true}]},{"name":"Teams","width":12,"enabled":true,"items":[{"id":"default\/231","name":"Teams 1","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/243","name":"Teams 2","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/241","name":"Teams 3","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/244","name":"Teams 4","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/242","name":"Teams 5","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/228","name":"Teams 6","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/285","name":"Teams 7","type":"render","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/308","name":"Teams 8","type":"render","icon":"","width":12,"height":8,"enabled":true}]},{"name":"Footer","width":12,"enabled":true,"items":[{"id":"default\/275","name":"Footer 1","type":"render","icon":"","width":12,"height":3,"enabled":true},{"id":"default\/277","name":"Footer 3","type":"render","icon":"","width":12,"height":3,"enabled":true},{"id":"default\/276","name":"Footer 2","type":"render","icon":"","width":12,"height":3,"enabled":true},{"id":"default\/282","name":"Footer 4","type":"render","icon":"","width":12,"height":3,"enabled":true}]},{"name":"Testimonials","width":12,"enabled":true,"items":[{"id":"default\/278","name":"Testimonials 1","type":"render","icon":"","width":12,"height":4,"enabled":true},{"id":"default\/279","name":"Testimonials 2","type":"render","icon":"","width":6,"height":3,"enabled":true},{"id":"default\/280","name":"Testimonials 3","type":"render","icon":"","width":6,"height":3,"enabled":true}]},{"name":"Services","width":12,"enabled":true,"items":[{"id":"default\/281","name":"Services1","type":"render","icon":"","width":12,"height":3,"enabled":true},{"id":"default\/283","name":"Services2","type":"render","icon":"","width":12,"height":3,"enabled":true}]},{"name":"Social","width":12,"enabled":true,"items":[{"id":"default\/227","name":"Social 1","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/341","name":"Social 2","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Welcome","width":12,"enabled":true,"items":[{"id":"default\/288","name":"Welcome 1","type":"render","icon":"","width":12,"height":8,"enabled":true},{"id":"default\/289","name":"Welcome 2","type":"render","icon":"","width":12,"height":8,"enabled":true},{"id":"default\/290","name":"Welcome 3","type":"render","icon":"","width":12,"height":8,"enabled":true}]},{"name":"Blog","width":12,"enabled":true,"items":[{"id":"default\/295","name":"Blog 1","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/294","name":"Blog 2","type":"render","icon":"","width":6,"height":3,"enabled":true},{"id":"default\/296","name":"Blog 3","type":"render","icon":"","width":3,"height":3,"enabled":true},{"id":"default\/297","name":"Blog 4","type":"render","icon":"","width":3,"height":3,"enabled":true}]},{"name":"Pricing","width":12,"enabled":true,"items":[{"id":"default\/298","name":"Prices 1","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Subscribe","width":12,"enabled":true,"items":[{"id":"default\/334","name":"Subscribe 1","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Video","width":12,"enabled":true,"items":[{"id":"default\/342","name":"Video 1","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Features","width":12,"enabled":true,"items":[{"id":"default\/335","name":"Features 1","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/336","name":"Features 2","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/337","name":"Features 3","type":"render","icon":"","width":12,"height":6,"enabled":true},{"id":"default\/339","name":"Features 4","type":"render","icon":"","width":12,"height":6,"enabled":true}]},{"name":"Page not found","width":12,"enabled":true,"items":[{"id":"default\/442","name":"Page not found","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/443","name":"Page not found 2","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/447","name":"Page not found 3","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/449","name":"Page not found 4","type":"render","icon":"","width":12,"height":3,"enabled":true}]},{"name":"Maintenance Page","width":12,"enabled":true,"items":[{"id":"default\/444","name":"Maintenance Page","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/445","name":"Maintenance Page 2","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/446","name":"Maintenance Page 3","type":"render","icon":"","width":12,"height":2,"enabled":true},{"id":"default\/448","name":"Maintenance Page 4","type":"render","icon":"","width":12,"height":2,"enabled":true}]}]},{"name":"-"},{"id":"16","name":"Commerce","icon":"ico-commerce","enabled":true,"inactive":false,"groups":[{"name":"Commerce","width":12,"enabled":true,"items":[{"id":"default\/197","name":"Store","type":"render","icon":"fa fa-shopping-cart","width":12,"height":6,"enabled":true},{"id":"default\/198","name":"StoreCart font awesome","type":"render","icon":"fa fa-shopping-basket","width":3,"height":1,"enabled":true},{"id":"default\/258","name":"StoreCart black outline","type":"render","icon":"","width":3,"height":1,"enabled":true},{"id":"default\/261","name":"StoreCart orange bag","type":"render","icon":"","width":3,"height":1,"enabled":true},{"id":"default\/262","name":"StoreCart violet","type":"render","icon":"","width":3,"height":1,"enabled":true}]},{"name":"Payment Gateways","width":12,"enabled":true,"items":[{"id":"default\/199","name":"Stripe","type":"icon_and_text","icon":"ico-pl-stripe","width":2,"height":2,"enabled":true},{"id":"default\/195","name":"Skrill","type":"icon_and_text","icon":"ico-pl-skrill","width":2,"height":2,"enabled":true},{"id":"default\/138","name":"PayU","type":"icon_and_text","icon":"ico-pl-payu","width":2,"height":2,"enabled":true},{"id":"default\/139","name":"PayUmoney","type":"icon_and_text","icon":"ico-pl-payu","width":2,"height":2,"enabled":true},{"id":"default\/136","name":"Payme","type":"icon_and_text","icon":"ico-pl-payme","width":2,"height":2,"enabled":true},{"id":"default\/135","name":"PayFast","type":"icon_and_text","icon":"ico-pl-payfast","width":2,"height":2,"enabled":true},{"id":"default\/63","name":"PayPal","type":"icon_and_text","icon":"fa fa-paypal","width":2,"height":2,"enabled":true},{"id":"default\/1","name":"2checkout","type":"icon_and_text","icon":"ico-pl-2checkout","width":2,"height":2,"enabled":true},{"id":"default\/151","name":"Ecwid","type":"icon_and_text","icon":"ico-pl-ecwid","width":2,"height":2,"enabled":true}]},{"name":"Quick Payment Buttons (without shopping cart)","width":12,"enabled":true,"items":[{"id":"default\/458","name":"Coinpayments","type":"render_and_text","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/453","name":"M-pesa","type":"render_and_text","icon":"ico-pl-mpesa","width":2,"height":2,"enabled":true},{"id":"default\/461","name":"Pagopar","type":"render_and_text","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/462","name":"Aamarpay","type":"render_and_text","icon":"","width":2,"height":2,"enabled":true},{"id":"default\/1","name":"2checkout","type":"render_and_text","icon":"ico-pl-2checkout","width":2,"height":2,"enabled":true},{"id":"default\/6","name":"Baokim","type":"render_and_text","icon":"ico-pl-baokim","width":2,"height":2,"enabled":true},{"id":"default\/7","name":"Bepaid","type":"render_and_text","icon":"ico-pl-bepaid","width":2,"height":2,"enabled":true},{"id":"default\/135","name":"PayFast","type":"render_and_text","icon":"ico-pl-payfast","width":2,"height":2,"enabled":true},{"id":"default\/63","name":"PayPal","type":"render_and_text","icon":"fa fa-paypal","width":2,"height":2,"enabled":true},{"id":"default\/150","name":"Robokassa","type":"render_and_text","icon":"ico-pl-robokassa","width":2,"height":2,"enabled":true},{"id":"default\/10","name":"Braintree","type":"render_and_text","icon":"ico-pl-braintree","width":2,"height":2,"enabled":true}]}]},{"name":"-"},{"id":"15","name":"Blog","icon":"fa fa-pencil-square-o","enabled":true,"inactive":false,"groups":[{"name":"Blog","width":12,"enabled":true,"items":[{"id":"default\/68","name":"Blog Thumbnails","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/299","name":"Blog List","type":"render","icon":"","width":6,"height":6,"enabled":true},{"id":"default\/300","name":"Blog One-three","type":"render","icon":"","width":12,"height":6,"enabled":true}]}]},{"name":"-"},{"id":"13","name":"Social","icon":"ico-social","enabled":true,"inactive":false,"groups":[{"name":"Social","width":12,"enabled":true,"items":[{"id":"default\/72","name":"Facebook Like","type":"render_and_text","icon":"","width":2,"height":1,"enabled":true},{"id":"default\/73","name":"Facebook comment","type":"render_and_text","icon":"","width":6,"height":4,"enabled":true},{"id":"default\/71","name":"Facebook Fans","type":"render_and_text","icon":"","width":4,"height":4,"enabled":true},{"id":"default\/148","name":"Pinterest","type":"render_and_text","icon":"","width":2,"height":1,"enabled":true},{"id":"default\/350","name":"Instagram post","type":"render_and_text","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/420","name":"Telegram Widget","type":"render_and_text","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/9","name":"Bookmarks Share","type":"render_and_text","icon":"","width":2,"height":1,"enabled":true},{"id":"default\/437","name":"Vkontakte comments","type":"render_and_text","icon":"","width":4,"height":3,"enabled":true},{"id":"default\/457","name":"TikTok","type":"render_and_text","icon":"","width":2,"height":6,"enabled":true},{"id":"default\/146","name":"X","type":"render_and_text","icon":"fa fa-moon-o","width":4,"height":3,"enabled":true}]}]},{"id":"14","name":"Advanced","icon":"ico-advanced","enabled":true,"inactive":false,"groups":[{"name":"Advanced","width":12,"enabled":true,"items":[{"id":"default\/88","name":"Google calendar v1","type":"render_and_text","icon":"","width":6,"height":5,"enabled":true},{"id":"default\/83","name":"Google AdSense","type":"icon_and_text","icon":"ico-pl-adsense","width":2,"height":2,"enabled":true},{"id":"default\/89","name":"Google calendar v2","type":"render_and_text","icon":"","width":6,"height":5,"enabled":true},{"id":"default\/5","name":"Banner","type":"icon_and_text","icon":"fa fa-square","width":2,"height":2,"enabled":true},{"id":"default\/200","name":"Table","type":"render_and_text","icon":"","width":12,"height":4,"enabled":true},{"id":"default\/65","name":"Custom Html","type":"icon_and_text","icon":"fa fa-file-code-o","width":2,"height":2,"enabled":true},{"id":"default\/293","name":"Countdown","type":"icon_and_text","icon":"fa fa-clock-o","width":2,"height":2,"enabled":true},{"id":"default\/345","name":"Count Up","type":"icon_and_text","icon":"fa fa-angle-double-up","width":2,"height":2,"enabled":true},{"id":"default\/421","name":"Slider","type":"render_and_text","icon":"","width":4,"height":4,"enabled":true},{"id":"default\/422","name":"Tabs","type":"render_and_text","icon":"","width":4,"height":4,"enabled":true},{"id":"default\/424","name":"Bookingmood","type":"render_and_text","icon":"ico-pl-bookingmood","width":12,"height":4,"enabled":true},{"id":"default\/460","name":"Booka.place","type":"render_and_text","icon":"","width":12,"height":4,"enabled":true},{"id":"default\/423","name":"Accordion","type":"render_and_text","icon":"","width":4,"height":4,"enabled":true},{"id":"default\/459","name":"Scroll to top","type":"icon_and_text","icon":"fa fa-arrow-circle-o-up","width":2,"height":2,"enabled":true}]},{"name":"Chat","width":12,"enabled":true,"items":[{"id":"default\/47","name":"Getbutton","type":"icon_and_text","icon":"ico-pl-getbutton","width":2,"height":2,"enabled":true},{"id":"default\/201","name":"Tawk.to","type":"icon_and_text","icon":"ico-pl-tawkto","width":2,"height":2,"enabled":true},{"id":"default\/133","name":"Olark","type":"icon_and_text","icon":"ico-pl-olark","width":2,"height":2,"enabled":true},{"id":"default\/222","name":"Zendesk","type":"icon_and_text","icon":"ico-pl-zopim","width":2,"height":2,"enabled":true},{"id":"default\/358","name":"Smartarget Whatsapp","type":"icon_and_text","icon":"ico-pl-smartarget","width":2,"height":2,"enabled":true}]}]}]
}
